{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBO,SAAS,mBAAmB,QAAQ,cAAc,OAAO,YAAY;AACxE,QAAM,SAAS;AAAA,IACX,OAAO;AAAA,IACP,WAAW;AAAA,IACX,OAAO;AAAA,IACP,SAAS;AAAA,IACT,gBAAgB;AAAA;AAAA;AAAA,IAGhB,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,uBAAuB;AAAA,EAC3B;AACM;AAAA;AAAA;AAAA,IAGL,OAAO,WAAW,cAAc,WAAW,SAAS,MAAM,KACvD,OAAO,WAAW,sBAAsB,MAAM;AAAA;AAClD,MAAI,CAAC,IAAI;AACC,cAAI,MAAM,gCAAgC;AAAA;AAEpD,MAAI,YAAY;AAEL,eAAI,MAAM,IAAI;AAAA,MACjB,IAAI,QAAQ,MAAM;AACR,sBAAQ,OAAO,IAAI;AACrB,mBAAO,UAAU,YAAY;AAClB,+BAAU,OAAO,IAAI,CAAC;AAC1B,uBAAM,KAAK,MAAM;AAAA;AAErB;AAAA;AAAA,IACX,CACH;AAAA;AAEE;AACX;AAagB,sBAAa,WAAW,SAAS;AAC7C,MAAI,wBAA8B;AAC9B;AACJ,MAAI,CAAC,WAAW;AACN,cAAI,MAAM,WAAW,kBAAkB;AAAA;AAErD;AAcgB,4BAAmB,OAAO,OAAO,GAAG;AAChD,QAAM,KAAK,KAAK,MAAM,UAAU,EAAE;AAClC,QAAM,KAAK,KAAK,MAAO,UAAU,KAAM,GAAI;AAC3C,QAAM,KAAK,KAAK,MAAO,UAAU,IAAK,GAAI;AAC1C,QAAM,KAAK,KAAK,MAAM,QAAQ,GAAI;AAClC,QAAM,KAAK,KAAK,MAAM,UAAU,EAAE;AAClC,QAAM,KAAK,KAAK,MAAO,UAAU,KAAM,GAAI;AAC3C,QAAM,KAAK,KAAK,MAAO,UAAU,IAAK,GAAI;AAC1C,QAAM,KAAK,KAAK,MAAM,QAAQ,GAAI;AAClC,QAAM,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,IAAI,EAAE;AAC1C,QAAM,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,IAAI,EAAE;AAC1C,QAAM,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,IAAI,EAAE;AAC1C,QAAM,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,IAAI,EAAE;AAC1C,UAAS,KAAK,KAAO,KAAK,KAAO,KAAK,IAAK,OAAO;AACtD;AAcgB,yBAAgB,MAAM,OAAO;AACzC,QAAM,IAAI,SAAS;AACb,YAAK,SAAS,KAAM;AACpB,YAAK,SAAS,IAAK;AACzB,QAAM,IAAI,KAAK,OAAO,OAAO,OAAQ,KAAK;AAC1C,UAAS,KAAK,KAAO,KAAK,KAAO,KAAK,IAAK,OAAO;AACtD;AACA,IAAI,iBAAiB;AAKd,SAAS,mBAAmB,MAAM;AACrC,mBAAiB,SAAS;AAC9B;AA0BO,SAAS,6BAA6B,MAAM,OAAO,gBAAgB,OAAO;AACvE,oBAAa,OAAO,OAAQ,MAAO;AACnC,mBAAW,iBAAiB,WAAW;AAC7C,QAAM,IAAI,KAAK,OAAO,SAAS,MAAM,QAAQ;AAC7C,QAAM,IAAI,KAAK,OAAQ,SAAS,KAAM,OAAQ,QAAQ;AACtD,QAAM,IAAI,KAAK,OAAQ,SAAS,IAAK,OAAQ,QAAQ;AACrD,QAAM,IAAI,KAAK,MAAM,WAAW,GAAG;AACnC,MAAI,eAAe;AACf,YAAS,KAAK,KAAO,KAAK,KAAO,KAAK,IAAK,OAAO;AAAA;AAEtD,UAAS,KAAK,KAAO,KAAK,KAAO,KAAK,IAAK,OAAO;AACtD;AAQgB,gBAAO,KAAK,MAAM;AAC9B,SAAO,OAAO,UAAU,eAAe,KAAK,KAAK,IAAI;AACzD;AAyBO,SAAS,0BAA0B;AACtC,SAAOA,8BAAmB;AAC9B;AAIA,IAAI,SAAS;AACN,SAAS,WAAW;AAChB;AACX;AC5LO,MAAM,aAAa;AAAA,EAAnB;AACH,0CAAiB,CAAE;AAAA;AAAA,EACnB,GAAG,OAAO,UAAU;AAChB,QAAI,YAAY,KAAK,eAAe,KAAK;AACzC,QAAI,CAAC,WAAW;AACZ,kBAAY,CAAE;AAAA,IAC1B;AACQ,cAAU,KAAK,QAAQ;AACvB,SAAK,eAAe,KAAK,IAAI;AAAA,EACrC;AAAA,EACI,IAAI,OAAO,UAAU;AACjB,UAAM,YAAY,KAAK,eAAe,KAAK;AAC3C,QAAI,CAAC,WAAW;AACZ;AAAA,IACZ;AACQ,QAAI,CAAC,UAAU;AACX,aAAO,KAAK,eAAe,KAAK;AAChC;AAAA,IACZ;AACQ,UAAM,QAAQ,UAAU,QAAQ,QAAQ;AACxC,QAAI,SAAS,GAAG;AACZ,gBAAU,OAAO,OAAO,CAAC;AAAA,IACrC;AAAA,EACA;AAAA,EACI,KAAK,OAAO,UAAU;AAClB,UAAM,eAAe,CAAC,QAAQ,SAAS;AACnC,WAAK,IAAI,OAAO,YAAY;AAC5B,eAAS,QAAQ,IAAI;AAAA,IACxB;AACD,SAAK,GAAG,OAAO,YAAY;AAAA,EACnC;AAAA,EACI,KAAK,OAAO,MAAM;AACd,UAAM,YAAY,KAAK,eAAe,KAAK;AAC3C,QAAI,CAAC,WAAW;AACZ;AAAA,IACZ;AACQ,KAAC,GAAG,SAAS,EAAE,QAAQ,CAAC,aAAa;AACjC,eAAS,MAAM,IAAI;AAAA,IAC/B,CAAS;AAAA,EACT;AAAA,EACI,qBAAqB;AACjB,SAAK,iBAAiB,CAAE;AAAA,EAChC;AACA;AC9CO,MAAM,iBAAiB;AACvB,MAAM,8BAA8B,CAAC,SAAS;AACjD,QAAM,IAAI,SAAS;AACnB,QAAM,IAAK,SAAS,KAAM;AAC1B,QAAM,IAAK,SAAS,IAAK;AACzB,QAAM,IAAI,OAAO;AACjB,SAAO,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,GAAG;AAC9C;AACO,MAAM,oBAAoB,CAAC,SAAS;AACvC,QAAM,IAAI,SAAS;AACnB,QAAM,IAAK,SAAS,KAAM;AAC1B,QAAM,IAAK,SAAS,IAAK;AACzB,QAAM,IAAI,OAAO;AACjB,SAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AACtB;AAoBO,SAAS,4BAA4B,MAAM;AAC9C,UAAQ,OAAO,OAAQ;AAC3B;AAOO,SAAS,cAAc,OAAO;AACjC,QAAM,IAAI,KAAK,MAAM,MAAM,CAAC,IAAI,GAAK;AACrC,QAAM,IAAI,KAAK,MAAM,MAAM,CAAC,IAAI,GAAK;AACrC,QAAM,IAAI,KAAK,MAAM,MAAM,CAAC,IAAI,GAAK;AACrC,QAAM,IAAI,KAAK,MAAM,MAAM,CAAC,IAAI,GAAK;AACrC,SAAO,QAAQ,UAAC,KAAI,UAAC,KAAI,UAAC,KAAI,SAAE,QAAQ,CAAC,GAAC;AAC9C;AACO,SAAS,YAAY,IAAI,IAAI,IAAI,IAAI,KAAK;AAC7C,MAAI,KAAK;AACL,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,WAAO;AAAA,EACf;AACI,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACH;AACL;AAQO,SAAS,cAAc,GAAG,GAAG;AAChC,SAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE;AACjE;AACO,SAAS,mBAAmB,OAAO,KAAK;AAC3C,MAAI,KAAK;AACL,QAAI,IAAI,MAAM;AACd,QAAI,IAAI,MAAM;AACd,QAAI,QAAQ,MAAM,KAAK,MAAM;AAC7B,QAAI,SAAS,MAAM,KAAK,MAAM;AAC9B,WAAO;AAAA,EACf;AACI,SAAO;AAAA,IACH,GAAG,MAAM;AAAA,IACT,GAAG,MAAM;AAAA,IACT,OAAO,MAAM,KAAK,MAAM;AAAA,IACxB,QAAQ,MAAM,KAAK,MAAM;AAAA,EAC5B;AACL;AACO,SAAS,cAAc,GAAG,GAAG,KAAK;AACrC,QAAM,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,CAAC;AAC3B,QAAM,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,CAAC;AAC3B,QAAM,QAAQ,KAAK,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,IAAI;AACvD,QAAM,SAAS,KAAK,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,IAAI;AAC1D,MAAI,QAAQ,KAAK,SAAS,GAAG;AACzB,QAAI,KAAK;AACL,UAAI,IAAI;AACR,UAAI,IAAI;AACR,UAAI,QAAQ;AACZ,UAAI,SAAS;AACb,aAAO;AAAA,IACnB;AACQ,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACH;AAAA,EACT;AACI,MAAI,KAAK;AACL,QAAI,IAAI;AACR,QAAI,IAAI;AACR,QAAI,QAAQ;AACZ,QAAI,SAAS;AACb,WAAO;AAAA,EACf;AACI,SAAO;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,EACX;AACL;AACO,SAAS,SAAS,GAAG,KAAK;AAC7B,MAAI,KAAK;AACL,QAAI,IAAI,EAAE;AACV,QAAI,IAAI,EAAE;AACV,QAAI,QAAQ,EAAE;AACd,QAAI,SAAS,EAAE;AACf,WAAO;AAAA,EACf;AACI,SAAO;AAAA,IACH,GAAG,EAAE;AAAA,IACL,GAAG,EAAE;AAAA,IACL,OAAO,EAAE;AAAA,IACT,QAAQ,EAAE;AAAA,EACb;AACL;AACO,SAAS,YAAY,GAAG,GAAG;AAC9B,MAAI,MAAM,GAAG;AACT,WAAO;AAAA,EACf;AACI,MAAI,MAAM,QAAQ,MAAM,MAAM;AAC1B,WAAO;AAAA,EACf;AACI,SAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,WAAW,EAAE;AAChF;AACO,SAAS,iBAAiB,QAAQ,QAAQ;AAC7C,SAAQ,OAAO,MAAM,OAAO,MACxB,OAAO,MAAM,OAAO,MACpB,OAAO,MAAM,OAAO,MACpB,OAAO,MAAM,OAAO;AAC5B;AACO,SAAS,oBAAoB,QAAQ,QAAQ;AAChD,SAAQ,OAAO,KAAK,OAAO,MACvB,OAAO,KAAK,OAAO,MACnB,OAAO,KAAK,OAAO,MACnB,OAAO,KAAK,OAAO;AAC3B;AACO,SAAS,gBAAgB,OAAO;AACnC,SAAO,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM;AACnD;AAWO,SAAS,oBAAoB,aAAa,cAAc;AAC3D,SAAO,YAAY,YAAY,KAAK,aAAa,CAAC,GAAG,YAAY,KAAK,aAAa,CAAC,GAAG,YAAY,KAAK,aAAa,CAAC,GAAG,YAAY,KAAK,aAAa,CAAC,CAAC;AAC7J;AACO,SAAS,qBAAqB,KAAK;AAEtC,MAAI,KAAK,SAAS,aAAa,WAAW,CAAC,eAAe,KAAK,GAAG,GAAG;AACjE,UAAM,OAAO,KAAK,SAAS,SAAS,MAAM,GAAG;AAC7C,SAAK,IAAK;AACV,UAAMC,YAAW,KAAK,KAAK,GAAG;AAC9B,UAAM,UAAU,KAAK,SAAS,WAAW,OAAOA;AAEhD,QAAI,IAAI,OAAO,CAAC,MAAM,KAAK;AACvB,YAAM,IAAI,MAAM,CAAC;AAAA,IAC7B;AAEQ,QAAI,IAAI,OAAO,CAAC,MAAM,KAAK;AACvB,YAAM,IAAI,MAAM,CAAC;AAAA,IAC7B;AACQ,WAAO,UAAU,MAAM;AAAA,EAC/B;AACI,QAAM,cAAc,IAAI,IAAI,KAAK,KAAK,SAAS,IAAI;AACnD,SAAO,YAAY;AACvB;ACpLO,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAuBlB,cAAc;AAtBd;AACA;AACA;AACA;AACA;AACA;AACA,qCAAY;AAUZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOI,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,WAAW;AAAA,EACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,WAAW,OAAO;AACd,WAAO;AAAA,EACf;AAAA,EACI,OAAO,SAAS,GAAG,GAAG,KAAK;AACvB,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AAClC,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AAClC,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AACzC,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AAClC,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AAClC,UAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AACzC,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,OAAO,SAAS,KAAK;AACjB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,OAAO,UAAU,GAAG,GAAG,KAAK;AACxB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,OAAO,MAAM,IAAI,IAAI,KAAK;AACtB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,OAAO,OAAO,OAAO,KAAK;AACtB,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK;AACT,QAAI,KAAK,CAAC;AACV,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,OAAO,KAAK,KAAK,KAAK;AAClB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,SAAU;AAAA,IAChC;AACQ,QAAI,KAAK,IAAI;AACb,QAAI,KAAK,IAAI;AACb,QAAI,KAAK,IAAI;AACb,QAAI,KAAK,IAAI;AACb,QAAI,KAAK,IAAI;AACb,QAAI,KAAK,IAAI;AACb,QAAI,WAAW;AACf,WAAO;AAAA,EACf;AAAA,EACI,UAAU,GAAG,GAAG;AACZ,SAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK;AAC3C,SAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK;AAC3C,SAAK,WAAW;AAChB,WAAO;AAAA,EACf;AAAA,EACI,MAAM,IAAI,IAAI;AACV,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,KAAK,KAAK,KAAK;AACpB,SAAK,WAAW;AAChB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,OAAO;AACV,QAAI,UAAU,KAAK,EAAG,QAAQ,KAAK,KAAM,IAAI;AACzC,aAAO;AAAA,IACnB;AACQ,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,UAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK;AACrC,UAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK;AACrC,UAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK;AACrC,UAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK;AACrC,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,WAAW;AAChB,WAAO;AAAA,EACf;AAAA,EACI,SAAS,OAAO;AACZ,WAAO,SAAS,SAAS,MAAM,OAAO,IAAI;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,cAAc;AACV,QAAI,CAAC,KAAK,WAAW;AACjB,WAAK,YAAY,IAAI,aAAa,CAAC;AAAA,IAC/C;AACQ,QAAI,KAAK,UAAU;AACf,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI;AACpB,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI;AACpB,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI,KAAK;AACzB,WAAK,UAAU,CAAC,IAAI;AACpB,WAAK,WAAW;AAAA,IAC5B;AACQ,WAAO,KAAK;AAAA,EACpB;AACA;AACA,MAAM,aAAa,IAAI,SAAU;ACpOjC,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACZ,MAAM,MAAM;AACL,MAAM,aAAa;AAAA,EAEtB,YAAY,SAAS;AADrB;AAEI,SAAK,OAAO,IAAI,aAAa,CAAC;AAC9B,QAAI,SAAS;AACT,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAC5B,WAAK,KAAK,GAAG,IAAI,QAAQ,GAAG;AAAA,IACxC;AAAA,EACA;AAAA,EACI,OAAO,UAAU,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK;AAClD,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,aAAc;AAAA,IACpC;AACQ,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,QAAI,KAAK,GAAG,IAAI;AAChB,WAAO;AAAA,EACf;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK,KAAK,GAAG;AAAA,EAC5B;AACA;ACrBO,MAAM,eAAe,CAAC,UAAU;AACnC,SAAO,SAAS,EAAE,QAAS,QAAQ;AACvC;AACA,MAAM,kBAAkB,CAAC,GAAG,GAAG,GAAG,MAAM;AACpC,QAAM,KAAK,IAAM;AACjB,QAAM,KAAK,KAAO,IAAI,KAAK;AAC3B,QAAM,KAAK,IAAM,KAAK;AACtB,QAAM,KAAK,IAAM;AACjB,QAAM,KAAK,KAAO,IAAI,KAAK;AAC3B,QAAM,KAAK,IAAM,KAAK;AACtB,SAAO,SAAU,MAAM;AACnB,QAAI,QAAQ,GAAK;AACb,aAAO;AAAA,IACnB;AACQ,QAAI,QAAQ,GAAG;AACX,aAAO;AAAA,IACnB;AACQ,QAAI,IAAI,KAAK,KAAK,MAAM;AACxB,aAAS,KAAK,GAAG,KAAK,IAAI,MAAM;AAC5B,YAAM,KAAK,KAAK,IAAI,KAAK,MAAM;AAC/B,WAAK,OAAO;AACZ,UAAI,KAAK,SAAS,KAAK,MAAM;AACzB,eAAO,KAAK,KAAK,IAAI,KAAK,MAAM;AAAA,MAChD;AAEY,aAAO,KAAK,KAAK,IAAI,MAAM,IAAI,MAAM;AACrC,UAAI,OAAO,SAAS,OAAO,OAAO;AAE9B;AAAA,MAChB;AACY,WAAK,KAAK;AAAA,IACtB;AAEQ,QAAI,OAAO;AACX,QAAI,OAAO;AACX,aAAS,KAAK,GAAG,KAAK,IAAI,MAAM;AAC5B,UAAI,OAAO,OAAO;AAClB,YAAM,KAAK,KAAK,IAAI,KAAK,MAAM;AAC/B,WAAK,OAAO;AACZ,UAAI,KAAK,SAAS,KAAK,MAAM;AAEzB,eAAO,KAAK,KAAK,IAAI,KAAK,MAAM;AAAA,MAChD;AACY,UAAI,KAAK,GAAG;AACR,eAAO;AAAA,MACvB,OACiB;AACD,eAAO;AAAA,MACvB;AAAA,IACA;AAAA,EACK;AACL;AACA,MAAM,gBAAgB,CAAE;AACxB,MAAM,eAAe;AAAA,EACjB,MAAM,CAAC,MAAM,KAAK,MAAM,CAAG;AAAA,EAC3B,WAAW,CAAC,MAAM,GAAG,GAAK,CAAG;AAAA,EAC7B,YAAY,CAAC,GAAG,GAAG,MAAM,CAAG;AAAA,EAC5B,eAAe,CAAC,MAAM,GAAG,MAAM,CAAG;AAAA,EAClC,gBAAgB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EACjC,iBAAiB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EAClC,oBAAoB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EACrC,iBAAiB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EAClC,kBAAkB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EACnC,qBAAqB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EACtC,gBAAgB,CAAC,MAAM,GAAG,GAAG,IAAI;AAAA,EACjC,iBAAiB,CAAC,GAAG,MAAM,MAAM,CAAC;AAAA,EAClC,oBAAoB,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EACrC,gBAAgB,CAAC,MAAM,GAAG,MAAM,KAAK;AAAA,EACrC,iBAAiB,CAAC,MAAM,MAAM,MAAM,CAAC;AAAA,EACrC,oBAAoB,CAAC,MAAM,MAAM,MAAM,GAAG;AAC9C;AACA,MAAM,gBAAgB,CAAC,MAAM;AAC7B,MAAM,mBAAmB,CAAC,QAAQ;AAE9B,QAAM,QAAQ;AACd,QAAM,QAAQ,IAAI,MAAM,KAAK;AAC7B,MAAI,OAAO;AACP,UAAM,CAAC,MAAM,MAAM,MAAM,IAAI,IAAI;AACjC,UAAM,IAAI,WAAW,QAAQ,MAAM;AACnC,UAAM,IAAI,WAAW,QAAQ,GAAG;AAChC,UAAM,IAAI,WAAW,QAAQ,GAAG;AAChC,UAAM,IAAI,WAAW,QAAQ,GAAG;AAChC,UAAM,SAAS,gBAAgB,GAAG,GAAG,GAAG,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,WAAO;AAAA,EACf;AAEI,UAAQ,KAAK,kCAAkC,GAAG;AAClD,SAAO;AACX;AACO,MAAM,oBAAoB,CAAC,QAAQ;AACtC,MAAI,QAAQ,UAAU;AAClB,WAAO;AAAA,EACf;AACI,MAAI,cAAc,GAAG,MAAM,QAAW;AAClC,WAAO,cAAc,GAAG,KAAK;AAAA,EACrC;AACI,MAAI,QAAQ,cAAc;AACtB,WAAO,MAAM;AACT,aAAO;AAAA,IACV;AAAA,EACT;AACI,MAAI,QAAQ,YAAY;AACpB,WAAO,CAAC,SAAS;AACb,aAAO,SAAS,IAAI,IAAI;AAAA,IAC3B;AAAA,EACT;AACI,QAAM,SAAS,aAAa,GAAG;AAC/B,MAAI,WAAW,QAAW;AACtB,UAAM,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI;AAIrB,UAAM,SAAS,gBAAgB,GAAG,GAAG,GAAG,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,WAAO;AAAA,EACf;AACI,MAAI,IAAI,WAAW,cAAc,GAAG;AAChC,WAAO,iBAAiB,GAAG;AAAA,EACnC;AACI,UAAQ,KAAK,8BAA8B,GAAG;AAC9C,SAAO;AACX;AAOO,SAASC,YAAU,OAAO;AAC7B,UAAQ,QAAQ,OAAO,MAAM,QAAQ,CAAC;AAC1C;ACrJO,MAAM,sBAAsB,aAAa;AAAA,EAU5C,YAAY,MAAM,OAAO,UAAU;;AAC/B,UAAO;AAVX;AACA;AACA;AACA,oCAAW;AACX,oCAAW;AACX,iCAAQ;AACR;AACA,yCAAgB,CAAE;AAClB;AAGI,SAAK,OAAO;AACZ,SAAK,QAAQ;AACb,eAAWC,QAAO,OAAO;AACrB,UAAIA,SAAQ,eAAe;AACvB,YAAI,KAAK,cAAc,OAAO,MAAM,QAAW;AAC3C,eAAK,cAAc,OAAO,IAAI,CAAE;AAAA,QACpD;AACgB,aAAK,cAAc,OAAO,EAAEA,IAAG,IAAI;AAAA,UAC/B,OAAO,KAAKA,IAAG,KAAK;AAAA,UACpB,QAAQ,MAAMA,IAAG;AAAA,QACpB;AAAA,MACjB,WACqB,KAAK,OAAO,SAAS,iBAAiB;AAC3C,aAAK,cAAc,aAAa,IAAI,CAAE;AACtC,mBAAWA,QAAO,MAAM,aAAa;AACjC,eAAK,cAAc,aAAa,EAAEA,IAAG,IAAI;AAAA,YACrC,OAAO,KAAK,OAAO,MAAMA,IAAG;AAAA,YAC5B,QAAQ,MAAM,YAAYA,IAAG;AAAA,UAChC;AAAA,QACrB;AAAA,MACA,OACiB;AACD,cAAM,iBAAiB,OAAO,KAAK,MAAM,WAAW;AACpD,cAAM,WAAW,eAAe;AAChC,aAAK,mBAAmB,CAAE;AAC1B,iBAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AAC/B,gBAAM,aAAa,eAAe,CAAC;AACnC,gBAAMC,UAAS,MAAM,YAAY,UAAU;AAC3C,eAAK,iBAAiB,UAAU,IAAI,CAAE;AACtC,gBAAM,cAAc,OAAO,QAAQA,OAAM;AACzC,gBAAM,UAAU,YAAY;AAC5B,mBAAS,IAAI,GAAG,IAAI,SAAS,KAAK;AAC9B,kBAAM,CAACD,MAAK,KAAK,IAAI,YAAY,CAAC;AAClC,iBAAK,iBAAiB,UAAU,EAAEA,IAAG,IAAI;AAAA,cACrC,OAAO,KAAK,OAAO,MAAM,UAAU,EAAEA,IAAG;AAAA,cACxC,QAAQ;AAAA,YACX;AAAA,UACzB;AAAA,QACA;AAAA,MACA;AAAA,IACA;AACQ,UAAM,SAAS,SAAS,UAAU;AAClC,UAAME,UAAQC,MAAA,SAAS,UAAT,OAAAA,MAAkB;AAChC,SAAK,WAAW;AAAA,MACZ,WAAUC,MAAA,SAAS,aAAT,OAAAA,MAAqB;AAAA,MAC/B,OAAAF;AAAA,MACA;AAAA,MACA,OAAMG,MAAA,SAAS,SAAT,OAAAA,MAAiB;AAAA,MACvB,SAAQ,cAAS,WAAT,YAAmB;AAAA,MAC3B,cAAa,cAAS,gBAAT,YAAwB;AAAA,MACrC,aAAY,cAAS,eAAT,YAAuB;AAAA,IACtC;AACD,SAAK,iBAAiB,kBAAkB,MAAM;AAC9C,SAAK,WAAWH;AAChB,SAAK,QAAQA;AAAA,EACrB;AAAA,EACI,QAAQ;AACJ,SAAK,WAAW;AAChB,SAAK,WAAW,KAAK,SAAS,SAAS;AACvC,SAAK,OAAO,CAAC;AAAA,EACrB;AAAA,EACI,cAAc,QAAQ,UAAU;AAC5B,UAAM,UAAU,OAAO,QAAQ,QAAQ;AACvC,UAAM,UAAU,QAAQ;AACxB,aAAS,IAAI,GAAG,IAAI,SAAS,KAAK;AAC9B,YAAM,CAACF,MAAK,KAAK,IAAI,QAAQ,CAAC;AAC9B,aAAOA,IAAG,IAAI,MAAM;AAAA,IAChC;AAAA,EACA;AAAA,EACI,UAAU;AACN,SAAK,MAAO;AACZ,QAAI,KAAK,cAAc,OAAO,MAAM,QAAW;AAC3C,WAAK,cAAc,KAAK,MAAM,KAAK,cAAc,OAAO,CAAC;AAAA,IACrE;AACQ,QAAI,KAAK,cAAc,aAAa,MAAM,QAAW;AACjD,WAAK,cAAc,KAAK,KAAK,OAAO,OAAO,KAAK,cAAc,aAAa,CAAC;AAAA,IACxF;AACQ,QAAI,KAAK,qBAAqB,QAAW;AACrC,YAAM,aAAa,OAAO,KAAK,KAAK,gBAAgB;AACpD,YAAM,cAAc,WAAW;AAC/B,UAAI,cAAc,GAAG;AACjB,iBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AAClC,gBAAMA,OAAM,WAAW,CAAC;AACxB,eAAK,cAAc,KAAK,KAAK,OAAO,MAAMA,IAAG,GAAG,KAAK,iBAAiBA,IAAG,CAAC;AAAA,QAC9F;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EACI,cAAc,UAAU;AACpB,UAAM,UAAU,OAAO,QAAQ,QAAQ;AACvC,UAAM,UAAU,QAAQ;AACxB,aAAS,IAAI,GAAG,IAAI,SAAS,KAAK;AAC9B,YAAM,CAACA,MAAK,KAAK,IAAI,QAAQ,CAAC;AAC9B,eAASA,IAAG,IAAI;AAAA,QACZ,OAAO,MAAM;AAAA,QACb,QAAQ,MAAM;AAAA,MACjB;AAAA,IACb;AAAA,EACA;AAAA,EACI,UAAU;AACN,SAAK,WAAW;AAChB,QAAI,KAAK,cAAc,OAAO,MAAM,QAAW;AAC3C,WAAK,cAAc,KAAK,cAAc,OAAO,CAAC;AAAA,IAC1D;AACQ,QAAI,KAAK,cAAc,aAAa,MAAM,QAAW;AACjD,WAAK,cAAc,KAAK,cAAc,aAAa,CAAC;AAAA,IAChE;AACQ,QAAI,KAAK,qBAAqB,QAAW;AACrC,YAAM,aAAa,OAAO,KAAK,KAAK,gBAAgB;AACpD,YAAM,cAAc,WAAW;AAC/B,UAAI,cAAc,GAAG;AACjB,iBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AAClC,gBAAMA,OAAM,WAAW,CAAC;AACxB,eAAK,cAAc,KAAK,iBAAiBA,IAAG,CAAC;AAAA,QACjE;AAAA,MACA;AAAA,IACA;AAEQ,QAAI,CAAC,KAAK,SAAS,MAAM;AACrB,WAAK,SAAS,aAAa;AAAA,IACvC;AAAA,EACA;AAAA,EACI,YAAY,GAAG,GAAG,GAAG;AACjB,YAAQ,KAAK,eAAe,CAAC,KAAK,MAAM,IAAI,KAAK;AAAA,EACzD;AAAA,EACI,YAAY,UAAU,WAAW,YAAY,QAAQ;AACjD,QAAI,KAAK,aAAa,GAAG;AACrB,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,aAAa,GAAG;AACrB,aAAO;AAAA,IACnB;AACQ,UAAM,WAAW;AACjB,QAAI,SAAS,QAAQ,OAAO,MAAM,IAAI;AAClC,UAAI,eAAe,UAAU;AACzB,eAAO;AAAA,MACvB;AACY,UAAI,QAAQ;AACR,cAAM,sBAAsB,KAAK,eAAe,KAAK,QAAQ,KAAK,KAAK;AACvE,eAAO,mBAAmB,YAAY,UAAU,mBAAmB;AAAA,MACnF;AACY,aAAO,mBAAmB,YAAY,UAAU,KAAK,QAAQ;AAAA,IACzE;AACQ,QAAI,QAAQ;AACR,aAAO,KAAK,YAAY,KAAK,UAAU,YAAY,QAAQ;AAAA,IACvE;AACQ,WAAO,cAAc,WAAW,cAAc,KAAK;AAAA,EAC3D;AAAA,EACI,aAAa,QAAQ,UAAU,QAAQ;AACnC,UAAM,UAAU,OAAO,QAAQ,QAAQ;AACvC,UAAM,UAAU,QAAQ;AACxB,aAAS,IAAI,GAAG,IAAI,SAAS,KAAK;AAC9B,YAAM,CAACA,MAAK,KAAK,IAAI,QAAQ,CAAC;AAC9B,aAAOA,IAAG,IAAI,KAAK,YAAYA,MAAK,MAAM,QAAQ,MAAM,OAAO,MAAM;AAAA,IACjF;AAAA,EACA;AAAA,EACI,OAAO,IAAI;AACP,UAAM,EAAE,UAAU,MAAM,QAAQ,WAAU,IAAK,KAAK;AACpD,UAAM,EAAE,SAAQ,IAAK;AACrB,QAAI,aAAa,KAAK,aAAa,GAAG;AAClC,WAAK,KAAK,YAAY,EAAE;AACxB;AAAA,IACZ;AACQ,QAAI,KAAK,WAAW,GAAG;AACnB,WAAK,YAAY;AACjB,UAAI,KAAK,YAAY,GAAG;AAEpB;AAAA,MAChB,OACiB;AAGD,aAAK,CAAC,KAAK;AACX,aAAK,WAAW;AAAA,MAChC;AAAA,IACA;AACQ,QAAI,aAAa,GAAG;AAEhB,WAAK,KAAK,YAAY,EAAE;AACxB;AAAA,IACZ;AACQ,QAAI,KAAK,aAAa,GAAG;AAErB,WAAK,KAAK,aAAa,EAAE;AAAA,IACrC;AACQ,SAAK,YAAY,KAAK;AACtB,QAAI,KAAK,WAAW,GAAG;AACnB,WAAK,WAAW,OAAO,IAAI;AAC3B,WAAK,WAAW,KAAK;AACrB,UAAI,YAAY;AAIZ,aAAK,KAAK,YAAY,EAAE;AACxB;AAAA,MAChB;AAAA,IACA;AACQ,QAAI,KAAK,cAAc,OAAO,MAAM,QAAW;AAC3C,WAAK,aAAa,KAAK,MAAM,KAAK,cAAc,OAAO,GAAG,MAAM;AAAA,IAC5E;AACQ,QAAI,KAAK,cAAc,aAAa,MAAM,QAAW;AACjD,WAAK,aAAa,KAAK,KAAK,OAAO,OAAO,KAAK,cAAc,aAAa,GAAG,MAAM;AAAA,IAC/F;AACQ,QAAI,KAAK,qBAAqB,QAAW;AACrC,YAAM,aAAa,OAAO,KAAK,KAAK,gBAAgB;AACpD,YAAM,cAAc,WAAW;AAC/B,UAAI,cAAc,GAAG;AACjB,iBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AAClC,gBAAMA,OAAM,WAAW,CAAC;AACxB,eAAK,aAAa,KAAK,KAAK,OAAO,MAAMA,IAAG,GAAG,KAAK,iBAAiBA,IAAG,GAAG,MAAM;AAAA,QACrG;AAAA,MACA;AAAA,IACA;AACQ,QAAI,KAAK,WAAW,GAAG;AACnB,WAAK,KAAK,QAAQ,EAAE,UAAU,KAAK,UAAU;AAAA,IACzD;AACQ,QAAI,KAAK,aAAa,GAAG;AACrB,WAAK,KAAK,YAAY,EAAE;AAAA,IACpC;AAAA,EACA;AACA;ACzOO,MAAM,gCAAgC,aAAa;AAAA,EAStD,YAAY,SAAS,WAAW;AAC5B,UAAO;AATX;AACA;AACA;AAIA;AAAA;AAAA;AAAA,0CAAiB;AACjB;AAGI,SAAK,UAAU;AACf,SAAK,YAAY;AACjB,SAAK,QAAQ;AAEb,SAAK,iBAAiB,QAAQ,QAAS;AAEvC,SAAK,cAAc,KAAK,YAAY,KAAK,IAAI;AAC7C,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;AAC3C,SAAK,SAAS,KAAK,OAAO,KAAK,IAAI;AAAA,EAC3C;AAAA,EACI,QAAQ;AACJ,QAAI,KAAK,UAAU,aAAa,KAAK,UAAU,aAAa;AACxD,WAAK,mBAAoB;AACzB,WAAK,kBAAmB;AACxB,WAAK,QAAQ;AAAA,IACzB;AACQ,WAAO;AAAA,EACf;AAAA,EACI,OAAO;AACH,SAAK,oBAAqB;AAC1B,QAAI,KAAK,mBAAmB,MAAM;AAC9B,WAAK,eAAgB;AACrB,WAAK,iBAAiB;AACtB,WAAK,KAAK,WAAW,IAAI;AAAA,IACrC;AACQ,SAAK,UAAU,MAAO;AACtB,SAAK,QAAQ;AACb,WAAO;AAAA,EACf;AAAA,EACI,QAAQ;AACJ,SAAK,oBAAqB;AAC1B,SAAK,QAAQ;AACb,WAAO;AAAA,EACf;AAAA,EACI,UAAU;AACN,SAAK,iBAAiB;AACtB,SAAK,UAAU,QAAS;AACxB,WAAO;AAAA,EACf;AAAA,EACI,mBAAmB;AACf,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,oBAAoB;AAEhB,SAAK,UAAU,KAAK,YAAY,KAAK,UAAU;AAC/C,SAAK,UAAU,GAAG,aAAa,KAAK,WAAW;AAC/C,SAAK,UAAU,GAAG,QAAQ,KAAK,MAAM;AAErC,SAAK,QAAQ,kBAAkB,KAAK,SAAS;AAAA,EACrD;AAAA,EACI,sBAAsB;AAElB,SAAK,QAAQ,oBAAoB,KAAK,SAAS;AAE/C,SAAK,UAAU,IAAI,YAAY,KAAK,UAAU;AAC9C,SAAK,UAAU,IAAI,aAAa,KAAK,WAAW;AAChD,SAAK,UAAU,IAAI,QAAQ,KAAK,MAAM;AAAA,EAC9C;AAAA,EACI,qBAAqB;AACjB,QAAI,KAAK,mBAAmB,MAAM;AAC9B,WAAK,iBAAiB,IAAI,QAAQ,CAAC,YAAY;AAC3C,aAAK,iBAAiB;AAAA,MACtC,CAAa;AAAA,IACb;AAAA,EACA;AAAA,EACI,aAAa;AACT,iBAAa,KAAK,cAAc;AAEhC,UAAM,EAAE,MAAM,WAAY,IAAG,KAAK,UAAU;AAC5C,QAAI,eAAe,WAAW;AAC1B,WAAK,UAAU,KAAK,YAAY,KAAK,UAAU;AAC/C,WAAK,UAAU,QAAS;AACxB;AAAA,IACZ;AACQ,QAAI,MAAM;AACN;AAAA,IACZ;AAEQ,SAAK,oBAAqB;AAE1B,SAAK,eAAgB;AACrB,SAAK,iBAAiB;AACtB,SAAK,KAAK,WAAW,IAAI;AACzB,SAAK,QAAQ;AAAA,EACrB;AAAA,EACI,cAAc;AACV,SAAK,QAAQ;AACb,SAAK,KAAK,aAAa,IAAI;AAAA,EACnC;AAAA,EACI,OAAO,YAAY,MAAM;AACrB,SAAK,KAAK,QAAQ,IAAI;AAAA,EAC9B;AACA;ACnGO,IAAI;AAAA,CACV,SAAUM,sBAAqB;AAC5B,EAAAA,qBAAoBA,qBAAoB,MAAM,IAAI,CAAC,IAAI;AACvD,EAAAA,qBAAoBA,qBAAoB,aAAa,IAAI,CAAC,IAAI;AAC9D,EAAAA,qBAAoBA,qBAAoB,UAAU,IAAI,CAAC,IAAI;AAC3D,EAAAA,qBAAoBA,qBAAoB,YAAY,IAAI,CAAC,IAAI;AACjE,GAAG,wBAAwB,sBAAsB,GAAG;AACpD,MAAM,yBAAyB,oBAAI,IAAK;AACxC,uBAAuB,IAAI,oBAAoB,MAAM,MAAM;AAC3D,uBAAuB,IAAI,oBAAoB,aAAa,aAAa;AACzE,uBAAuB,IAAI,oBAAoB,UAAU,UAAU;AACnE,uBAAuB,IAAI,oBAAoB,YAAY,YAAY;AAChE,IAAI;AAAA,CACV,SAAUC,aAAY;AAInB,EAAAA,YAAWA,YAAW,UAAU,IAAI,CAAC,IAAI;AAQzC,EAAAA,YAAWA,YAAW,aAAa,IAAI,CAAC,IAAI;AAQ5C,EAAAA,YAAWA,YAAW,OAAO,IAAI,CAAC,IAAI;AAUtC,EAAAA,YAAWA,YAAW,QAAQ,IAAI,CAAC,IAAI;AAQvC,EAAAA,YAAWA,YAAW,UAAU,IAAI,EAAE,IAAI;AAQ1C,EAAAA,YAAWA,YAAW,kBAAkB,IAAI,EAAE,IAAI;AAQlD,EAAAA,YAAWA,YAAW,sBAAsB,IAAI,EAAE,IAAI;AAWtD,EAAAA,YAAWA,YAAW,qBAAqB,IAAI,GAAG,IAAI;AAQtD,EAAAA,YAAWA,YAAW,YAAY,IAAI,GAAG,IAAI;AAQ7C,EAAAA,YAAWA,YAAW,aAAa,IAAI,GAAG,IAAI;AAQ9C,EAAAA,YAAWA,YAAW,cAAc,IAAI,IAAI,IAAI;AAIhD,EAAAA,YAAWA,YAAW,eAAe,IAAI,IAAI,IAAI;AAIjD,EAAAA,YAAWA,YAAW,qBAAqB,IAAI,IAAI,IAAI;AAIvD,EAAAA,YAAWA,YAAW,cAAc,IAAI,IAAI,IAAI;AAIhD,EAAAA,YAAWA,YAAW,MAAM,IAAI,CAAC,IAAI;AAIrC,EAAAA,YAAWA,YAAW,KAAK,IAAI,KAAK,IAAI;AAC5C,GAAG,eAAe,aAAa,GAAG;AAS3B,MAAM,iBAAiB,aAAa;AAAA,EAgCvC,YAAY,OAAO,OAAO;AACtB,UAAO;AAhCX;AACA,oCAAW,CAAE;AACb,+BAAM,SAAU;AAChB;AACA,sCAAa,WAAW;AACxB,2CAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAe;AAAA,MACX,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,IACV;AACD,wCAAe;AACf,uCAAc,oBAAoB;AAClC,sCAAa;AACb,gDAAuB;AACvB,gDAAuB;AACvB,gDAAuB;AACvB,gDAAuB;AACvB,sCAAa;AACb,yCAAgB;AAChB,kDAAyB;AACzB,qCAAY;AA0EZ,2CAAkB,CAAC,GAAG,eAAe;;AACjC,WAAK,aAAa,UAAU;AAG5B,WAAK,MAAM,cAAe;AAE1B,UAAI,KAAK,wBAAwB;AAC7B,aAAK,wBAAyB;AAAA,MAC1C;AACQ,WAAK,KAAK,UAAU;AAAA,QAChB,MAAM;AAAA,QACN;AAAA,MACZ,CAAS;AAED,YAAIH,OAAAD,MAAA,KAAK,MAAM,mBAAX,gBAAAA,IAA2B,eAA3B,gBAAAC,IAAuC,UAAS,WAAW;AAC3D,aAAK,cAAc,WAAW,KAAK;AAAA,MAC/C;AAAA,IACK;AACD,2CAAkB,CAAC,GAAG,UAAU;AAE5B,UAAI,KAAK,wBAAwB;AAC7B,aAAK,wBAAyB;AAAA,MAC1C;AACQ,WAAK,KAAK,UAAU;AAAA,QAChB,MAAM;AAAA,QACN;AAAA,MACZ,CAAS;AAAA,IACJ;AACD,0CAAiB,MAAM;AAEnB,UAAI,KAAK,wBAAwB;AAC7B,aAAK,wBAAyB;AAAA,MAC1C;AACQ,WAAK,KAAK,SAAS;AAAA,QACf,MAAM;AAAA,MAClB,CAAS;AAAA,IACJ;AA3GG,SAAK,QAAQ;AACb,SAAK,QAAQ;AAAA,MACT,GAAG;AAAA,MACH,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,KAAK;AAAA,MACL,KAAK;AAAA,IACR;AAED,SAAK,SAAS,MAAM;AACpB,SAAK,UAAU,MAAM;AACrB,SAAK,MAAM,MAAM;AACjB,SAAK,MAAM,MAAM;AACjB,SAAK,cAAc,WAAW,cAC1B,WAAW,QACX,WAAW,eACX,WAAW,WAAW;AAAA,EAClC;AAAA;AAAA,EAEI,cAAc;AACV,UAAM,EAAE,YAAY,KAAK;AACzB,iBAAa,OAAO;AAKpB,mBAAe,MAAM;AACjB,cAAQ,iBAAiB,KAAK,MAAM;AAEpC,UAAI,KAAK,eAAe,SAAS;AAC7B,gBAAQ,WAAW,KAAM;AAAA,MACzC;AACY,cAAQ,GAAG,UAAU,KAAK,eAAe;AACzC,cAAQ,GAAG,UAAU,KAAK,eAAe;AACzC,cAAQ,GAAG,SAAS,KAAK,cAAc;AAMvC,UAAI,KAAK,wBAAwB;AAC7B,aAAK,wBAAyB;AAC9B;AAAA,MAChB;AACY,UAAI,QAAQ,UAAU,UAAU;AAC5B,qBAAa,QAAQ,UAAU;AAC/B,aAAK,gBAAgB,SAAS,QAAQ,UAAU;AAAA,MAChE,WACqB,QAAQ,UAAU,UAAU;AACjC,qBAAa,QAAQ,KAAK;AAC1B,aAAK,gBAAgB,SAAS,QAAQ,KAAK;AAAA,MAC3D,WACqB,QAAQ,UAAU,SAAS;AAChC,aAAK,eAAe,OAAO;AAAA,MAC3C;AAAA,IACA,CAAS;AAAA,EACT;AAAA,EACI,gBAAgB;AACZ,QAAI,KAAK,YAAY,MAAM;AACvB,WAAK,QAAQ,IAAI,UAAU,KAAK,eAAe;AAC/C,WAAK,QAAQ,IAAI,UAAU,KAAK,eAAe;AAC/C,WAAK,QAAQ,IAAI,SAAS,KAAK,cAAc;AAC7C,WAAK,QAAQ,mBAAmB,MAAM,KAAK;AAAA,IACvD;AAAA,EACA;AAAA,EACI,aAAa,YAAY;AACrB,QAAI,KAAK,UAAU;AACf,WAAK,QAAQ,WAAW;AACxB,WAAK,SAAS,WAAW;AAAA,IACrC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA+CI,cAAc,MAAM;AAChB,SAAK,cAAc;AACnB,UAAM,SAAS,KAAK,MAAM;AAC1B,QAAI,CAAC;AACD;AACJ,SAAK,OAAO,aAAa,WAAW,cAAc,GAAG;AAEjD,aAAO,cAAc,WAAW,QAAQ;AAAA,IACpD;AAAA,EACA;AAAA,EACI,eAAe;AACX,SAAK,SAAS,KAAK,CAAC,GAAG,MAAM,EAAE,aAAa,EAAE,UAAU;AAAA,EAChE;AAAA,EACI,6BAA6B;AACzB,UAAM,EAAE,UAAU,QAAQ,OAAQ,IAAG,KAAK;AAE1C,QAAI,aAAa,KAAK,WAAW,KAAK,WAAW,GAAG;AAChD,WAAK,uBAAuB;AAC5B;AAAA,IACZ;AACQ,SAAK,uBAAuB,SAAS,OAAO,UAAU,KAAK,oBAAoB,EAAE,MAAM,QAAQ,MAAM;AAAA,EAC7G;AAAA,EACI,uBAAuB;;AACnB,UAAM,EAAE,GAAG,GAAG,OAAO,OAAM,IAAK,KAAK;AACrC,UAAM,kBAAkB,KAAK,MAAM,SAAS;AAC5C,UAAM,kBAAkB,KAAK,MAAM,SAAS;AAC5C,QAAI,KAAK,sBAAsB;AAC3B,YAAM,kBAAkB,KAAK,MAAM,SAAS;AAC5C,YAAM,kBAAkB,KAAK,MAAM,SAAS;AAC5C,WAAK,iBAAiB,SAAS,UAAU,IAAI,kBAAkB,iBAAiB,IAAI,kBAAkB,iBAAiB,KAAK,cAAc,EACrI,SAAS,KAAK,oBAAoB,EAClC,UAAU,CAAC,iBAAiB,CAAC,eAAe;AAAA,IAC7D,OACa;AACD,WAAK,iBAAiB,SAAS,UAAU,IAAI,iBAAiB,IAAI,iBAAiB,KAAK,cAAc;AAAA,IAClH;AAEQ,UAAM,UAAU,KAAK,MAAM;AAC3B,QAAI,WACA,QAAQ,gBACRA,OAAAD,MAAA,KAAK,MAAM,mBAAX,gBAAAA,IAA2B,eAA3B,gBAAAC,IAAuC,UAAS,WAAW;AAC3D,UAAI,mBAAmB;AACvB,UAAI,mBAAmB;AACvB,UAAI,SAAS;AACb,UAAI,SAAS;AACb,YAAM,EAAE,OAAO,IAAI,QAAQ,GAAE,IAAK,QAAQ;AAC1C,YAAM,gBAAgB,KAAK;AAC3B,YAAM,kBAAkB,QAAQ;AAChC,UAAI,gBAAgB,iBAAiB;AAIjC,cAAM,SAAS,QAAQ;AACvB,cAAM,iBAAiB,KAAK;AAC5B,kBAAU,SAAS,kBAAkB;AACrC,2BAAmB,iBAAiB;AAAA,MACpD,OACiB;AAID,cAAM,SAAS,SAAS;AACxB,cAAM,gBAAgB,KAAK;AAC3B,kBAAU,QAAQ,iBAAiB;AACnC,2BAAmB,gBAAgB;AAAA,MACnD;AAEY,WAAK,eACA,UAAU,QAAQ,MAAM,EACxB,MAAM,kBAAkB,gBAAgB;AAAA,IACzD;AACQ,SAAK,cAAc,WAAW,MAAM;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,EAKI,OAAO,OAAO,oBAAoB;;AAC9B,QAAI,KAAK,aAAa,WAAW,aAAa;AAC1C,WAAK,2BAA4B;AACjC,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AACQ,QAAI,KAAK,aAAa,WAAW,OAAO;AACpC,WAAK,qBAAsB;AAC3B,WAAK,cAAc,WAAW,MAAM;AAAA,IAChD;AACQ,UAAM,SAAS,KAAK,MAAM;AAC1B,QAAI,cAAc;AAElB,QAAI,KAAK,aAAa,WAAW,iBAAiB,KAAK,KAAK;AAExD,WAAK,gBAAgB;AACrB,OAAAD,MAAA,KAAK,MAAM,aAAX,gBAAAA,IAAqB,gBAAgB;AAAA,IACjD;AACQ,QAAI,KAAK,aAAa,WAAW,QAAQ;AACrC,mBAAa,KAAK,cAAc;AAChC,WAAK,kBAAkB,SAAS,MAAK,iCAAQ,oBAAmB,KAAK,gBAAgB,KAAK,eAAe;AACzG,UAAI,KAAK,4BAA0BC,MAAA,KAAK,MAAM,WAAX,gBAAAA,IAAmB,MAAK;AACvD,aAAK,kBAAkB,SAAS,SAAU;AAAA,MAC1D;AACY,UAAI,QAAQ;AACR,aAAK,gBAAgB,SAAS,KAAK,cAAc;AAAA,MACjE;AACY,WAAK,sBAAuB;AAC5B,WAAK,mBAAoB;AACzB,WAAK,cAAc,WAAW,cAAc,WAAW,QAAQ;AAC/D,WAAK,mBAAmB,WAAW;AACnC,UAAI,KAAK,aAAa,MAAM;AACxB,aAAK,cAAc,WAAW,WAAW,WAAW,YAAY;AAChE,aAAK,mBAAmB,WAAW;AAAA,MACnD;AAAA,IACA;AACQ,QAAI,KAAK,aAAa,WAAW,cAAc;AAC3C,WAAK,mBAAoB;AACzB,WAAK,cAAc,WAAW,WAAW;AACzC,WAAK,cAAc,WAAW,QAAQ;AAAA,IAClD;AACQ,QAAI,KAAK,aAAa,WAAW,aAAa;AAC1C,oBAAc,KAAK,kBAAmB;AACtC,WAAK,cAAc,WAAW,YAAY;AAI1C,UAAI,gBAAgB,oBAAoB,aAAa;AACjD,aAAK,kBAAkB,WAAW;AAAA,MAClD;AAAA,IACA;AACQ,QAAI,KAAK,aAAa,WAAW,YAAY;AACzC,UAAI,QAAQ;AACR,aAAK,aAAa,OAAO,aAAa,KAAK,MAAM;AAAA,MACjE,OACiB;AACD,aAAK,aAAa,KAAK,MAAM;AAAA,MAC7C;AACY,WAAK,cAAc,WAAW,WAC1B,WAAW,sBACX,WAAW,YAAY;AAC3B,WAAK,mBAAmB,WAAW;AAAA,IAC/C;AACQ,QAAI,KAAK,aAAa,WAAW,cAAc;AAC3C,WAAK,mBAAoB;AAAA,IACrC;AACQ,QAAI,KAAK,aAAa,WAAW,UAAU;AACvC,WAAK,sBAAsB,kBAAkB;AAC7C,WAAK,cAAc,WAAW,QAAQ;AACtC,WAAK,mBAAmB,WAAW;AACnC,WAAK,mBAAmB,WAAW;AAAA,IAC/C;AACQ,QAAI,KAAK,aAAa,WAAW,qBAAqB;AAClD,WAAK,uBAAuB,6BAA6B,KAAK,MAAM,SAAS,KAAK,YAAY,IAAI;AAElG,UAAI,KAAK,MAAM,YAAY,KAAK,MAAM,WAClC,KAAK,MAAM,YAAY,KAAK,MAAM,WAClC,KAAK,MAAM,YAAY,KAAK,MAAM,SAAS;AAC3C,aAAK,uBACD,KAAK,uBACD,KAAK,uBACD,KAAK;AAAA,MACjC,OACiB;AACD,aAAK,uBAAuB,6BAA6B,KAAK,MAAM,SAAS,KAAK,YAAY,IAAI;AAClG,aAAK,uBAAuB,6BAA6B,KAAK,MAAM,SAAS,KAAK,YAAY,IAAI;AAClG,aAAK,uBAAuB,6BAA6B,KAAK,MAAM,SAAS,KAAK,YAAY,IAAI;AAAA,MAClH;AAAA,IACA;AAEQ,QAAI,WAAW,QAAQ,KAAK,aAAa,WAAW,kBAAkB;AAClE,WAAK,gBAAiB;AAEtB,aAAO,cAAc,WAAW,oBAAoB;AAAA,IAChE;AACQ,QAAI,KAAK,MAAM,iBAAiB,QAC5B,KAAK,gBAAgB,oBAAoB,aAAa;AACtD;AAAA,IACZ;AACQ,QAAI,KAAK,aAAa,WAAW,YAAY,KAAK,SAAS,SAAS,GAAG;AACnE,eAAS,IAAI,GAAG,SAAS,KAAK,SAAS,QAAQ,IAAI,QAAQ,KAAK;AAC5D,cAAM,QAAQ,KAAK,SAAS,CAAC;AAC7B,cAAM,cAAc,KAAK,eAAe;AACxC,YAAI,MAAM,eAAe,GAAG;AACxB;AAAA,QACpB;AACgB,YAAI,oBAAoB,KAAK;AAC7B,YAAI,KAAK,QAAQ,MAAM;AACnB,8BAAoB;AAAA,YAChB,GAAG;AAAA,YACH,GAAG;AAAA,YACH,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,OAAO;AAAA,UACV;AAAA,QACrB;AACgB,cAAM,OAAO,OAAO,iBAAiB;AAAA,MACrD;AAAA,IACA;AAIQ,QAAI,KAAK,0BAA0B,KAAK,aAAa,GAAG;AACpD,WAAK,wBAAyB;AAAA,IAC1C;AAGQ,QAAI,KAAK,aAAa,WAAW,sBAAsB;AAEnD,WAAK,aAAc;AAAA,IAC/B;AAIQ,QAAI,gBAAgB,oBAAoB,aAAa;AACjD,WAAK,kBAAkB,WAAW;AAClC,WAAK,mBAAoB;AAAA,IACrC;AAEQ,SAAK,aAAa;AAClB,SAAK,kBAAkB;AAAA,EAC/B;AAAA,EACI,oBAAoB;AAChB,QAAI,UAAU,KAAK;AACnB,WAAO,WAAW,CAAC,QAAQ,KAAK;AAC5B,gBAAU,QAAQ;AAAA,IAC9B;AACQ,WAAO;AAAA,EACf;AAAA,EACI,0BAA0B;AACtB,QAAI,KAAK,WAAW,MAAM;AACtB;AAAA,IACZ;AACQ,UAAM,UAAU,KAAK,aAAa,KAAK,kBAAmB;AAC1D,QAAI,CAAC,SAAS;AACV;AAAA,IACZ;AAEQ,YAAQ,gBAAgB;AACxB,YAAQ,cAAc,WAAW,aAAa;AAE9C,QAAI,QAAQ,2BAA2B,MAAM;AACzC,cAAQ,wBAAyB;AAAA,IAC7C;AAAA,EACA;AAAA;AAAA,EAEI,0BAA0B;AACtB,QAAI,KAAK,MAAM,SAAS;AACpB,aAAO;AAAA,IACnB;AACQ,QAAI,CAAC,KAAK,MAAM,SAAS,CAAC,KAAK,MAAM,QAAQ;AACzC,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,cAAc;AAC/C,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,UAAU;AACrB,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,UAAU,GAAG;AACxB,aAAO;AAAA,IACnB;AAGQ,QAAI,KAAK,MAAM,aAAa,GAAG;AAC3B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,gBAAgB,GAAG;AAC9B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,cAAc,GAAG;AAC5B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,eAAe,GAAG;AAC7B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,YAAY,GAAG;AAC1B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,YAAY,GAAG;AAC1B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,YAAY,GAAG;AAC1B,aAAO;AAAA,IACnB;AACQ,QAAI,KAAK,MAAM,YAAY,GAAG;AAC1B,aAAO;AAAA,IACnB;AACQ,WAAO;AAAA,EACf;AAAA,EACI,oBAAoB;AAChB,iBAAa,KAAK,WAAW;AAC7B,iBAAa,KAAK,WAAW;AAC7B,iBAAa,KAAK,YAAY;AAC9B,QAAI,iBAAiB,KAAK,aAAa,KAAK,WAAW,GAAG;AACtD,aAAO,oBAAoB;AAAA,IACvC;AACQ,QAAI,iBAAiB,KAAK,aAAa,KAAK,YAAY,GAAG;AACvD,aAAO,oBAAoB;AAAA,IACvC;AAEQ,QAAI,oBAAoB,KAAK,aAAa,KAAK,WAAW,GAAG;AACzD,aAAO,oBAAoB;AAAA,IACvC;AAEQ,QAAI,KAAK,2BAA2B,MAAM;AACtC,aAAO,oBAAoB;AAAA,IACvC;AAEQ,QAAI,KAAK,WAAW,SACf,KAAK,MAAM,UAAU,KAAK,KAAK,MAAM,WAAW,IAAI;AACrD,aAAO,KAAK,OAAO;AAAA,IAC/B;AACQ,WAAO,oBAAoB;AAAA,EACnC;AAAA,EACI,qBAAqB;AACjB,UAAM,EAAE,cAAc,iBAAiB,UAAW,IAAG;AACrD,iBAAa,SAAS;AACtB,iBAAa,YAAY;AACzB,UAAM,EAAE,IAAI,GAAE,IAAK;AACnB,UAAM,EAAE,IAAI,IAAI,IAAI,GAAI,IAAG;AAC3B,QAAI,OAAO,KAAK,OAAO,GAAG;AACtB,WAAK,cAAc,YAAY,IAAI,IAAI,IAAI,IAAI,KAAK,WAAW;AAAA,IAC3E,OACa;AACD,YAAM,EAAE,IAAI,IAAI,IAAI,GAAI,IAAG;AAC3B,WAAK,cAAc,YAAY,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,KAAK,WAAW;AAAA,IACnK;AAAA,EACA;AAAA,EACI,qBAAqB;AACjB,iBAAa,KAAK,KAAK;AACvB,QAAI,KAAK,WAAW,QAAQ,KAAK,OAAO,gBAAgB,QAAW;AAE/D,YAAM,cAAc,KAAK,OAAO;AAChC,WAAK,cAAc,YAAY,YAAY,IAAI,YAAY,IAAI,YAAY,IAAI,YAAY,EAAE;AAC7F,WAAK,eAAe,oBAAoB,KAAK,aAAa,KAAK,MAAM,YAAY;AAAA,IAC7F,OACa;AAED,WAAK,cAAc,KAAK,MAAM;AAC9B,WAAK,eAAe,KAAK,MAAM;AAAA,IAC3C;AAEQ,QAAI,KAAK,MAAM,aAAa,OAAO;AAC/B;AAAA,IACZ;AAGQ,QAAI,KAAK,gBAAgB,QAAW;AAChC;AAAA,IACZ;AAEQ,QAAI,iBAAiB,KAAK,aAAa,KAAK,WAAW,MAAM,OAAO;AAChE;AAAA,IACZ;AAEQ,UAAM,EAAE,GAAG,GAAG,OAAO,OAAM,IAAK,KAAK;AACrC,UAAM,EAAE,IAAI,GAAI,IAAG,KAAK,mBAAmB,CAAE;AAC7C,UAAM,KAAK,kBAAM;AACjB,UAAM,KAAK,kBAAM;AACjB,SAAK,cAAc,YAAY,IAAI,IAAI,KAAK,OAAO,KAAK,QAAQ,KAAK,WAAW;AAChF,SAAK,eAAe,oBAAoB,KAAK,aAAa,KAAK,MAAM,YAAY;AAAA,EACzF;AAAA,EACI,kBAAkB,aAAa;AAC3B,QAAI,gBAAgB,KAAK,aAAa;AAClC;AAAA,IACZ;AACQ,UAAM,WAAW,KAAK;AACtB,SAAK,cAAc;AACnB,UAAM,QAAQ,uBAAuB,IAAI,WAAW;AACpD,iBAAa,KAAK;AAClB,SAAK,KAAK,OAAO;AAAA,MACb;AAAA,MACA,SAAS;AAAA,IACrB,CAAS;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,qBAAqB;AACjB,QAAI;AACJ,QAAI,KAAK,eAAe,KAAK,CAAC,KAAK,wBAAuB,GAAI;AAC1D,wBAAkB;AAAA,IAC9B,OACa;AACD,wBAAkB,KAAK,cAAc,oBAAoB;AAAA,IACrE;AACQ,QAAI,KAAK,iBAAiB,iBAAiB;AACvC,WAAK,eAAe;AACpB,WAAK,qBAAqB,eAAe;AAAA,IACrD;AAAA,EACA;AAAA,EACI,qBAAqB,cAAc;;AAC/B,KAAAD,MAAA,KAAK,YAAL,gBAAAA,IAAc,mBAAmB,MAAM;AAAA,EAC/C;AAAA,EACI,wBAAwB;AACpB,UAAM,EAAE,OAAO,QAAQ,iBAAiB,UAAW,IAAG;AACtD,iBAAa,SAAS;AACtB,UAAM,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,GAAE,IAAK;AACnC,QAAI,OAAO,KAAK,OAAO,GAAG;AACtB,YAAM,OAAO;AACb,YAAM,OAAO,KAAK,QAAQ;AAC1B,YAAM,OAAO;AACb,YAAM,OAAO,KAAK,SAAS;AAC3B,WAAK,eAAe,aAAa;AAAA;AAAA,QAEjC;AAAA,QAAM;AAAA;AAAA,QAEN;AAAA,QAAM;AAAA;AAAA,QAEN;AAAA,QAAM;AAAA;AAAA,QAEN;AAAA,QAAM;AAAA,QAAM,KAAK;AAAA,MAAY;AAAA,IACzC,OACa;AACD,WAAK,eAAe,aAAa;AAAA;AAAA,QAEjC;AAAA,QAAI;AAAA;AAAA,QAEJ,KAAK,QAAQ;AAAA,QAAI,KAAK,QAAQ;AAAA;AAAA,QAE9B,KAAK,QAAQ,KAAK,SAAS;AAAA,QAAI,KAAK,QAAQ,KAAK,SAAS;AAAA;AAAA,QAE1D,KAAK,SAAS;AAAA,QAAI,KAAK,SAAS;AAAA,QAAI,KAAK;AAAA,MAAY;AAAA,IACjE;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,sBAAsB,oBAAoB;AACtC,iBAAa,KAAK,eAAe;AACjC,UAAM,EAAE,cAAc,OAAO,iBAAiB,GAAI,IAAG;AACrD,UAAM,EAAE,SAAQ,IAAK;AACrB,UAAM,YAAY,GAAG,OAAO,KAAK,GAAG,OAAO;AAC3C,QAAI,aAAa,QAAQ,cAAc,OAAO;AAC1C,mBAAa,IAAI,GAAG;AACpB,mBAAa,IAAI,GAAG;AACpB,mBAAa,QAAQ,KAAK,QAAQ,GAAG;AACrC,mBAAa,SAAS,KAAK,SAAS,GAAG;AACvC,mBAAa,QAAQ;AAAA,IACjC,OACa;AACD,mBAAa,QAAQ;AAAA,IACjC;AACQ,QAAI,mBAAmB,UAAU,QAAQ,aAAa,UAAU,MAAM;AAElE,oBAAc,oBAAoB,cAAc,YAAY;AAAA,IACxE,WACiB,mBAAmB,UAAU,MAAM;AAExC,eAAS,oBAAoB,YAAY;AACzC,mBAAa,QAAQ;AAAA,IACjC;AAAA,EACA;AAAA,EACI,kBAAkB;;AACd,UAAM,QAAQ,KAAK;AACnB,UAAM,IAAI,MAAM,UAAU;AAC1B,UAAM,MAAIA,MAAA,MAAM,WAAN,gBAAAA,IAAc,WAAU;AAClC,QAAI,SAAS;AACb,SAAIC,MAAA,MAAM,WAAN,gBAAAA,IAAc,cAAc;AAC5B,eAAS,IAAI,IAAI,IAAI;AAAA,IACjC;AACQ,SAAK,aAAa;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA,EAII,UAAU;;AACN,SAAK,cAAe;AACpB,SAAK,aAAa,QAAQ;AAC1B,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,cAAc;AACnB,SAAK,cAAc;AACnB,SAAK,eAAe;AACpB,SAAK,kBAAkB;AACvB,SAAK,uBAAuB;AAC5B,SAAK,iBAAiB;AACtB,SAAK,MAAM,UAAU;AACrB,SAAK,MAAM,SAAS,KAAK,MAAM;AAC/B,WAAO,KAAK,SAAS,SAAS,GAAG;AAC7B,OAAAD,MAAA,KAAK,SAAS,CAAC,MAAf,gBAAAA,IAAkB;AAAA,IAC9B;AAEQ,SAAK,SAAS;AACd,QAAI,KAAK,KAAK;AACV,WAAK,MAAM,SAAS,cAAc,IAAI;AAAA,IAClD;AACQ,SAAK,mBAAoB;AAAA,EACjC;AAAA,EACI,YAAYK,WAAU;AAGlB,QAAI,KAAK,wBAAwB;AAC7B,UAAI,CAACA,UAAS,uBAAuB;AACjC;AAAA,MAChB;AAEY,UAAI,KAAK,wBAAwBA,UAAS,eAAe;AACrD;AAAA,MAChB;AAAA,IACA;AACQ,iBAAa,KAAK,eAAe;AACjC,iBAAa,KAAK,YAAY;AAE9B,IAAAA,UAAS,QAAQ;AAAA,MACb,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,SAAS,KAAK;AAAA,MACd,SAAS,KAAK;AAAA,MACd,SAAS,KAAK;AAAA,MACd,SAAS,KAAK;AAAA,MACd,SAAS,KAAK;AAAA,MACd,gBAAgB,KAAK;AAAA,MACrB,QAAQ,KAAK;AAAA,MACb,QAAQ,KAAK,OAAO;AAAA,MACpB,aAAa,KAAK,OAAO,iBAAkB;AAAA,MAC3C,OAAO,KAAK;AAAA,MACZ,cAAc,KAAK;AAAA,MACnB,IAAI,KAAK,gBAAgB;AAAA,MACzB,IAAI,KAAK,gBAAgB;AAAA,MACzB,IAAI,KAAK,gBAAgB;AAAA,MACzB,IAAI,KAAK,gBAAgB;AAAA,MACzB,IAAI,KAAK,gBAAgB;AAAA,MACzB,IAAI,KAAK,gBAAgB;AAAA,MACzB,cAAc,KAAK;AAAA,MACnB,KAAK,KAAK;AAAA,MACV,wBAAwB,KAAK;AAAA,MAC7B,uBAAuB,KAAK;AAAA,IACxC,CAAS;AAAA,EACT;AAAA;AAAA,EAEI,IAAI,KAAK;AACL,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,OAAO;AACP,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,KAAK,GAAG;AACR,SAAK,MAAM,OAAO;AAAA,EAC1B;AAAA,EACI,IAAI,IAAI;AACJ,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,EAAE,OAAO;AACT,QAAI,KAAK,MAAM,MAAM,OAAO;AACxB,WAAK,MAAM,IAAI;AACf,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,OAAO;;AACP,WAAQ,KAAK,MAAM,IACf,CAAC,KAAK,MAAM,QAAQ,KAAK,MAAM,YAC9BL,MAAA,KAAK,MAAM,WAAX,gBAAAA,IAAmB,WAAQE,OAAAD,MAAA,KAAK,MAAM,WAAX,gBAAAA,IAAmB,oBAAnB,gBAAAC,IAAoC,OAAM;AAAA,EAClF;AAAA,EACI,IAAI,OAAO;;AACP,WAAQ,KAAK,MAAM,IACf,CAAC,KAAK,MAAM,SAAS,KAAK,MAAM,WAC/BD,OAAAD,MAAA,KAAK,MAAM,WAAX,gBAAAA,IAAmB,SAAnB,OAAAC,MAA2B;AAAA,EACxC;AAAA,EACI,IAAI,IAAI;AACJ,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,EAAE,OAAO;AACT,QAAI,KAAK,MAAM,MAAM,OAAO;AACxB,WAAK,MAAM,IAAI;AACf,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,QAAI,KAAK,MAAM,UAAU,OAAO;AAC5B,WAAK,MAAM,QAAQ;AACnB,WAAK,cAAc,WAAW,KAAK;AACnC,UAAI,KAAK,MAAM,KAAK;AAChB,aAAK,UAAU,KAAK,MAAM,UAAU,YAAY,iBAAiB;AAAA,UAC7D,OAAO,KAAK;AAAA,UACZ,QAAQ,KAAK;AAAA,QACjC,CAAiB;AACD,aAAK,eAAe,UAAU;AAC9B,aAAK,cAAc,WAAW,aAAa;AAAA,MAC3D;AAAA,IACA;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,KAAK;AACnC,UAAI,KAAK,MAAM,KAAK;AAChB,aAAK,UAAU,KAAK,MAAM,UAAU,YAAY,iBAAiB;AAAA,UAC7D,OAAO,KAAK;AAAA,UACZ,QAAQ,KAAK;AAAA,QACjC,CAAiB;AACD,aAAK,eAAe,UAAU;AAC9B,aAAK,cAAc,WAAW,aAAa;AAAA,MAC3D;AAAA,IACA;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AAGR,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,MAAM,OAAO;AAGb,SAAK,SAAS;AACd,SAAK,SAAS;AAAA,EACtB;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,WAAW;AAAA,IACrD;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,WAAW;AAAA,IACrD;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,QAAI,KAAK,MAAM,WAAW,SAAS,KAAK,MAAM,WAAW,OAAO;AAC5D,WAAK,MAAM,SAAS;AACpB,WAAK,MAAM,SAAS;AACpB,WAAK,MAAM,QAAQ;AACnB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,QAAI,KAAK,MAAM,WAAW,SAAS,KAAK,MAAM,WAAW,OAAO;AAC5D,WAAK,MAAM,SAAS;AACpB,WAAK,MAAM,SAAS;AACpB,WAAK,MAAM,QAAQ;AACnB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B,WAAK,MAAM,SAAS;AACpB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,QAAI,KAAK,MAAM,aAAa,OAAO;AAC/B,WAAK,MAAM,WAAW;AACtB,WAAK,cAAc,WAAW,WAAW;AAAA,IACrD;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,MAAM,QAAQ;AACnB,SAAK,cAAc,WAAW,sBAC1B,WAAW,aACX,WAAW,WACX,WAAW,YAAY;AAC3B,SAAK,mBAAmB,WAAW;AAAA,EAC3C;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,SAAK,MAAM,WAAW;AAAA,EAC9B;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,SAAK,MAAM,WAAW;AACtB,SAAK,cAAc,WAAW,WAAW,WAAW,eAAe,WAAW,QAAQ;AACtF,SAAK,mBAAmB,WAAW,SAAS,WAAW;AAAA,EAC/D;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,WAAW;AAChB,SAAK,cAAc;AACnB,SAAK,YAAY;AACjB,SAAK,aAAa;AAClB,SAAK,MAAM,QAAQ;AACnB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,QAAI,KAAK,MAAM,YAAY,SAAS,KAAK,MAAM,YAAY,OAAO;AAC9D,WAAK,UAAU;AACf,WAAK,UAAU;AAAA,IAC3B;AACQ,SAAK,MAAM,WAAW;AACtB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,cAAc;AACd,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,YAAY,OAAO;AACnB,QAAI,KAAK,MAAM,YAAY,SAAS,KAAK,MAAM,YAAY,OAAO;AAC9D,WAAK,UAAU;AACf,WAAK,UAAU;AAAA,IAC3B;AACQ,SAAK,MAAM,cAAc;AACzB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,UAAU,OAAO;AACjB,QAAI,KAAK,MAAM,YAAY,SAAS,KAAK,MAAM,YAAY,OAAO;AAC9D,WAAK,UAAU;AACf,WAAK,UAAU;AAAA,IAC3B;AACQ,SAAK,MAAM,YAAY;AACvB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,WAAW,OAAO;AAClB,QAAI,KAAK,MAAM,YAAY,SAAS,KAAK,MAAM,YAAY,OAAO;AAC9D,WAAK,UAAU;AACf,WAAK,UAAU;AAAA,IAC3B;AACQ,SAAK,MAAM,aAAa;AACxB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,MAAM,UAAU;AACrB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,MAAM,UAAU;AACrB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,MAAM,UAAU;AACrB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,MAAM,UAAU;AACrB,SAAK,cAAc,WAAW,mBAAmB;AAAA,EACzD;AAAA;AAAA;AAAA,EAGI,IAAI,eAAe;AACf,WAAO,KAAK,MAAM,gBAAgB;AAAA,EAC1C;AAAA,EACI,IAAI,aAAa,OAAO;AACpB,SAAK,MAAM,eAAe;AAC1B,SAAK,cAAc,WAAW,mBAAmB,WAAW,QAAQ;AACpE,aAAS,IAAI,GAAG,SAAS,KAAK,SAAS,QAAQ,IAAI,QAAQ,KAAK;AAC5D,WAAK,SAAS,CAAC,EAAE,cAAc,WAAW,gBAAgB;AAAA,IACtE;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,SAAK,MAAM,SAAS;AACpB,SAAK,cAAc,WAAW,mBAAmB,WAAW,QAAQ;AACpE,aAAS,IAAI,GAAG,SAAS,KAAK,SAAS,QAAQ,IAAI,QAAQ,KAAK;AAC5D,WAAK,SAAS,CAAC,EAAE,cAAc,WAAW,gBAAgB;AAAA,IACtE;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,WAAW;AAClB,UAAM,YAAY,KAAK,MAAM;AAC7B,QAAI,cAAc,WAAW;AACzB;AAAA,IACZ;AACQ,SAAK,MAAM,SAAS;AACpB,QAAI,WAAW;AACX,YAAM,QAAQ,UAAU,SAAS,QAAQ,IAAI;AAC7C,mBAAa,UAAU,IAAI,2DAA2D;AACtF,gBAAU,SAAS,OAAO,OAAO,CAAC;AAClC,gBAAU,cAAc,WAAW,WAAW,WAAW,oBAAoB;AAAA,IACzF;AACQ,QAAI,WAAW;AACX,gBAAU,SAAS,KAAK,IAAI;AAE5B,WAAK,cAAc,WAAW,GAAG;AAEjC,gBAAU,cAAc,WAAW,WAAW,WAAW,oBAAoB;AAE7E,UAAI,UAAU,OAAO,UAAU,wBAAwB;AACnD,aAAK,oBAAoB,SAAS;AAAA,MAClD;AAAA,IACA;AACQ,SAAK,2BAA4B;AAEjC,SAAK,cAAc,WAAW,eAAe,WAAW,QAAQ;AAAA,EACxE;AAAA,EACI,IAAI,iBAAiB;AACjB,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,eAAe,OAAO;AACtB,SAAK,MAAM,iBAAiB;AAAA,EACpC;AAAA,EACI,IAAI,MAAM;AACN,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,IAAI,OAAO;AACX,QAAI,KAAK,MAAM,QAAQ,OAAO;AAC1B;AAAA,IACZ;AACQ,SAAK,MAAM,MAAM;AACjB,QAAI,UAAU,MAAM;AAChB,WAAK,kBAAmB;AACxB,WAAK,oBAAqB;AAAA,IACtC,OACa;AACD,WAAK,qBAAsB;AAAA,IACvC;AACQ,SAAK,cAAc,WAAW,aAAa;AAC3C,QAAI,KAAK,2BAA2B,MAAM;AACtC,WAAK,wBAAyB;AAAA,IAC1C;AAAA,EACA;AAAA,EACI,oBAAoB;;AAChB,SAAK,UAAU,KAAK,MAAM,UAAU,YAAY,iBAAiB;AAAA,MAC7D,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACzB,CAAS;AACD,SAAK,eAAe,UAAU;AAC9B,KAAAD,MAAA,KAAK,MAAM,aAAX,gBAAAA,IAAqB,gBAAgB;AAAA,EAC7C;AAAA,EACI,uBAAuB;;AACnB,SAAK,cAAe;AACpB,SAAK,oBAAqB;AAC1B,KAAAA,MAAA,KAAK,MAAM,aAAX,gBAAAA,IAAqB,cAAc;AACnC,SAAK,gBAAgB;AACrB,SAAK,UAAU;AAAA,EACvB;AAAA,EACI,oBAAoB,OAAO,MAAM;AAC7B,UAAM,SAAS,QAAQ;AACvB,eAAW,SAAS,OAAO,UAAU;AACjC,YAAM,cAAc,WAAW,GAAG;AAClC,YAAM,yBAAyB;AAC/B,YAAM,oBAAqB;AAAA,IACvC;AAAA,EACA;AAAA;AAAA,EAEI,oBAAoB,QAAQ;AACxB,QAAI,OAAO,KAAK;AAEZ,aAAO,cAAc,WAAW,aAAa;AAAA,IACzD;AAEQ,SAAK,oBAAoB,MAAM;AAAA,EACvC;AAAA;AAAA,EAEI,sBAAsB;AAGlB,QAAI,KAAK,KAAK;AACV;AAAA,IACZ;AACQ,eAAW,SAAS,KAAK,UAAU;AAE/B,YAAM,yBAAyB;AAC/B,YAAM,YAAY;AAClB,YAAM,cAAc,WAAW,GAAG;AAClC,YAAM,oBAAqB;AAAA,IACvC;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,QAAI,KAAK,MAAM,WAAW,OAAO;AAC7B;AAAA,IACZ;AACQ,SAAK,MAAM,SAAS;AACpB,SAAK,cAAc,WAAW,YAAY;AAAA,EAClD;AAAA,EACI,IAAI,MAAM;AACN,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,IAAI,UAAU;AACd,QAAI,KAAK,MAAM,QAAQ,UAAU;AAC7B;AAAA,IACZ;AACQ,SAAK,MAAM,MAAM;AACjB,QAAI,CAAC,UAAU;AACX,WAAK,UAAU;AACf;AAAA,IACZ;AACQ,SAAK,UAAU,KAAK,MAAM,UAAU,YAAY,gBAAgB;AAAA,MAC5D,KAAK;AAAA,MACL,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,MAAM,KAAK,MAAM;AAAA,MACjB,IAAI,KAAK,MAAM;AAAA,MACf,IAAI,KAAK,MAAM;AAAA,MACf,IAAI,KAAK,MAAM;AAAA,MACf,IAAI,KAAK,MAAM;AAAA,IAC3B,CAAS;AAAA,EACT;AAAA,EACI,IAAI,UAAU,MAAM;AAChB,QAAI,KAAK,MAAM,cAAc,MAAM;AAC/B;AAAA,IACZ;AACQ,SAAK,MAAM,YAAY;AAAA,EAC/B;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK,MAAM,aAAa;AAAA,EACvC;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,UAAU,OAAO;AACjB,SAAK,MAAM,YAAY;AAAA,EAC/B;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,SAAK,MAAM,WAAW;AAAA,EAC9B;AAAA,EACI,IAAI,OAAO;AACP,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,KAAK,OAAO;AACZ,SAAK,MAAM,OAAO;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO;AACP,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,KAAK,OAAO;AACZ,SAAK,MAAM,OAAO;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,IAAI,wBAAwB;AACxB,QAAI,KAAK,0BAA0B,CAAC,KAAK,OAAO,KAAK,QAAQ;AACzD,aAAO,KAAK,OAAO;AAAA,IAC/B;AACQ,WAAO,EAAE,OAAO,KAAK,OAAO,QAAQ,KAAK,OAAQ;AAAA,EACzD;AAAA;AAAA;AAAA;AAAA,EAII,IAAI,sBAAsB;AACtB,QAAI,SAAS,KAAK;AAClB,WAAO,QAAQ;AACX,UAAI,OAAO,KAAK;AACZ,eAAO;AAAA,MACvB;AACY,eAAS,OAAO;AAAA,IAC5B;AACQ,WAAO;AAAA,EACf;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,QAAI,KAAK,MAAM,YAAY,OAAO;AAC9B;AAAA,IACZ;AACQ,UAAM,aAAa,KAAK,MAAM;AAC9B,QAAI,YAAY;AACZ,iBAAW,mBAAmB,MAAM,KAAK;AACzC,WAAK,cAAe;AAAA,IAChC;AACQ,SAAK,MAAM,UAAU;AACrB,QAAI,OAAO;AACP,YAAM,mBAAmB,MAAM,KAAK,YAAY;AAChD,WAAK,YAAa;AAAA,IAC9B;AACQ,SAAK,cAAc,WAAW,YAAY;AAAA,EAClD;AAAA,EACI,IAAI,eAAe,OAAO;AACtB,SAAK,MAAM,iBAAiB;AAAA,EACpC;AAAA,EACI,IAAI,iBAAiB;AACjB,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,eAAe;AACf,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,aAAa,GAAG;AAChB,QAAI,MAAM,KAAK,MAAM,cAAc;AAC/B;AAAA,IACZ;AACQ,SAAK,MAAM,eAAe;AAC1B,SAAK,cAAc,WAAW,eAAe,WAAW,QAAQ;AAChE,SAAK,mBAAmB,WAAW,eAAe,WAAW;AAAA,EACrE;AAAA,EACI,QAAQ,OAAO,UAAU;AACrB,UAAM,YAAY,IAAI,cAAc,MAAM,OAAO,QAAQ;AAEzD,UAAM,aAAa,IAAI,wBAAwB,KAAK,MAAM,kBAAkB,SAAS;AAErF,WAAO;AAAA,EACf;AAAA,EACI,QAAQ;AAAA,EAEZ;AACA;AC/0CO,MAAM,YAAY,CAAC,UAAU;AAChC,MAAI,SAAS;AACb,QAAM,UAAU,MAAM;AAClB,UAAM,gBAAiB;AACvB,UAAM,iBAAkB;AACxB,QAAI,CAAC,MAAM,mBAAmB;AAE1B,YAAM,aAAc;AACpB,iBAAW,SAAS,kBAAkB;AACtC,UAAI,CAAC,QAAQ;AACT,YAAI,MAAM,aAAa,gBAAgB;AACnC,gBAAM,aAAa,QAAS;AAAA,QAChD;AACgB,cAAM,SAAS,KAAK,MAAM;AAC1B,iBAAS;AAAA,MACzB;AACY,YAAM,iBAAkB;AACxB;AAAA,IACZ;AACQ,aAAS;AACT,UAAM,UAAW;AACjB,UAAM,iBAAkB;AACxB,0BAAsB,OAAO;AAAA,EAChC;AACD,wBAAsB,OAAO;AACjC;AAKO,MAAM,eAAe,MAAM;AAC9B,SAAO,cAAc,YAAY,IAAG,IAAK,KAAK,IAAK;AACvD;AClCO,MAAM,iBAAiB;AAAA,EAAvB;AACH,4CAAmB,oBAAI,IAAK;AAAA;AAAA,EAC5B,kBAAkB,WAAW;AACzB,SAAK,iBAAiB,IAAI,SAAS;AAAA,EAC3C;AAAA,EACI,oBAAoB,WAAW;AAC3B,SAAK,iBAAiB,OAAO,SAAS;AAAA,EAC9C;AAAA,EACI,OAAO,IAAI;AACP,SAAK,iBAAiB,QAAQ,CAAC,cAAc;AACzC,gBAAU,OAAO,EAAE;AAAA,IAC/B,CAAS;AAAA,EACT;AACA;ACbO,IAAI;AAAA,CACV,SAAUM,cAAa;AACpB,EAAAA,aAAYA,aAAY,SAAS,IAAI,CAAC,IAAI;AAC1C,EAAAA,aAAYA,aAAY,OAAO,IAAI,CAAC,IAAI;AACxC,EAAAA,aAAYA,aAAY,OAAO,IAAI,CAAC,IAAI;AACxC,EAAAA,aAAYA,aAAY,OAAO,IAAI,CAAC,IAAI;AACxC,EAAAA,aAAYA,aAAY,iBAAiB,IAAI,CAAC,IAAI;AAClD,EAAAA,aAAYA,aAAY,YAAY,IAAI,CAAC,IAAI;AACjD,GAAG,gBAAgB,cAAc,GAAG;AAU7B,MAAM,gBAAgB,aAAa;AAAA,EAiBtC,YAAY,WAAW;AACnB,UAAO;AAjBX;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAa;AACb,iCAAQ;AACR,iCAAQ;AACR,4CAAmB,oBAAI,IAAK;AAC5B,sCAAa;AACb,oDAA2B;AAC3B,gCAAO,YAAY;AACnB,0CAAiB;AAGb,SAAK,YAAY;AAAA,EACzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeI,mBAAmB,OAAO,YAAY;;AAClC,UAAM,UAAU,KAAK,iBAAiB;AACtC,QAAI,YAAY;AACZ,WAAK,iBAAiB,IAAI,KAAK;AAC/B,YAAM,UAAU,KAAK,iBAAiB;AACtC,UAAI,UAAU,WAAW,YAAY,GAAG;AAEpC,aAAK,aAAa;AAClB,aAAK,2BAA2B,KAAK,UAAU;AAC/C,SAAAN,MAAA,KAAK,yBAAL,gBAAAA,IAAA,WAA4B;AAAA,MAC5C;AAAA,IACA,OACa;AACD,WAAK,iBAAiB,OAAO,KAAK;AAClC,YAAM,UAAU,KAAK,iBAAiB;AACtC,UAAI,UAAU,WAAW,YAAY,GAAG;AAEpC,aAAK,aAAa;AAClB,aAAK,2BAA2B,KAAK,UAAU;AAC/C,SAAAC,MAAA,KAAK,yBAAL,gBAAAA,IAAA,WAA4B;AAAA,MAC5C;AAAA,IACA;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,IAAI,aAAa;AAEb,UAAM,aAAa,KAAK,UAAU,SAAS,iBAAiB,IAAI;AAEhE,WAAO,eAAe,MAAM,cAAc,EAAE,OAAO,YAAY;AAC/D,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,SAAS,UAAU,MAAM;AACrB,QAAI,KAAK,UAAU,OAAO;AAEtB,WAAK,QAAQ;AACb,UAAI,UAAU,UAAU;AACpB,cAAM,aAAa;AACnB,aAAK,aAAa,WAAW,CAAC;AAAA,MAC9C,WACqB,UAAU,UAAU;AACzB,cAAM,aAAa;AACnB,aAAK,QAAQ,WAAW,CAAC;AAAA,MACzC;AACY,WAAK,KAAK,OAAO,GAAG,IAAI;AAAA,IACpC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,OAAO,aAAa,OAAO;AACvB,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,OAAO,gBAEP,OAAO;AACH,WAAO,CAAE;AAAA,EACjB;AACA;AChJA,SAAS,oBAAoB;AAGzB,WAAS,gBAAgB,UAAU;AAC/B,WAAO,SAAS,QAAQ,WAAW,MAAM;AAAA,EACjD;AACI,WAAS,SAAS,KAAK,kBAAkB,GAAG,GAAG,OAAO,QAAQ;AAC1D,WAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC1C,UAAI,MAAM,IAAI,eAAgB;AAC9B,UAAI,KAAK,OAAO,KAAK,IAAI;AACzB,UAAI,eAAe;AACnB,UAAI,SAAS,WAAY;AACrB,YAAI,IAAI,WAAW,KAAK;AACpB,iBAAO,OAAO,IAAI,MAAM,2BAA2B,IAAI,UAAU,CAAC;AAAA,QACtF;AACgB,YAAI,OAAO,IAAI;AACQ,6BAAqB,SACtC,mBACA,gBAAgB,KAAK,IAAI;AAmC/B,0BAAkB,IAAI,EACjB,KAAK,SAAU,MAAM;AACtB,kBAAQ,EAAE,MAAM,iBAAkC,CAAE;AAAA,QACvD,GACI,MAAM,SAAU,OAAO;AACxB,iBAAO,KAAK;AAAA,QAChC,CAAiB;AAAA,MACJ;AACD,UAAI,UAAU,WAAY;AACtB,eAAO,IAAI,MAAM,yDAAyD,CAAC;AAAA,MAC9E;AACD,UAAI,KAAM;AAAA,IACtB,CAAS;AAAA,EACT;AACI,OAAK,YAAY,CAAC,UAAU;AACxB,QAAI,MAAM,MAAM,KAAK;AACrB,QAAI,KAAK,MAAM,KAAK;AACpB,QAAI,mBAAmB,MAAM,KAAK;AAC1B,UAAM,KAAK;AACX,UAAM,KAAK;AACP,UAAM,KAAK;AACV,UAAM,KAAK;AACxB,aAAS,KAAK,gBAAqC,EAC9C,KAAK,SAAU,MAAM;AACtB,WAAK,YAAY,EAAE,IAAQ,KAAU,MAAY;AAAA,IACpD,GACI,MAAM,SAAU,OAAO;AACxB,WAAK,YAAY,EAAE,IAAQ,KAAU,OAAO,MAAM,SAAS;AAAA,IACvE,CAAS;AAAA,EACJ;AACL;AAEO,MAAM,mBAAmB;AAAA,EAM5B,YAAYM,kBAAiB,0BAA0B;AALvD,+CAAsB;AACtB,0CAAiB,CAAE;AACnB,mCAAU,CAAE;AACZ,uCAAc;AACd,kCAAS;AAEL,SAAK,UAAU,KAAK,cAAcA,kBAAiB,wBAAwB;AAC3E,SAAK,QAAQ,QAAQ,CAAC,WAAW;AAC7B,aAAO,YAAY,KAAK,cAAc,KAAK,IAAI;AAAA,IAC3D,CAAS;AAAA,EACT;AAAA,EACI,cAAc,OAAO;AACjB,UAAM,EAAE,IAAI,MAAM,MAAO,IAAG,MAAM;AAClC,UAAM,MAAM,KAAK,eAAe,EAAE;AAClC,QAAI,KAAK;AACL,YAAM,CAAC,SAAS,MAAM,IAAI;AAC1B,aAAO,KAAK,eAAe,EAAE;AAC7B,UAAI,OAAO;AACP,eAAO,IAAI,MAAM,KAAK,CAAC;AAAA,MACvC,OACiB;AACD,gBAAQ,IAAI;AAAA,MAC5B;AAAA,IACA;AAAA,EACA;AAAA,EACI,cAAcC,cAAa,GAAG,0BAA0B;AACpD,QAAI,aAAa,IAAI,yBAAkB,SAAQ,GAAE;AAEjD,UAAM,kBAAkB,yBAAyB,UAAU,SAAS;AACpE,UAAM,eAAe,yBAAyB,OAAO,SAAS;AAC9D,iBAAa,WAAW,QAAQ,iDAAiD,0CAA0C,wBAAe,IAAG;AAC7I,iBAAa,WAAW,QAAQ,8CAA8C,uCAAuC,qBAAY,IAAG;AACpI,UAAM,OAAO,IAAI,KAAK,CAAC,WAAW,QAAQ,iBAAiB,EAAE,CAAC,GAAG;AAAA,MAC7D,MAAM;AAAA,IAClB,CAAS;AACD,UAAM,WAAW,KAAK,MAAM,MAAM,WAAW,gBAAgB,IAAI;AACjE,UAAM,UAAU,CAAE;AAClB,aAAS,IAAI,GAAG,IAAIA,aAAY,KAAK;AACjC,YAAM,SAAS,IAAI,OAAO,OAAO;AAEjC,aAAO,YAAY;AAAA,QACf,MAAM;AAAA,QACN,SAAS;AAAA,MACzB,CAAa;AACD,cAAQ,KAAK,MAAM;AAAA,IAC/B;AACQ,WAAO;AAAA,EACf;AAAA,EACI,gBAAgB;AACZ,UAAM,SAAS,KAAK,QAAQ,KAAK,WAAW;AAC5C,SAAK,eAAe,KAAK,cAAc,KAAK,KAAK,QAAQ;AACzD,WAAO;AAAA,EACf;AAAA,EACI,SAAS,KAAK,kBAAkB,IAAI,IAAI,IAAI,IAAI;AAC5C,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAI;AACA,YAAI,KAAK,SAAS;AACd,gBAAM,KAAK,KAAK;AAChB,eAAK,eAAe,EAAE,IAAI,CAAC,SAAS,MAAM;AAC1C,gBAAM,aAAa,KAAK,cAAe;AACvC,cAAI,YAAY;AACZ,uBAAW,YAAY;AAAA,cACnB;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,YAC5B,CAAyB;AAAA,UACzB;AAAA,QACA;AAAA,MACA,SACmB,OAAO;AACV,eAAO,KAAK;AAAA,MAC5B;AAAA,IACA,CAAS;AAAA,EACT;AACA;ACjKO,MAAM,gBAAN,MAAM,sBAAqB,QAAQ;AAAA,EAGtC,YAAY,WAAW,OAAO;AAC1B,UAAM,SAAS;AAHnB,gCAAO,YAAY;AACnB;AAGI,SAAK,QAAQ,cAAa,gBAAgB,SAAS,EAAE;AAAA,EAC7D;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,MAAM,QAAQ;AAAA,EAC3B;AAAA,EACI,MAAM,iBAAiB;AACnB,UAAM,YAAY,IAAI,WAAW,CAAC;AAClC,QAAI,KAAK,UAAU,YAAY;AAC3B,gBAAU,CAAC,IAAI;AACf,gBAAU,CAAC,IAAI;AACf,gBAAU,CAAC,IAAI;AACf,gBAAU,CAAC,IAAI;AAAA,IAC3B,OACa;AACD,gBAAU,CAAC,IAAK,KAAK,SAAS,KAAM;AACpC,gBAAU,CAAC,IAAK,KAAK,SAAS,IAAK;AACnC,gBAAU,CAAC,IAAI,KAAK,QAAQ;AAC5B,gBAAU,CAAC,IAAK,KAAK,UAAU,KAAM;AAAA,IACjD;AACQ,WAAO;AAAA,MACH,MAAM;AAAA,MACN,kBAAkB;AAAA,IACrB;AAAA,EACT;AAAA,EACI,OAAO,aAAa,OAAO;AACvB,UAAM,gBAAgB,cAAa,gBAAgB,KAAK;AACxD,WAAO,gBAAgB,qBAAc;AAAA,EAC7C;AAAA,EACI,OAAO,gBAAgB,OAAO;AAC1B,WAAO;AAAA,MACH,OAAO,MAAM,SAAS;AAAA,IACzB;AAAA,EACT;AAEA;AADI,cAzCS,eAyCF;AAzCJ,IAAM,eAAN;ACJA,SAAS,6BAA6B,KAAK;AAC9C,SAAO,eAAe,KAAK,GAAG;AAClC;AAMO,MAAM,wBAAwB,OAAO,QAAQ;AAChD,QAAM,WAAW,MAAM,MAAM,GAAG;AAChC,QAAM,cAAc,MAAM,SAAS,YAAa;AAChD,MAAI,IAAI,QAAQ,MAAM,MAAM,IAAI;AAC5B,WAAO,YAAY,WAAW;AAAA,EACtC;AACI,SAAO,YAAY,WAAW;AAClC;AAMA,MAAM,cAAc,OAAO,WAAW;AAClC,QAAM,OAAO,IAAI,SAAS,MAAM;AAChC,QAAM,eAAe,KAAK,UAAU,EAAE,MAAM,WAAW,OAAO;AAC9D,QAAM,UAAU,CAAE;AAClB,QAAM,OAAO;AAAA,IACT,kBAAkB,KAAK,UAAU,IAAI,YAAY;AAAA,IACjD,YAAY,KAAK,UAAU,IAAI,YAAY;AAAA,IAC3C,aAAa,KAAK,UAAU,IAAI,YAAY;AAAA,IAC5C,sBAAsB,KAAK,UAAU,IAAI,YAAY;AAAA,IACrD,qBAAqB,KAAK,UAAU,IAAI,YAAY;AAAA,EACvD;AACD,MAAI,SAAS;AAGb,YAAU,KAAK;AACf,WAAS,IAAI,GAAG,IAAI,KAAK,sBAAsB,KAAK;AAChD,UAAM,YAAY,KAAK,UAAU,MAAM;AACvC,cAAU;AACV,YAAQ,KAAK,KAAK,OAAO,MAAM,QAAQ,SAAS,CAAC;AACjD,cAAU;AAAA,EAClB;AACI,SAAO;AAAA,IACH,MAAM;AAAA,MACF,kBAAkB,KAAK;AAAA,MACvB;AAAA,MACA,OAAO,KAAK,cAAc;AAAA,MAC1B,QAAQ,KAAK,eAAe;AAAA,MAC5B,MAAM;AAAA,IACT;AAAA,IACD,kBAAkB;AAAA,EACrB;AACL;AAMA,MAAM,cAAc,OAAO,WAAW;AAElC,QAAM,kBAAkB;AAExB,QAAM,gBAAgB;AACtB,QAAM,WAAW;AACjB,QAAM,YAAY;AAClB,QAAM,iBAAiB;AACvB,QAAM,cAAc;AACpB,QAAM,cAAc;AACpB,QAAM,SAAS,IAAI,WAAW,aAAa,GAAG,eAAe;AAG7D,QAAM,aAAa,OAAO,WAAW,IAAI;AACzC,QAAM,YAAY,IAAI,WAAW,aAAa,UAAU;AACxD,QAAM,UAAU,CAAE;AAClB,QAAM,OAAO;AAAA,IACT,YAAY,OAAO,QAAQ;AAAA,IAC3B,aAAa,OAAO,SAAS;AAAA,IAC7B,sBAAsB,OAAO,cAAc,KAAK;AAAA,EACnD;AACD,MAAI,SAAS;AACb,MAAI,QAAQ,KAAK,cAAc;AAC/B,MAAI,SAAS,KAAK,eAAe;AACjC,WAAS,IAAI,GAAG,IAAI,KAAK,sBAAsB,KAAK;AAChD,UAAM,SAAU,QAAQ,KAAM,MAAO,SAAS,KAAM,KAAK;AACzD,UAAM,OAAO,IAAI,WAAW,aAAa,UAAU,aAAa,QAAQ,KAAK;AAC7E,YAAQ,KAAK,IAAI;AACjB,cAAU;AACV,YAAQ,SAAS;AACjB,aAAS,UAAU;AAAA,EAC3B;AACI,SAAO;AAAA,IACH,MAAM;AAAA,MACF,kBAAkB;AAAA,MAClB;AAAA,MACA,OAAO,KAAK,cAAc;AAAA,MAC1B,QAAQ,KAAK,eAAe;AAAA,MAC5B,MAAM;AAAA,IACT;AAAA,IACD,kBAAkB;AAAA,EACrB;AACL;ACnGO,SAAS,WAAW,KAAK;AAC5B,SAAO,WAAW,KAAK,GAAG;AAC9B;AAMO,MAAM,UAAU,CAAC,KAAK,OAAO,QAAQ,IAAI,IAAI,IAAI,OAAO;AAC3D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,UAAM,MAAM,OAAO,WAAW,IAAI;AAClC,iBAAa,GAAG;AAChB,QAAI,wBAAwB;AAC5B,UAAM,MAAM,IAAI,MAAO;AACvB,QAAI,SAAS,MAAM;AACf,YAAM,IAAI,kBAAM;AAChB,YAAM,IAAI,kBAAM;AAChB,YAAM,IAAI,SAAS,IAAI;AACvB,YAAM,IAAI,UAAU,IAAI;AACxB,aAAO,QAAQ;AACf,aAAO,SAAS;AAChB,UAAI,UAAU,KAAK,GAAG,GAAG,GAAG,CAAC;AAC7B,cAAQ;AAAA,QACJ,MAAM,IAAI,aAAa,GAAG,GAAG,kBAAM,GAAG,kBAAM,CAAC;AAAA,QAC7C,kBAAkB;AAAA,MAClC,CAAa;AAAA,IACJ;AACD,QAAI,UAAU,CAAC,QAAQ;AACnB,aAAO,GAAG;AAAA,IACb;AACD,QAAI,MAAM;AAAA,EAClB,CAAK;AACL;ACzBO,MAAM,gBAAN,MAAM,sBAAqB,QAAQ;AAAA,EAGtC,YAAY,WAAW,OAAO;AAC1B,UAAM,SAAS;AAHnB;AACA,gCAAO,YAAY;AAGf,SAAK,QAAQ,cAAa,gBAAgB,KAAK;AAAA,EACvD;AAAA,EACI,gBAAgB,UAAU;AACtB,WAAO,SAAS,QAAQ,WAAW,MAAM;AAAA,EACjD;AAAA,EACI,MAAM,kBAAkB,KAAK,UAAU;AACnC,UAAM,MAAM,IAAI,MAAO;AACvB,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC5B,UAAI,SAAS,MAAM;AACf,gBAAQ,EAAE,MAAM,KAAK,kBAAkB,SAAQ,CAAE;AAAA,MACpD;AACD,UAAI,UAAU,MAAM;AAChB,gBAAQ,KAAK,kDAAkD;AAC/D,gBAAQ,EAAE,MAAM,KAAK,kBAAkB,SAAQ,CAAE;AAAA,MACpD;AACD,UAAI,MAAM;AAAA,IACtB,CAAS;AAAA,EACT;AAAA,EACI,MAAM,kBAAkB,MAAM,kBAAkB,IAAI,IAAI,IAAI,IAAI;AAC5D,UAAM,kBAAkB,8CAAoB,KAAK,KAAK,SAAS,WAAW;AAC1E,UAAM,uBAAuB,KAAK,UAAU;AAC5C,QAAI,qBAAqB,SAAS,QAC9B,OAAO,QACP,OAAO,QACP,OAAO,QACP,OAAO,MAAM;AAEb,YAAM,SAAS,MAAM,kBAAkB,MAAM,IAAI,IAAI,IAAI,IAAI;AAAA,QACzD,kBAAkB,kBAAkB,gBAAgB;AAAA,QACpD,sBAAsB;AAAA,QACtB,kBAAkB;AAAA,MAClC,CAAa;AACD,aAAO,EAAE,MAAM,QAAQ,kBAAkB,gBAAiB;AAAA,IACtE,WACiB,qBAAqB,YAAY,MAAM;AAE5C,YAAM,SAAS,MAAM,kBAAkB,MAAM;AAAA,QACzC,kBAAkB,kBAAkB,gBAAgB;AAAA,QACpD,sBAAsB;AAAA,QACtB,kBAAkB;AAAA,MAClC,CAAa;AACD,aAAO,EAAE,MAAM,QAAQ,kBAAkB,gBAAiB;AAAA,IACtE,OACa;AAGD,aAAO;AAAA,QACH,MAAM,MAAM,kBAAkB,IAAI;AAAA,QAClC,kBAAkB;AAAA,MACrB;AAAA,IACb;AAAA,EACA;AAAA,EACI,MAAM,UAAU,KAAK;AACjB,UAAM,EAAE,kBAAkB,IAAI,IAAI,IAAI,GAAE,IAAK,KAAK;AAClD,QAAI,KAAK,UAAU,yBAAyB,MAAM;AAC9C,UAAI,KAAK,UAAU,cAAc,QAC7B,KAAK,UAAU,uBAAuB,MAAM;AAC5C,eAAO,KAAK,UAAU,mBAAmB,SAAS,KAAK,kBAAkB,IAAI,IAAI,IAAI,EAAE;AAAA,MACvG;AACY,YAAM,OAAO,MAAM,MAAM,GAAG,EAAE,KAAK,CAAC,aAAa,SAAS,MAAM;AAChE,aAAO,KAAK,kBAAkB,MAAM,kBAAkB,IAAI,IAAI,IAAI,EAAE;AAAA,IAChF;AACQ,WAAO,KAAK,kBAAkB,KAAK,8CAAoB,IAAI;AAAA,EACnE;AAAA,EACI,MAAM,iBAAiB;AACnB,UAAM,EAAE,KAAK,kBAAkB,KAAM,IAAG,KAAK;AAC7C,QAAI,QAAQ,MAAM;AACd,aAAO;AAAA,QACH,MAAM;AAAA,MACT;AAAA,IACb;AACQ,QAAI,OAAO,QAAQ,UAAU;AACzB,UAAI,eAAe,WAAW;AAC1B,eAAO;AAAA,UACH,MAAM;AAAA,UACN;AAAA,QACH;AAAA,MACjB;AACY,aAAO;AAAA,QACH,MAAM,IAAK;AAAA,QACX;AAAA,MACH;AAAA,IACb;AACQ,UAAM,cAAc,qBAAqB,GAAG;AAC5C,QAAI,SAAS,WAAW;AACpB,aAAO,KAAK,UAAU,WAAW;AAAA,IAC7C;AACQ,QAAI,SAAS,OAAO;AAChB,aAAO,QAAQ,aAAa,KAAK,MAAM,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,EAAE;AAAA,IACvI;AACQ,QAAI,WAAW,GAAG,MAAM,MAAM;AAC1B,aAAO,QAAQ,aAAa,KAAK,MAAM,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,EAAE;AAAA,IACvI;AACQ,QAAI,SAAS,cAAc;AACvB,aAAO,sBAAsB,WAAW;AAAA,IACpD;AACQ,QAAI,6BAA6B,GAAG,MAAM,MAAM;AAC5C,aAAO,sBAAsB,WAAW;AAAA,IACpD;AAEQ,WAAO,KAAK,UAAU,WAAW;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,OAAO,aAAa,OAAO;;AACvB,UAAM,gBAAgB,cAAa,gBAAgB,KAAK;AAExD,UAAMX,OAAM,cAAc,OAAO,cAAc;AAC/C,QAAI,OAAOA,SAAQ,UAAU;AACzB,aAAO;AAAA,IACnB;AAEQ,QAAI,iBAAiB;AACrB,QAAI,cAAc,OAAO,QAAQ,cAAc,OAAO,MAAM;AACxD,wBAAkB;AAClB,yBAAkBG,MAAA,cAAc,OAAd,OAAAA,MAAoB;AACtC,yBAAkBC,MAAA,cAAc,OAAd,OAAAA,MAAoB;AACtC,wBAAkB,cAAc,MAAM;AACtC,wBAAkB,cAAc,MAAM;AAAA,IAClD;AACQ,WAAO,gBAAgB,OAAAJ,MAAG,KAAI,QAAAK,MAAA,cAAc,qBAAd,OAAAA,MAAkC,QAAS;AAAA,EACjF;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,MAAKF,MAAA,MAAM,QAAN,OAAAA,MAAa;AAAA,MAClB,mBAAkBC,MAAA,MAAM,qBAAN,OAAAA,MAA0B;AAAA;AAAA,MAC5C,MAAKC,MAAA,MAAM,QAAN,OAAAA,MAAa;AAAA,MAClB,OAAM,WAAM,SAAN,YAAc;AAAA,MACpB,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,SAAQ,WAAM,WAAN,YAAgB;AAAA,MACxB,KAAI,WAAM,OAAN,YAAY;AAAA,MAChB,KAAI,WAAM,OAAN,YAAY;AAAA,MAChB,KAAI,WAAM,OAAN,YAAY;AAAA,MAChB,KAAI,WAAM,OAAN,YAAY;AAAA,IACnB;AAAA,EACT;AAEA;AADI,cAhJS,eAgJF;AAhJJ,IAAM,eAAN;ACRA,MAAM,gBAAN,MAAM,sBAAqB,QAAQ;AAAA,EAGtC,YAAY,WAAW,OAAO;AAC1B,UAAM,SAAS;AAHnB;AACA,gCAAO,YAAY;AAGf,SAAK,QAAQ,cAAa,gBAAgB,KAAK;AAAA,EACvD;AAAA,EACI,MAAM,iBAAiB;AACnB,UAAM,EAAE,OAAO,OAAQ,IAAG,KAAK;AAC/B,UAAM,OAAO,QAAQ,SAAS;AAC9B,UAAM,aAAa,IAAI,kBAAkB,IAAI;AAC7C,aAAS,IAAI,GAAG,IAAI,MAAM,KAAK,GAAG;AAC9B,YAAM,IAAI,KAAK,MAAM,KAAK,OAAQ,IAAG,GAAG;AACxC,iBAAW,CAAC,IAAI;AAChB,iBAAW,IAAI,CAAC,IAAI;AACpB,iBAAW,IAAI,CAAC,IAAI;AACpB,iBAAW,IAAI,CAAC,IAAI;AAAA,IAChC;AACQ,WAAO;AAAA,MACH,MAAM,IAAI,UAAU,YAAY,OAAO,MAAM;AAAA,IAChD;AAAA,EACT;AAAA,EACI,OAAO,aAAa,OAAO;AACvB,QAAI,MAAM,YAAY,QAAW;AAC7B,aAAO;AAAA,IACnB;AACQ,UAAM,gBAAgB,cAAa,gBAAgB,KAAK;AACxD,WAAO,gBAAgB,qBAAc,OAAK,KAAI,qBAAc,QAAM,KAAI,qBAAc;AAAA,EAC5F;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOF,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,SAAQC,MAAA,MAAM,WAAN,OAAAA,MAAgB;AAAA,MACxB,UAASC,MAAA,MAAM,YAAN,OAAAA,MAAiB;AAAA,IAC7B;AAAA,EACT;AAEA;AADI,cApCS,eAoCF;AApCJ,IAAM,eAAN;ACCA,MAAM,cAAN,MAAM,oBAAmB,QAAQ;AAAA,EAIpC,YAAY,WAAW,OAAO;AAC1B,UAAM,SAAS;AAJnB;AACA;AACA,gCAAO,YAAY;AAqBnB,4CAAmB,MAAM;AAGrB,WAAK,SAAS,UAAU;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,MAC/B,CAAS;AAAA,IACJ;AACD,4CAAmB,CAAC,QAAQ,UAAU;AAClC,WAAK,SAAS,UAAU,KAAK;AAAA,IAChC;AA5BG,SAAK,QAAQ,YAAW,gBAAgB,SAAS,EAAE;AACnD,SAAK,gBAAgB,KAAK,MAAM;AAKhC,mBAAe,MAAM;AACjB,YAAM,WAAW,KAAK;AACtB,UAAI,SAAS,UAAU,UAAU;AAC7B,aAAK,iBAAiB,UAAU,SAAS,UAAU;AAAA,MACnE,WACqB,SAAS,UAAU,UAAU;AAClC,aAAK,iBAAiB,UAAU,SAAS,KAAK;AAAA,MAC9D;AACY,eAAS,GAAG,UAAU,KAAK,gBAAgB;AAC3C,eAAS,GAAG,UAAU,KAAK,gBAAgB;AAAA,IACvD,CAAS;AAAA,EACT;AAAA,EAYI,qBAAqB,cAAc;AAE/B,SAAK,cAAc,mBAAmB,MAAM,YAAY;AAAA,EAChE;AAAA,EACI,MAAM,iBAAiB;AACnB,WAAO;AAAA,MACH,MAAM,KAAK;AAAA,IACd;AAAA,EACT;AAAA;AAAA,EAEI,OAAO,aAAa,OAAO;AACvB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;AAC1B,WAAO;AAAA,MACH,SAAS,MAAM;AAAA,MACf,GAAG,MAAM,KAAK;AAAA,MACd,GAAG,MAAM,KAAK;AAAA,MACd,OAAO,MAAM,SAAS;AAAA,MACtB,QAAQ,MAAM,UAAU;AAAA,IAC3B;AAAA,EACT;AAEA;AADI,cAzDS,aAyDF;AAzDJ,IAAM,aAAN;ACVA,MAAM,iBAAN,MAAM,uBAAsB,QAAQ;AAAA,EAGvC,YAAY,WAAW,OAAO;AAC1B,UAAM,SAAS;AAHnB;AACA,gCAAO,YAAY;AAGf,SAAK,QAAQ,eAAc,gBAAgB,SAAS,EAAE;AAAA,EAC9D;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,MAAM,QAAQ;AAAA,EAC3B;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,SAAK,MAAM,SAAS;AAAA,EAC5B;AAAA,EACI,MAAM,iBAAiB;AACnB,WAAO;AAAA,MACH,MAAM;AAAA,MACN,kBAAkB;AAAA,IACrB;AAAA,EACT;AAAA,EACI,OAAO,gBAAgB,OAAO;AAC1B,WAAO;AAAA,MACH,OAAO,MAAM,SAAS;AAAA,MACtB,QAAQ,MAAM,UAAU;AAAA,IAC3B;AAAA,EACT;AAEA;AADI,cA/BS,gBA+BF;AA/BJ,IAAM,gBAAN;ACMA,MAAM,2BAA2B,aAAa;AAAA,EAuCjD,YAAYK,kBAAiB;AACzB,UAAO;AApCX;AAAA;AAAA;AAAA,oCAAW,oBAAI,IAAK;AAIpB;AAAA;AAAA;AAAA,2CAAkB,oBAAI,QAAS;AAI/B;AAAA;AAAA;AAAA,0CAAiB,CAAE;AACnB,8CAAqB;AACrB,gDAAuB,CAAC,CAAC,KAAK;AAC9B,gDAAuB;AAAA,MACnB,OAAO;AAAA,MACP,SAAS;AAAA,MACT,MAAM;AAAA,IACT;AACD,qCAAY,CAAC,CAAC,KAAK;AAQnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAY;AAGR,SAAK,0BAAyB,EACzB,KAAK,CAAC,WAAW;AAClB,WAAK,uBACD,OAAO,SAAS,OAAO,WAAW,OAAO;AAC7C,WAAK,uBAAuB;AAC5B,UAAI,CAAC,KAAK,sBAAsB;AAC5B,gBAAQ,KAAK,8FAA8F;AAAA,MAC3H;AACY,UAAI,KAAK,wBACL,KAAK,aACLA,mBAAkB,GAAG;AACrB,aAAK,qBAAqB,IAAI,mBAAmBA,kBAAiB,MAAM;AAAA,MACxF,OACiB;AACD,gBAAQ,KAAK,8FAA8F;AAAA,MAC3H;AACY,WAAK,KAAK,aAAa;AAAA,IAC1B,GACI,MAAM,CAAC,MAAM;AACd,cAAQ,KAAK,8FAA8F;AAE3G,WAAK,KAAK,aAAa;AAAA,IACnC,CAAS;AACD,SAAK,oBAAoB,gBAAgB,YAAY;AACrD,SAAK,oBAAoB,gBAAgB,YAAY;AACrD,SAAK,oBAAoB,gBAAgB,YAAY;AACrD,SAAK,oBAAoB,cAAc,UAAU;AACjD,SAAK,oBAAoB,iBAAiB,aAAa;AAAA,EAC/D;AAAA,EACI,MAAM,4BAA4B;;AAG9B,UAAM,gBAAgB,IAAI,WAAW;AAAA,MACjC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,IACZ,CAAS;AACD,UAAM,UAAU;AAAA,MACZ,OAAO;AAAA,MACP,SAAS;AAAA,MACT,MAAM;AAAA,IACT;AAED,UAAM,OAAO,IAAI,KAAK,CAAC,aAAa,GAAG,EAAE,MAAM,aAAa;AAC5D,UAAM,SAAS,MAAM,kBAAkB,IAAI;AAC3C,KAAAP,MAAA,OAAO,UAAP,gBAAAA,IAAA;AACA,YAAQ,QAAQ;AAEhB,QAAI;AACA,YAAM,UAAU,EAAE,kBAAkB,OAAQ;AAC5C,YAAM,oBAAoB,MAAM,kBAAkB,MAAM,OAAO;AAC/D,OAAAC,MAAA,kBAAkB,UAAlB,gBAAAA,IAAA;AACA,cAAQ,UAAU;AAAA,IAC9B,SACe,GAAG;AAAA,IAElB;AAEQ,QAAI;AACA,YAAM,wBAAwB,MAAM,kBAAkB,MAAM,GAAG,GAAG,GAAG,GAAG;AAAA,QACpE,kBAAkB;AAAA,MAClC,CAAa;AACD,OAAAC,MAAA,sBAAsB,UAAtB,gBAAAA,IAAA;AACA,cAAQ,OAAO;AAAA,IAC3B,SACe,GAAG;AAAA,IAElB;AACQ,WAAO;AAAA,EACf;AAAA,EACI,oBAAoB,aAAa,cAAc;AAC3C,SAAK,eAAe,WAAW,IAAI;AAAA,EAC3C;AAAA,EACI,YAAY,aAAa,OAAO;AAC5B,QAAI;AACJ,UAAM,eAAe,KAAK,eAAe,WAAW;AACpD,QAAI,CAAC,cAAc;AACf,YAAM,IAAI,MAAM,iBAAiB,oBAAW,sBAAqB;AAAA,IAC7E;AACQ,QAAI,CAAC,SAAS;AACV,YAAM,WAAW,aAAa,aAAa,KAAK;AAChD,UAAI,YAAY,KAAK,SAAS,IAAI,QAAQ,GAAG;AAGzC,kBAAU,KAAK,SAAS,IAAI,QAAQ;AAAA,MACpD,OACiB;AAED,kBAAU,IAAI,aAAa,MAAM,KAAK;AACtC,YAAI,UAAU;AACV,eAAK,mBAAmB,SAAS,QAAQ;AAAA,QAC7D;AAAA,MACA;AAAA,IACA;AACQ,WAAO;AAAA,EACf;AAAA,EACI,mBAAmB,SAAS,UAAU;AAClC,UAAM,EAAE,UAAU,gBAAe,IAAK;AACtC,aAAS,IAAI,UAAU,OAAO;AAC9B,oBAAgB,IAAI,SAAS,QAAQ;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,uBAAuB,SAAS;AAC5B,UAAM,EAAE,iBAAiB,SAAQ,IAAK;AACtC,UAAM,WAAW,gBAAgB,IAAI,OAAO;AAC5C,QAAI,UAAU;AACV,eAAS,OAAO,QAAQ;AAAA,IACpC;AAAA,EACA;AACA;AChQA,MAAM,oBAAoB;AAAA,EACtB,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,SAAS;AACb;AACA,MAAM,qBAAqB,CAAC,WAAW;AACnC,MAAI,OAAO,WAAW,UAAU;AAC5B,WAAO;AAAA,EACf;AACI,SAAO,kBAAkB,MAAM,KAAK;AACxC;AACA,SAAS,iBAAiB,sBAAsB,QAAQ,UAAU,OAAO,SAAS;AAC9E,MAAI,SAAS,mBAAmB,QAAQ;AACxC,aAAW,eAAe,sBAAsB;AAC5C,UAAM,YAAY,YAAY,MAAM;AACpC,QAAI,CAAC,WAAW;AACZ;AAAA,IACZ;AACQ,QAAI,UAAU,SAAS,GAAG;AAEtB,cAAQ,KAAK,wDAAwD,eAAM,8CAA6C;AACxH,aAAO,UAAU,SAAS,KAAM,EAAC;AAAA,IAC7C;AACQ,UAAM,YAAY,oBAAI,IAAK;AAC3B,eAAW,YAAY,WAAW;AAC9B,YAAM,mBAAmB,mBAAmB,SAAS,YAAY,MAAM;AACvE,UAAI,qBAAqB,UACrB,SAAS,YAAY,UAAU,SAC/B,SAAS,YAAY,YAAY,SAAS;AAC1C,eAAO;AAAA,MACvB;AACY,gBAAU,IAAI,kBAAkB,QAAQ;AAAA,IACpD;AAEQ,UAAM,MAAM,mCAAmC,eAAM,aAAY,eAAM,YAAW,cAAK,cAAa,gBAAO;AAC3G,YAAQ,MAAM,GAAG;AAGjB,QAAI,WAAW,OAAO,UAAU,IAAI,GAAG,GAAG;AACtC,aAAO,UAAU,IAAI,GAAG;AAAA,IACpC;AACQ,QAAI,WAAW,OAAO,UAAU,IAAI,GAAG,GAAG;AACtC,aAAO,UAAU,IAAI,GAAG;AAAA,IACpC;AACQ,QAAI,SAAS,KAAK;AACd,aAAO,SAAS,GAAG;AACf,YAAI,UAAU,IAAI,MAAM,GAAG;AACvB,iBAAO,UAAU,IAAI,MAAM;AAAA,QAC/C;AACgB,kBAAU;AAAA,MAC1B;AAEY,eAAS;AAAA,IACrB;AACQ,WAAO,SAAS,KAAM;AAClB,UAAI,UAAU,IAAI,MAAM,GAAG;AACvB,eAAO,UAAU,IAAI,MAAM;AAAA,MAC3C;AACY,gBAAU;AAAA,IACtB;AAEQ,aAAS;AACT,WAAO,SAAS,GAAG;AACf,UAAI,UAAU,IAAI,MAAM,GAAG;AACvB,eAAO,UAAU,IAAI,MAAM;AAAA,MAC3C;AACY,gBAAU;AAAA,IACtB;AAAA,EACA;AACI;AACJ;AACO,MAAM,cAAc;AAAA,EAGvB,YAAY,eAAe;AAF3B;AACA,qCAAY,oBAAI,IAAK;AAEjB,SAAK,gBAAgB;AAAA,EAE7B;AAAA,EACI,YAAY,MAAM;AAEd,eAAW,QAAQ,KAAK,eAAe;AACnC,YAAM,KAAK,KAAK,cAAc,IAAI;AAClC,UAAI,MAAM,GAAG,oBAAoB,IAAI,GAAG;AACpC,WAAG,YAAY,IAAI;AAAA,MACnC;AAAA,IACA;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,gBAAgB,sBAAsB,OAAO,cAAc;AACvD,UAAM,EAAE,YAAY,YAAY,WAAW,YAAa,IAAG;AAC3D,UAAM,kBAAkB,GAAG,qBAAY,KAAI,mBAAU,KAAI,kBAAS,KAAI,mBAAU,KAAI;AACpF,QAAI,KAAK,UAAU,IAAI,eAAe,MAAM,MAAM;AAC9C,aAAO,KAAK,UAAU,IAAI,eAAe;AAAA,IACrD;AACQ,UAAM,eAAe,iBAAiB,sBAAsB,YAAY,YAAY,WAAW,WAAW;AAC1G,QAAI,iBAAiB,QAAW;AAC5B,WAAK,UAAU,IAAI,iBAAiB,YAAY;AAAA,IAC5D;AACQ,WAAO;AAAA,EACf;AACA;AC/GO,MAAM,WAAW;AAAA;AAAA,EAEpB,OAAO,aAAa,OAAO;AACvB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;AAC1B,WAAO,CAAE;AAAA,EACjB;AACA;ACPO,SAASO,eAAa,KAAK,MAAM,QAAQ;AAC5C,QAAM,SAAS,IAAI,aAAa,IAAI;AACpC,MAAI,CAAC,QAAQ;AACT,UAAM,UAAU,IAAI,SAAU;AAC9B,UAAM,IAAI,MAAM,gCAAgC,gBAAS,IAAI,gBAAgB,kBAAkB,mBAAiB,KAAI,iBAAU,wBAAwB,kBAAY,GAAI;AAAA,EAC9K;AACI,MAAI,aAAa,QAAQ,MAAM;AAC/B,MAAI,cAAc,MAAM;AACxB,QAAM,UAAU,CAAC,CAAC,IAAI,mBAAmB,QAAQ,IAAI,cAAc;AACnE,MAAI,SAAS;AACT,WAAO;AAAA,EACf;AACI,UAAQ,MAAM,IAAI,iBAAiB,MAAM,CAAC;AAC1C,MAAI,aAAa,MAAM;AAC3B;AACO,SAAS,cAAc,KAAK,cAAc,gBAAgB;AAC7D,QAAM,UAAU,IAAI,cAAe;AACnC,MAAI,CAAC,SAAS;AACV,UAAM,IAAI,MAAM,0BAA0B;AAAA,EAClD;AACI,MAAI,aAAa,SAAS,YAAY;AACtC,MAAI,aAAa,SAAS,cAAc;AACxC,MAAI,YAAY,OAAO;AACvB,QAAM,UAAU,CAAC,CAAC,IAAI,oBAAoB,SAAS,IAAI,WAAW;AAClE,MAAI,SAAS;AACT,WAAO;AAAA,EACf;AACI,UAAQ,KAAK,IAAI,kBAAkB,OAAO,CAAC;AAC3C,MAAI,cAAc,OAAO;AACzB,SAAO;AACX;AC5BO,MAAM,wBAAwB,WAAW;AAAA,EAmB5C,YAAY,SAAS;AACjB,UAAO;AAnBX,iDAAwB;AACxB,wCAAe;AACf;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGI,UAAMJ,YAAY,KAAK,WAAW,QAAQ;AAC1C,UAAM,MAAO,KAAK,MAAM,KAAK,SAAS;AACtC,SAAK,0BAA0B,QAAQ,2BAA2B;AAElE,UAAM,SAAS,IAAI,SAAU;AAC7B,UAAM,qBAAsB,UAAU,QAAQ,oBACzC,CAAC,UAAU,QAAQ,oBACpB,CAAE;AACN,UAAM,YAAY,SAAS,QAAQ;AACnC,uBAAmB,QAAQ,CAAC,kBAAkB;AAC1C,UAAI,CAAC,IAAI,aAAa,aAAa,GAAG;AAClC,cAAM,IAAI,MAAM,WAAW,YAAK,YAAY,MAAI,0BAAyB,sBAAa,gBAAe,kBAAS,oBAAmB;AAAA,MACjJ;AAAA,IACA,CAAS;AAMD,UAAM,gBAAgB,QAAQ,iBAC1B,KAAK,YAAY;AACrB,QAAI,CAAC,eAAe;AAChB,YAAM,IAAI,MAAM,WAAW,YAAK,YAAY,MAAI,8BAA6B;AAAA,IACzF,WACiB,WAAU,+CAAe,SAAQ;AACtC,oBAAc,WAAW,cAAc,OAAO;AAC9C,oBAAc,SAAS,cAAc,OAAO;AAC5C,aAAO,cAAc;AAAA,IACjC;AACQ,UAAM,eAAeA,UAAS,OAAO,WAAW;AAChD,UAAM,eAAe,cAAc,kBAAkB,WAC/C,cAAc,OAAO,YAAY,IACjC,cAAc;AACpB,UAAM,iBAAiB,cAAc,oBAAoB,WACnD,cAAc,SAAS,YAAY,IACnC,cAAc;AACpB,UAAM,eAAeI,eAAa,KAAK,IAAI,eAAe,YAAY;AACtE,UAAM,iBAAiBA,eAAa,KAAK,IAAI,iBAAiB,cAAc;AAC5E,QAAI,CAAC,gBAAgB,CAAC,gBAAgB;AAClC,YAAM,IAAI,MAAM,6CAA6C;AAAA,QACzD,CAAC,gBAAgB;AAAA,QACjB,CAAC,kBAAkB;AAAA,MACnC,EACiB,OAAO,OAAO,EACd,KAAK,OAAO,EAAG;AAAA,IAChC;AACQ,UAAM,UAAU,cAAc,KAAK,cAAc,cAAc;AAC/D,QAAI,CAAC,SAAS;AACV,YAAM,IAAI,MAAM,0BAA0B;AAAA,IACtD;AACQ,SAAK,UAAU;AACf,SAAK,qBAAqB,CAAE;AAC5B,SAAK,mBAAmB,CAAE;AAC1B,SAAK,iBAAiB,CAAE;AACxB,KAAC,GAAG,QAAQ,UAAU,EAAE,QAAQ,CAAC,kBAAkB;AAC/C,YAAM,WAAW,IAAI,kBAAkB,KAAK,SAAS,aAAa;AAClE,UAAI,WAAW,GAAG;AACd,cAAM,IAAI,MAAM,GAAG,YAAK,YAAY,MAAI,4CAA2C,sBAAa,KAAI;AAAA,MACpH;AACY,YAAM,SAAS,IAAI,aAAc;AACjC,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,MAAM,GAAG,YAAK,YAAY,MAAI,6CAA4C,sBAAa,IAAG;AAAA,MACpH;AACY,WAAK,mBAAmB,aAAa,IAAI;AACzC,WAAK,iBAAiB,aAAa,IAAI;AACvC,WAAK,eAAe,KAAK,aAAa;AAAA,IAClD,CAAS;AACD,SAAK,mBAAmB,CAAE;AAC1B,SAAK,eAAe,CAAE;AACtB,YAAQ,SAAS,QAAQ,CAAC,YAAY;AAClC,YAAM,WAAW,IAAI,mBAAmB,KAAK,SAAS,QAAQ,IAAI;AAClE,WAAK,aAAa,QAAQ,IAAI,IAAI,QAAQ;AAC1C,UAAI,CAAC,UAAU;AACX,gBAAQ,KAAK,WAAW,YAAK,YAAY,MAAI,0CAAyC,eAAQ,MAAI,IAAG;AACrG;AAAA,MAChB;AACY,WAAK,iBAAiB,QAAQ,IAAI,IAAI;AAAA,IAClD,CAAS;AAAA,EACT;AAAA,EACI,oBAAoB,UAAU,QAAQ,WAAW;AAC7C,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,wBAAwB,QAAQ;AACpC,QAAI,oBAAoB,QAAQ,UAAU,UAAU,MAAM,UAAU,MAAM,UAAU,YAAY,UAAU,QAAQ,UAAU,MAAM;AAAA,EAC1I;AAAA,EACI,iBAAiB,UAAU;AACvB,SAAK,IAAI,yBAAyB,QAAQ;AAAA,EAClD;AAAA,EACI,oBAAoB;AAChB,eAAW,OAAO,KAAK,oBAAoB;AACvC,WAAK,iBAAiB,KAAK,mBAAmB,GAAG,CAAC;AAAA,IAC9D;AACQ,SAAK,wBAAwB;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,oBAAoB,QAAQ,QAAQ;AAChC,WAAO;AAAA,EACf;AAAA,EACI,aAAa,UAAU,OAAO;AAC1B,SAAK,qBAAqB,SAAS,OAAO;AAC1C,QAAI,SAAS,SAAS,SAAS,GAAG;AAC9B,WAAK,aAAa,SAAS,QAAQ;AAAA,IAC/C;AACQ,UAAM,EAAE,KAAK,wBAAwB,gBAAiB,IAAG;AAEzD,QAAI,mBAAmB,wBAAwB;AAC3C;AAAA,IACZ;AAGQ,QAAI,wBAAwB;AACxB,YAAM,EAAE,OAAO,OAAQ,IAAG,SAAS,yBAAyB,CAAE;AAG9D,UAAI,UAAU,KAAK,mBAAmB,cAAc,GAAG,CAAG;AAE1D,UAAI,UAAU,KAAK,mBAAmB,cAAc,GAAG,wBAAS,GAAG,0BAAU,CAAC;AAAA,IAC1F,OACa;AACD,UAAI,UAAU,KAAK,mBAAmB,cAAc,GAAG,SAAS,QAAQ,UAAU;AAClF,UAAI,UAAU,KAAK,mBAAmB,cAAc,GAAG,IAAI,OAAO,OAAO,IAAI,OAAO,MAAM;AAAA,IACtG;AACQ,QAAI,OAAO;AAGP,UAAI,OAAO,OAAO,aAAa,GAAG;AAC9B,YAAI,aAAa,MAAM;AACvB,YAAI,CAAC,YAAY;AACb,uBAAa,SAAS;AAAA,QAC1C;AACgB,YAAI,UAAU,KAAK,mBAAmB,cAAc,GAAG,WAAW,OAAO,WAAW,MAAM;AAAA,MAC1G;AACY,UAAI,OAAO,OAAO,QAAQ,GAAG;AACzB,YAAI,QAAQ,MAAM;AAClB,YAAI,CAAC,OAAO;AACR,kBAAQ,SAAS;AAAA,QACrC;AACgB,YAAI,UAAU,KAAK,mBAAmB,SAAS,GAAG,KAAK;AAAA,MACvE;AACY,WAAK,UAAU,KAAK;AAAA,IAChC;AAAA,EACA;AAAA,EACI,mBAAmB,MAAM;AACrB,WAAO,KAAK,iBAAiB,IAAI,KAAK;AAAA,EAC9C;AAAA,EACI,qBAAqB,QAAQ;AACzB,QAAI,KAAK,0BAA0B,QAAQ;AACvC;AAAA,IACZ;AACQ,eAAW,iBAAiB,KAAK,oBAAoB;AACjD,YAAM,iBAAiB,OAAO,UAAU,aAAa;AACrD,YAAM,eAAe,OAAO,iBAAiB,aAAa;AAC1D,mBAAa,gBAAgB,eAAe,sBAAa,cAAa;AACtE,mBAAa,YAAY;AACzB,WAAK,oBAAoB,KAAK,mBAAmB,aAAa,GAAG,gBAAgB,YAAY;AAAA,IACzG;AACQ,SAAK,wBAAwB;AAAA,EACrC;AAAA,EACI,UAAU,OAAO;AAAA,EAErB;AAAA,EACI,aAAa,UAAU;AAAA,EAE3B;AAAA,EACI,SAAS;AACL,SAAK,IAAI,WAAW,KAAK,OAAO;AAChC,QAAI,KAAK,IAAI,SAAQ,KAAM,KAAK,KAAK;AACjC,WAAK,IAAI,gBAAgB,KAAK,GAAG;AAAA,IAC7C;AAAA,EACA;AAAA,EACI,SAAS;AACL,SAAK,kBAAmB;AAAA,EAChC;AAEA;AADI,cA/MS,iBA+MF;ACjNJ,MAAM,sBAAsB,gBAAgB;AAAA,EAC/C,YAAYJ,WAAU;AAClB,UAAM;AAAA,MACF,UAAAA;AAAA,MACA,YAAY,CAAC,cAAc,uBAAuB,SAAS;AAAA,MAC3D,UAAU;AAAA,QACN,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,gBAAgB,SAAS,YAAa;AAAA,QAC9C,EAAE,MAAM,aAAa,SAAS,aAAc;AAAA,MAC/C;AAAA,IACb,CAAS;AAAA,EACT;AAAA,EACI,aAAa,UAAU;AACnB,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,cAAc,CAAC;AACnB,QAAI,YAAY,SAAS,CAAC,EAAE,UAAU;AAAA,EAC9C;AAkDA;AAjDI,cAjBS,eAiBF,iBAAgB;AAAA,EACnB,QAAQ;AAAA,EA6BR,UAAU;AAkBb;AChEE,MAAM,6BAA6B,gBAAgB;AAAA,EAEtD,YAAYA,WAAU;AAClB,UAAM;AAAA,MACF,UAAAA;AAAA,MACA,YAAY;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACH;AAAA,MACD,UAAU;AAAA,QACN,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,gBAAgB,SAAS,YAAa;AAAA,QAC9C,EAAE,MAAM,iBAAiB,SAAS,aAAc;AAAA,MACnD;AAAA,IACb,CAAS;AAfL,mDAA0B;AAAA,EAgB9B;AAAA,EACI,aAAa,SAAS;AAClB,UAAM,EAAE,UAAAA,WAAU,IAAG,IAAK;AAC1B,QAAI,QAAQ,SAASA,UAAS,OAAO,WAAW,gCAAgC;AAC5E,YAAM,IAAI,MAAM,+CAA+C,OAAAA,UAAS,OAAO,WAAW,gCAA8B,YAAW;AAAA,IAC/I;AACQ,YAAQ,QAAQ,CAAC,GAAG,MAAM;AACtB,UAAI,cAAc,CAAC;AACnB,UAAI,YAAY,EAAE,UAAU;AAAA,IACxC,CAAS;AACD,UAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,MAAM,EAAE,MAAM;AACxD,SAAK,IAAI,WAAW,KAAK,mBAAmB,eAAe,GAAG,QAAQ;AAAA,EAC9E;AAoEA;AAnEI,cA9BS,sBA8BF,iBAAgB;AAAA,EACnB,QAAQ;AAAA,EAkCR,UAAU,CAAC,iBAAiB,2BACZ,qBAAY,8ZAec,qBAAY,oCACpD,aAAM,KAAK,MAAM,YAAY,EAAE,KAAM,GAClC,IAAI,CAAC,QAAQ,eACd,eAAQ,IAAI,UAAU,IAAE,eAAc,YAAG,+CACb,YAAG,iCAElC,EACI,KAAK,EAAE,GAAC;AAQhB;ACpHE,MAAM,aAAa;AAAA,EA4BtB,YAAY,SAAS;AA3BrB,oCAAW;AACX,gCAAO;AACP;AACA;AACA,0CAAiB;AACjB,4CAAmB;AACnB,uCAAc,CAAE;AAsBZ,UAAM,EAAE,KAAK,QAAQ,QAAQ,GAAI,IAAG;AACpC,SAAK,MAAM;AACX,SAAK,SAAS;AACd,UAAM,cAAc,CAAE;AACtB,UAAM,iBAAiB,CAAE;AACzB,QAAI,mBAAmB;AACvB,UAAM,WAAW,KAAK,YAAY,YAAY,CAAE;AAChD,eAAW,KAAK,UAAU;AACtB,YAAM,OAAO,SAAS,CAAC;AACvB,YAAM,UAAU,KAAK;AAErB,YAAM,cAAc,GAAG,YAAG,KAAI;AAC9B,UAAI,SAAS;AACb,UAAI,KAAK,MAAM;AACX,iBAAS,IAAI,YAAK,KAAK,KAAK,GAAC;AAAA,MAC7C;AACY,qBAAe,KAAK,WAAW;AAC/B,0BAAoB,WAAW,gBAAO,KAAI,oBAAc,eAAM;AAC9D,kBAAY,CAAC,IAAI,EAAE,MAAM,aAAa,SAAS,SAAS,CAAC,EAAE,OAAQ;AAAA,IAC/E;AACQ,SAAK,iBAAiB,eAAe,KAAK,GAAG;AAC7C,SAAK,mBAAmB;AACxB,SAAK,cAAc;AAAA,EAC3B;AAAA,EAvCI,OAAO,aAAa,OAAO;AACvB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,oBAAoB,UAAU,OAAO;AACxC,UAAM,MAAM,CAAE;AACd,eAAW,KAAK,UAAU;AACtB,YAAM,MAAM,SAAS,CAAC;AACtB,UAAI,SAAS;AACb,UAAI,IAAI,MAAM;AACV,iBAAS,IAAI,WAAI,KAAK,KAAK,GAAC;AAAA,MAC5C;AACY,UAAI,KAAK,GAAG,WAAI,MAAI,KAAI,UAAI,cAAQ;AAAA,IAChD;AACQ,WAAO,IAAI,KAAK,GAAG;AAAA,EAC3B;AAAA,EA0BI,OAAO,gBAAgB,OAAO;AAC1B,WAAO,CAAE;AAAA,EACjB;AAAA,EACI,OAAO,cAAc,OAAO;AACxB,WAAO;AAAA,EACf;AACA;AAnDI,cARS,cAQF,YAAW,CAAE;AACpB,cATS,cASF;AACP,cAVS,cAUF;AACP,cAXS,cAWF;AACP,cAZS,cAYF;ACRX,MAAM,cAAc,oBAAI,IAAK;AAC7B,MAAM,oBAAoB,CAAC,SAAS,sBAAsB;AACtD,QAAMR,OAAM,KAAK,UAAU,OAAO;AAClC,MAAI,YAAY,IAAIA,IAAG,GAAG;AACtB,WAAO,YAAY,IAAIA,IAAG;AAAA,EAClC;AACI,YAAU,4BAAW,CAAE;AACvB,QAAM,kBAAkB,CAAE;AAC1B,QAAM,gBAAgB,QAAQ;AAC9B,MAAI,IAAI;AACR,SAAO,IAAI,eAAe,KAAK;AAC3B,UAAM,EAAE,MAAM,MAAM,MAAK,IAAK,QAAQ,CAAC;AACvC,UAAM,iBAAiB;AAAA,MACnB;AAAA,MACA;AAAA,MACA,OAAO,CAAE;AAAA,IACZ;AACD,UAAM,oBAAoB,kBAAkB,IAAI;AAChD,UAAM,oBAAoB,kBAAkB,gBAAgB,KAAK;AACjE,UAAM,WAAW,kBAAkB;AACnC,UAAM,cAAc,OAAO,KAAK,QAAQ;AACxC,UAAM,iBAAiB,YAAY;AACnC,QAAI,IAAI;AACR,WAAO,IAAI,gBAAgB,KAAK;AAC5B,YAAMA,OAAM,YAAY,CAAC;AACzB,YAAM,UAAU,SAASA,IAAG;AAC5B,YAAM,SAAS;AAAA,QACX,OAAO,kBAAkBA,IAAG;AAAA,QAC5B,cAAc;AAAA,QACd,QAAQ,QAAQ;AAAA,QAChB,cAAc,QAAQ,gBAAgB;AAAA,QACtC,cAAc,QAAQ,cAAc;AAAA,QACpC,wBAAwB,QAAQ,uBAAuB;AAAA,MAC1D;AACD,YAAM,iBAAkB,OAAO,gBAC3B,QAAQ,UAAU,kBAAkBA,IAAG,GAAG,iBAAiB,KAC3D,kBAAkBA,IAAG;AACzB,UAAI,kBAAkBA,IAAG,MAAM,gBAAgB;AAC3C,eAAO,iBAAiB;AAAA,MACxC;AACY,UAAI,OAAO,wBAAwB;AAC/B,gBAAQ,mBAAmB,MAAM;AAAA,MACjD;AACY,UAAI,OAAO,iBAAiB,QAAW;AACnC,eAAO,eAAe,OAAO;AAAA,MAC7C;AACY,qBAAe,MAAMA,IAAG,IAAI;AAAA,IACxC;AACQ,oBAAgB,KAAK,cAAc;AAAA,EAC3C;AACI,cAAY,IAAIA,MAAK,eAAe;AACpC,SAAO;AACX;AACO,MAAM,iBAAN,MAAM,uBAAsB,gBAAgB;AAAA,EAE/C,YAAYQ,WAAU,OAAO,mBAAmB;AAC5C,UAAM,SAAS,eAAc,aAAa,OAAO,iBAAiB;AAClE,UAAM;AAAA,MACF,UAAAA;AAAA,MACA,YAAY,CAAC,cAAc,uBAAuB,SAAS;AAAA,MAC3D,UAAU;AAAA,QACN,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,gBAAgB,SAAS,YAAa;AAAA,QAC9C,EAAE,MAAM,aAAa,SAAS,aAAc;AAAA,QAC5C,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,WAAW,SAAS,YAAa;AAAA,QACzC,GAAG,OAAO;AAAA,MACb;AAAA,MACD,eAAe;AAAA,QACX,QAAQ,OAAO;AAAA,QACf,UAAU,OAAO;AAAA,MACpB;AAAA,IACb,CAAS;AAlBL,mCAAU,CAAE;AAmBR,SAAK,UAAU,OAAO;AAAA,EAC9B;AAAA,EACI,aAAa,UAAU;AACnB,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,cAAc,CAAC;AACnB,QAAI,YAAY,SAAS,CAAC,EAAE,UAAU;AAAA,EAC9C;AAAA,EACI,mBAAmB,OAAO;AACtB,UAAM,MAAM,KAAK;AACjB,UAAM,UAAU,MAAM;AACtB,UAAM,WAAW,QAAQ;AACzB,aAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AAC/B,YAAM,cAAc,KAAK,QAAQ,CAAC,EAAE;AACpC,YAAMP,UAAS,QAAQ,CAAC;AACxB,YAAM,WAAW,OAAO,KAAKA,QAAO,KAAK;AACzC,YAAM,cAAc,SAAS;AAC7B,eAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AAClC,cAAMD,OAAM,SAAS,CAAC;AACtB,cAAM,SAASC,QAAO,MAAMD,IAAG,EAAE;AACjC,cAAM,WAAW,KAAK,mBAAmB,YAAYA,IAAG,EAAE,IAAI;AAC9D,YAAI,WAAW,gBACX,WAAW;AAAA,QAEX,WAAW,gBACX,WAAW,gBACX,WAAW,gBACX,WAAW,sBACX,WAAW,sBACX,WAAW,sBACX,WAAW,eACX,WAAW,gBACX,WAAW,eACX,WAAW,cAAc;AACzB,UAAAC,QAAO,MAAMD,IAAG,EAAE,kBAAkB,WAAY;AAC5C,gBAAI,MAAM,EAAE,UAAU,KAAK,YAAY;AAAA,UAC1C;AACD;AAAA,QACpB;AACgB,YAAI,WAAW,eAAe,WAAW,aAAa;AAClD,UAAAC,QAAO,MAAMD,IAAG,EAAE,kBAAkB,WAAY;AAC5C,gBAAI,MAAM,EAAE,UAAU,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;AAAA,UACnE;AACD;AAAA,QACpB;AACgB,YAAI,WAAW,eAAe,WAAW,aAAa;AAClD,UAAAC,QAAO,MAAMD,IAAG,EAAE,kBAAkB,WAAY;AAC5C,gBAAI,MAAM,EAAE,UAAU,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;AAAA,UACzF;AACD;AAAA,QACpB;AACgB,YAAI,WAAW,eAAe,WAAW,aAAa;AAClD,UAAAC,QAAO,MAAMD,IAAG,EAAE,kBAAkB,WAAY;AAC5C,gBAAI,MAAM,EAAE,UAAU,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;AAAA,UAC/G;AACD;AAAA,QACpB;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EACI,UAAU,OAAO;;AACb,UAAM,UAAU,MAAM;AACtB,UAAM,WAAW,QAAQ;AACzB,QAAI,IAAI;AACR,WAAO,IAAI,UAAU,KAAK;AACtB,YAAMC,UAAS,QAAQ,CAAC;AACxB,YAAM,WAAW,OAAO,KAAKA,QAAO,KAAK;AACzC,YAAM,cAAc,SAAS;AAC7B,UAAI,IAAI;AACR,aAAO,IAAI,aAAa,KAAK;AACzB,cAAMD,OAAM,SAAS,CAAC;AACtB,cAAM,OAAOC,QAAO,MAAMD,IAAG;AAC7B,YAAI,KAAK,iBAAiB,MAAM;AAC5B,gBAAM,WAAUG,MAAA,KAAK,SAAS,UAAU,uBAAuBF,QAAO,IAAI,MAA1D,gBAAAE,IAA6D,SAASH;AACtF,6CAAS,mBAAmBC,QAAO,MAAMD,IAAG,GAAG;AAAA,QACnE;AACgB,aAAK,gBAAiB;AAAA,MACtC;AAAA,IACA;AAAA,EACA;AAAA,EACI,oBAAoB,QAAQ,QAAQ;AAChC,QAAI,OAAO,WAAW,OAAO,UACzB,OAAO,YAAY,UAAU,OAAO,YAAY,SAChD,OAAO,YAAY,WAAW,OAAO,YAAY,UACjD,OAAO,QAAQ,WAAW,OAAO,QAAQ,QAAQ;AACjD,aAAO;AAAA,IACnB;AACQ,UAAM,kBAAkB,OAAO,QAAQ;AACvC,QAAI,IAAI;AACR,WAAO,IAAI,iBAAiB,KAAK;AAC7B,YAAM,UAAU,OAAO,QAAQ,CAAC;AAChC,YAAM,UAAU,OAAO,QAAQ,CAAC;AAChC,UAAI,QAAQ,SAAS,QAAQ,MAAM;AAC/B,eAAO;AAAA,MACvB;AACY,iBAAWA,QAAO,QAAQ,OAAO;AAC7B,YAAK,QAAQ,SAAS,CAAC,QAAQ,MAAMA,IAAG,KACpC,QAAQ,MAAMA,IAAG,EAAE,UACf,QAAQ,MAAMA,IAAG,EAAE,OAAO;AAC9B,iBAAO;AAAA,QAC3B;AAAA,MACA;AAAA,IACA;AACQ,WAAO;AAAA,EACf;AAAA,EACI,OAAO,aAAa,OAAO,mBAAmB;AAE1C,UAAM,kBAAkB,CAAE;AAC1B,UAAM,UAAU,CAAE;AAClB,QAAI,kBAAkB;AACtB,UAAM,WAAW,CAAE;AACnB,UAAM,MAAM,CAAE;AACd,UAAM,UAAU,MAAM,QAAQ,IAAI,CAACC,YAAW;AAC1C,YAAM,YAAY,kBAAkBA,QAAO,IAAI;AAC/C,YAAMD,OAAM,UAAU,aAAaC,QAAO,SAAS,EAAE;AACrD,sBAAgBD,IAAG,IAAI,gBAAgBA,IAAG,IAAI,EAAE,gBAAgBA,IAAG,IAAI;AACvE,YAAM,KAAK,gBAAgBA,IAAG;AAC9B,UAAI,OAAO,GAAG;AACV,YAAI,KAAK,EAAE,KAAAA,MAAK,MAAMC,QAAO,MAAM,OAAOA,QAAO,OAAO;AAAA,MACxE;AAEY,YAAM,UAAU,IAAI,UAAU;AAAA,QAC1B,KAAK,GAAG,OAAAD,MAAM,cAAO,IAAI,KAAK;AAAA,QAC9B,QAAQA;AAAA,QACR,OAAOC,QAAO;AAAA,MAC9B,CAAa;AACD,yBAAmB,QAAQ;AAC3B,eAAS,KAAK,GAAG,OAAO,OAAO,QAAQ,WAAW,CAAC;AACnD,aAAO;AAAA,IACnB,CAAS;AAED,QAAI,gBAAgB;AACpB,+BAAK,QAAQ,CAAC,OAAO;;AACjB,YAAM,UAAU,kBAAkB,GAAG,IAAI;AACzC,YAAM,UAAU,QAAQ,iBAAiBE,MAAA,GAAG,UAAH,OAAAA,MAAY,EAAI;AACzD,YAAM,QAAQ,CAAE;AAChB,iBAAW,KAAK,QAAQ,SAAS;AAC7B,YAAI,KAAK;AACT,cAAM,WAAW,QAAQ,QAAQ,CAAC;AAClC,YAAI,QAAQ,CAAC,KAAK,QAAQ,CAAC,MAAM,UAAU;AACvC,eAAK,eAAc,uBAAuB,GAAG,UAAU,OAAO;AAAA,QAClF;AACgB,gBAAQ,EAAE,IAAI,SAAS,QAAQ,YAAY,EAAE;AAC7C,cAAM,KAAK,EAAE,GAAG,GAAE,CAAE;AAAA,MACpC;AACY,UAAI,eAAe,QAAQ,wBAAwB,WAC7C,QAAQ,aAAa,OAAO,IAC5B,QAAQ;AACd,UAAI,aAAa,QAAQ,sBAAsB,WACzC,QAAQ,WAAW,OAAO,IAC1B,QAAQ;AACd,UAAI,eAAe,QAAQ,wBAAwB,WAC7C,QAAQ,aAAa,OAAO,IAC5B,QAAQ;AACd,YAAM,QAAQ,CAAC,MAAM;AACjB,cAAM,EAAE,GAAG,GAAE,IAAK;AAClB,cAAM,MAAM,IAAI,OAAO,MAAM,WAAK,GAAG;AACrC,YAAI,cAAc;AACd,yBAAe,aAAa,QAAQ,KAAK,EAAE;AAAA,QAC/D;AACgB,YAAI,YAAY;AACZ,uBAAa,WAAW,QAAQ,KAAK,EAAE;AAAA,QAC3D;AACgB,YAAI,cAAc;AACd,yBAAe,aAAa,QAAQ,KAAK,EAAE;AAAA,QAC/D;AAAA,MACA,CAAa;AACD,YAAM,mBAAmB,QAAQ,oBAAoB,QAAQ,UAAU,OAAO;AAC9E,YAAM,KAAK,iBAAiB,SAAS,IAAI,KAAK,2BAAqB;AACnE,UAAI,cAAc;AACd,yBAAiB,sBACd,UAAG,KAAG,mCAAkC,WAAE,mBACjD,qBAAY;AAAA,MAGxB;AACY,UAAI,YAAY;AACZ,yBAAiB,uBACb,UAAG,KAAG,kEAAiE,WAAE,qBAC/E,mBAAU;AAAA,MAGxB;AACY,UAAI,cAAc;AACd,yBAAiB,uBACb,UAAG,KAAG,oEAAmE,WAAE,qBACjF,qBAAY;AAAA,MAG1B;AAAA,IACA;AACQ,QAAI,gBAAgB;AACpB,eAAW,KAAK,SAAS;AACrB,uBAAiB,QAAQ,CAAC;AAAA,IACtC;AAEQ,QAAI,cAAc;AAClB,QAAI,cAAc;AAGlB,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACrC,YAAM,UAAU,QAAQ,CAAC;AACzB,YAAM,KAAK,QAAQ,eAAe,SAAS,IAAI,KAAK,eAAQ,kBAAmB;AAC/E,YAAM,eAAe,kBAAkB,QAAQ,IAAI;AACnD,UAAI,aAAa,cAAc;AAC3B,uBAAe,6BACL,eAAQ,QAAM,6BAA4B,WAAE;AAAA,MAEtE;AACY,UAAI,aAAa,YAAY;AACzB,uBAAe,4BACN,eAAQ,QAAM,kDAAiD,WAAE;AAAA,MAE1F;AACY,UAAI,aAAa,cAAc;AAC3B,sBAAc,MAAM,eAAQ,QAAM,oDAAmD,WAAE;AAAA,MACvG;AACY,YAAM,OAAO,QAAQ,IAAI,CAAC;AAC1B,UAAI,SAAS,UACT,kBAAkB,KAAK,IAAI,EAAE,cAAc;AAC3C,uBAAe,6BACL,oBAAW;AAAA,MAErC;AAAA,IACA;AACQ,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA,UAAU,eAAc,SAAS,iBAAiB,eAAe,eAAe,WAAW;AAAA,MAC3F,QAAQ,eAAc,OAAQ;AAAA,IACjC;AAAA,EACT;AAAA,EACI,OAAO,uBAAuBH,MAAK,cAAc,kBAAkB,YAAY,GAAG;AAC9E,UAAM,IAAIA,QAAO,YAAY,IAAI,YAAY;AAC7C,QAAI,iBAAiB,CAAC,KAAK,iBAAiB,CAAC,MAAM,cAAc;AAC7D,aAAO,KAAK,uBAAuBA,MAAK,cAAc,kBAAkB,EAAE,SAAS;AAAA,IAC/F;AACQ,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO,mBAAmB;;AAC7C,iBAAa,iBAAiB;AAC9B,WAAO;AAAA,MACH,SAAS,mBAAkBG,MAAA,MAAM,YAAN,OAAAA,MAAiB,IAAI,iBAAiB;AAAA,MACjE,aAAa;AAAA,QACT,OAAO;AAAA,QACP,QAAQ;AAAA,MACX;AAAA,MACD,QAAQ;AAAA,IACX;AAAA,EACT;AAAA,EACI,OAAO,aAAa,OAAO,mBAAmB;;AAC1C,QAAI,KAAK;AACT,KAAAA,MAAA,MAAM,YAAN,gBAAAA,IAAe,QAAQ,CAACF,YAAW;AAC/B,YAAM,YAAY,kBAAkBA,QAAO,IAAI;AAC/C,YAAMD,OAAM,UAAU,aAAaC,QAAO,SAAS,EAAE;AACrD,YAAM,IAAI,OAAAD;AAAA,IACtB;AACQ,WAAO,gBAAgB;AAAA,EAC/B;AA6EA;AA5EI,cAtRS,gBAsRF;AACP,cAvRS,gBAuRF,UAAS,MAAM;AAiCtB,cAxTS,gBAwTF,YAAW,CAAC,UAAU,SAAS,eAAe,gBAAgB,oWAgBnE,iBAAQ,gFAKR,gBAAO,YAEP,sBAAa,4eAcX,oBAAW;AA7VZ,IAAM,gBAAN;AClCA,MAAM,yBAAyB,gBAAgB;AAAA,EAClD,YAAYQ,WAAU;AAClB,UAAM;AAAA,MACF,UAAAA;AAAA,MACA,YAAY,CAAC,cAAc,uBAAuB,SAAS;AAAA,MAC3D,UAAU;AAAA,QACN,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,gBAAgB,SAAS,YAAa;AAAA,QAC9C,EAAE,MAAM,aAAa,SAAS,YAAa;AAAA,QAC3C,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,YAAY,SAAS,YAAa;AAAA,MAC7C;AAAA,IACb,CAAS;AAAA,EACT;AAAA,EAEI,OAAO,gBAAgB,OAAO;AAC1B,WAAO;AAAA,MACH,QAAQ,MAAM,UAAU;AAAA,MACxB,aAAa;AAAA,QACT,OAAO;AAAA,QACP,QAAQ;AAAA,MACX;AAAA,IACJ;AAAA,EACT;AAAA,EACI,aAAa,UAAU;AACnB,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,cAAc,CAAC;AACnB,QAAI,YAAY,SAAS,CAAC,EAAE,UAAU;AAAA,EAC9C;AAAA,EACI,UAAU,OAAO;AACb,UAAM,eAAe,KAAK,IAAI,MAAM,YAAY,OAAO,MAAM,YAAY,MAAM,KAC1E,IAAM,MAAM;AACjB,SAAK,IAAI,UAAU,KAAK,mBAAmB,UAAU,GAAG,MAAM,SAAS,KAAK,IAAI,cAAc,CAAC,CAAC;AAAA,EACxG;AAAA,EACI,oBAAoB,QAAQ,QAAQ;AAChC,WAAQ,OAAO,WAAW,OAAO,UAC7B,OAAO,YAAY,UAAU,OAAO,YAAY,SAChD,OAAO,YAAY,WAAW,OAAO,YAAY;AAAA,EAC7D;AAoEA;AA5FI,cAdS,kBAcF;AAyBP,cAvCS,kBAuCF,iBAAgB;AAAA,EACnB,QAAQ;AAAA,EAgCR,UAAU;AAiCb;AC5GL,MAAM,sBAAsB,IAAI,aAAa,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AAcjE,MAAM,aAAN,MAAM,mBAAkB,gBAAgB;AAAA,EAC3C,YAAYA,WAAU;AAClB,UAAM;AAAA,MACF,UAAAA;AAAA,MACA,YAAY,CAAC,cAAc,qBAAqB;AAAA,MAChD,UAAU;AAAA,QACN,EAAE,MAAM,gBAAgB,SAAS,aAAc;AAAA,QAC/C,EAAE,MAAM,eAAe,SAAS,mBAAoB;AAAA,QACpD,EAAE,MAAM,aAAa,SAAS,YAAa;AAAA,QAC3C,EAAE,MAAM,gBAAgB,SAAS,YAAa;AAAA,QAC9C,EAAE,MAAM,aAAa,SAAS,YAAa;AAAA,QAC3C,EAAE,MAAM,WAAW,SAAS,aAAc;AAAA,QAC1C,EAAE,MAAM,UAAU,SAAS,YAAa;AAAA,QACxC,EAAE,MAAM,mBAAmB,SAAS,YAAa;AAAA,QACjD,EAAE,MAAM,WAAW,SAAS,YAAa;AAAA,MAC5C;AAAA,IACb,CAAS;AAAA,EACT;AAAA,EAEI,aAAa,UAAU;AACnB,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,cAAc,CAAC;AACnB,QAAI,YAAY,SAAS,CAAC,EAAE,UAAU;AAAA,EAC9C;AAAA,EACI,UAAU,OAAO;AACb,UAAM,gBAAgB,WAAU,gBAAgB,KAAK;AACrD,eAAWR,QAAO,eAAe;AAC7B,UAAIA,SAAQ,aAAa;AACrB,aAAK,IAAI,iBAAiB,KAAK,mBAAmB,aAAa,GAAG,cAAcA,IAAG,CAAC;AAAA,MACpG,WACqBA,SAAQ,WAAW;AACxB,aAAK,IAAI,UAAU,KAAK,mBAAmB,WAAW,GAAG,cAAcA,IAAG,CAAC;AAAA,MAC3F,WACqBA,SAAQ,SAAS;AACtB,cAAM,aAAa,4BAA4B,cAAc,KAAK;AAClE,aAAK,IAAI,WAAW,KAAK,mBAAmB,SAAS,GAAG,UAAU;AAAA,MAClF,WACqBA,SAAQ,QAAQ;AACrB,aAAK,IAAI,UAAU,KAAK,mBAAmB,QAAQ,GAAG,cAAcA,IAAG,CAAC;AAAA,MACxF,WACqBA,SAAQ,iBAAiB;AAC9B,aAAK,IAAI,UAAU,KAAK,mBAAmB,iBAAiB,GAAG,cAAcA,IAAG,CAAC;AAAA,MACjG,WACqBA,SAAQ,SAAS;AACtB,aAAK,IAAI,UAAU,KAAK,mBAAmB,SAAS,GAAG,cAAcA,IAAG,IAAI,IAAI,CAAC;AAAA,MACjG;AAAA,IACA;AAAA,EACA;AAAA,EACI,OAAO,gBAAgB,QAAQ,IAAI;;AAC/B,WAAO;AAAA,MACH,YAAWG,MAAA,MAAM,cAAN,OAAAA,MAAmB;AAAA,MAC9B,UAASC,MAAA,MAAM,YAAN,OAAAA,MAAiB;AAAA,MAC1B,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,OAAM,WAAM,SAAN,YAAc;AAAA,MACpB,gBAAe,WAAM,kBAAN,YAAuB;AAAA,MACtC,QAAO,WAAM,UAAN,YAAe;AAAA,IACzB;AAAA,EACT;AAmEA;AA1GI,cAlBS,YAkBF;AAwCP,cA1DS,YA0DF,iBAAgB;AAAA,EACnB,QAAQ;AAAA,EA+BR,UAAU;AAiCb;AA3HE,IAAM,YAAN;ACAA,MAAM,0BAA0B,CAAC,WAAW;AAC/C,MAAI,OAAO,iBAAiB,QAAW;AACnC,WAAO,eAAe,IAAI,aAAa,CAAC;AAAA,EAChD;AACI,QAAM,OAAO,OAAO;AACpB,QAAM,aAAa,OAAO;AAC1B,aAAW,CAAC,KAAK,SAAS,MAAM;AAChC,aAAW,CAAC,KAAM,SAAS,KAAM,OAAQ;AACzC,aAAW,CAAC,KAAM,SAAS,IAAK,OAAQ;AACxC,aAAW,CAAC,KAAK,OAAO,OAAQ;AACpC;AACO,MAAM,4BAA4B,CAAC,WAAW;AACjD,QAAM,iBAAkB,OAAO,kBAAkB,OAAO;AACxD,MAAI,OAAO,wBAAwB,cAAc;AAC7C,UAAM,aAAa,OAAO;AAC1B,eAAW,CAAC,IAAI,eAAe,CAAC;AAChC,eAAW,CAAC,IAAI,eAAe,CAAC;AAAA,EACxC,OACS;AACD,WAAO,eAAe,IAAI,aAAa,cAAc;AAAA,EAC7D;AACA;AACO,MAAM,4BAA4B,CAAC,WAAW;AACjD,QAAM,iBAAkB,OAAO,kBAAkB,OAAO;AACxD,MAAI,OAAO,wBAAwB,cAAc;AAC7C,UAAM,aAAa,OAAO;AAC1B,eAAW,CAAC,IAAI,eAAe,CAAC;AAChC,eAAW,CAAC,IAAI,eAAe,CAAC;AAChC,eAAW,CAAC,IAAI,eAAe,CAAC;AAChC,eAAW,CAAC,IAAI,eAAe,CAAC;AAAA,EACxC,OACS;AACD,WAAO,eAAe,IAAI,aAAa,cAAc;AAAA,EAC7D;AACA;AACO,MAAM,4BAA4B,CAAC,WAAW;AACjD,QAAM,iBAAkB,OAAO,kBAAkB,OAAO;AACxD,MAAI,OAAO,wBAAwB,cAAc;AAC7C,UAAM,MAAM,eAAe;AAC3B,UAAM,eAAe,OAAO;AAC5B,aAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC1B,mBAAa,CAAC,IAAI,eAAe,CAAC;AAAA,IAC9C;AAAA,EACA,OACS;AACD,WAAO,eAAe,IAAI,aAAa,cAAc;AAAA,EAC7D;AACA;AACO,MAAM,uBAAuB,CAAC,UAAU;AAC3C,QAAMQ,WAAU,MAAM,QAAQ,KAAK;AACnC,MAAI,CAACA,UAAS;AACV,WAAO,CAAC,OAAO,OAAO,OAAO,KAAK;AAAA,EAC1C,WACaA,YAAW,MAAM,WAAW,GAAG;AACpC,WAAO;AAAA,EACf,WACaA,YAAW,MAAM,WAAW,GAAG;AACpC,WAAO,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAAA,EACtD,WACaA,YAAW,MAAM,WAAW,GAAG;AACpC,WAAO,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAAA,EACtD;AACI,SAAO,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAClD;AACO,MAAM,sBAAsB,CAAC,QAAQ,gBAAgB;AACxD,MAAI,OAAO,iBAAiB,QAAW;AACnC,WAAO,eAAe,IAAI,aAAa,CAAC;AAAA,EAChD;AACI,QAAM,eAAe,OAAO;AAC5B,QAAM,iBAAkB,OAAO,kBAAkB,OAAO;AACxD,MAAI,gBAAgB,UAAa,OAAO,gBAAgB,QAAW;AAC/D,iBAAa,CAAC,IAAI,eAAe,CAAC;AAClC,iBAAa,CAAC,IAAI,eAAe,CAAC;AAClC,iBAAa,CAAC,IAAI,eAAe,CAAC;AAClC,iBAAa,CAAC,IAAI,eAAe,CAAC;AAClC;AAAA,EACR;AACI,MAAI,mBAAmB,OAAO;AAC9B,MAAI,gBAAgB,QAAW;AAC3B,UAAM,EAAE,YAAW,IAAK;AACxB,QAAI,qBAAqB,WACpB,iBAAiB,UAAU,YAAY,SACpC,iBAAiB,WAAW,YAAY,SAAS;AACrD;AAAA,IACZ;AACQ,QAAI,qBAAqB,QAAW;AAChC,yBAAmB;AAAA,QACf,OAAO,2CAAa;AAAA,QACpB,QAAQ,2CAAa;AAAA,MACxB;AACD,aAAO,cAAc;AAAA,IACjC;AAAA,EACA;AACI,QAAM,EAAE,OAAO,OAAM,IAAK;AAC1B,QAAM,CAAC,IAAI,IAAI,IAAI,EAAE,IAAI;AACzB,QAAM,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,QAAQ,KAAK,IAAI,OAAO,KAAK,EAAE,GAAG,QAAQ,KAAK,IAAI,OAAO,KAAK,EAAE,CAAC,GAAG,KAAK,IAAI,SAAS,KAAK,IAAI,QAAQ,KAAK,EAAE,GAAG,SAAS,KAAK,IAAI,QAAQ,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC;AACnM,eAAa,CAAC,IAAI,KAAK;AACvB,eAAa,CAAC,IAAI,KAAK;AACvB,eAAa,CAAC,IAAI,KAAK;AACvB,eAAa,CAAC,IAAI,KAAK;AAC3B;AC/GO,MAAM,qBAAqB,aAAa;AAAA,EAAxC;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EAyBI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,SAAQV,MAAA,MAAM,WAAN,OAAAA,MAAgB;AAAA,IAC3B;AAAA,EACT;AAYA;AA7CI,cADS,cACF;AAKP,cANS,cAMF,YAAW;AAAA,EACd,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,cAAc;AAAA,IACd,WAAW;AAAA,IACX,oBAAoB;AAAA,EACvB;AACJ;AACD,cAhBS,cAgBF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,SAAS;AAOZ;AAMD,cAnCS,cAmCF,gBAAe;AAQtB,cA3CS,cA2CF,gBAAe;AC3CnB,MAAM,qBAAqB,aAAa;AAAA,EAAxC;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOA,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAsBA;AAhCI,cADS,cACF;AAWP,cAZS,cAYF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAzBS,cAyBF,gBAAe;AAKtB,cA9BS,cA8BF,cAAa;AC7BjB,MAAM,wBAAN,MAAM,8BAA6B,aAAa;AAAA,EAAhD;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,aAAa,OAAO;AACvB,QAAI,MAAM,OAAO,OAAO;AACpB,aAAO,iBAAiB,aAAM,OAAO,MAChC;AAAA,IACjB;AACQ,WAAO,iBAAiB,aAAM,OAAO;AAAA,EAC7C;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,UAAM,UAASD,MAAA,MAAM,WAAN,OAAAA,MAAgB,CAAC,YAAY,UAAU;AACtD,QAAI,QAAQ,MAAM,SAAS,CAAE;AAC7B,QAAI,MAAM,WAAW,KAAK,MAAM,WAAW,OAAO,QAAQ;AACtD,YAAM,UAAU,OAAO;AACvB,UAAI,IAAI;AACR,YAAM,MAAM;AACZ,aAAO,IAAI,SAAS,KAAK;AACrB,YAAI,MAAM,CAAC,GAAG;AACV,cAAI,CAAC,IAAI,MAAM,CAAC;AAChB,cAAI,MAAM,IAAI,CAAC,MAAM,UAAa,IAAI,IAAI,CAAC,MAAM,QAAW;AACxD,gBAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK;AAAA,UAC5E;AAAA,QACA,OACqB;AACD,cAAI,CAAC,IAAI,KAAK,KAAK,OAAO,SAAS;AAAA,QACvD;AAAA,MACA;AACY,cAAQ;AAAA,IACpB;AACQ,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAoEA;AAtGI,cADS,uBACF;AAmCP,cApCS,uBAoCF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,WAAW,CAAC,UAAU;AAClB,aAAO,MAAM,OAAO,CAAC,KAAK,QAAQ,IAAI,OAAO,4BAA4B,GAAG,CAAC,GAAG,EAAE;AAAA,IACrF;AAAA,IACD,oBAAoB;AAAA,IACpB,MAAM,CAAC,UAAU,MAAM,OAAO;AAAA,IAC9B,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO,CAAE;AAAA,IACT,MAAM,CAAC,UAAU,MAAM,OAAO;AAAA,IAC9B,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cA3DS,uBA2DF,WAAU;AAAA,EACb,YAAY;AAAA,EAOZ,UAAU;AAAA,EAOV,WAAW;AAKd;AACD,cAhFS,uBAgFF,aAAY,CAAC,WAAW;AAC3B,MAAI,OAAO;AACX,WAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC7B,YAAQ,mCAAmC,UAAC,2BAA0B,WAAI,GAAC,gBAAe,UAAC,cAAa,WAAI,GAAC;AAAA,EACzH;AACQ,SAAO;AACV;AACD,cAvFS,uBAuFF,cAAa,CAAC,UAAU;AAC3B,QAAM,SAAS,MAAM,OAAO,UAAU;AACtC,SAAO,uhBAUP,6BAAK,UAAU,MAAM,GAAC;AAGzB;AAtGE,IAAM,uBAAN;ACFA,MAAM,wBAAwB,aAAa;AAAA,EAA3C;AAAA;AACH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,SAAQD,MAAA,MAAM,WAAN,OAAAA,MAAgB;AAAA,IAC3B;AAAA,EACT;AAYA;AAXI,cAVS,iBAUF,YAAW;AAAA,EACd,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAjBS,iBAiBF,cAAa;AChBjB,MAAM,0BAA0B,aAAa;AAAA,EAA7C;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOA,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAmCA;AA7CI,cADS,mBACF;AAWP,cAZS,mBAYF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAzBS,mBAyBF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,UAAU;AAMb;AACD,cAtCS,mBAsCF,gBAAe;AAKtB,cA3CS,mBA2CF,cAAa;AC3CjB,MAAM,wBAAwB,aAAa;AAAA,EAA3C;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOD,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAmCA;AA7CI,cADS,iBACF;AAWP,cAZS,iBAYF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAzBS,iBAyBF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,UAAU;AAMb;AACD,cAtCS,iBAsCF,gBAAe;AAKtB,cA3CS,iBA2CF,cAAa;AC3CjB,MAAM,2BAA2B,aAAa;AAAA,EAA9C;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOD,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAmCA;AA7CI,cADS,oBACF;AAWP,cAZS,oBAYF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAzBS,oBAyBF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,UAAU;AAMb;AACD,cAtCS,oBAsCF,gBAAe;AAKtB,cA3CS,oBA2CF,cAAa;AC3CjB,MAAM,yBAAyB,aAAa;AAAA,EAA5C;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOD,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,IACzB;AAAA,EACT;AAmCA;AA7CI,cADS,kBACF;AAWP,cAZS,kBAYF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAzBS,kBAyBF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,UAAU;AAMb;AACD,cAtCS,kBAsCF,gBAAe;AAKtB,cA3CS,kBA2CF,cAAa;AC9DjB,MAAM,qBAAqB,aAAa;AAAA,EAAxC;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,aAAa,OAAO;AACvB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,YAAWD,MAAA,MAAM,cAAN,OAAAA,MAAmB;AAAA,MAC9B,aAAYC,MAAA,MAAM,eAAN,OAAAA,MAAoB;AAAA,MAChC,aAAYC,MAAA,MAAM,eAAN,OAAAA,MAAoB;AAAA,MAChC,YAAW,WAAM,cAAN,YAAmB;AAAA,MAC9B,OAAM,WAAM,SAAN,YAAc,KAAK,IAAK;AAAA,IACjC;AAAA,EACT;AAoFA;AAjGI,cADS,cACF;AAcP,cAfS,cAeF,YAAW;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,YAAY;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,YAAY;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,WAAW;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,MAAM;AAAA,IACF,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,oBAAoB,CAAC,WAAW;AAC5B,YAAM,QAAS,OAAO,SACjB,KAAK,IAAG,IAAK,OAAO,SAAS;AAClC,aAAO,eAAe;AAAA,IACzB;AAAA,IACD,MAAM;AAAA,EACT;AACJ;AACD,cAhDS,cAgDF,WAAU;AAAA,EACb,MAAM;AAAA,EAMN,OAAO;AAAA,EAaP,KAAK;AAeR;AACD,cApFS,cAoFF,cAAa;ACpEjB,MAAM,sBAAsB,aAAa;AAAA,EAAzC;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EAUI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,OAAMF,MAAA,MAAM,SAAN,OAAAA,MAAc;AAAA,IACvB;AAAA,EACT;AA4CA;AA9DI,cADS,eACF;AAKP,cANS,eAMF,YAAW;AAAA,EACd,MAAM;AAAA,IACF,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,IACX,oBAAoB;AAAA,EACvB;AACJ;AAMD,cApBS,eAoBF,cAAa;ACnBjB,MAAM,wBAAN,MAAM,8BAA6B,aAAa;AAAA,EAAhD;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,aAAa,OAAO;AACvB,QAAI,MAAM,OAAO,OAAO;AACpB,aAAO,iBAAiB,aAAM,OAAO,MAChC;AAAA,IACjB;AACQ,WAAO,iBAAiB,aAAM,OAAO;AAAA,EAC7C;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,UAAM,UAASA,MAAA,MAAM,WAAN,OAAAA,MAAgB,CAAC,YAAY,UAAU;AACtD,QAAI,QAAQ,MAAM,SAAS,CAAE;AAC7B,QAAI,MAAM,WAAW,KAAK,MAAM,WAAW,OAAO,QAAQ;AACtD,YAAM,UAAU,OAAO;AACvB,UAAI,IAAI;AACR,YAAM,MAAM;AACZ,aAAO,IAAI,SAAS,KAAK;AACrB,YAAI,MAAM,CAAC,GAAG;AACV,cAAI,CAAC,IAAI,MAAM,CAAC;AAChB,cAAI,MAAM,IAAI,CAAC,MAAM,UAAa,IAAI,IAAI,CAAC,MAAM,QAAW;AACxD,gBAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK;AAAA,UAC5E;AAAA,QACA,OACqB;AACD,cAAI,CAAC,IAAI,KAAK,KAAK,OAAO,SAAS;AAAA,QACvD;AAAA,MACA;AACY,cAAQ;AAAA,IACpB;AACQ,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA,QAAOC,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,SAAQ,MAAAC,MAAA,MAAM,WAAN,OAAAA,MAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,QAAO,WAAM,UAAN,YAAe,CAAC,KAAK,GAAG;AAAA,IAClC;AAAA,EACT;AAwDA;AA5FI,cADS,uBACF;AAqCP,cAtCS,uBAsCF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO,CAAC,KAAK,GAAG;AAAA,IAChB,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,WAAW,CAAC,UAAU;AAClB,aAAO,MAAM,OAAO,CAAC,KAAK,QAAQ,IAAI,OAAO,4BAA4B,GAAG,CAAC,GAAG,EAAE;AAAA,IACrF;AAAA,IACD,oBAAoB;AAAA,IACpB,MAAM,CAAC,UAAU,MAAM,OAAO;AAAA,IAC9B,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO,CAAE;AAAA,IACT,MAAM,CAAC,UAAU,MAAM,OAAO;AAAA,IAC9B,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cAxES,uBAwEF,aAAY,CAAC,WAAW;AAC3B,MAAI,OAAO;AACX,WAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC7B,YAAQ,mCAAmC,UAAC,2BAA0B,WAAI,GAAC,gBAAe,UAAC,cAAa,WAAI,GAAC;AAAA,EACzH;AACQ,SAAO;AACV;AACD,cA/ES,uBA+EF,cAAa,CAAC,UAAU;AAC3B,QAAM,SAAS,MAAM,OAAO,UAAU;AACtC,SAAO,oWAQP,6BAAK,UAAU,MAAM,GAAC;AAGzB;AA5FE,IAAM,uBAAN;ACGA,MAAM,6BAA6B,aAAa;AAAA,EAAhD;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EACI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,QAAOF,MAAA,MAAM,UAAN,OAAAA,MAAe;AAAA,MACtB,WAAUC,MAAA,MAAM,aAAN,OAAAA,MAAkB;AAAA,MAC5B,SAAQC,MAAA,MAAM,WAAN,OAAAA,MAAgB;AAAA,MACxB,QAAO,WAAM,UAAN,YAAe,KAAK,KAAK;AAAA,MAChC,UAAS,WAAM,YAAN,YAAiB;AAAA,MAC1B,SAAQ,WAAM,WAAN,YAAgB;AAAA,MACxB,QAAO,WAAM,UAAN,YAAe;AAAA,IACzB;AAAA,EACT;AAqFA;AApGI,cADS,sBACF;AAgBP,cAjBS,sBAiBF,YAAW;AAAA,EACd,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,UAAU;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,SAAS;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW,CAAC,UAAU;AAClB,aAAO,QAAQ,IAAI;AAAA,IACtB;AAAA,EACJ;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,oBAAoB;AAAA,IACpB,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AACJ;AACD,cA1DS,sBA0DF,WAAU;AAAA,EACb,UAAU;AAAA,EAQV,SAAS;AAOZ;AACD,cA3ES,sBA2EF,gBAAe;AAuBtB,cAlGS,sBAkGF,cAAa;ACrHjB,MAAM,wBAAwB,aAAa;AAAA,EAA3C;AAAA;AAEH,gCAAO;AAAA;AAAA,EACP,OAAO,eAAe;AAClB,WAAO;AAAA,EACf;AAAA,EA+BI,OAAO,gBAAgB,OAAO;;AAC1B,WAAO;AAAA,MACH,GAAG,MAAM,KAAK;AAAA,MACd,GAAG,MAAM,KAAK;AAAA,MACd,OAAO,MAAM,SAAS;AAAA,MACtB,QAAQ,MAAM,UAAU;AAAA,MACxB,SAAQF,MAAA,MAAM,WAAN,OAAAA,MAAgB;AAAA,IAC3B;AAAA,EACT;AA6BA;AAxEI,cADS,iBACF;AAKP,cANS,iBAMF,YAAW;AAAA,EACd,GAAG;AAAA,IACC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,GAAG;AAAA,IACC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACT;AAAA,EACD,QAAQ;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,cAAc;AAAA,IACd,WAAW;AAAA,IACX,oBAAoB;AAAA,EACvB;AACJ;AAUD,cA7CS,iBA6CF,WAAU;AAAA,EACb,UAAU;AAAA,EAKV,SAAS;AAOZ;AACD,cA3DS,iBA2DF,gBAAe;AAWtB,cAtES,iBAsEF,gBAAe;ACxDnB,MAAM,gCAAgC;AACtC,MAAM,0BAA0B,WAAW;AAAA,EAE9C,YAAY,QAAQ;AAChB,UAAO;AAFX;AAGI,SAAK,SAAS;AAAA,EAItB;AAAA,EACI,eAAe;AAAA,EAEnB;AAAA,EACI,YAAY;AAAA,EAEhB;AAAA,EACI,SAAS;AAAA,EAEb;AAAA,EACI,SAAS;AAAA,EAEb;AACA;ACnCO,MAAM,iBAAiB;AAAA,EAK1B,YAAY,MAAM,QAAQ,OAAO,OAAO;AAJxC;AACA;AACA;AACA;AAEI,SAAK,OAAO;AACZ,SAAK,SAAS;AACd,SAAK,gBAAgB;AACrB,UAAM,OAAO,OAAO,KAAK,KAAK;AAC9B,UAAM,IAAI,KAAK;AACf,UAAM,eAAe,CAAE;AACvB,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,YAAM,OAAO,KAAK,CAAC;AACnB,aAAO,eAAe,cAAc,MAAM;AAAA,QACtC,KAAK,MAAM;AACP,iBAAO,KAAK,cAAc,IAAI;AAAA,QACjC;AAAA,QACD,KAAK,CAAC,UAAU;AACZ,eAAK,cAAc,IAAI,IAAI;AAC3B,gBAAM,cAAe;AAAA,QACxB;AAAA,MACjB,CAAa;AAAA,IACb;AACQ,SAAK,QAAQ;AAAA,EACrB;AAAA,EACI,mBAAmB;AACf,WAAO,KAAK;AAAA,EACpB;AACA;ACnCO,MAAM,wBAAwB;AAAA,EAKjC,YAAY,QAAQ,OAAO,WAAW;AAJtC;AACA;AACA;AACA;AAEI,SAAK,SAAS;AACd,SAAK,OAAO;AACZ,SAAK,gBAAgB;AACrB,UAAM,qBAAqB,UAAU,qBAAsB;AAC3D,UAAM,eAAe,CAAE;AACvB,UAAM,UAAU,MAAM;AACtB,UAAM,gBAAgB,QAAQ;AAC9B,aAAS,IAAI,GAAG,IAAI,eAAe,KAAK;AACpC,YAAM,EAAE,MAAM,YAAY,OAAO,aAAa,MAAM,WAAU,IAAM,QAAQ,CAAC;AAC7E,UAAI,eAAe,QAAW;AAC1B;AAAA,MAChB;AACY,YAAM,qBAAqB,CAAE;AAC7B,YAAM,cAAc,OAAO,KAAK,WAAW;AAC3C,YAAM,oBAAoB,YAAY;AACtC,eAAS,IAAI,GAAG,IAAI,mBAAmB,KAAK;AACxC,cAAM,WAAW,YAAY,CAAC;AAC9B,eAAO,eAAe,oBAAoB,UAAU;AAAA,UAChD,KAAK,MAAM;AACP,mBAAO,KAAK,cAAc,QAAQ,CAAC,EAAE,MAAM,QAAQ,EAAE;AAAA,UACxD;AAAA,UACD,KAAK,CAAC,UAAU;;AACZ,kBAAM,SAAS,KAAK,cAAc,QAAQ,CAAC,EAAE,MAAM,QAAQ;AAC3D,mBAAO,QAAQ;AACf,gBAAI,OAAO,cAAc;AACrB,sBAAQ,OAAO,kBAAiBA,MAAA,mBAAmB,UAAU,EACxD,SAAS,QAAQ,MADU,gBAAAA,IACP,UAAU,OAAO;AAAA,YACtE;AACwB,gBAAI,OAAO,wBAAwB;AAC/B,eAAAC,MAAA,mBAAmB,UAAU,EAAE,SAAS,QAAQ,MAAhD,gBAAAA,IACM,mBAAmB;AAAA,YACrD,OAC6B;AACD,qBAAO,eAAe;AAAA,YAClD;AACwB,sBAAU,SAAS,MAAM,cAAe;AAAA,UAC3C;AAAA,QACrB,CAAiB;AAAA,MACjB;AACY,aAAO,eAAe,cAAc,YAAY;AAAA,QAC5C,KAAK,MAAM;AACP,iBAAO;AAAA,QACV;AAAA,MACjB,CAAa;AAAA,IACb;AACQ,SAAK,QAAQ;AAAA,EACrB;AAAA,EACI,mBAAmB;AACf,WAAO,KAAK;AAAA,EACpB;AACA;AClCO,MAAM,kBAAkB;AAAA,EAM3B,cAAc;AALd,mCAAU,oBAAI,IAAK;AACnB,0CAAiB,CAAE;AACnB,0CAAiB;AACjB,8CAAqB,CAAE;AACvB;AAEI,SAAK,mBAAmB,iBAAiB,aAAa;AACtD,SAAK,mBAAmB,wBAAwB,oBAAoB;AACpE,SAAK,mBAAmB,oBAAoB,gBAAgB;AAC5D,SAAK,mBAAmB,iBAAiB,aAAa;AACtD,SAAK,mBAAmB,aAAa,SAAS;AAC9C,SAAK,mBAAmB,UAAU,YAAY;AAC9C,SAAK,mBAAmB,gBAAgB,kBAAkB;AAC1D,SAAK,mBAAmB,cAAc,gBAAgB;AACtD,SAAK,mBAAmB,eAAe,iBAAiB;AACxD,SAAK,mBAAmB,aAAa,eAAe;AACpD,SAAK,mBAAmB,WAAW,aAAa;AAChD,SAAK,mBAAmB,kBAAkB,oBAAoB;AAC9D,SAAK,mBAAmB,kBAAkB,oBAAoB;AAC9D,SAAK,mBAAmB,aAAa,eAAe;AACpD,SAAK,mBAAmB,UAAU,YAAY;AAC9C,SAAK,mBAAmB,UAAU,YAAY;AAC9C,SAAK,mBAAmB,kBAAkB,oBAAoB;AAC9D,SAAK,mBAAmB,aAAa,eAAe;AAAA,EAC5D;AAAA,EACI,mBAAmB,QAAQ,SAAS;AAChC,SAAK,eAAe,MAAM,IAAI;AAAA,EACtC;AAAA,EACI,mBAAmB,YAAY,aAAa;AACxC,SAAK,mBAAmB,UAAU,IAAI;AAAA,EAC9C;AAAA,EACI,uBAAuB;AACnB,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,uBAAuB;AACnB,WAAO,KAAK;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,WAAW,QAAQ,OAAO;AACtB,QAAI,CAAC,KAAK,UAAU;AAChB,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAC1D;AACQ,UAAM,cAAc,KAAK,eAAe,MAAM;AAC9C,QAAI,CAAC,aAAa;AACd,YAAM,IAAI,MAAM,gBAAgB,eAAM,sBAAqB;AAAA,IACvE;AACQ,QAAI,KAAK,SAAS,SAAS,YACvB,YAAY,qBAAqB,iBAAiB;AAClD,aAAO,KAAK,iBAAiB,QAAQ,IAAI,kBAAkB,MAAM,GAAG,KAAK;AAAA,IACrF;AACQ,QAAI,WAAW,iBAAiB;AAC5B,aAAO,KAAK,kBAAkB,KAAK;AAAA,IAC/C;AACQ,UAAM,gBAAgB,YAAY,gBAAgB,KAAK;AACvD,UAAM,WAAW,YAAY,aAAa,aAAa,KAAK,YAAY;AACxE,QAAI,YAAY,KAAK,QAAQ,IAAI,QAAQ,GAAG;AACxC,aAAO,KAAK,iBAAiB,QAAQ,KAAK,QAAQ,IAAI,QAAQ,GAAG,aAAa;AAAA,IAC1F;AAEQ,UAAM,SAAS,IAAI,YAAY,KAAK,UAAU,KAAK;AACnD,QAAI,UAAU;AACV,WAAK,QAAQ,IAAI,UAAU,MAAM;AAAA,IAC7C;AACQ,WAAO,KAAK,iBAAiB,QAAQ,QAAQ,aAAa;AAAA,EAClE;AAAA,EACI,kBAAkB,OAAO;AACrB,QAAI,CAAC,KAAK,UAAU;AAChB,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAC1D;AACQ,UAAM,gBAAgB,cAAc,gBAAgB,OAAO,KAAK,kBAAkB;AAClF,UAAM,WAAW,cAAc,aAAa,eAAe,KAAK,kBAAkB;AAClF,QAAI,YAAY,KAAK,QAAQ,IAAI,QAAQ,GAAG;AACxC,aAAO,KAAK,oBAAoB,KAAK,QAAQ,IAAI,QAAQ,GAAG,aAAa;AAAA,IACrF;AACQ,UAAM,SAAS,IAAI,cAAc,KAAK,UAAU,OAAO,KAAK,kBAAkB;AAC9E,QAAI,UAAU;AACV,WAAK,QAAQ,IAAI,UAAU,MAAM;AAAA,IAC7C;AACQ,WAAO,KAAK,oBAAoB,QAAQ,aAAa;AAAA,EAC7D;AAAA,EACI,iBAAiB,MAAM,QAAQ,OAAO;AAClC,WAAO,IAAI,iBAAiB,MAAM,QAAQ,OAAO,KAAK,SAAS,KAAK;AAAA,EAC5E;AAAA,EACI,oBAAoB,QAAQ,OAAO;AAC/B,WAAO,mBAAmB,KAAK;AAC/B,WAAO,IAAI,wBAAwB,QAAQ,OAAO,IAAI;AAAA,EAC9D;AAAA,EACI,UAAU,QAAQ;AACd,QAAI,KAAK,mBAAmB,QAAQ;AAChC;AAAA,IACZ;AACQ,QAAI,KAAK,gBAAgB;AACrB,WAAK,eAAe,OAAQ;AAAA,IACxC;AACQ,WAAO,OAAQ;AACf,SAAK,iBAAiB;AAAA,EAC9B;AACA;AC5GA,MAAM,uBAAuB;AAAA,EACzB,GAAG,CAAC,OAAO,UAAU;AACjB,UAAM,MAAM,IAAI;AAAA,EACnB;AAAA,EACD,GAAG,CAAC,OAAO,UAAU;AACjB,UAAM,MAAM,IAAI;AAAA,EACnB;AAAA,EACD,OAAO,CAAC,OAAO,UAAU;AACrB,UAAM,MAAM,QAAQ;AAAA,EACvB;AAAA,EACD,QAAQ,CAAC,OAAO,UAAU;AACtB,UAAM,MAAM,SAAS;AAAA,EACxB;AAAA,EACD,OAAO,CAAC,OAAO,UAAU;AACrB,UAAM,MAAM,QAAQ;AAAA,EACvB;AAAA,EACD,QAAQ,CAAC,OAAO,UAAU;AACtB,UAAM,MAAM,SAAS;AAAA,EACxB;AAAA,EACD,YAAY,CAAC,OAAO,UAAU;AAC1B,UAAM,MAAM,aAAa;AAAA,EAC5B;AAAA,EACD,YAAY,CAAC,OAAO,UAAU;AAC1B,UAAM,MAAM,aAAa;AAAA,EAC5B;AAAA,EACD,WAAW,CAAC,OAAO,UAAU;AACzB,UAAM,MAAM,YAAY;AAAA,EAC3B;AAAA,EACD,aAAa,CAAC,OAAO,UAAU;AAC3B,UAAM,MAAM,cAAc;AAAA,EAC7B;AAAA,EACD,UAAU,CAAC,OAAO,UAAU;AACxB,UAAM,MAAM,WAAW;AAAA,EAC1B;AAAA,EACD,MAAM,CAAC,OAAO,UAAU;AACpB,UAAM,MAAM,OAAO;AAAA,EACtB;AAAA,EACD,WAAW,CAAC,OAAO,UAAU;AACzB,UAAM,MAAM,YAAY;AAAA,EAC3B;AAAA,EACD,SAAS,CAAC,OAAO,UAAU;AACvB,UAAM,MAAM,UAAU;AAAA,EACzB;AAAA,EACD,SAAS,CAAC,OAAO,UAAU;AACvB,UAAM,MAAM,UAAU;AAAA,EACzB;AAAA,EACD,YAAY,CAAC,OAAO,UAAU;AAC1B,UAAM,MAAM,aAAa;AAAA,EAC5B;AAAA,EACD,SAAS,CAAC,OAAO,UAAU;AACvB,UAAM,MAAM,UAAU;AAAA,EACzB;AAAA,EACD,eAAe,CAAC,OAAO,UAAU;AAC7B,UAAM,MAAM,gBAAgB;AAAA,EAC/B;AAAA,EACD,YAAY,CAAC,OAAO,UAAU;AAC1B,UAAM,MAAM,aAAa;AAAA,EAC5B;AAAA,EACD,UAAU,CAAC,OAAO,UAAU;AACxB,UAAM,MAAM,WAAW;AAAA,EAC1B;AAAA,EACD,cAAc,CAAC,OAAO,UAAU;AAC5B,UAAM,MAAM,eAAe;AAAA,EAC9B;AAAA,EACD,eAAe,CAAC,OAAO,UAAU;AAC7B,UAAM,MAAM,gBAAgB;AAAA,EAC/B;AAAA,EACD,gBAAgB,CAAC,OAAO,UAAU;AAC9B,UAAM,MAAM,iBAAiB;AAAA,EAChC;AAAA,EACD,OAAO,CAAC,OAAO,UAAU;AACrB,UAAM,MAAM,QAAQ;AAAA,EACvB;AACL;AACO,MAAM,aAAa;AAAA,EAGtB,YAAY,OAAO;AAFnB;AACA;AAEI,SAAK,QAAQ;AACb,UAAM,cAAc;AAAA,MAChB,GAAG;AAAA,MACH,GAAG,KAAK,mBAAoB;AAAA,IAC/B;AAGD,UAAM,UAAU,CAAE;AAClB,WAAO,KAAK,WAAW,EAAE,QAAQ,CAACJ,SAAQ;AACtC,aAAO,eAAe,SAASA,MAAK;AAAA,QAChC,OAAO,CAAC,OAAO,UAAU;AAErB,cAAI,MAAM,MAAMA,IAAG,MAAM,OAAO;AAC5B,wBAAYA,IAAG,EAAE,OAAO,KAAK;AAG7B,iBAAK,MAAM,cAAe;AAAA,UAClD;AAAA,QACiB;AAAA,QACD,UAAU;AAAA;AAAA,QACV,cAAc;AAAA;AAAA,MAC9B,CAAa;AAAA,IACb,CAAS;AACD,SAAK,MAAM;AAAA,EACnB;AAAA,EACI,UAAU,OAAO,QAAQ,OAAO;AAE5B,QAAI,MAAM,WAAW,QAAQ;AACzB;AAAA,IACZ;AACQ,UAAM,SAAS;AACf,UAAM,QAAQ,KAAK,QAAQ,KAAK;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB,OAAO,YAAY;AAC/B,UAAM,eAAe;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,aAAa,OAAO;AAChB,SAAK,UAAU,OAAO,WAAW;AACjC,UAAM,QAAQ,mBAAoB;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,oBAAoB,OAAO;AACvB,QAAI,MAAM,iBAAiB;AACvB;AAAA,IACZ;AACQ,UAAM,kBAAkB;AACxB,mBAAe,MAAM;AAEjB,UAAI,MAAM,WAAW,aAAa;AAC9B;AAAA,MAChB;AACY,YAAM,kBAAkB;AACxB,WAAK,YAAY,KAAK;AAAA,IAClC,CAAS;AAAA,EACT;AACA;AC1JO,MAAM,WAAW;AAAA,EAAjB;AACH,gCAAO,CAAE;AAAA;AAAA,EACT,QAAQ;AACJ,SAAK,OAAO,CAAE;AAAA,EACtB;AAAA,EACI,UAAU,MAAM;AACZ,QAAI,CAAC,KAAK,KAAK,IAAI,GAAG;AAClB,WAAK,KAAK,IAAI,IAAI;AAAA,IAC9B;AACQ,SAAK,KAAK,IAAI;AAAA,EACtB;AAAA,EACI,UAAU;AACN,WAAO,EAAE,GAAG,KAAK,KAAM;AAAA,EAC/B;AACA;ACpBO,MAAM,qBAAqB;AAAA,EAmB9B,YAAY,OAAO,UAAU;AAlB7B;AACA,mCAAU;AACV,0CAAiB,oBAAI,IAAK;AAC1B;AACA;AACA;AACA;AACA,2CAAkB;AAClB,oDAA2B;AAS3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAY;AAER,SAAK,QAAQ;AACb,UAAM,EAAE,kBAAiB,IAAK;AAC9B,SAAK,oBAAoB,KAAK,MAAM,iBAAiB;AACrD,UAAM,iBAAiB,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,SAAS,oBAAoB,CAAC;AAC7E,SAAK,kBAAkB,KAAK,MAAM,oBAAoB,cAAc;AACpE,SAAK,kBAAkB,SAAS;AAChC,SAAK,eAAe,SAAS;AAC7B,QAAI,SAAS,cAAc;AACvB,UAAI,aAAa;AACjB,kBAAY,MAAM;AACd,YAAI,eAAe,KAAK,SAAS;AAC7B,uBAAa,KAAK;AAClB,kBAAQ,IAAI,uCAAuCD,mBAAU,KAAK,OAAO,GAAC,UAASA,mBAAU,KAAK,iBAAiB,GAAC,SAAU,aAAK,UAAU,KAAK,oBAC9I,KAAK,QAAQ,CAAC,GAAC,KAAI;AAAA,QAC3C;AAAA,MACa,GAAE,GAAI;AAAA,IACnB;AAGQ,QAAI,sBAAsB,GAAG;AAEzB,WAAK,mBAAmB,MAAM;AAAA,MAAG;AAAA,IAC7C;AAAA,EACA;AAAA,EACI,iBAAiB,SAAS,UAAU;AAChC,QAAI,KAAK,eAAe,IAAI,OAAO,GAAG;AAElC,WAAK,WAAW,KAAK,eAAe,IAAI,OAAO;AAAA,IAC3D;AACQ,QAAI,aAAa,GAAG;AAChB,WAAK,eAAe,OAAO,OAAO;AAClC;AAAA,IACZ,OACa;AACD,WAAK,WAAW;AAChB,WAAK,eAAe,IAAI,SAAS,QAAQ;AAAA,IACrD;AACQ,QAAI,KAAK,UAAU,KAAK,mBAAmB;AACvC,WAAK,2BAA2B;AAAA,IAC5C;AAAA,EACA;AAAA,EACI,eAAe;AACX,WAAQ,KAAK,4BACR,KAAK,UAAU,KAAK,mBACjB,KAAK,YAAY,KAAK,mBAAmB,KAAK;AAAA,EAC9D;AAAA,EACI,UAAU;AACN,UAAM,WAAW,KAAK;AACtB,SAAK,kBAAkB,KAAK;AAC5B,SAAK,2BAA2B;AAChC,QAAI,UAAU;AACV,WAAK,MAAM,gBAAgB,mBAAmB;AAAA,QAC1C,SAAS,KAAK;AAAA,QACd,mBAAmB,KAAK;AAAA,MACxC,CAAa;AAAA,IACb;AACQ,QAAI,KAAK,cAAc;AACnB,cAAQ,IAAI,0DAA0D,gBAAU;AAAA,IAC5F;AAQQ,UAAM,WAAW,CAAC,GAAG,KAAK,eAAe,KAAM,GAAE,KAAK,CAAC,UAAU,aAAa;AAC1E,YAAM,gBAAgB,SAAS;AAC/B,YAAM,gBAAgB,SAAS;AAC/B,UAAI,kBAAkB,eAAe;AACjC,eAAQ,SAAS,2BACb,SAAS;AAAA,MAC7B,WACqB,eAAe;AACpB,eAAO;AAAA,MACvB,WACqB,eAAe;AACpB,eAAO;AAAA,MACvB;AACY,aAAO;AAAA,IACnB,CAAS;AAED,UAAM,YAAY,KAAK;AACvB,UAAM,YAAY,KAAK,MAAM;AAC7B,eAAW,WAAW,UAAU;AAC5B,UAAI,QAAQ,YAAY;AAGpB;AAAA,MAChB;AACY,UAAI,QAAQ,mBAAmB,OAAO;AAClC,gBAAQ,WAAW,KAAM;AACzB,kBAAU,uBAAuB,OAAO;AAAA,MACxD;AACY,UAAI,KAAK,WAAW,WAAW;AAE3B;AAAA,MAChB;AAAA,IACA;AACQ,QAAI,KAAK,WAAW,KAAK,mBAAmB;AACxC,WAAK,MAAM,gBAAgB,yBAAyB;AAAA,QAChD,SAAS,KAAK;AAAA,QACd,mBAAmB,KAAK;AAAA,MACxC,CAAa;AACD,cAAQ,KAAK,+EAA+E,YAAK,QAAS;AAAA,IACtH;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB;AACZ,QAAI,2BAA2B;AAC/B,UAAM,oBAAoB,CAAC,GAAG,KAAK,eAAe,KAAM,GAAE;AAAA;AAAA,MAE1D,CAAC,KAAK,YAAY;AACd,oCAA4B,QAAQ,aAAa,IAAI;AACrD,eAAQ,OAAO,QAAQ,aAAa,KAAK,eAAe,IAAI,OAAO,IAAI;AAAA,MAC1E;AAAA,MAAE;AAAA,IAAC;AACJ,WAAO;AAAA,MACH,mBAAmB,KAAK;AAAA,MACxB,iBAAiB,KAAK;AAAA,MACtB;AAAA,MACA,SAAS,KAAK;AAAA,MACd;AAAA,MACA,gBAAgB,KAAK,eAAe;AAAA,IACvC;AAAA,EACT;AACA;ACrJO,MAAM,mBAAmB;AAAA,EAG5B,YAAY,YAAY,eAAe;AAFvC;AACA;AAEI,SAAK,aAAa;AAClB,SAAK,gBAAgB;AAAA,EAC7B;AAAA,EACI,iBAAiB,UAAU;AACvB,SAAK,WAAW,iBAAiB,KAAK,eAAe,QAAQ;AAAA,EACrE;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,cAAc;AAAA,EAClC;AACA;ACZO,MAAM,aAAa;AAAA,EAStB,YAAY,SAAS;AARrB;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA,oCAAW,CAAE;AAET,SAAK,UAAU;AACf,SAAK,QAAQ,QAAQ;AACrB,SAAK,YAAY,QAAQ;AACzB,SAAK,eAAe,QAAQ;AAC5B,SAAK,YAAY,QAAQ;AAAA,EACjC;AACA;ACEO,MAAM,qBAAqB,SAAS;AAAA,EAIvC,YAAY,OAAO,OAAO,cAAc;AACpC,UAAM,OAAO,KAAK;AAJtB;AACA;AACA,iDAAwB;AAiCxB,wCAAe,MAAM;AACjB,YAAM,EAAE,QAAO,IAAK;AACpB,YAAM,WAAW,KAAK,QAAQ,MAAM;AACpC,YAAM,YAAY,KAAK,QAAQ,MAAM;AACrC,YAAM,YAAY,KAAK,QAAQ,SAAS;AACxC,YAAMe,cAAa,KAAK,QAAQ,SAAS;AACzC,UAAI,YAAY,QAAQ;AACpB,aAAK,MAAM,QAAQ;AACnB,aAAK,MAAM,SAAS;AAAA,MAChC,WACiB,YAAY,SAAS;AAC1B,aAAK,MAAM,QAAQ;AACnB,aAAK,MAAM,SAASA;AAAA,MAChC,WACiB,YAAY,QAAQ;AACzB,aAAK,MAAM,QAAQ;AACnB,aAAK,MAAM,SAASA;AAAA,MAChC;AACQ,WAAK,qBAAsB;AAG3B,WAAK,MAAM,cAAe;AAC1B,WAAK,KAAK,UAAU;AAAA,QAChB,MAAM;AAAA,QACN,YAAY;AAAA,UACR,OAAO,KAAK,QAAQ,SAAS;AAAA,UAC7B,QAAQ,KAAK,QAAQ,SAAS;AAAA,QACjC;AAAA,MACb,CAAS;AAAA,IACJ;AACD,wCAAe,CAAC,QAAQ,UAAU;AAC9B,WAAK,KAAK,UAAU;AAAA,QAChB,MAAM;AAAA,QACN;AAAA,MACZ,CAAS;AAAA,IACJ;AAjEG,SAAK,wBAAwB,MAAM;AACnC,SAAK,eAAe;AACpB,UAAM,oBAAoB,KAAK,YAAY;AAAA,MACvC,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,MAAM;AAAA,MACb,QAAQ,MAAM;AAAA,MACd,WAAW,MAAM;AAAA,MACjB,OAAO,MAAM;AAAA,MACb,QAAQ,MAAM;AAAA,MACd,SAAS,MAAM;AAAA,MACf,YAAY,MAAM;AAAA,MAClB,SAAS,MAAM;AAAA,MACf,SAAS,MAAM;AAAA,MACf,eAAe,MAAM;AAAA,MACrB,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,MAClB,UAAU,MAAM;AAAA,MAChB,aAAa,MAAM;AAAA,MACnB,WAAW,MAAM;AAAA,MACjB,YAAY,MAAM;AAAA,MAClB,MAAM,MAAM;AAAA,MACZ,YAAY,MAAM;AAAA,MAClB,UAAU,MAAM;AAAA,MAChB,cAAc,MAAM;AAAA,MACpB,eAAe,MAAM;AAAA,MACrB,gBAAgB,MAAM;AAAA,IAClC,CAAS;AACD,SAAK,UAAU;AAAA,EACvB;AAAA,EAqCI,IAAI,QAAQ;AACR,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,MAAM,QAAQ;AACnB,SAAK,aAAa,IAAI,MAAM,KAAK,SAAS,KAAK;AAG/C,QAAI,KAAK,YAAY,QAAQ;AACzB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EACI,IAAI,OAAO,OAAO;AACd,SAAK,MAAM,SAAS;AACpB,SAAK,aAAa,IAAI,OAAO,KAAK,SAAS,KAAK;AAGhD,QAAI,KAAK,YAAY,QAAQ;AACzB,WAAK,cAAc,WAAW,KAAK;AAAA,IAC/C;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,aAAa,IAAI,MAAM,KAAK,SAAS,KAAK;AAAA,EACvD;AAAA,EACI,IAAI,OAAO;AACP,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,KAAK,OAAO;AACZ,SAAK,aAAa,IAAI,KAAK,KAAK,SAAS,KAAK;AAAA,EACtD;AAAA,EACI,IAAI,uBAAuB;AACvB,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,qBAAqB,OAAO;AAC5B,SAAK,wBAAwB;AAC7B,SAAK,aAAa,aAAa,KAAK,OAAO;AAC3C,UAAM,eAAe,KAAK,MAAM,oBAAoB,KAAK,QAAQ,OAAO,KAAK,qBAAqB;AAClG,QAAI,CAAC,cAAc;AACf,cAAQ,KAAK,oCAAoC,KAAK,QAAQ,MAAM,UAAU;AAC9E;AAAA,IACZ;AACQ,SAAK,eAAe;AACpB,SAAK,UAAU,KAAK,YAAY,KAAK,QAAQ,KAAK;AAAA,EAC1D;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,SAAK,aAAa,IAAI,SAAS,KAAK,SAAS,KAAK;AAAA,EAC1D;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,WAAW,OAAO;AAClB,SAAK,aAAa,IAAI,WAAW,KAAK,SAAS,KAAK;AAAA,EAC5D;AAAA,EACI,IAAI,cAAc;AACd,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,YAAY,OAAO;AACnB,SAAK,aAAa,IAAI,YAAY,KAAK,SAAS,KAAK;AAAA,EAC7D;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,UAAU,OAAO;AACjB,SAAK,aAAa,IAAI,UAAU,KAAK,SAAS,KAAK;AAAA,EAC3D;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,WAAW,OAAO;AAClB,SAAK,aAAa,IAAI,WAAW,KAAK,SAAS,KAAK;AAAA,EAC5D;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,UAAU,OAAO;AACjB,SAAK,aAAa,IAAI,UAAU,KAAK,SAAS,KAAK;AAAA,EAC3D;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,aAAa,IAAI,QAAQ,KAAK,SAAS,KAAK;AAAA,EACzD;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,WAAW,OAAO;AAClB,SAAK,aAAa,IAAI,WAAW,KAAK,SAAS,KAAK;AAAA,EAC5D;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,aAAa,IAAI,QAAQ,KAAK,SAAS,KAAK;AAAA,EACzD;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,QAAQ,OAAO;AACf,SAAK,aAAa,IAAI,QAAQ,KAAK,SAAS,KAAK;AAAA,EACzD;AAAA,EACI,IAAI,gBAAgB;AAChB,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,cAAc,OAAO;AACrB,SAAK,aAAa,IAAI,cAAc,KAAK,SAAS,KAAK;AAAA,EAC/D;AAAA,EACI,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,WAAW,OAAO;AAClB,SAAK,aAAa,IAAI,WAAW,KAAK,SAAS,KAAK;AAAA,EAC5D;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,SAAS,OAAO;AAChB,SAAK,aAAa,IAAI,SAAS,KAAK,SAAS,KAAK;AAAA,EAC1D;AAAA,EACI,IAAI,eAAe;AACf,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,aAAa,OAAO;AACpB,SAAK,aAAa,IAAI,aAAa,KAAK,SAAS,KAAK;AAAA,EAC9D;AAAA,EACI,IAAI,gBAAgB;AAChB,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,cAAc,OAAO;AACrB,SAAK,aAAa,IAAI,cAAc,KAAK,SAAS,KAAK;AAAA,EAC/D;AAAA,EACI,IAAI,iBAAiB;AACjB,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,eAAe,OAAO;AACtB,SAAK,aAAa,IAAI,eAAe,KAAK,SAAS,KAAK;AAAA,EAChE;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK,QAAQ,MAAM;AAAA,EAClC;AAAA,EACI,IAAI,MAAM,OAAO;AACb,SAAK,aAAa,IAAI,MAAM,KAAK,SAAS,KAAK;AAAA,EACvD;AAAA,EACI,OAAO,OAAO,oBAAoB;AAC9B,UAAM,OAAO,OAAO,kBAAkB;AACtC,iBAAa,KAAK,eAAe;AAEjC,SAAK,aAAa,IAAI,EAAE,KAAK,SAAS,KAAK,gBAAgB,EAAE;AAC7D,SAAK,aAAa,IAAI,EAAE,KAAK,SAAS,KAAK,gBAAgB,EAAE;AAAA,EACrE;AAAA,EACI,0BAA0B;AACtB,QAAI,KAAK,WAAW,KAAK,QAAQ,MAAM,SAAS,IAAI;AAChD,aAAO;AAAA,IACnB;AACQ,WAAO,MAAM,wBAAyB;AAAA,EAC9C;AAAA,EACI,qBAAqB,cAAc;AAC/B,UAAM,qBAAqB,YAAY;AACvC,SAAK,aAAa,gBAAgB,KAAK,SAAS,YAAY;AAAA,EACpE;AAAA,EACI,YAAYN,WAAU;;AAClB,iBAAa,KAAK,eAAe;AAGjC,QAAI,CAAC,KAAK,aAAa,aAAa;AAChC,YAAM,YAAYA,SAAQ;AAC1B;AAAA,IACZ;AAIQ,QAAI,KAAK,wBAAwB;AAC7B,UAAI,CAACA,UAAS,uBAAuB;AACjC;AAAA,MAChB;AAEY,UAAI,KAAK,wBAAwBA,UAAS,eAAe;AACrD;AAAA,MAChB;AAAA,IACA;AACQ,QAAI,KAAK,4BAA0BL,MAAA,KAAK,MAAM,WAAX,gBAAAA,IAAmB,MAAK;AACvD,WAAK,kBAAkB,SAAS,SAAU;AAC1C,UAAI,KAAK,gBAAgB;AACrB,aAAK,gBAAgB,SAAS,KAAK,cAAc;AAAA,MACjE;AAAA,IACA;AACQ,iBAAa,KAAK,eAAe;AACjC,SAAK,aAAa,YAAY,KAAK,SAAS,KAAK,iBAAiB,KAAK,cAAc,KAAK,YAAY,KAAK,wBAAwB,KAAK,qBAAqB;AAAA,EACrK;AAAA;AAAA;AAAA;AAAA,EAII,UAAU;AACN,UAAM,QAAS;AACf,SAAK,aAAa,aAAa,KAAK,OAAO;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,YAAY,OAAO;AACf,UAAM,oBAAoB,KAAK,aAAa,YAAY,OAAO,IAAI;AACnE,sBAAkB,QAAQ,GAAG,UAAU,KAAK,YAAY;AACxD,sBAAkB,QAAQ,GAAG,UAAU,KAAK,YAAY;AACxD,SAAK,aAAa,oBAAoB,iBAAiB;AACvD,WAAO;AAAA,EACf;AACA;ACtUO,SAAS,qBAAqB,GAAG;AACpC,QAAM,aAAa;AAAA,IACf,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,WAAW;AAAA,EACd;AACD,QAAM,OAAO,OAAO,KAAK,CAAC;AAC1B,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,UAAMH,OAAM,KAAK,CAAC;AAClB,QAAI,CAACA,MAAK;AACN;AAAA,IACZ;AACQ,UAAM,QAAQ,EAAEA,IAAG;AACnB,UAAM,YAAY,OAAO;AAIzB,QAAI,cAAc,YAAY,MAAM,SAAS,MAAM;AAC/C,cAAQ,KAAK,yBAAyB,OAAAA,MAAG,wDAAuD;AAKhG,QAAEA,IAAG,IAAI,MAAM,UAAU,GAAG,IAAI;AAAA,IAC5C;AACQ,QAAI,CAAC,WAAW,SAAS,GAAG;AACxB,cAAQ,KAAK,yBAAyB,OAAAA,MAAG,2DAA0D;AACnG,aAAO,EAAEA,IAAG;AAAA,IACxB;AAAA,EACA;AACI,SAAO;AACX;ACCA,MAAM,eAAe;AAEd,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA,EAuCf,YAAY,SAAS;AAtCrB;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA,qCAAY;AACZ,yCAAgB;AAChB,4CAAmB;AACnB,wCAAe;AACf,0CAAiB;AACjB,2CAAkB;AAClB,2CAAkB,CAAE;AACpB,0CAAiB,CAAE;AAEnB;AAAA,sCAAa;AAKT,SAAK,UAAU;AACf,UAAM,EAAE,QAAQ,YAAY,UAAU,WAAW,cAAc,kBAAkB,aAAa,iBAAAU,kBAAiB,eAAe,cAAc,YAAc,IAAG;AAC7J,SAAK,WAAW,QAAQ;AACxB,SAAK,YAAY,IAAI,mBAAmBA,gBAAe;AACvD,SAAK,eAAe,IAAI,qBAAqB,MAAM,aAAa;AAChE,SAAK,YAAY,IAAI,kBAAmB;AACxC,SAAK,mBAAmB,IAAI,iBAAkB;AAC9C,SAAK,aAAa,mBAAmB,IAAI,WAAY,IAAG;AACxD,SAAK,eAAe,QAAQ;AAC5B,QAAI,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;AACpB,QAAI,cAAc;AACd,WAAK,MAAM,QAAQ,YAAY,IACzB,eACA,CAAC,cAAc,cAAc,cAAc,YAAY;AAAA,IACzE;AACQ,SAAK,eAAe;AAEpB,SAAK,cAAc,YAAY,GAAG,GAAG,UAAU,SAAS;AACxD,SAAK,eAAe,oBAAoB,KAAK,aAAa,EAAE;AAC5D,UAAM,kBAAkB;AAAA,MACpB,OAAO;AAAA,MACP;AAAA,MACA,YAAY,QAAQ,2BAA2B,QAAQ;AAAA,MACvD,YAAY,kCAAc;AAAA,MAC1B;AAAA,MACA,WAAW,KAAK;AAAA,MAChB,cAAc,KAAK;AAAA,MACnB,WAAW,KAAK;AAAA,MAChB,YAAY,KAAK;AAAA,MACjB;AAAA,IACH;AACD,SAAK,WAAW,IAAI,aAAa,eAAe;AAChD,UAAM,aAAa,KAAK,SAAS,QAAQ;AACzC,SAAK,eAAe,KAAK,SAAS,gBAAiB;AACnD,uBAAmB,UAAU;AAE7B,SAAK,UAAU,WAAW,KAAK;AAE/B,SAAK,gBAAgB,CAAE;AACvB,gBAAY,QAAQ,CAAC,0BAA0B;AAC3C,YAAM,qBAAqB,IAAI,sBAAsB,IAAI;AACzD,YAAM,YAAY,mBAAmB;AACrC,UAAI,cAAc,SAAS,eAAe,UAAU;AAChD,gBAAQ,KAAK,qEAAqE;AAClF;AAAA,MAChB;AACY,UAAI,8BAA8B,cAAc;AAC5C,YAAI,cAAc,UAAU;AACxB,eAAK,cAAc,QAAQ,IACvB;AAAA,QACxB,WACyB,cAAc,OAAO;AAC1B,eAAK,cAAc,KAAK,IAAI;AAAA,QAChD;AAAA,MACA;AAAA,IACA,CAAS;AACD,QAAI,OAAO,KAAK,KAAK,aAAa,EAAE,WAAW,GAAG;AAC9C,cAAQ,KAAK,yDAAyD;AAAA,IAClF;AACQ,SAAK,cAAc,IAAI,cAAc,KAAK,aAAa;AAEvD,UAAMK,YAAW,IAAI,SAAS,MAAM;AAAA,MAChC,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,UAAU;AAAA,MACV,UAAU;AAAA,MACV,OAAO;AAAA,MACP,UAAU;AAAA,MACV,aAAa;AAAA,MACb,WAAW;AAAA,MACX,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,gBAAgB,CAAE;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,KAAK;AAAA,MACL,KAAK;AAAA,MACL,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,cAAc,KAAK;AAAA,IAC/B,CAAS;AACD,SAAK,OAAOA;AAEG;AACX,gBAAU,IAAI;AAAA,IAC1B;AAAA,EACA;AAAA,EACI,cAAc,OAAO;AACjB,SAAK,SAAS,iBAAiB,KAAK;AACpC,SAAK,kBAAkB;AAAA,EAC/B;AAAA,EACI,kBAAkB;AACd,UAAM,eAAe,aAAc;AACnC,SAAK,gBAAgB,KAAK;AAC1B,SAAK,mBAAmB;AACxB,SAAK,YAAY,CAAC,KAAK,gBACjB,MAAM,IACN,eAAe,KAAK;AAC1B,SAAK,UAAU,YAAY;AAC3B,SAAK,aAAa,YAAY;AAG9B,SAAK,SAAS,KAAK,aAAa;AAAA,MAC5B,MAAM,KAAK;AAAA,MACX,OAAO,KAAK;AAAA,IACxB,CAAS;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAII,mBAAmB;AACf,UAAM,EAAE,iBAAgB,IAAK;AAC7B,QAAI,CAAC,KAAK,MAAM;AACZ;AAAA,IACZ;AAEQ,qBAAiB,OAAO,KAAK,SAAS;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAII,kBAAkB;AACd,WAAO,CAAC,CAAC,KAAK,KAAK,cAAc,KAAK;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAII,YAAY;AACR,UAAM,EAAE,UAAAP,WAAU,gBAAe,IAAK;AACtC,iBAAaA,SAAQ;AAErB,QAAI,KAAK,KAAK,eAAe,GAAG;AAC5B,WAAK,KAAK,OAAO,KAAK,WAAW,KAAK,KAAK,YAAY;AAAA,IACnE;AAEQ,IAAAA,UAAS,MAAO;AAEhB,QAAI,KAAK,aAAa,0BAA0B;AAC5C,WAAK,aAAa,QAAS;AAAA,IACvC;AAGQ,QAAIA,UAAS,SAAS,SAAS,GAAG;AAC9B,MAAAA,UAAS,eAAgB;AAAA,IACrC;AAEQ,SAAK,SAAS,KAAK,IAAI;AAEvB,IAAAA,aAAA,gBAAAA,UAAU;AACV,SAAK,aAAc;AAEnB,QAAI,iBAAiB;AACjB,WAAK,kBAAkB;AAAA,IACnC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeI,gBAAgB,MAAM,MAAM;AACxB,SAAK,gBAAgB,KAAK,CAAC,MAAM,IAAI,CAAC;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,mBAAmB;AACf,eAAW,CAAC,MAAM,IAAI,KAAK,KAAK,iBAAiB;AAC7C,WAAK,SAAS,KAAK,MAAM,IAAI;AAAA,IACzC;AACQ,SAAK,kBAAkB,CAAE;AAAA,EACjC;AAAA,EACI,eAAe;;AAGX,UAAM,EAAE,sBAAsB,KAAK;AACnC,QAAI,mBAAmB;AACnB,WAAK;AACL,WAAK,kBAAkB,KAAK;AAC5B,UAAI,KAAK,kBAAkB,mBAAmB;AAC1C,cAAMQ,OAAM,KAAK,MAAO,KAAK,eAAe,MAAQ,KAAK,cAAc;AACvE,aAAK,eAAe;AACpB,aAAK,iBAAiB;AACtB,aAAK,gBAAgB,aAAa;AAAA,UAC9B,KAAAA;AAAA,UACA,iBAAgBZ,OAAAD,MAAA,KAAK,eAAL,gBAAAA,IAAiB,cAAjB,OAAAC,MAA8B;AAAA,QAClE,CAAiB;AACD,SAAAC,MAAA,KAAK,eAAL,gBAAAA,IAAiB;AAAA,MACjC;AAAA,IACA;AAAA,EACA;AAAA,EACI,SAAS,MAAM;AACX,iBAAa,KAAK,QAAQ;AAC1B,QAAI,KAAK,iBAAiB,MAAM;AAC5B,WAAK,YAAY,KAAK,QAAQ;AAAA,IAC1C;AACQ,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,YAAM,QAAQ,KAAK,SAAS,CAAC;AAC7B,UAAI,UAAU,QAAW;AACrB;AAAA,MAChB;AACY,UAAI,MAAM,eAAe,KACpB,MAAM,iBAAiB,QACpB,MAAM,gBAAgB,oBAAoB,aAAc;AAC5D;AAAA,MAChB;AACY,WAAK,SAAS,KAAK;AAAA,IAC/B;AAAA,EACA;AAAA;AAAA;AAAA;AAAA,EAII,gBAAgB;AACZ,SAAK,kBAAkB;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,oBAAoB,SAAS,uBAAuB,MAAM;AACtD,UAAM,kBAAkB,GAAG,eAAQ,YAAa,eAAQ,WAAY,eAAQ,YAAa,eAAQ,aAAc,8BAAuB,uBAAuB;AAE7J,QAAI,KAAK,eAAe,eAAe,MAAM,QAAW;AACpD,aAAO,KAAK,eAAe,eAAe;AAAA,IACtD;AAEQ,QAAI,aAAa;AACjB,QAAI,mBAAmB;AAEvB,QAAI,YAAY;AACZ,YAAM,mBAAmB,KAAK,cAAc,UAAU;AACtD,UAAI,CAAC,kBAAkB;AACnB,gBAAQ,KAAK,2BAA2B,mBAAU,eAAc;AAChE,qBAAa;AACb,2BAAmB;AAAA,MACnC,WACqB,CAAC,iBAAiB,cAAc,OAAO,GAAG;AAC/C,gBAAQ,KAAK,sCAAsC,mBAAU,eAAc,OAAO;AAClF,qBAAa;AACb,2BAAmB;AAAA,MACnC;AAAA,IACA;AACQ,QAAI,CAAC,YAAY;AAEb,iBAAW,CAAC,MAAM,EAAE,KAAK,OAAO,QAAQ,KAAK,aAAa,GAAG;AACzD,YAAI,GAAG,cAAc,OAAO,GAAG;AAC3B,uBAAa;AACb;AAAA,QACpB;AAAA,MACA;AACY,UAAI,CAAC,cAAc,KAAK,cAAc,WAAW,QAAW;AAExD,qBAAa;AAAA,MAC7B;AAAA,IACA;AACQ,QAAI,kBAAkB;AAClB,cAAQ,KAAK,iCAAiC,cAAO,UAAU,EAAG;AAAA,IAC9E;AACQ,QAAI,CAAC,YAAY;AAGb,aAAO;AAAA,IACnB;AAEQ,UAAM,uBAAuB,KAAK,cAAc,UAAU;AAC1D,iBAAa,sBAAsB,gCAAgC;AAEnE,SAAK,eAAe,eAAe,IAAI;AAGvC,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB,MAAM,OAAO;AACzB,WAAO,KAAK,UAAU,WAAW,MAAM,KAAK;AAAA,EACpD;AAAA,EACI,WAAW,OAAO;AACd,UAAM,gBAAgB,KAAK,oBAAoB,KAAK;AACpD,WAAO,IAAI,SAAS,MAAM,aAAa;AAAA,EAC/C;AAAA,EACI,eAAe,OAAO;;AAClB,UAAM,YAAWF,MAAA,MAAM,aAAN,OAAAA,MAAkB;AACnC,UAAM,gBAAgB;AAAA,MAClB,GAAG,KAAK,oBAAoB,KAAK;AAAA,MACjC,OAAMC,MAAA,MAAM,SAAN,OAAAA,MAAc;AAAA,MACpB,uBAAsBC,MAAA,MAAM,yBAAN,OAAAA,MAA8B;AAAA,MACpD;AAAA,MACA,aAAY,WAAM,eAAN,YAAoB;AAAA,MAChC,YAAW,WAAM,cAAN,YAAmB;AAAA,MAC9B,aAAY,WAAM,eAAN,YAAoB;AAAA,MAChC,cAAa,WAAM,gBAAN,YAAqB;AAAA,MAClC,YAAW,WAAM,cAAN,YAAmB;AAAA,MAC9B,UAAS,WAAM,YAAN,YAAiB;AAAA,MAC1B,aAAY,WAAM,eAAN,YAAoB;AAAA,MAChC,UAAS,WAAM,YAAN,YAAiB;AAAA,MAC1B,UAAS,WAAM,YAAN,YAAiB;AAAA,MAC1B,gBAAe,WAAM,kBAAN,YAAuB;AAAA,MACtC,YAAY,MAAM;AAAA;AAAA,MAClB,WAAU,WAAM,aAAN,YAAkB;AAAA,MAC5B,eAAc,WAAM,iBAAN,YAAsB;AAAA,MACpC,gBAAe,WAAM,kBAAN,YAAuB;AAAA,MACtC,iBAAgB,WAAM,mBAAN,YAAwB;AAAA,MACxC,QAAO,WAAM,UAAN,YAAe,CAAE;AAAA,MACxB,aAAa;AAAA,IAChB;AACD,UAAM,uBAAuB,KAAK,oBAAoB,eAAe,MAAM,oBAAoB;AAC/F,QAAI,CAAC,sBAAsB;AACvB,YAAM,IAAI,MAAM,yCAAyC,qBAAc,WAAY;AAAA,IAC/F;AACQ,WAAO,IAAI,aAAa,MAAM,eAAe,oBAAoB;AAAA,EACzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,oBAAoB,OAAO;;AACvB,UAAM,SAAQF,MAAA,MAAM,UAAN,OAAAA,MAAe;AAC7B,UAAM,WAAU,MAAAE,OAAAD,MAAA,MAAM,YAAN,OAAAA,MAAiB,MAAM,aAAvB,OAAAC,MAAmC,MAAM,cAAzC,YAAsD;AACtE,UAAM,WAAU,uBAAM,YAAN,YAAiB,MAAM,aAAvB,YAAmC,MAAM,eAAzC,YAAuD;AACvE,UAAM,WAAU,uBAAM,YAAN,YAAiB,MAAM,gBAAvB,YAAsC,MAAM,cAA5C,YAAyD;AACzE,UAAM,WAAU,uBAAM,YAAN,YAAiB,MAAM,gBAAvB,YAAsC,MAAM,eAA5C,YAA0D;AAC1E,QAAI,OAAO,CAAE;AACb,QAAI,KAAK,QAAQ,cAAc,MAAM;AACjC,aAAO,sBAAqB,WAAM,SAAN,YAAc,EAAE;AAAA,IACxD;AACQ,WAAO;AAAA,MACH,IAAG,WAAM,MAAN,YAAW;AAAA,MACd,IAAG,WAAM,MAAN,YAAW;AAAA,MACd,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,SAAQ,WAAM,WAAN,YAAgB;AAAA,MACxB,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,WAAU,WAAM,aAAN,YAAkB;AAAA,MAC5B,WAAU,WAAM,aAAN,YAAkB;AAAA,MAC5B;AAAA,MACA,WAAU,WAAM,aAAN,YAAkB;AAAA,MAC5B,cAAa,WAAM,gBAAN,YAAqB;AAAA,MAClC,YAAW,WAAM,cAAN,YAAmB;AAAA,MAC9B,aAAY,WAAM,eAAN,YAAoB;AAAA,MAChC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAQ,WAAM,WAAN,YAAgB;AAAA,MACxB,eAAc,WAAM,iBAAN,YAAsB;AAAA,MACpC,SAAQ,WAAM,WAAN,YAAgB;AAAA,MACxB,UAAS,WAAM,YAAN,YAAiB;AAAA,MAC1B,iBAAgB,WAAM,mBAAN,YAAwB,CAAE;AAAA,MAC1C,SAAQ,WAAM,WAAN,YAAgB,KAAK;AAAA;AAAA;AAAA,MAG7B,MAAK,WAAM,QAAN,YAAa;AAAA,MAClB,WAAW,MAAM;AAAA,MACjB,UAAU,MAAM;AAAA,MAChB,MAAM,MAAM;AAAA,MACZ,MAAM,MAAM;AAAA,MACZ,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,QAAO,WAAM,UAAN,YAAe;AAAA,MACtB,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,SAAQ,iBAAM,WAAN,YAAgB,MAAM,UAAtB,YAA+B;AAAA,MACvC,WAAU,WAAM,aAAN,YAAkB;AAAA,MAC5B,MAAK,WAAM,QAAN,YAAa;AAAA,MAClB;AAAA,MACA,iBAAgB,WAAM,mBAAN,YAAwB;AAAA,MACxC,WAAW,MAAM;AAAA,MACjB,eAAc,WAAM,iBAAN,YAAsB,KAAK;AAAA,IAC5C;AAAA,EACT;AACA;AC5aO,MAAM,qBAAqB,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAa3C,YAAY,UAAU,QAAQ;;AAC1B,UAAO;AAbX;AACA;AACA;AACA;AACA,qCAAY;AAUR,UAAM,qBAAqB;AAAA,MACvB,qBAAmBF,MAAA,SAAS,kBAAT,gBAAAA,IAAwB,sBAAqB;AAAA,MAChE,wBAAsBC,MAAA,SAAS,kBAAT,gBAAAA,IAAwB,yBAAwB;AAAA,MACtE,mBAAiBC,MAAA,SAAS,kBAAT,gBAAAA,IAAwB,oBAAmB;AAAA,MAC5D,gBAAc,cAAS,kBAAT,mBAAwB,iBAAgB;AAAA,IACzD;AACD,UAAM,mBAAmB;AAAA,MACrB,UAAU,SAAS,YAAY;AAAA,MAC/B,WAAW,SAAS,aAAa;AAAA,MACjC,eAAe;AAAA,MACf,cAAc,SAAS,gBAAgB;AAAA,MACvC,yBAAyB,SAAS,2BAA2B;AAAA,MAC7D,0BAA0B,SAAS,4BAA4B,OAAO;AAAA,MACtE,aAAY,cAAS,eAAT,YAAuB;AAAA,MACnC,mBAAmB,SAAS,qBAAqB;AAAA,MACjD,iBAAiB,SAAS,oBAAoB,SAAY,SAAS,kBAAkB;AAAA,MACrF,mBAAkB,cAAS,qBAAT,YAA6B;AAAA,MAC/C,cAAa,cAAS,gBAAT,YAAwB;AAAA,MACrC,YAAW,cAAS,cAAT,YAAsB;AAAA,MACjC,cAAc,SAAS;AAAA,MACvB,iBAAgB,cAAS,mBAAT,YAA2B,IAAI,OAAO;AAAA,MACtD,aAAa,SAAS;AAAA,MACtB,eAAc,cAAS,iBAAT,YAAyB;AAAA,IAC1C;AACD,SAAK,WAAW;AAChB,UAAM,EAAE,UAAU,WAAW,yBAAAY,0BAAyB,0BAA0B,UAAS,IAAM;AAC/F,UAAM,qBAAqB,WAAWA;AACtC,UAAM,sBAAsB,YAAYA;AACxC,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,SAAK,SAAS;AACd,WAAO,QAAQ,qBAAqB;AACpC,WAAO,SAAS,sBAAsB;AACtC,WAAO,MAAM,QAAQ,GAAG,2BAAkB;AAC1C,WAAO,MAAM,SAAS,GAAG,4BAAmB;AAE5C,SAAK,QAAQ,IAAI,MAAM;AAAA,MACnB,UAAU,KAAK,SAAS;AAAA,MACxB,WAAW,KAAK,SAAS;AAAA,MACzB,cAAc,KAAK,SAAS;AAAA,MAC5B,YAAY,KAAK,SAAS;AAAA,MAC1B,QAAQ,KAAK;AAAA,MACb,yBAAyB,KAAK,SAAS;AAAA,MACvC,0BAA0B,KAAK,SAAS;AAAA,MACxC,kBAAkB,KAAK,SAAS;AAAA,MAChC,aAAa,KAAK,SAAS;AAAA,MAC3B,mBAAmB,KAAK,SAAS;AAAA,MACjC,iBAAiB,KAAK,SAAS;AAAA,MAC/B,cAAc,KAAK,SAAS;AAAA,MAC5B,eAAe;AAAA,MACf,UAAU;AAAA,MACV,gBAAgB,KAAK,SAAS;AAAA,MAC9B,aAAa,KAAK,SAAS;AAAA,MAC3B,WAAW,KAAK,SAAS,cAAc;AAAA,MACvC,cAAc,KAAK,SAAS;AAAA,IACxC,CAAS;AAED,SAAK,OAAO,KAAK,MAAM;AAEvB,QAAI;AACJ,QAAI,OAAO,WAAW,UAAU;AAC5B,iBAAW,SAAS,eAAe,MAAM;AAAA,IACrD,OACa;AACD,iBAAW;AAAA,IACvB;AACQ,QAAI,CAAC,UAAU;AACX,YAAM,IAAI,MAAM,+BAA+B;AAAA,IAC3D;AACQ,aAAS,YAAY,MAAM;AAE3B,QAAI,aAAa,CAAC,2BAA2B;AACzC,WAAK,YAAY,IAAI,UAAU,QAAQ,gBAAgB;AAAA,IACnE;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,WAAW,OAAO;AACd,UAAM,OAAO,KAAK,MAAM,WAAW,KAAK;AACxC,QAAI,KAAK,WAAW;AAChB,aAAO,KAAK,UAAU,WAAW,IAAI;AAAA,IACjD;AAGQ,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeI,eAAe,OAAO;AAClB,UAAM,WAAW,KAAK,MAAM,eAAe,KAAK;AAChD,QAAI,KAAK,WAAW;AAChB,aAAO,KAAK,UAAU,eAAe,QAAQ;AAAA,IACzD;AACQ,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,YAAY,MAAM;AACd,QAAI,KAAK,WAAW;AAChB,WAAK,UAAU,YAAY,KAAK,EAAE;AAAA,IAC9C;AACQ,WAAO,KAAK,QAAS;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,cAAc,aAAa,OAAO;AAC9B,WAAO,KAAK,MAAM,UAAU,YAAY,aAAa,KAAK;AAAA,EAClE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,aAAa,YAAY,OAAO;AAC5B,WAAO,KAAK,MAAM,UAAU,WAAW,YAAY,KAAK;AAAA,EAChE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA2BI,oBAAoB,SAAS;AACzB,WAAO,KAAK,MAAM,UAAU,kBAAkB;AAAA,MAC1C;AAAA,IACZ,CAAS;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeI,aAAa,MAAM,OAAO,MAAM;AAC5B,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,IACH;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,YAAY,IAAI;;AACZ,UAAM,QAAOd,MAAA,KAAK,UAAL,gBAAAA,IAAY;AACzB,QAAI,CAAC,MAAM;AACP,aAAO;AAAA,IACnB;AACQ,UAAM,WAAW,CAAC,SAAS;AACvB,UAAI,KAAK,OAAO,IAAI;AAChB,eAAO;AAAA,MACvB;AACY,iBAAW,SAAS,KAAK,UAAU;AAC/B,cAAM,QAAQ,SAAS,KAAK;AAC5B,YAAI,OAAO;AACP,iBAAO;AAAA,QAC3B;AAAA,MACA;AACY,aAAO;AAAA,IACV;AACD,WAAO,SAAS,IAAI;AAAA,EAC5B;AAAA,EACI,eAAe;AACX,UAAM,IAAI,MAAM,iBAAiB;AAAA,EACzC;AAAA,EACI,eAAe;AACX,UAAM,IAAI,MAAM,iBAAiB;AAAA,EACzC;AAAA,EACI,gBAAgB;AACZ,WAAO,KAAK,MAAM,SAAS,cAAe;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,WAAW;AACP,UAAM,IAAI,MAAM,iBAAiB;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,cAAc,OAAO;AACjB,SAAK,MAAM,cAAc,KAAK;AAAA,EACtC;AACA;ACvVO,MAAM,mBAAmB,aAAa;AAAA,EAKzC,YAAY,SAAS;AACjB,UAAO;AALX;AACA;AACA,kCAAS;AACT,mCAAU;AAGN,UAAM,EAAE,YAAY,aAAa,QAAS,IAAG;AAC7C,QAAI,SAAS;AAET,WAAK,UAAU;AAAA,QACX,UAAU,QAAQ,WAAW,QAAQ;AAAA,QACrC,WAAW,QAAQ,YAAY,QAAQ;AAAA,QACvC,SAAS,QAAQ,UAAU,QAAQ;AAAA,MACtC;AAAA,IACb;AACQ,SAAK,aAAa;AAClB,SAAK,cAAc;AAAA,MACf,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,GAAG;AAAA,IACN;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,OAAO,gCAAgC,aAAa;AAChD,WAAO;AAAA,MACH,OAAO,YAAY;AAAA,MACnB,QAAQ,OAAO,YAAY,WAAW,WAChC,GAAG,mBAAY,UACf,YAAY;AAAA,MAClB,SAAS,YAAY;AAAA,MACrB,cAAc,YAAY;AAAA,MAC1B,iBAAiB,YAAY;AAAA,MAC7B,SAAS,YAAY;AAAA,IACxB;AAAA,EACT;AACA;AC1CO,MAAM,sBAAsB,WAAW;AAAA,EAG1C,YAAY,SAAS;AACjB,UAAM,OAAO;AAHjB;AACA;AAGI,UAAM,EAAE,YAAY,QAAO,IAAK;AAEhC,UAAM,4BAA4B,QAAQ,QAAQ,UAAU,EAAE;AAE9D,UAAM,wBAAwB,KAAK;AAEnC,UAAM,iBAAiB;AAAA,MACnB,OAAO,sBAAsB;AAAA,MAC7B,QAAQ,OAAO,sBAAsB,WAAW,WAC1C,GAAG,6BAAsB,UACzB,sBAAsB;AAAA,MAC5B,SAAS,sBAAsB;AAAA,MAC/B,cAAc,sBAAsB;AAAA,MACpC,iBAAiB,sBAAsB;AAAA,MACvC,SAAS,sBAAsB;AAAA,IAClC;AACD,UAAM,WAAW,IAAI,SAAS,YAAY,OAAO,kCAAyB,MAAK,cAAc;AAC7F,QAAI,0BAA0B,SAAS,GAAG;AACtC,eACK,KAAI,EACJ,KAAK,MAAM;AAEZ,aAAK,SAAS;AACd,aAAK,KAAK,QAAQ;AAAA,MACrB,GACI,MAAM,QAAQ,KAAK;AAAA,IACpC,OACa;AAGD,WAAK,SAAS;AACd,WAAK,KAAK,QAAQ;AAAA,IAC9B;AACQ,SAAK,WAAW;AAChB,SAAK,UAAU;AAAA,EACvB;AACA;AC1CO,MAAM,aAAa;AAC1B;ACKO,MAAM,0BAA0B,aAAa;AAAA,EAkBhD,YAAY,KAAK,SAAS,SAAS,QAAQ,aAAa,OAAO,cAAc,YAAY,WAAW,QAAQ,iBAAiB,wBAAwB,uBAAuB;AACxK,UAAO;AAlBX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAS;AACT,oCAAW;AACX,oCAAW,CAAE;AACb;AAGI,SAAK,MAAM;AACX,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,SAAS;AACd,SAAK,cAAc;AACnB,SAAK,QAAQ;AACb,SAAK,eAAe;AACpB,SAAK,aAAa;AAClB,SAAK,YAAY;AACjB,SAAK,SAAS;AACd,SAAK,kBAAkB;AACvB,SAAK,yBAAyB;AAC9B,SAAK,wBAAwB;AAC7B,SAAK,cAAc,OAAO,0BACpB,IAAI,aAAa,IAAI,8BAA8B,IACnD;AAAA,EACd;AAAA,EACI,WAAW,SAAS;AAChB,UAAM,EAAE,UAAU,YAAW,IAAK;AAClC,QAAI,cAAc;AAClB,UAAM,iBAAiB,SAAS;AAChC,aAAS,IAAI,GAAG,IAAI,gBAAgB,KAAK;AACrC,YAAM,IAAI,SAAS,CAAC;AACpB,UAAI,MAAM,SAAS;AACf,sBAAc;AACd;AAAA,MAChB;AAAA,IACA;AACQ,QAAI,gBAAgB,IAAI;AACpB,aAAO;AAAA,IACnB;AACQ,QAAI,kBAAkB,aAAa;AAC/B,aAAO;AAAA,IACnB;AACQ,SAAK,SAAS,KAAK,OAAO;AAC1B,WAAO;AAAA,EACf;AAAA,EACI,OAAO;AACH,UAAM,EAAE,KAAK,QAAQ,aAAa,QAAS,IAAG;AAC9C,UAAM,EAAE,UAAS,IAAK;AACtB,cAAU,UAAU,MAAM;AAC1B,WAAO,aAAa,MAAM,WAAW;AAErC,UAAM,UAAW,KAAK,YAAY,KAAM,IAAI;AAE5C,QAAI,KAAK,aAAa,OAAO;AACzB,YAAM,EAAE,GAAG,GAAG,OAAO,OAAM,IAAK,KAAK;AACrC,YAAM,aAAa,KAAK,yBAAyB,IAAI,QAAQ;AAC7D,YAAM,eAAe,QAAQ,OAAO;AACpC,YAAM,QAAQ,KAAK,MAAM,IAAI,UAAU;AACvC,YAAM,YAAY,KAAK,MAAM,QAAQ,UAAU;AAC/C,YAAM,aAAa,KAAK,MAAM,SAAS,UAAU;AACjD,UAAI,QAAQ,KAAK,MAAM,eAAe,aAAa,IAAI,UAAU;AAGjE,UAAI,KAAK,wBAAwB;AAC7B,gBAAQ,KAAK,wBACP,KAAK,sBAAsB,SAAS,KAAK,WAAW,SACpD;AAAA,MACtB;AACY,UAAI,eAAe,IAAI;AACvB,UAAI,QAAQ,OAAO,OAAO,WAAW,UAAU;AAAA,IAC3D,OACa;AACD,UAAI,eAAe,KAAK;AAAA,IACpC;AACQ,QAAI,aAAa,IAAI,WAAW,IAAI,KAAK,UAAU,IAAI,gBAAgB,OAAO;AAAA,EACtF;AACA;AC1FO,SAAS,mBAAmB,KAAK;AACpC,QAAMe,UAAS;AAAA,IACX,uBAAuB;AAAA,IACvB,kBAAkB;AAAA;AAAA,IAElB,mBAAmB;AAAA;AAAA,IACnB,gCAAgC;AAAA,IAChC,yBAAyB;AAAA,IACzB,kCAAkC;AAAA,IAClC,oBAAoB;AAAA,IACpB,qBAAqB;AAAA,IACrB,4BAA4B;AAAA,IAC5B,8BAA8B;AAAA,EACjC;AAED,QAAM,OAAO,OAAO,KAAKA,OAAM;AAC/B,OAAK,QAAQ,CAAClB,SAAQ;AAElB,IAAAkB,QAAOlB,IAAG,IAAI,IAAI,aAAa,IAAIA,IAAG,CAAC;AAAA,EAC/C,CAAK;AACD,SAAOkB;AACX;AAKO,SAAS,mBAAmB,KAAK;AACpC,QAAM,aAAa;AAAA,IACf,wBAAwB;AAAA,IACxB,+BAA+B;AAAA,IAC/B,+BAA+B;AAAA,IAC/B,8BAA8B;AAAA,IAC9B,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,uCAAuC;AAAA,IACvC,oCAAoC;AAAA,IACpC,yBAAyB;AAAA,EAC5B;AAED,QAAM,OAAO,OAAO,KAAK,UAAU;AACnC,OAAK,QAAQ,CAAClB,SAAQ;AAElB,eAAWA,IAAG,IAAI,IAAI,aAAaA,IAAG;AAAA,EAC9C,CAAK;AACD,SAAO;AACX;AAQO,SAAS,kBAAkB,KAAK,MAAM;AACzC,QAAM,WAAW,CAAC,EAAE,OAAO;AAC3B,QAAM,UAAU,IAAI,YAAY,WAAW,CAAC;AAC5C,WAAS,IAAI,GAAG,IAAI,GAAG,IAAI,UAAU,KAAK,GAAG,KAAK,GAAG;AACjD,YAAQ,CAAC,IAAI;AACb,YAAQ,IAAI,CAAC,IAAI,IAAI;AACrB,YAAQ,IAAI,CAAC,IAAI,IAAI;AACrB,YAAQ,IAAI,CAAC,IAAI,IAAI;AACrB,YAAQ,IAAI,CAAC,IAAI,IAAI;AACrB,YAAQ,IAAI,CAAC,IAAI,IAAI;AAAA,EAC7B;AACI,QAAM,SAAS,IAAI,aAAc;AACjC,MAAI,uBAAuB,QAAQ,SAAS,IAAI,WAAW;AAC/D;AASO,SAAS,mBAAmB,KAAK;AACpC,SAAQ,QAAQ,QACZ,OAAO,QAAQ,YACf,IAAI,eACJ,IAAI,YAAY,SAAS;AACjC;AChFA,MAAM,2BAA2B,IAAI,WAAW,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAYrD,MAAM,4BAA4B,mBAAmB;AAAA,EAMxD,YAAY,KAAK,YAAY,eAAe;AACxC,UAAM,YAAY,aAAa;AANnC;AACA,6CAAoB;AACpB,kCAAS;AACT,8BAAK;AACL,8BAAK;AAGD,SAAK,MAAM;AAAA,EACnB;AAAA,EACI,IAAI,aAAa;AACb,QAAI,KAAK,WAAW,SAAS;AACzB,WAAK,KAAM;AAAA,IACvB;AACQ,iBAAa,KAAK,iBAAiB;AACnC,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,IAAI;AACJ,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,IAAI;AACJ,WAAO,KAAK;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,OAAO;AAEH,QAAI,KAAK,WAAW,aAAa,KAAK,WAAW,UAAU;AACvD;AAAA,IACZ;AACQ,SAAK,SAAS;AACd,SAAK,cAAc,SAAS,SAAS;AACrC,SAAK,oBAAoB,KAAK,uBAAwB;AACtD,QAAI,KAAK,sBAAsB,MAAM;AACjC,WAAK,SAAS;AACd,WAAK,cAAc,SAAS,UAAU,IAAI,MAAM,gCAAgC,CAAC;AACjF,cAAQ,MAAM,gCAAgC;AAC9C;AAAA,IACZ;AACQ,SAAK,cAAa,EACb,KAAK,CAAC,EAAE,OAAO,aAAa;AAE7B,UAAI,KAAK,WAAW,SAAS;AACzB;AAAA,MAChB;AACY,WAAK,SAAS;AACd,WAAK,KAAK;AACV,WAAK,KAAK;AAGV,WAAK,cAAc,SAAS,UAAU,EAAE,OAAO,QAAQ;AAAA,IAC1D,GACI,MAAM,CAAC,QAAQ;AAEhB,UAAI,KAAK,WAAW,SAAS;AACzB;AAAA,MAChB;AACY,WAAK,SAAS;AACd,WAAK,cAAc,SAAS,UAAU,GAAG;AACzC,cAAQ,MAAM,GAAG;AAAA,IAC7B,CAAS;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAII,MAAM,gBAAgB;;AAClB,UAAM,EAAE,IAAG,IAAK;AAEhB,QAAI,WAAW,GAAG,IAAI,MAAM,GAAG,GAAG,GAAG,IAAI,MAAM,IAAI,eAAe,IAAI;AACtE,SAAK,iBAAiB,yBAAyB,UAAU;AACzD,UAAM,cAAc,QAAMG,MAAA,KAAK,kBAAL,gBAAAA,IAAoB;AAE9C,QAAI,CAAC,KAAK,mBAAmB;AACzB,mBAAa,KAAK,WAAW,OAAO;AACpC,aAAO,EAAE,OAAO,GAAG,QAAQ,EAAG;AAAA,IAC1C;AACQ,QAAI,QAAQ;AACZ,QAAI,SAAS;AACb,iBAAa,KAAK,iBAAiB;AACnC,QAAI,cAAc,CAAC;AAGnB,QAAK,OAAO,gBAAgB,eACxB,YAAY,gBAAgB,eAC5B,YAAY,gBAAgB;AAAA,IAE5B,mBAAmB,YAAY,IAAI,GAAG;AACtC,YAAM,OAAO,YAAY;AACzB,cAAQ,KAAK;AACb,eAAS,KAAK;AACd,UAAI,YAAY,KAAK,iBAAiB;AACtC,UAAI,YAAY,IAAI,gCAAgC,CAAC,CAAC,YAAY,gBAAgB;AAClF,UAAI,WAAW,GAAG,IAAI,MAAM,IAAI,MAAM,IAAI,eAAe,IAAI;AAC7D,WAAK,iBAAiB,QAAQ,SAAS,CAAC;AAExC,UAAI,IAAI,SAAQ,KAAO,aAAa,KAAK,KAAK,aAAa,MAAM,GAAI;AACjE,YAAI,eAAgB;AAAA,MACpC;AAAA,IACA,WACiB,YAAY,SAAS,MAAM;AAChC,cAAQ;AACR,eAAS;AAET,UAAI,YAAY,KAAK,iBAAiB;AACtC,UAAI,WAAW,GAAG,IAAI,MAAM,GAAG,GAAG,GAAG,IAAI,MAAM,IAAI,eAAe,wBAAwB;AAC1F,WAAK,iBAAiB,yBAAyB,UAAU;AAAA,IACrE,WACiB,aAAa,YAAY,QAAQ,YAAY,KAAK,SAAS;AAChE,YAAM,EAAE,SAAS,OAAAgB,SAAQ,GAAG,QAAAC,UAAS,GAAG,MAAM,qBAAsB,YAAY;AAChF,YAAM,OAAO,SAAS,QAChB,IAAI,UAAShB,MAAA,QAAQ,CAAC,MAAT,OAAAA,MAAc,IAAI,YAAY,CAAC,CAAC,IAC7C,QAAQ,CAAC;AACf,UAAI,YAAY,KAAK,iBAAiB;AACtC,UAAI,qBAAqB,GAAG,kBAAkBe,QAAOC,SAAQ,GAAG,IAAI;AACpE,UAAI,cAAc,IAAI,gBAAgB,IAAI,aAAa;AACvD,UAAI,cAAc,IAAI,gBAAgB,IAAI,aAAa;AACvD,UAAI,cAAc,IAAI,oBAAoB,IAAI,MAAM;AACpD,UAAI,cAAc,IAAI,oBAAoB,IAAI,MAAM;AACpD,WAAK,iBAAiB,KAAK,UAAU;AAAA,IACjD,WACiB,YAAY,QAAQ,YAAY,gBAAgB,YAAY;AAEjE,cAAQ;AACR,eAAS;AACT,UAAI,YAAY,KAAK,iBAAiB;AACtC,UAAI,YAAY,IAAI,gCAAgC,CAAC,CAAC,YAAY,gBAAgB;AAClF,UAAI,WAAW,GAAG,IAAI,MAAM,OAAO,QAAQ,GAAG,IAAI,MAAM,IAAI,eAAe,YAAY,IAAI;AAC3F,WAAK,iBAAiB,QAAQ,SAAS,CAAC;AAAA,IACpD,OACa;AACD,cAAQ,MAAM,sEAAsE,WAAW;AAAA,IAC3G;AACQ,WAAO;AAAA,MACH;AAAA,MACA;AAAA,IACH;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,OAAO;AACH,QAAI,KAAK,WAAW,SAAS;AACzB;AAAA,IACZ;AACQ,SAAK,SAAS;AACd,SAAK,cAAc,SAAS,OAAO;AACnC,SAAK,KAAK;AACV,SAAK,KAAK;AACV,QAAI,CAAC,KAAK,mBAAmB;AACzB;AAAA,IACZ;AACQ,UAAM,EAAE,IAAG,IAAK;AAChB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,iBAAiB,CAAC;AACvB,SAAK,oBAAoB;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,yBAAyB;AACrB,UAAM,EAAE,IAAG,IAAK;AAChB,UAAM,gBAAgB,IAAI,cAAe;AACzC,QAAI,CAAC,eAAe;AAChB,aAAO;AAAA,IACnB;AAGQ,QAAI,cAAc,CAAC;AACnB,QAAI,YAAY,aAAa;AAE7B,QAAI,cAAc,IAAI,oBAAoB,IAAI,MAAM;AACpD,QAAI,cAAc,IAAI,oBAAoB,IAAI,MAAM;AAEpD,QAAI,cAAc,IAAI,gBAAgB,IAAI,aAAa;AACvD,QAAI,cAAc,IAAI,gBAAgB,IAAI,aAAa;AACvD,WAAO;AAAA,EACf;AACA;AChNO,MAAM,+BAA+B,oBAAoB;AAAA,EAC5D,YAAY,KAAK,YAAY,eAAe;AACxC,UAAM,KAAK,YAAY,aAAa;AAAA,EAC5C;AAAA,EACI,MAAM,gBAAgB;;AAClB,UAAM,QAAQ,MAAM,KAAK,cAAc,eAAgB;AACvD,QAAI,MAAM,gBAAgB,YAAY;AAElC,aAAO,EAAE,OAAO,GAAG,QAAQ,EAAG;AAAA,IAC1C;AACQ,WAAO;AAAA,MACH,SAAOjB,MAAA,MAAM,SAAN,gBAAAA,IAAY,UAAS;AAAA,MAC5B,UAAQC,MAAA,MAAM,SAAN,gBAAAA,IAAY,WAAU;AAAA,IACjC;AAAA,EACT;AACA;ACZO,MAAM,iBAAiB;AAAA,EAE1B,YAAY,QAAQ;AADpB;AAEI,SAAK,SAAS;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,UAAU,eAAe;;AACrB,YAAOD,MAAA,KAAK,OAAO,KAAK,CAAC,SAAS,KAAK,WAAW,aAAa,CAAC,MAAzD,gBAAAA,IAA4D;AAAA,EAC3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,iBAAiB,eAAe;;AAC5B,YAAOA,MAAA,KAAK,OAAO,KAAK,CAAC,SAAS,KAAK,WAAW,aAAa,CAAC,MAAzD,gBAAAA,IACD,WAAW;AAAA,EACzB;AACA;ACnBO,SAAS,SAAS,IAAI;AACzB,SAAQ,KAAK,0BAA0B,cAAc,KAAK;AAC9D;ACLO,MAAM,oBAAoB;AAAA;AAAA,EA2D7B,YAAY,IAAI;AA1DhB;AAEA;AAAA,6CAAoB;AACpB;AACA,2CAAkB,oBAAI,QAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGI,SAAK,KAAK;AAOV,SAAK,oBACD,GAAG,aAAa,GAAG,cAAc,IAAI,GAAG;AAC5C,UAAM,kBAAkB,GAAG,aAAa,GAAG,uBAAuB;AAElE,SAAK,iBAAiB,IAAI,MAAM,eAAe,EAC1C,KAAK,MAAS,EACd,IAAI,CAAC,GAAG,MAAM;AACf,WAAK,cAAc,CAAC;AACpB,aAAO,GAAG,aAAa,GAAG,kBAAkB;AAAA,IACxD,CAAS;AAED,SAAK,cAAc,KAAK,iBAAiB;AACzC,SAAK,iBAAiB,GAAG,UAAU,GAAG,YAAY;AAClD,UAAM,aAAa,GAAG,aAAa,GAAG,WAAW;AACjD,SAAK,WAAW,WAAW,CAAC;AAC5B,SAAK,WAAW,WAAW,CAAC;AAC5B,SAAK,eAAe,WAAW,CAAC;AAChC,SAAK,gBAAgB,WAAW,CAAC;AACjC,SAAK,eAAe,GAAG,UAAU,GAAG,KAAK;AACzC,SAAK,cAAc,GAAG,aAAa,GAAG,aAAa;AACnD,SAAK,cAAc,GAAG,aAAa,GAAG,aAAa;AACnD,SAAK,gBAAgB,GAAG,aAAa,GAAG,eAAe;AACvD,SAAK,gBAAgB,GAAG,aAAa,GAAG,eAAe;AACvD,SAAK,mBAAmB,GAAG,aAAa,GAAG,oBAAoB;AAC/D,SAAK,0BAA0B,GAAG,aAAa,GAAG,4BAA4B;AAC9E,SAAK,aAAa,GAAG,aAAa,GAAG,eAAe;AACpD,SAAK,SAAS,GAAG;AAEjB,SAAK,wBAAwB,GAAG;AAChC,SAAK,mBAAmB,GAAG;AAC3B,SAAK,oBAAoB,GAAG;AAC5B,SAAK,iCAAiC,GAAG;AACzC,SAAK,0BAA0B,GAAG;AAClC,SAAK,mCAAmC,GAAG;AAC3C,SAAK,qBAAqB,GAAG;AAC7B,SAAK,sBAAsB,GAAG;AAC9B,SAAK,6BAA6B,GAAG;AACrC,SAAK,+BAA+B,GAAG;AACvC,SAAK,qBAAqB,GAAG;AAC7B,SAAK,qBAAqB,GAAG;AAC7B,SAAK,iBAAiB,GAAG;AACzB,SAAK,iBAAiB,GAAG;AACzB,SAAK,SAAS,GAAG;AACjB,SAAK,gBAAgB,GAAG;AACxB,SAAK,OAAO,GAAG;AACf,SAAK,gBAAgB,GAAG;AACxB,SAAK,iCAAiC,GAAG;AACzC,SAAK,sBAAsB,GAAG;AAC9B,SAAK,QAAQ,GAAG;AAChB,SAAK,YAAY,GAAG;AACpB,SAAK,iBAAiB,GAAG;AACzB,SAAK,MAAM,GAAG;AACd,SAAK,sBAAsB,GAAG;AAC9B,SAAK,iCAAiC,GAAG;AACzC,SAAK,YAAY,GAAG;AACpB,SAAK,iBAAiB,GAAG;AACzB,SAAK,gBAAgB,GAAG;AACxB,SAAK,kBAAkB,GAAG;AAC1B,SAAK,cAAc,GAAG;AACtB,SAAK,iBAAiB,GAAG;AACzB,SAAK,cAAc,GAAG;AACtB,SAAK,eAAe,GAAG;AACvB,SAAK,oBAAoB,GAAG;AAC5B,SAAK,eAAe,GAAG;AACvB,SAAK,oBAAoB,GAAG;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,WAAW;AACP,WAAO,SAAS,KAAK,EAAE;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,cAAc,aAAa;AACvB,UAAM,EAAE,GAAE,IAAK;AACf,QAAI,KAAK,sBAAsB,aAAa;AACxC,SAAG,cAAc,cAAc,GAAG,QAAQ;AAC1C,WAAK,oBAAoB;AAAA,IACrC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,YAAY,SAAS;AACjB,UAAM,EAAE,IAAI,mBAAmB,eAAgB,IAAG;AAClD,QAAI,eAAe,iBAAiB,MAAM,SAAS;AAC/C;AAAA,IACZ;AACQ,mBAAe,iBAAiB,IAAI;AACpC,OAAG,YAAY,KAAK,GAAG,YAAY,OAAO;AAAA,EAClD;AAAA,EACI,oBAAoB;AAChB,UAAM,EAAE,mBAAmB,eAAc,IAAK;AAC9C,WAAO,eAAe,iBAAiB;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYI,cAAc,OAAO,OAAO;AACxB,UAAM,EAAE,IAAI,gBAAe,IAAK;AAChC,UAAM,gBAAgB,KAAK,kBAAmB;AAC9C,QAAI,CAAC,eAAe;AAChB,YAAM,IAAI,MAAM,mBAAmB;AAAA,IAC/C;AACQ,QAAI,gBAAgB,gBAAgB,IAAI,aAAa;AACrD,QAAI,CAAC,eAAe;AAChB,sBAAgB,CAAE;AAClB,sBAAgB,IAAI,eAAe,aAAa;AAAA,IAC5D;AACQ,QAAI,cAAc,KAAK,MAAM,OAAO;AAChC;AAAA,IACZ;AACQ,kBAAc,KAAK,IAAI;AACvB,OAAG,cAAc,GAAG,YAAY,OAAO,KAAK;AAAA,EACpD;AAAA,EACI,WAAW,OAAO,gBAAgB,eAAe,cAAc,gBAAgB,QAAQ,MAAM,QAAQ;AACjG,UAAM,EAAE,GAAE,IAAK;AACf,QAAI,QAAQ;AACR,SAAG,WAAW,GAAG,YAAY,OAAO,gBAAgB,eAAe,cAAc,gBAAgB,QAAQ,MAAM,MAAM;AAAA,IACjI,OACa;AACD,SAAG,WAAW,GAAG,YAAY,OAAO,gBAAgB,eAAe,cAAc,cAAc;AAAA,IAC3G;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,qBAAqB,OAAO,gBAAgB,OAAO,QAAQ,QAAQ,MAAM;AACrE,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,qBAAqB,GAAG,YAAY,OAAO,gBAAgB,OAAO,QAAQ,QAAQ,IAAI;AAAA,EACjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,YAAY,OAAO,OAAO;AACtB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,YAAY,OAAO,KAAK;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,iBAAiB;AACb,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,eAAe,GAAG,UAAU;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB;AACZ,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,cAAe;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,cAAc,SAAS;AACnB,UAAM,EAAE,GAAE,IAAK;AACf,QAAI,SAAS;AACT,WAAK,gBAAgB,OAAO,OAAO;AAAA,IAC/C;AACQ,OAAG,cAAc,OAAO;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,SAAS,GAAG,GAAG,OAAO,QAAQ;AAC1B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,SAAS,GAAG,GAAG,OAAO,MAAM;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,WAAW,KAAK,OAAO,MAAM,OAAO;AAChC,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,KAAK,OAAO,MAAM,KAAK;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,eAAe,QAAQ;AACnB,UAAM,EAAE,IAAI,eAAc,IAAK;AAC/B,QAAI,WAAW,gBAAgB;AAC3B;AAAA,IACZ;AACQ,QAAI,QAAQ;AACR,SAAG,OAAO,GAAG,YAAY;AAAA,IACrC,OACa;AACD,SAAG,QAAQ,GAAG,YAAY;AAAA,IACtC;AACQ,SAAK,iBAAiB;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,QAAQ,GAAG,GAAG,OAAO,QAAQ;AACzB,UAAM,EAAE,IAAI,UAAU,UAAU,cAAc,cAAa,IAAK;AAChE,QAAI,MAAM,YACN,MAAM,YACN,UAAU,gBACV,WAAW,eAAe;AAC1B,SAAG,QAAQ,GAAG,GAAG,OAAO,MAAM;AAC9B,WAAK,WAAW;AAChB,WAAK,WAAW;AAChB,WAAK,eAAe;AACpB,WAAK,gBAAgB;AAAA,IACjC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,SAAS,OAAO;AACZ,UAAM,EAAE,IAAI,aAAY,IAAK;AAC7B,QAAI,UAAU,cAAc;AACxB;AAAA,IACZ;AACQ,QAAI,OAAO;AACP,SAAG,OAAO,GAAG,KAAK;AAAA,IAC9B,OACa;AACD,SAAG,QAAQ,GAAG,KAAK;AAAA,IAC/B;AACQ,SAAK,eAAe;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,UAAU,KAAK,KAAK;AAChB,UAAM,EAAE,IAAI,aAAa,aAAa,eAAe,cAAa,IAAK;AACvE,QAAI,QAAQ,eACR,QAAQ,eACR,QAAQ,iBACR,QAAQ,eAAe;AACvB,SAAG,UAAU,KAAK,GAAG;AACrB,WAAK,cAAc;AACnB,WAAK,cAAc;AACnB,WAAK,gBAAgB;AACrB,WAAK,gBAAgB;AAAA,IACjC;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,eAAe;AACX,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,aAAc;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,oBAAoB;AAChB,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,kBAAmB;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB,aAAa;AACzB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,gBAAgB,GAAG,aAAa,WAAW;AAAA,EACtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,qBAAqB,YAAY,SAAS,OAAO;AAC7C,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,qBAAqB,GAAG,aAAa,YAAY,GAAG,YAAY,SAAS,KAAK;AAAA,EACzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,QAAQ;AACJ,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,MAAM,GAAG,gBAAgB;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcI,gBAAgB,QAAQ,MAAM,OAAO;AACjC,UAAM,EAAE,IAAI,iBAAgB,IAAK;AACjC,QAAI,qBAAqB,QAAQ;AAC7B,SAAG,WAAW,GAAG,cAAc,MAAM;AACrC,WAAK,mBAAmB;AAAA,IACpC;AACQ,OAAG,WAAW,GAAG,cAAc,MAAM,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaI,uBAAuB,QAAQ,MAAM,OAAO;AACxC,UAAM,EAAE,IAAI,wBAAuB,IAAK;AACxC,QAAI,4BAA4B,QAAQ;AACpC,SAAG,WAAW,GAAG,sBAAsB,MAAM;AAC7C,WAAK,0BAA0B;AAAA,IAC3C;AACQ,OAAG,WAAW,GAAG,sBAAsB,MAAM,KAAK;AAAA,EAC1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBI,oBAAoB,QAAQ,OAAO,MAAM,MAAM,YAAY,QAAQ,QAAQ;AACvE,UAAM,EAAE,IAAI,iBAAgB,IAAK;AACjC,QAAI,qBAAqB,QAAQ;AAC7B,SAAG,WAAW,GAAG,cAAc,MAAM;AACrC,WAAK,mBAAmB;AAAA,IACpC;AACQ,OAAG,oBAAoB,OAAO,MAAM,MAAM,YAAY,QAAQ,MAAM;AAAA,EAC5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,WAAW,SAAS;AAChB,UAAM,EAAE,IAAI,WAAU,IAAK;AAC3B,QAAI,eAAe,SAAS;AACxB;AAAA,IACZ;AACQ,OAAG,WAAW,OAAO;AACrB,SAAK,aAAa;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,UAAU,UAAU,IAAI;AACpB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,EAAE;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,UAAU,UAAU,IAAI;AACpB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,EAAE;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,UAAU,UAAU,IAAI,IAAI;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,EAAE;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,UAAU,UAAU,IAAI,IAAI;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,EAAE;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,UAAU,UAAU,IAAI,IAAI,IAAI;AAC5B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,IAAI,EAAE;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,UAAU,UAAU,IAAI,IAAI,IAAI;AAC5B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,IAAI,EAAE;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,UAAU,UAAU,IAAI,IAAI,IAAI,IAAI;AAChC,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,IAAI,IAAI,EAAE;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,UAAU,UAAU,IAAI,IAAI,IAAI,IAAI;AAChC,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,UAAU,UAAU,IAAI,IAAI,IAAI,EAAE;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOI,WAAW,UAAU,OAAO;AACxB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,WAAW,UAAU,KAAK;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,iBAAiB,UAAU,OAAO;AAC9B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,iBAAiB,UAAU,OAAO,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,iBAAiB,UAAU,OAAO;AAC9B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,iBAAiB,UAAU,OAAO,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,iBAAiB,UAAU,OAAO;AAC9B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,iBAAiB,UAAU,OAAO,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,aAAa,OAAO;AAChB,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,aAAa,KAAK;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,aAAa,MAAMkB,QAAO,MAAM,QAAQ;AACpC,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,aAAa,MAAMA,QAAO,MAAM,MAAM;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,aAAa,MAAM;AACf,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,aAAa,IAAI;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,WAAW;AACP,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,SAAU;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,oBAAoB;AAChB,UAAM,EAAE,GAAE,IAAK;AACf,iBAAa,cAAc,sBAAsB;AACjD,WAAO,GAAG,kBAAmB;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB,aAAa;AACzB,UAAM,EAAE,GAAE,IAAK;AACf,iBAAa,cAAc,sBAAsB;AACjD,OAAG,gBAAgB,WAAW;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,kBAAkB,SAAS,MAAM;AAC7B,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,kBAAkB,SAAS,IAAI;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,mBAAmB,SAAS,MAAM;AAC9B,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,mBAAmB,SAAS,IAAI;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,wBAAwB,OAAO;AAC3B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,wBAAwB,KAAK;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,yBAAyB,OAAO;AAC5B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,yBAAyB,KAAK;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,aAAa,MAAM;AACf,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,aAAa,IAAI;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,cAAc,QAAQ;AAClB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,cAAc,MAAM;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,aAAa,SAAS,QAAQ;AAC1B,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,aAAa,SAAS,MAAM;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,YAAY,SAAS;AACjB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,YAAY,OAAO;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,cAAc,QAAQ;AAClB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,cAAc,MAAM;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,mBAAmB,QAAQ,OAAO;AAC9B,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,mBAAmB,QAAQ,KAAK;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,iBAAiB,QAAQ;AACrB,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,iBAAiB,MAAM;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,gBAAgB;AACZ,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,cAAe;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,oBAAoB,SAAS,OAAO;AAChC,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,oBAAoB,SAAS,KAAK;AAAA,EACpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,kBAAkB,SAAS;AACvB,UAAM,EAAE,GAAE,IAAK;AACf,WAAO,GAAG,kBAAkB,OAAO;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,aAAa,QAAQ,QAAQ;AACzB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,aAAa,QAAQ,MAAM;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,aAAa,QAAQ;AACjB,UAAM,EAAE,GAAE,IAAK;AACf,OAAG,aAAa,MAAM;AAAA,EAC9B;AACA;AC39BO,MAAM,kCAAkC,oBAAoB;AAAA,EAE/D,YAAY,KAAK,YAAY,eAAe;AACxC,UAAM,KAAK,YAAY,aAAa;AAFxC;AAII,UAAM,cAAc,IAAI,kBAAmB;AAC3C,iBAAa,aAAa,8BAA8B;AACxD,SAAK,cAAc;AAAA,EAC3B;AAAA,EACI,MAAM,gBAAgB;AAClB,UAAM,EAAE,IAAG,IAAK;AAChB,UAAM,gBAAiB,KAAK,oBACxB,KAAK,uBAAsB;AAC/B,UAAM,EAAE,OAAO,OAAQ,IAAG,KAAK;AAE/B,QAAI,WAAW,GAAG,IAAI,MAAM,OAAO,QAAQ,GAAG,IAAI,MAAM,IAAI,eAAe,IAAI;AAE/E,SAAK,iBAAiB,QAAQ,SAAS,CAAC;AAExC,QAAI,gBAAgB,KAAK,WAAW;AAEpC,QAAI,qBAAqB,IAAI,mBAAmB,eAAe,CAAC;AAEhE,QAAI,gBAAgB,IAAI;AACxB,WAAO;AAAA,MACH;AAAA,MACA;AAAA,IACH;AAAA,EACT;AACA;ACdA,MAAM,iBAAiB;AAChB,MAAM,0BAA0B,aAAa;AAAA,EA+BhD,YAAY,SAAS;AACjB,UAAM,OAAO;AA9BjB;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA,qCAAY,CAAE;AAEd;AAAA,wCAAe;AACf,uCAAc;AACd,oCAAW,CAAE;AACb,yCAAgB;AAEhB;AAAA;AACA;AACA;AACA,sCAAa;AAAA,MACT,KAAK;AAAA,MACL,YAAY,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,IAC1B;AAID;AAAA;AAAA;AAAA;AACA,2CAAkB;AAIlB;AAAA;AAAA;AAAA,iDAAwB;AAGpB,SAAK,aAAa,IAAI,YAAY,KAAK,MAAM,QAAQ,cAAc;AACnE,SAAK,cAAc,IAAI,aAAa,KAAK,UAAU;AACnD,SAAK,eAAe,IAAI,YAAY,KAAK,UAAU;AACnD,SAAK,OAAO;AACZ,UAAM,EAAE,QAAQ,YAAY,cAAAC,cAAc,IAAG;AAC7C,SAAK,iBAAiB,IAAI,aAAa,KAAK,SAAS;AAIrD,SAAK,eAAe,mBAAmB,MAAM,IAAI;AAGjD,SAAK,eAAe,KAAK,UAAU,MAAM;AACrC,WAAK,MAAM,cAAe;AAAA,IACtC,CAAS;AACD,UAAM,KAAK,mBAAmB,QAAQ,QAAQ,aAAa,QAAQ,UAAU;AAC7E,UAAM,MAAO,KAAK,MAAM,IAAI,oBAAoB,EAAE;AAClD,QAAI,SAAS,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAC9C,SAAK,iBAAiB,UAAU;AAChC,QAAI,SAAS,IAAI;AACjB,QAAI,UAAU,IAAI,KAAK,IAAI,mBAAmB;AAC9C,sBAAkB,KAAKA,aAAY;AACnC,SAAK,SAAS;AAAA,MACV,YAAY,mBAAmB,KAAK,GAAG;AAAA,MACvC,YAAY,mBAAmB,KAAK,GAAG;AAAA,IAC1C;AACD,SAAK,UAAU,WAAW;AAC1B,SAAK,gBAAgB,KAAK,UAAU,WAAW,eAAe;AAC9D,SAAK,gBAAgB,KAAK,cAAc;AACxC,UAAM,aAAa,IAAI,aAAc;AACrC,iBAAa,UAAU;AACvB,UAAM,SAAS,IAAI,aAAa;AAChC,SAAK,uBAAuB,IAAI,iBAAiB;AAAA,MAC7C;AAAA,QACI,QAAQ;AAAA,QACR,YAAY;AAAA,UACR,YAAY;AAAA,YACR,MAAM;AAAA,YACN,MAAM;AAAA;AAAA,YACN,MAAM,IAAI;AAAA;AAAA,YACV,YAAY;AAAA;AAAA,YACZ;AAAA;AAAA,YACA,QAAQ;AAAA;AAAA,UACX;AAAA,UACD,qBAAqB;AAAA,YACjB,MAAM;AAAA,YACN,MAAM;AAAA,YACN,MAAM,IAAI;AAAA,YACV,YAAY;AAAA,YACZ;AAAA,YACA,QAAQ,IAAI,aAAa;AAAA,UAC5B;AAAA,UACD,SAAS;AAAA,YACL,MAAM;AAAA,YACN,MAAM;AAAA,YACN,MAAM,IAAI;AAAA,YACV,YAAY;AAAA,YACZ;AAAA,YACA,QAAQ,IAAI,aAAa;AAAA,UAC5B;AAAA,UACD,gBAAgB;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,MAAM,IAAI;AAAA,YACV,YAAY;AAAA,YACZ;AAAA,YACA,QAAQ,IAAI,aAAa;AAAA,UAC5B;AAAA,QACJ;AAAA,MACJ;AAAA,IACb,CAAS;AAAA,EACT;AAAA,EACI,QAAQ;AACJ,UAAM,EAAE,IAAG,IAAK;AAChB,SAAK,eAAe;AACpB,SAAK,cAAc;AACnB,SAAK,UAAU,SAAS;AACxB,QAAI,eAAe,KAAK;AACxB,QAAI,MAAO;AAAA,EACnB;AAAA,EACI,mBAAmB;AACf,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,iBAAiB,eAAe;AAC5B,QAAI,yBAAyB,YAAY;AACrC,aAAO,IAAI,uBAAuB,KAAK,KAAK,KAAK,cAAc,aAAa;AAAA,IACxF,WACiB,yBAAyB,eAAe;AAC7C,aAAO,IAAI,0BAA0B,KAAK,KAAK,KAAK,cAAc,aAAa;AAAA,IAC3F;AACQ,WAAO,IAAI,oBAAoB,KAAK,KAAK,KAAK,cAAc,aAAa;AAAA,EACjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaI,QAAQJ,SAAQ;;AACZ,UAAM,EAAE,aAAa,aAAY,IAAK;AACtC,QAAI,UAAUA,QAAO,WAAW,KAAK;AAKrC,QAAIA,QAAO,gBAAgB,MAAM;AAC7B,UAAI,OAAOA,QAAO,aAAa,aAAa,KAAK,MAAM;AACnD,cAAM,aAAaA,QAAO,YAAY;AACtC,mBAAW,QAAQA,QAAO;AAC1B,mBAAW,SAASA,QAAO;AAAA,MAC3C;AACY,UAAI,OAAOA,QAAO,aAAa,QAAQ,MAAM,MAAM;AAC/C,QAAAA,QAAO,YAAY,SAASA,QAAO;AAAA,MACnD;AAAA,IACA;AACQ,iBAAa,QAAQ,eAAe,QAAW,sBAAsB;AACrE,QAAI,EAAE,cAAc,WAAW,YAAa,IAAG;AAC/C,UAAM,aAAa,EAAE,OAAO,IAAI,QAAQ,GAAI;AAC5C,eAAW,QAAQA,QAAO;AAC1B,eAAW,SAASA,QAAO;AAC3B,UAAM,eAAeA,QAAO,UAAU,KAAK;AAC3C,iBAAa,aAAa,uBAAuB,QAAW,sBAAsB;AAClF,QAAI,KAAK,cAAcA,OAAM,MAAM,OAAO;AAEtC,WAAK,YAAY,cAAcA,QAAO,aAAaA,QAAO,OAAO,YAAYA,QAAO,cAAc,WAAWA,QAAO,KAAKA,QAAO,wBAAwBA,QAAO,qBAAqB;AACpL,oBAAc,KAAK;AACnB,mBAAa,WAAW;AAAA,IACpC;AACQ,QAAI,aAAa;AACjB,QAAI,aAAa;AACjB,QAAI,aAAa;AACjB,QAAI,aAAa;AACjB,QAAI,QAAQ,SAAS,YAAY,YAAY;AACzC,YAAM,EAAE,GAAG,IAAI,GAAG,IAAI,OAAO,IAAI,QAAQ,GAAK,IAAG,QAAQ;AACzD,YAAM,EAAE,OAAO,UAAU,GAAG,QAAQ,UAAU,EAAC,IAAK,QAAQ,cAAc,cAAc,EAAE,OAAO,GAAG,QAAQ,EAAG;AAC/G,mBAAa,KAAK;AAClB,mBAAa,aAAa,KAAK;AAC/B,mBAAa,KAAK;AAClB,mBAAa,aAAa,KAAK;AAC/B,gBAAU,QAAQ;AAAA,IAC9B;AACQ,QAAI,QAAQ,SAAS,YAAY,SAC7BA,QAAO,mBAAmB,QAC1BA,QAAO,eAAe,eAAe,UACrC,QAAQ,eAAe,MAAM;AAC7B,YAAM,aAAaA,QAAO,eAAe;AACzC,YAAM,EAAE,OAAO,IAAI,QAAQ,GAAE,IAAK,QAAQ;AAC1C,UAAI,WAAW,SAAS,SAAS;AAC7B,cAAM,SAASA,QAAO,QAAQ;AAC9B,cAAM,SAASA,QAAO,SAAS;AAC/B,cAAM,QAAQ,KAAK,IAAI,QAAQ,MAAM;AACrC,cAAM,YAAY,IAAI;AAEtB,YAAI,SAAS,UAAU,SAAS,OAAO;AACnC,gBAAM,cAAc,YAAYA,QAAO;AACvC,wBAAc,IAAI,cAAc,QAAOf,MAAA,WAAW,UAAX,OAAAA,MAAoB;AAC3D,uBAAa,aAAa,cAAc;AAAA,QAC5D;AAEgB,YAAI,SAAS,UAAU,SAAS,OAAO;AACnC,gBAAM,cAAc,YAAYe,QAAO;AACvC,wBAAc,IAAI,cAAc,QAAOd,MAAA,WAAW,UAAX,OAAAA,MAAoB;AAC3D,uBAAa,aAAa,cAAc;AAAA,QAC5D;AAAA,MACA;AAAA,IACA;AAEQ,QAAI,QAAQ;AACZ,QAAIc,QAAO,mBAAmB,MAAM;AAChC,UAAIA,QAAO,eAAe,UAAU,MAAM;AACtC,SAAC,YAAY,UAAU,IAAI,CAAC,YAAY,UAAU;AAAA,MAClE;AAEY,cAAQ,EAAEA,QAAO,eAAe,SAAS;AAAA,IACrD;AAEQ,QAAI,QAAQ,EAAE,QAAQ,SAAS,YAAY,kBAAkB;AACzD,OAAC,YAAY,UAAU,IAAI,CAAC,YAAY,UAAU;AAAA,IAC9D;AACQ,UAAM,aAAa,QAAQ;AAC3B,iBAAa,WAAW,eAAe,MAAS;AAChD,UAAM,aAAa,KAAK,WAAW,YAAY,SAAS;AACxD,iBAAa,KAAK,gBAAgB,IAAI;AACtC,QAAIA,QAAO,cAAc;AAErB,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAIA,QAAO,aAAa;AAC/C,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAAA,IACvC,WACiBA,QAAO,OAAO,KAAKA,QAAO,OAAO,GAAG;AAEzC,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO,KAAKA,QAAO,QAAQA,QAAO;AAC7D,kBAAY,WAAW,IAAIA,QAAO,KAAKA,QAAO,QAAQA,QAAO;AAC7D,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO,KAAKA,QAAO,SAASA,QAAO;AAC9D,kBAAY,WAAW,IAAIA,QAAO,KAAKA,QAAO,SAASA,QAAO;AAC9D,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IACnBA,QAAO,KAAKA,QAAO,QAAQA,QAAO,KAAKA,QAAO,SAASA,QAAO;AAClE,kBAAY,WAAW,IACnBA,QAAO,KAAKA,QAAO,QAAQA,QAAO,KAAKA,QAAO,SAASA,QAAO;AAClE,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAAA,IACvC,OACa;AAGD,YAAM,eAAeA,QAAO,KAAKA,QAAO,QAAQA,QAAO;AACvD,YAAM,eAAeA,QAAO,KAAKA,QAAO,SAASA,QAAO;AAExD,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAIA,QAAO;AAClC,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAE3B,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,kBAAY,WAAW,IAAI;AAC3B,mBAAa,WAAW,IAAIA,QAAO;AACnC,kBAAY,WAAW,IAAI;AAAA,IACvC;AAEQ,SAAK,YAAY,UAAU;AAC3B,SAAK,YAAY;AACjB,SAAK,eAAe;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,YAAY,QAAQ,aAAa,OAAO,YAAY,cAAc,WAAW,iBAAiB,wBAAwB,uBAAuB;AACzI,UAAM,cAAc,IAAI;AAAA,MAAkB,KAAK;AAAA,MAAK,KAAK;AAAA,MAAS,KAAK;AAAA,MAAsB;AAAA,MAAQ;AAAA,MAAa;AAAA,MAAO;AAAA,MAAc;AAAA,MAAY;AAAA,MAAW;AAAA;AAAA,MAC9J;AAAA,MAAiB;AAAA,MAAwB;AAAA,IAAqB;AAC9D,SAAK,cAAc;AACnB,SAAK,UAAU,KAAK,WAAW;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaI,WAAW,SAAS,WAAW,WAAW;AACtC,UAAM,EAAE,YAAW,IAAK;AACxB,iBAAa,WAAW;AACxB,UAAM,aAAa,YAAY,WAAW,OAAO;AAEjD,QAAI,eAAe,YAAY;AAC3B,UAAI,WAAW;AACX,cAAM,IAAI,MAAM,oCAAoC;AAAA,MACpE;AACY,WAAK,YAAY,YAAY,QAAQ,YAAY,aAAa,YAAY,OAAO,YAAY,YAAY,YAAY,cAAc,SAAS;AAC5I,aAAO,KAAK,WAAW,SAAS,WAAW,IAAI;AAAA,IAC3D;AACQ,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,cAAcA,SAAQ;;AAClB,UAAM,EAAE,QAAQ,aAAa,wBAAwB,KAAK,aAAY,IAAKA;AAC3E,UAAM,eAAe,UAAU,KAAK;AAEpC,UAAIf,MAAA,KAAK,gBAAL,gBAAAA,IAAkB,YAAW,cAAc;AAC3C,aAAO;AAAA,IACnB;AAEQ,QAAI,CAAC,YAAY,KAAK,YAAY,cAAc,YAAY,GAAG;AAC3D,aAAO;AAAA,IACnB;AAIQ,QAAI,0BAA0B,KAAK;AAC/B,aAAO;AAAA,IACnB;AAEQ,QAAI,KAAK,YAAY,WAAW,KAAK,kBAChC,CAAC,eACE,CAAC,KAAK,YAAY,OAAO,oBAAoB,KAAK,YAAY,aAAa,WAAW,IAAI;AAC9F,aAAO;AAAA,IACnB;AAEQ,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA,EAII,YAAY,YAAY;AACpB,SAAK,UAAU,KAAK,UAAU;AAC9B,SAAK,cAAc;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,OAAO,UAAU,UAAU;;AACvB,UAAM,EAAE,KAAK,WAAU,IAAK;AAC5B,UAAM,MAAM,IAAI,aAAa,YAAY,GAAG,KAAK,YAAY;AAC7D,UAAM,UAASA,MAAA,KAAK,qBAAqB,UAAU,YAAY,MAAhD,OAAAA,MAAqD;AACpE,QAAI,gBAAgB,QAAQ,KAAK,IAAI,WAAW;AAKhD,aAAS,IAAI,GAAG,SAAS,KAAK,UAAU,QAAQ,IAAI,QAAQ,KAAK;AAC7D,YAAM,WAAW,KAAK,UAAU,CAAC;AAIjC,eAAS,KAAM;AAAA,IAC3B;AACQ,SAAK,kBAAkB,KAAK,eAAe,IAAI;AAAA,EACvD;AAAA,EACI,gBAAgB,MAAM;AAClB,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,UAAI,KAAK,SAAS,CAAC,MAAM,MAAM;AAC3B;AAAA,MAChB;AAAA,IACA;AACQ,SAAK,qBAAqB,IAAI;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsBI,qBAAqB,MAAM;AACvB,QAAI,cAAc,KAAK,SAAS;AAEhC,QAAI,cAAc;AAClB,WAAO,aAAa;AAChB,UAAI,CAAC,YAAY,QAAQ;AACrB;AAAA,MAChB;AACY,YAAM,cAAc,KAAK,SAAS,QAAQ,YAAY,MAAM;AAC5D,UAAI,gBAAgB,IAAI;AAEpB,sBAAc;AACd;AAAA,MAChB;AACY,oBAAc,YAAY;AAAA,IACtC;AAGQ,UAAM,gBAAgB,KAAK,qBAAqB,IAAI;AACpD,QAAI,kBAAkB,IAAI;AAEtB,oBAAc,KAAK,IAAI,aAAa,gBAAgB,CAAC;AAAA,IACjE;AAEQ,SAAK,SAAS,OAAO,aAAa,GAAG,IAAI;AAAA,EACjD;AAAA;AAAA,EAEI,qBAAqB,MAAM;AACvB,QAAI,WAAW;AACf,UAAM,mBAAmB,CAAC,gBAAgB;AACtC,YAAM,eAAe,KAAK,SAAS,QAAQ,WAAW;AACtD,UAAI,iBAAiB,IAAI;AACrB,mBAAW,KAAK,IAAI,UAAU,YAAY;AAAA,MAC1D;AAEY,iBAAW,SAAS,YAAY,UAAU;AACtC,yBAAiB,KAAK;AAAA,MACtC;AAAA,IACS;AAED,qBAAiB,IAAI;AACrB,WAAO;AAAA,EACf;AAAA,EACI,iBAAiB;AACb,UAAM,EAAE,IAAG,IAAK;AACM,SAAK;AAE3B,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,YAAM,OAAO,KAAK,SAAS,CAAC;AAE5B,UAAI,CAAC,QAAQ,CAAC,KAAK,eAAe;AAC9B;AAAA,MAChB;AAGY,WAAK,gBAAgB;AACrB,mBAAa,KAAK,SAAS,0BAA0B;AACrD,YAAM,aAAa,KAAK,QAAQ;AAChC,mBAAa,sBAAsB,yBAAyB;AAC5D,WAAK,wBAAwB;AAE7B,UAAI,gBAAgB,WAAW,WAAW;AAC1C,UAAI,SAAS,GAAG,GAAG,WAAW,GAAG,WAAW,CAAC;AAE7C,UAAI,WAAW,GAAG,GAAG,GAAG,CAAC;AACzB,UAAI,MAAO;AAEX,eAASoB,KAAI,GAAGA,KAAI,KAAK,SAAS,QAAQA,MAAK;AAC3C,cAAM,QAAQ,KAAK,SAASA,EAAC;AAC7B,YAAI,CAAC,OAAO;AACR;AAAA,QACpB;AACgB,aAAK,MAAM,SAAS,KAAK;AACzB,cAAM,gBAAgB;AAAA,MACtC;AAEY,WAAK,OAAQ;AAEb,WAAK,UAAU,SAAS;AACxB,WAAK,gBAAgB;AAAA,IACjC;AACQ,UAAM,aAAa,KAAK,WAAW;AAEnC,QAAI,WAAW,WAAW,CAAC,GAAG,WAAW,CAAC,GAAG,WAAW,CAAC,GAAG,WAAW,CAAC,CAAC;AAEzE,QAAI,gBAAgB,IAAI;AACxB,QAAI,SAAS,GAAG,GAAG,KAAK,IAAI,OAAO,OAAO,KAAK,IAAI,OAAO,MAAM;AAChE,SAAK,wBAAwB;AAAA,EACrC;AAAA,EACI,cAAc,MAAM;AAChB,UAAM,QAAQ,KAAK,SAAS,QAAQ,IAAI;AACxC,QAAI,UAAU,IAAI;AACd;AAAA,IACZ;AACQ,SAAK,SAAS,OAAO,OAAO,CAAC;AAAA,EACrC;AAAA,EACI,gBAAgB;AACZ,UAAM,aAAa;AAAA,MACf,gBAAgB,KAAK,MAAM,QAAQ;AAAA,MACnC,WAAW,KAAK;AAAA,IACnB;AACD,WAAO;AAAA,EACf;AAAA,EACI,kBAAkB;AACd,WAAO,KAAK;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,iBAAiB,OAAO;AACpB,QAAI,KAAK,WAAW,QAAQ,OAAO;AAC/B;AAAA,IACZ;AACQ,UAAM,MAAM,KAAK;AACjB,UAAM,kBAAkB,4BAA4B,KAAK;AACzD,QAAI,WAAW,gBAAgB,CAAC,GAAG,gBAAgB,CAAC,GAAG,gBAAgB,CAAC,GAAG,gBAAgB,CAAC,CAAC;AAC7F,SAAK,aAAa;AAAA,MACd,KAAK;AAAA,MACL,YAAY;AAAA,IACf;AACD,QAAI,MAAO;AAAA,EACnB;AACA;ACplBO,MAAM,oBAAoB;AAAA,EAC7B,WAAW;AAAA,EACX,iBAAiB;AAAA,EACjB,OAAO;AAAA,EACP,KAAK;AAAA,EACL,kBAAkB;AAAA,EAClB,uBAAuB;AAAA,EACvB,mBAAmB;AAAA,EACnB,oBAAoB;AAAA,EACpB,oBAAoB;AAAA,EACpB,yBAAyB;AAAA,EACzB,yBAAyB;AAAA,EACzB,4BAA4B;AAAA,EAC5B,wBAAwB;AAAA,EACxB,wBAAwB;AAAA,EACxB,gBAAgB;AAAA,EAChB,qBAAqB;AAAA,EACrB,8BAA8B;AAAA,EAC9B,uBAAuB;AAAA,EACvB,2BAA2B;AAAA,EAC3B,uBAAuB;AAAA,EACvB,uBAAuB;AAAA,EACvB,sBAAsB;AAAA,EACtB,yBAAyB;AAAA,EACzB,4BAA4B;AAAA,EAC5B,6BAA6B;AAAA,EAC7B,6BAA6B;AAAA,EAC7B,8BAA8B;AAAA,EAC9B,uBAAuB;AAAA,EACvB,sBAAsB;AAAA,EACtB,wBAAwB;AAAA,EACxB,wBAAwB;AAC5B;AChCO,MAAM,WAAW;AACxB;ACCO,MAAM,sBAAsB,WAAW;AAAA,EAI1C,YAAY,MAAM,UAAU;AACxB,UAAO;AAJX;AACA;AACA;AAGI,SAAK,OAAO;AACZ,SAAK,WAAW;AAChB,UAAM,WAAY,KAAK,WAAW;AAClC,SAAK,SAAS,QAAQ,CAAC,YAAY;AAC/B,YAAM,SAAS,QAAQ;AACvB,YAAM,SAAU,SAAS,MAAM,IAAI,SAAS,MAAM,KAAK;AACvD,aAAO,QAAQ,KAAK,IAAI,QAAQ;AAAA,IAC5C,CAAS;AACD,SAAK,WAAW;AAAA,EACxB;AAAA,EACI,CAAC,UAAU,OAAO,YAAY;;AAC1B,QAAI;AACJ,QAAI,cAAc;AAClB,YAAQ,kBAAkB,WAAW,KAAI,MAAO,CAAC,gBAAgB,MAAM;AACnE,YAAM,YAAY,gBAAgB;AAClC,YAAM,QAAQ,KAAK,SAAS,IAAI,SAAS;AACzC,iBAAW,KAAM;AACjB,UAAI,UAAU,QAAW;AAMrB,cAAM,UAAU,gBAAgB,YACzBpB,MAAA,KAAK,SAAS,MAAM,EAAE,MAAtB,gBAAAA,IAA0B,iBAAgB,KACzC,MAAM,gBACR;AACN,sBAAc,MAAM;AACpB,cAAM;AAAA,UACF,QAAQ;AAAA,UACR,SAAS,MAAM;AAAA,UACf;AAAA,UACA,SAAS,WAAW;AAAA,UACpB,UAAU,MAAM,WAAW;AAAA,UAC3B,UAAU;AAAA,UACV,SAAS,MAAM,UAAU;AAAA,UACzB,SAAS,MAAM;AAAA,UACf,UAAU;AAAA,UACV,UAAU;AAAA,UACV,OAAO,MAAM;AAAA,UACb,QAAQ,MAAM;AAAA,QACjB;AAAA,MACjB,OACiB;AAMD,YAAI,cAAc,kBAAkB,WAAW;AAC3C,wBAAc;AAAA,QAClC;AACgB,cAAM;AAAA,UACF,QAAQ;AAAA,UACR;AAAA,UACA,SAAS,WAAW;AAAA,QACvB;AAAA,MACjB;AAAA,IACA;AAAA,EACA;AACA;AC9DO,MAAM,sBAAsB,WAAW;AAAA,EAW1C,YAAY,MAAM,SAAS;AACvB,UAAM,OAAO;AAXjB;AACA;AAKA;AAAA;AAAA;AAAA;AAAA,yCAAgB;AAChB;AACA;AACA,oCAAW,oBAAI,IAAK;AAGhB,UAAM,EAAE,UAAU,cAAc,MAAO,IAAG;AAC1C,SAAK,OAAO;AACZ,UAAMK,YAAW,MAAM;AACvB,iBAAaA,qBAAoB,mBAAmB,yDAAyD;AAE7G,SAAK,UAAU,MAAM,UAAU,YAAY,gBAAgB;AAAA,MACvD,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,MAKL,kBAAkB;AAAA,IAC9B,CAAS;AACD,SAAK,QAAQ,GAAG,UAAU,MAAM;AAC5B,WAAK,YAAa;AAElB,YAAM,cAAe;AAAA,IACjC,CAAS;AAED,UAAM,UAAU,KAAK,eAAe,MAAM;AACtC,WAAK,QAAQ,WAAW,KAAM;AAAA,IAC1C,CAAS;AAED,UAAM,YAAY,EACb,KAAK,OAAO,aAAa;;AAE1B,WAAK,OAAO,MAAM,SAAS,KAAM;AACjC,mBAAa,KAAK,IAAI;AAEtB,UAAI,gBAAgB;AACpB,WAAK,KAAK,MAAM,QAAQ,CAAC,UAAU;AAC/B,aAAK,SAAS,IAAI,MAAM,IAAI,KAAK;AACjC,cAAM,aAAa,MAAM,UAAU,MAAM;AACzC,YAAI,aAAa,eAAe;AAC5B,0BAAgB;AAAA,QACpC;AAAA,MACA,CAAa;AACD,WAAK,gBAAgB;AAErB,WAAK,SAAS,IAAI,cAAc,KAAK,MAAM,KAAK,QAAQ;AAIxD,UAAI,CAAC,KAAK,SAAS;AACf,aAAIL,MAAA,KAAK,SAAL,gBAAAA,IAAW,kBAAkB;AAC7B,gBAAM,EAAE,UAAU,WAAW,SAAS,eAAe,KAAK,KAAK;AAC/D,eAAK,UAAU;AAAA,YACX,UAAU,WAAW;AAAA,YACrB,WAAW,YAAY;AAAA,YACvB,SAAS,UAAU;AAAA,UACtB;AAAA,QACrB,OACqB;AACD,gBAAM,IAAI,MAAM,6BAA6B,YAAK,MAAI,UAAS,YAAK,YAAU,QAC1E,iHACqD;AAAA,QAC7E;AAAA,MACA;AACY,WAAK,YAAa;AAAA,IACrB,GACI,MAAM,QAAQ,KAAK;AAAA,EAChC;AAAA,EACI,cAAc,SAAS;AACnB,UAAM,QAAQ,KAAK,SAAS,IAAI,OAAO;AACvC,QAAI,UAAU,QAAW;AACrB,YAAM,IAAI,MAAM,SAAS,gBAAO,uBAAsB,YAAK,WAAY;AAAA,IACnF;AACQ,WAAO;AAAA,MACH,GAAG,MAAM;AAAA,MACT,GAAG,MAAM;AAAA,MACT,OAAO,MAAM;AAAA,MACb,QAAQ,MAAM;AAAA,IACjB;AAAA,EACT;AAAA,EACI,cAAc;AACV,QAAI,KAAK;AACL;AACJ,QAAI,KAAK,QAAQ,UAAU,YAAY,KAAK,MAAM;AAC9C,WAAK,SAAS;AACd,WAAK,KAAK,QAAQ;AAAA,IAC9B;AAAA,EACA;AACA;ACtHO,IAAIK;AACJ,IAAI;AAEJ,SAAS,uBAAuB,SAAS,SAAS,OAAO;AAC5DA,eAAW,IAAI,aAAa,SAAS,MAAM;AAC3C,iBAAeA,WAAS,aAAa,KAAKA,UAAQ;AAClD,SAAOA;AACX;AACO,SAAS,UAAUgB,QAAO;AAC7B,QAAM,QAAQhB,WAAS;AACvB,aAAW,QAAQgB,QAAO;AACtB,QAAI,UAAU,SAAS,KAAK,SAAS,UAAU,KAAK,SAAS,SAAS;AAClE,UAAIhB,WAAS,MAAM,SAAS,SAAS,SAAS;AAC1C,cAAM,YAAY,YAAY,IAAI,cAAc,KAAK,MAAM;AAAA,UACvD,GAAG;AAAA,UACH;AAAA,QACpB,CAAiB,CAAC;AAAA,MAClB;AAAA,IACA,WACiB,aAAa,MAAM;AACxB,YAAM,YAAY,YAAY,IAAI,cAAc,IAAI,CAAC;AAAA,IACjE;AAAA,EACA;AACA;;ACxBA,SAAS,WAAW;AACT,UAAC,EAAE,4BAAmB;AACjC;AACa,cAAQ,cAAc;AAC5B,MAAM,SAAS;AAAA,EAClB,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,mBAAmB;AAAA,EACnB,mBAAmB;AAAA,IACf,UAAU;AAAA,IACV,QAAQ;AAAA,EACZ;AAAA,EACA,cAAc;AAAA,IACV,YAAY;AAAA,IACZ,UAAU;AAAA,EACd;AAAA,EACA,qBAAqB;AAAA,EACrB,kBAAkB,MAAM;AAAA,EAAE;AAAA,EAC1B,eAAe;AACnB;ACnBO,MAAM,WAAW;AAAA,EACpB,SAAS;AAAA,EACT,UAAU;AAAA,EACV,MAAM;AACV;ACDA,SAAS,SAAS,MAAM;AACpB,SAAO,SAAS,IAAI,KAAK,KAAK;AAClC;AACO,SAAS,IAAI,KAAK,SAAS,MAAM;AACpC,MAAI,OAAO;AACP,QAAI,OAAO,SAAS,SAAS,IAAI,KAAK,SAAS,KAAK,CAAC,CAAC,GAAG;AACrD,cAAQ,IAAI,KAAK,MAAM,GAAG,IAAI;AAAA,IAC1C;AAAA,EACA;AACA;AACO,MAAM,SAAS,CAAC,QAAQ,eAAe;AACvC,MAAM,aAAa,CAAC,QAAQ,OAAO,QAAQ;AAC3C,SAAS,SAAS,MAAM;AAC3B,SAAO,OAAO,SAAS;AAC3B;AACO,SAAS,QAAQ,MAAM;AAC1B,SAAO,MAAM,QAAQ,IAAI;AAC7B;AACO,SAAS,SAAS,MAAM;AAC3B,SAAO,OAAO,SAAS;AAC3B;AACO,SAAS,SAAS,MAAM;AAC3B,SAAO,OAAO,SAAS;AAC3B;AACO,SAAS,UAAU,MAAM;AAC5B,SAAO,OAAO,UAAU,IAAI;AAChC;AACO,SAAS,QAAQ,MAAM;AAC1B,SAAO,aAAa,QAAQ,OAAO,KAAK,YAAY;AACxD;AACO,SAAS,cAAc,MAAM;AAChC,SAAO,gBAAgB;AAC3B;AACO,SAAS,cAAc,MAAM;AAChC,SAAO,KAAK,UAAU,SAAS;AACnC;AACO,SAAS,WAAW,MAAM;AAC7B,SAAO,KAAK,UAAU,SAAS;AACnC;AACO,SAAS,UAAU,KAAK,MAAM;AACjC,aAAWR,QAAO,MAAM;AACpB,QAAIA,QAAO,KAAK;AACZ,aAAO;AAAA,IACnB;AAAA,EACA;AACI,SAAO;AACX;AAkBO,SAAS,cAAc,MAAM;AAChC,QAAM,OAAO,CAAC,IAAI;AAClB,MAAI,SAAS,KAAK;AAClB,SAAO,QAAQ;AACX,SAAK,KAAK,MAAM;AAChB,aAAS,OAAO;AAAA,EACxB;AACI,OAAK,QAAS;AACd,MAAI,SAAS;AAYb,OAAK,QAAQ,CAACyB,OAAM,MAAM;AACtB,QAAI,CAACA,MAAK,gBAAgB;AACtB;AAAA,IACZ;AACQ,IAAAA,MAAK,eAAe,SAAS;AAC7B,IAAAA,MAAK,eAAe,SAAS;AAC7B,UAAM,QAAQ,KAAK,UAAUA,MAAK,gBAAgB,MAAM,CAAC;AACzD,UAAM,UAAUA,MAAK,WACf,QAAQ,UAAC,qCAAoC,YAAK,UAAUA,MAAK,UAAU,MAAM,CAAC,GAAC,QACnF;AACN,UAAMC,UAAS,MAAM,IAAI,aAAa,OAAO,WAAI;AACjD,cAAU,gBACL,UAAC,OAAM,cAAK,YAClB,UAAC,cAAa,OAAAA,SAAM,OACzB,gBAAO,gBACG,UAAC,gCAA+B,UAAC;AAAA,EAE7C,CAAK;AACD,SAAO;AACX;ACzGe,MAAM,eAAe,MAAM;AAAA,EAEtC,YAAY,UAAU,eAAe,IAAI;AAAA;AAAA;AADzC;AACyC;AAAA;AACrC,QAAI,QAAQ,YAAY,GAAG;AACvB,cAAM,GAAG,YAAY;AAAA,IACjC,WACiB,SAAS,YAAY,GAAG;AAC7B,cAAM,YAAY;AAAA,IAC9B,OACa;AACD,cAAM,GAAG,OAAO,QAAQ,YAAY,EAC/B,OAAO,CAAC,CAAC,MAAM,KAAK,MAAM,KAAK,EAC/B,IAAI,CAAC,CAAC1B,IAAG,MAAMA,IAAG,CAAC;AAAA,IACpC;AACQ,SAAK,WAAW;AAChB,WAAO;AAAA,EACf;AAAA,EACI,IAAI,OAAO;AAEP,WAAO,KAAK,QAAQ,KAAK,KAAK,KAAK,KAAK,QAAQ,IAAI,aAAO,KAAK;AAAA,EACxE;AAAA,EACI,GAAG,OAAO;AACN,WAAO,KAAK,QAAQ,KAAK,KAAK;AAAA,EACtC;AAAA,EACI,IAAI,OAAO;AACP,QAAI,KAAK,IAAI,KAAK,GAAG;AACjB;AAAA,IACZ;AACQ,SAAK,KAAK,KAAK;AACf,SAAK,SAAU;AAAA,EACvB;AAAA,EACI,OAAO,OAAO,OAAO;AACjB,QAAI,UAAU,MAAM;AAChB,WAAK,IAAI,KAAK;AAAA,IAC1B,WACiB,UAAU,OAAO;AACtB,WAAK,OAAO,KAAK;AAAA,IAC7B,OACa;AACD,UAAI,KAAK,IAAI,KAAK,GAAG;AACjB,aAAK,OAAO,KAAK;AAAA,MACjC,OACiB;AACD,aAAK,IAAI,KAAK;AAAA,MAC9B;AAAA,IACA;AAAA,EACA;AAAA,EACI,MAAM,WAAW;AACb,QAAI,QAAQ,SAAS,GAAG;AACpB,WAAK,SAAS;AACd,WAAK,KAAK,GAAG,SAAS;AAAA,IAClC,WACiB,SAAS,SAAS,GAAG;AAC1B,WAAK,SAAS;AACd,WAAK,KAAK,SAAS;AAAA,IAC/B,OACa;AACD,iBAAW,SAAS,WAAW;AAC3B,cAAM,QAAQ,UAAU,KAAK;AAC7B,YAAI,OAAO;AACP,cAAI,CAAC,KAAK,IAAI,KAAK,GAAG;AAClB,iBAAK,KAAK,KAAK;AAAA,UACvC;AAAA,QACA,OACqB;AACD,gBAAM,qBAAqB,KAAK,QAAQ,KAAK;AAC7C,cAAI,sBAAsB,GAAG;AACzB,iBAAK,OAAO,oBAAoB,CAAC;AAAA,UACzD;AAAA,QACA;AAAA,MACA;AAAA,IACA;AACQ,WAAO;AAAA,EACf;AAAA,EACI,OAAO,OAAO;AACV,UAAM,qBAAqB,KAAK,QAAQ,KAAK;AAC7C,QAAI,sBAAsB,GAAG;AACzB,WAAK,OAAO,oBAAoB,CAAC;AACjC,WAAK,SAAU;AAAA,IAC3B;AAAA,EACA;AACA;ACjFe,SAAQ,cAAE,MAAM;;AAC3B,QAAM2B,YAAW,CAAE;AACnB,MAAI,WAAW;AACf,MAAI,WAAW;AACf,WAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,UAAM,IAAI,KAAK,SAAS,CAAC;AACzB,QAAI,cAAc,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,SAAS;AACtD,aAAO;AAAA,IACnB;AAEQ,QAAI,WAAW,CAAC,KAAK,EAAE,aAAa,OAAO;AACvC;AAAA,IACZ;AACQ,QAAI,EAAE,cAAc,QAAW;AAC3B,iBAAW;AAAA,IACvB;AACQ,QAAI,EAAE,aAAa,QAAW;AAC1B,kBAAY,EAAE;AAAA,IAC1B;AACQ,IAAAA,UAAS,KAAK,CAAC;AAAA,EACvB;AACI,MAAI,UAAU;AACV,IAAAA,UAAS,KAAK,CAAC,GAAG,OAAO,EAAE,aAAa,MAAM,EAAE,aAAa,EAAE;AAAA,EACvE;AACI,QAAM,cAAcA,UAAS;AAC7B,QAAM,YAAY,KAAK,iBAAiB;AACxC,QAAM,QAAQ,cAAc;AAC5B,QAAM,YAAY,QAAQ,UAAU;AACpC,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,YAAY,QAAQ,eAAe;AACzC,QAAM,iBAAiB,QAAQ,cAAc;AAC7C,QAAM,YAAY,QAAQ,gBAAgB;AAC1C,QAAM,iBAAiB,QAAQ,iBAAiB;AAChD,QAAM,OAAO,QAAQ,MAAM;AAC3B,QAAM,YAAY,QAAQ,MAAM;AAChC,QAAM,gBAAgB,KAAK,SAAS,KAAK;AACzC,QAAM,qBAAqB,KAAK,cAAc,KAAK;AACnD,QAAM,MAAM,KAAK,OAAO;AACxB,QAAM,UAAU,KAAK,kBAAkB;AACvC,QAAM,QAAQ,KAAK;AACnB,MAAI,mBAAmB;AACvB,MAAI,UAAU;AACV,UAAM,YAAYA,UAAS,OAAO,CAAC,MAAM,MAAM,QAC1C,EAAE,WAAW,IAAI,EAAE,SAAS,KAAK,MACjC,EAAE,SAAS,KAAK,MAChB,EAAE,SAAS,KAAK,IAAI,CAAC;AAC1B,UAAM,cAAc,gBAAgB,YAAY,OAAO,cAAc,MAAM;AAC3E,aAAS,IAAI,GAAG,IAAIA,UAAS,QAAQ,KAAK;AACtC,YAAM,IAAIA,UAAS,CAAC;AACpB,UAAI,EAAE,aAAa,UAAa,EAAE,WAAW,GAAG;AAC5C,UAAE,SAAS,IAAI,EAAE,WAAW;AAAA,MAC5C;AAAA,IACA;AAAA,EACA;AACI,MAAI,WAAW;AACf,MAAI,CAAC,UAAU,gBAAgB,aAAa,EAAE,SAAS,OAAO,GAAG;AAC7D,eAAWA,UAAS,OAAO,CAAC,MAAM,MAAM,QAAQ,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK,IAAI,CAAC;AAAA,EACzH;AAEI,QAAM,kBAAkB,sBAAsB,QACxC,CAAC,MAAM;AACL,QAAI,UAAU,aAAa;AACvB,QAAE,SAAS,IAAI,EAAE,cAAc,KAAK;AAAA,IACpD,WACqB,UAAU,UAAU;AACzB,QAAE,SAAS,KACN,sBAAsB,EAAE,cAAc,KAAK,MAAM,KAC7C,EAAE,cAAc,KAAK;AAAA,IAC9C,WACqB,UAAU,WAAW;AAC1B,QAAE,SAAS,IACP,sBACK,EAAE,cAAc,KAAK,MACrB,EAAE,cAAc,KAAK;AAAA,IAC9C;AAAA,EACA,IACU,CAAC,MAAM;AACb,MAAI,SAAS,KAAK,eAAe,CAAC,KAAK,mBAAmB;AAEtD,UAAM,cAAYxB,MAAAwB,UAAS,CAAC,MAAV,gBAAAxB,IAAa,WAAU,KAAK;AAC9C,QAAI,cAAc,KAAK,QAAQ;AAC3B,yBAAmB;AACnB,WAAK,SAAS;AAAA,IAC1B;AAAA,EACA;AACI,MAAI,YAAY,aAAa;AACzB,QAAI,QAAQ,KAAK,WAAW;AAC5B,aAAS,IAAI,GAAG,IAAIwB,UAAS,QAAQ,KAAK;AACtC,YAAM,IAAIA,UAAS,CAAC;AACpB,QAAE,IAAI,IAAI,SAAS,EAAE,SAAS,KAAK;AACnC,gBACK,EAAE,SAAS,KAAK,KAAK,OAAO,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACvE,sBAAgB,CAAC;AAAA,IAC7B;AAEQ,QAAI,KAAK,iBAAiB,SAAS;AAC/B,YAAM,iBAAiB,QAAQ,OAAO,KAAK,WAAW;AACtD,UAAI,mBAAmB,eAAe;AAElC,aAAK,UAAU,iBAAW,IAAI;AAC9B,aAAK,SAAS,IAAI;AAClB,eAAO;AAAA,MACvB;AAAA,IACA;AAAA,EACA,WACa,YAAY,WAAW;AAC5B,QAAI,QAAQ;AACZ,aAAS,IAAI,cAAc,GAAG,KAAK,GAAG,KAAK;AACvC,YAAM,IAAIA,UAAS,CAAC;AACpB,QAAE,IAAI,IAAI,SAAS,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACzD,gBACK,EAAE,SAAS,KAAK,KAAK,OAAO,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACvE,sBAAgB,CAAC;AAAA,IAC7B;AAAA,EACA,WACa,YAAY,UAAU;AAC3B,QAAI,SAAS,iBAAiB,WAAW,OAAO,cAAc,OAAO;AACrE,aAAS,IAAI,GAAG,IAAIA,UAAS,QAAQ,KAAK;AACtC,YAAM,IAAIA,UAAS,CAAC;AACpB,QAAE,IAAI,IAAI,SAAS,EAAE,SAAS,KAAK;AACnC,gBACK,EAAE,SAAS,KAAK,KAAK,OAAO,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACvE,sBAAgB,CAAC;AAAA,IAC7B;AAAA,EACA,WACa,YAAY,gBAAgB;AACjC,UAAM,SAAS,gBAAgB,aAAa,cAAc;AAC1D,QAAI,QAAQ;AACZ,aAAS,IAAI,GAAG,IAAIA,UAAS,QAAQ,KAAK;AACtC,YAAM,IAAIA,UAAS,CAAC;AACpB,QAAE,IAAI,IAAI,SAAS,EAAE,SAAS,KAAK;AACnC,gBACK,EAAE,SAAS,KAAK,KAAK,SAAS,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACzE,sBAAgB,CAAC;AAAA,IAC7B;AAAA,EACA,WACa,YAAY,eAAe;AAChC,UAAM,SAAS,gBAAgB,aAAa,cAAc;AAC1D,QAAI,QAAQ;AACZ,aAAS,IAAI,GAAG,IAAIA,UAAS,QAAQ,KAAK;AACtC,YAAM,IAAIA,UAAS,CAAC;AACpB,QAAE,IAAI,IAAI,SAAS,EAAE,SAAS,KAAK;AACnC,gBACK,EAAE,SAAS,KAAK,KAAK,SAAS,EAAE,SAAS,KAAK,MAAM,EAAE,SAAS,KAAK;AACzE,sBAAgB,CAAC;AAAA,IAC7B;AAAA,EACA;AAEI,SAAO;AACX;ACpJA,MAAM,gBAAgB;AAAA,EAClB,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,WAAW;AAAA,EACX,OAAO;AAAA,EACP,GAAG;AAAA,EACH,KAAK;AAAA,EACL,WAAW;AAAA,EACX,QAAQ;AACZ;AACA,MAAM,oBAAoB;AAAA;AAE1B;AACA,MAAM,gBAAgB,CAAC,QAAQ,cAAc;AACzC,aAAW,CAAC3B,MAAK,KAAK,KAAK,OAAO,QAAQ,MAAM,GAAG;AAC/C,QAAI,MAAM,QAAQ,KAAK,GAAG;AACtB,YAAM,QAAQ,CAAC,MAAM;AACjB,kBAAU,CAAC,IAAIA;AAAA,MAC/B,CAAa;AAAA,IACb,WACiB,UAAU,MAAM;AACrB,aAAO,UAAUA,IAAG;AAAA,IAChC,OACa;AACD,gBAAU,KAAK,IAAIA;AAAA,IAC/B;AAAA,EACA;AACA;AACA,IAAI,uBAAuB;AAC3B,MAAM,gBAAgB,CAAC4B,gBAAe,iBAAiB;AACnD,MAAI,sBAAsB;AACtB,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,OAAO;AACb,UAAM,YAAY;AAmBlB,aAAS,KAAK,YAAY,KAAK;AAC/B,2BAAuB;AAAA,EAC/B;AACI,EAAAA,eAAc,QAAQ,CAAC,QAAQ;AAC3B,QAAI,OAAO;AAAA,MACP,GAAG,IAAI;AAAA,MACP,OAAO;AAAA,IACV;AAAA,EACT,CAAK;AACD,eAAa,QAAQ,CAAC,KAAK,MAAM;AAC7B,QAAI,OAAO;AAAA,MACP,GAAG,IAAI;AAAA,MACP,OAAO,IAAI;AAAA,IACd;AAAA,EACT,CAAK;AACL;AACA,IAAIC;AACG,MAAMC,qBAAmB,CAAC,QAAQ;AACrC,kBAAgB,KAAKD,eAAa;AAClCA,oBAAgB;AAEhB,SAAO,iBAAiB,GAAG;AAC/B;AACA,IAAIE,cAAY,CAAE;AAClB,MAAM,kBAAkB,CAAC,mBAAmB,mBAAmB;;AAC3D,MAAI,UAAU;AACd,QAAM,KAAK,CAAE;AACb,SAAO,SAAS;AACZ,QAAI,CAAC,QAAQ,OAAO,IAAI,OAAO,aAAa,KACxC,YAAY,mBAAmB;AAC/B,cAAQ,OAAO,IAAI,OAAO,aAAa;AACvC,OAAA5B,MAAA,QAAQ,YAAR,gBAAAA,IAAiB,KAAK,SAAS,mBAAmB;AAClD,OAAAC,MAAA,QAAQ,mBAAR,gBAAAA,IAAwB,KAAK,SAAS,MAAM,mBAAmB;AAAA,IAC3E;AACQ,OAAG,KAAK,OAAO;AACf,cAAU,QAAQ;AAAA,EAC1B;AACI2B,cAAU,QAAQ,CAAC,QAAQ;;AACvB,QAAI,CAAC,GAAG,SAAS,GAAG,GAAG;AACnB,UAAI,OAAO,OAAO,OAAO,aAAa;AACtC,OAAA5B,MAAA,IAAI,WAAJ,gBAAAA,IAAY,KAAK,KAAK,mBAAmB;AACzC,OAAAC,MAAA,IAAI,mBAAJ,gBAAAA,IAAoB,KAAK,KAAK,OAAO,mBAAmB;AAAA,IACpE;AAAA,EACA,CAAK;AACD,MAAI,OAAO,YAAY;AACnB,kBAAc2B,aAAW,EAAE;AAAA,EACnC;AACIA,gBAAY;AACZ,SAAO;AACX;AACA,MAAM,mBAAmB,CAAC,GAAG,aAAa,WAAW;AACjD,MAAI,gBAAgB;AACpB,aAAW,OAAOA,aAAW;AACzB,oBAAgB,iBAAiB;AACjC,QAAI,aAAa;AACb,YAAM,eAAe,IAAI,KAAK,mBAAa;AAC3C,UAAI,WAAW,YAAY,KACvB,aAAa,KAAK,KAAK,GAAG,KAAK,aAAa,MAAM,MAAM;AACxD;AAAA,MAChB;AAAA,IACA,OACa;AACD,cAAQ,IAAI,wBAAwB,SAAE,OAAO,EAAE,QAAS;AAAA,IACpE;AACQ,UAAM,mBAAmB,SAAS,IAAI,YAAY,IAAI;AACtD,QAAI,WAAW,gBAAgB,KAC3B,iBAAiB,KAAK,KAAK,GAAG,aAAa,KAAK,aAAa,MAAM,MAAM;AACzE;AAAA,IACZ;AAAA,EACA;AACI,SAAO;AACX;AACA,MAAM,6BAA6B;AACnC,MAAM,kBAAkB,CAAE;AAC1B,MAAM,kBAAkB,CAAC,GAAG,uBAAuB;AAC/C,SAAO,gBAAgB,EAAE,OAAO,EAAE,OAAO;AACzC,mBAAiB,GAAG,oBAAoB,IAAI;AAChD;AACA,MAAM,kBAAkB,CAAC7B,QAAO,UAAU,UAAU;AAChD,MAAI,UAAU;AACV,UAAMF,OAAM,SAAS,OAAO,SAAS;AACrC,UAAM,qBAAqB,kBAAkB,SAAS,GAAG,KAAK,kBAAkB,SAAS,OAAO;AAChG,UAAM,iBAAiB,cAAc,SAAS,GAAG,KAAK,cAAc,SAAS,OAAO;AACpF,QAAI,CAAC,oBAAoB;AACrB,uBAAiB,UAAU,gBAAgB,KAAK;AAAA,IAC5D,OACa;AACD,UAAI,gBAAgBA,IAAG,GAAG;AACtB,qBAAa,gBAAgBA,IAAG,CAAC;AAAA,MACjD;AACY,sBAAgBA,IAAG,IAAI,OAAO,WAAW,MAAM,gBAAgB,UAAU,kBAAkB,GAAGE,MAAK;AAAA,IAC/G;AAAA,EACA;AACI,MAAI,OAAO;AACP,UAAMF,OAAM,MAAM,OAAO,MAAM;AAC/B,UAAM,iBAAiB,cAAc,MAAM,GAAG,KAAK,cAAc,MAAM,OAAO;AAC9E,QAAI,gBAAgBA,IAAG,GAAG;AACtB,mBAAa,gBAAgBA,IAAG,CAAC;AACjC,aAAO,gBAAgBA,IAAG;AAC1B,uBAAiB,OAAO,gBAAgB,KAAK;AAAA,IACzD;AAAA,EACA;AACA;AACO,MAAMgC,oBAAkB,CAAC,EAAE,YAAY,gBAAgB,eAAe,CAAC,OAAO;AACjF,KAAI;AACR,EAAC,IAAM,OAAO;AACV,MAAI,YAAY;AACZ,kBAAc,YAAY,aAAa;AAAA,EAC/C;AACI,MAAI,iDAAgB,gBAAgB;AAChC,kBAAc,eAAe,gBAAgB,iBAAiB;AAAA,EACtE;AACI,QAAM9B,UAAQ,iDAAgB,kBAAiB;AAC/C,QAAM,cAAc,gBAAgB,KAAK,MAAMA,MAAK;AAEpD,QAAM,kBAAkB,CAAC,UAAU,aAAa,MAAM;AAClD,gBAAY,OAAO,MAAS;AAAA,EACpC,CAAK;AACD,QAAM,eAAe,CAAC,UAAU,aAAa,MAAM;AAC/C,gBAAY,QAAW,KAAK;AAAA,EACpC,CAAK;AACD,WAAS,iBAAiB,SAAS,YAAY;AAC/C,WAAS,iBAAiB,WAAW,eAAe;AACpD,SAAO;AAAA,IACH,SAAS,MAAM;AACX,eAAS,oBAAoB,WAAW,eAAe;AACvD,eAAS,oBAAoB,SAAS,YAAY;AAClD,iBAAW,CAAC,GAAG,OAAO,KAAK,OAAO,QAAQ,eAAe,GAAG;AACxD,YAAI;AACA,uBAAa,OAAO;AAAA,MACxC;AAAA,IACS;AAAA,IACD,WAAW,MAAM6B;AAAAA,EACpB;AACL;ACrLA,MAAM,cAAc,oBAAI,IAAK;AAC7B,IAAI,cAAc;AAClB,SAAS,YAAY;AACjB,QAAM,QAAQ,CAAC,GAAG,WAAW;AAC7B,cAAY,MAAO;AACnB,WAAS,IAAI,MAAM,SAAS,GAAG,KAAK,GAAG,KAAK;AACxC,UAAM,OAAO,MAAM,CAAC;AACpB,SAAK,aAAc;AAAA,EAC3B;AACA;AACA,SAAS,cAAc;AACnB,MAAI;AACA;AACJ,gBAAc;AAEd,aAAW,MAAM;AACb,kBAAc;AACd,cAAW;AAAA,EACd,GAAE,CAAC;AACR;AACA,MAAM,cAAc,oBAAI,IAAK;AAC7B,SAAS,uBAAuB,MAAM,cAAc;AAChD,MAAI;AACJ,MAAI,OAAO,qBAAqB;AAC5B,UAAM,eAAe,KAAK,OAAO,KAAK,SAAS,KAAK,EAAE,IAAI;AAC1D,eACI,GAAG,YAAK,OAAK,KAAI,YAAK,QAAM,KAAI,uBAC5B,KAAK,UAAU,YAAY;AACnC,QAAI,YAAY,IAAI,QAAQ,GAAG;AAC3B,aAAO,YAAY,IAAI,QAAQ;AAAA,IAC3C;AAAA,EACA;AACI,QAAM,UAAU,CAAE;AAClB,aAAW,CAAC,MAAM,KAAK,KAAK,OAAO,QAAQ,YAAY,GAAG;AACtD,YAAQ,KAAK,EAAE,MAAM,MAAK,CAAE;AAAA,EACpC;AACI,QAAM,SAAS,aAAa,iBAAiB,EAAE,QAAO,CAAE;AACxD,MAAI,OAAO,uBAAuB,UAAU;AACxC,gBAAY,IAAI,UAAU,MAAM;AAAA,EACxC;AACI,SAAO;AACX;AACA,SAAS,eAAe,YAAY,IAAI;AACpC,SAAO;AAAA,IACH,IAAI,OAAO;AAEP,UAAI,SAAS,KAAK,GAAG;AACjB,gBAAQ,EAAE,OAAO,OAAO,OAAO,IAAY;AAAA,MAC3D;AACY,WAAK,UAAU,KAAK,UACd;AAAA,QACE,GAAI,KAAK,WAAW;QACpB,GAAG,EAAE,CAAC,SAAS,iBAAW,GAAG,MAAO;AAAA,MACxD,IACkB,EAAE,CAAC,SAAS,iBAAW,GAAG,MAAO;AAAA,IAC1C;AAAA,IACD,MAAM;;AACF,cAAO5B,MAAA,KAAK,YAAL,gBAAAA,IAAe,SAAS;AAAA,IAClC;AAAA,EACJ;AACL;AACA,MAAM,+BAA+B;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AACA,MAAM,qCAAqC;AAAA,EACvC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AACO,MAAM,oBAAoB,OAAO;AAAA,EACpC,YAAY,MAAM;AACd,UAAO;AACP,SAAK,QAAQ,SAAS,SAAS,SAAS,WAAW,SAAS;AAC5D,SAAK,WAAW;AAChB,SAAK,MAAM,CAAE;AACb,SAAK,WAAW,CAAE;AAAA,EAC1B;AAAA,EACI,IAAI,UAAU;AACV,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,QAAQ,GAAG;AACX,SAAK,WAAW;AAChB,QAAI,KAAK,UAAU;AACf,WAAK,SAAS,uBAAuB,MAAM,CAAC;AAAA,IACxD;AAAA,EACA;AAAA,EACI,IAAI,GAAG,IAAI;;AACP,SAAK,MAAM;AACX,SAAIA,MAAA,OAAO,oBAAP,gBAAAA,IAAwB,WAAW;AACnC,WAAK,OAAO,EAAE,GAAG,KAAK,MAAM,QAAQ,GAAI;AAAA,IACpD;AAAA,EACA;AAAA,EACI,IAAI,KAAK;AACL,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,OAAO,GAAG;;AACV,SAAK,UAAU;AACf,QAAI,KAAK,UAAU;AACf,WAAK,IAAI,UAASA,MAAA,uBAAG,QAAH,OAAAA,MAAU;AAAA,IACxC;AAAA,EACA;AAAA,EACI,YAAY,MAAM,YAAY;AAC1B,SAAK,SAAS;AACd,QAAI,YAAY;AAGZ,WAAK,YAAY,IAAI;AACrB,YAAM,QAAQ,KAAK,SAAS,QAAQ,UAAU;AAC9C,UAAI,SAAS,GAAG;AACZ,aAAK,SAAS,OAAO,OAAO,GAAG,IAAI;AACnC;AAAA,MAChB;AAAA,IACA;AACQ,SAAK,SAAS,KAAK,IAAI;AAAA,EAC/B;AAAA,EACI,YAAY,MAAM;AACd,UAAM,oBAAoB,KAAK,SAAS,QAAQ,IAAI;AACpD,QAAI,qBAAqB,GAAG;AACxB,WAAK,SAAS,OAAO,mBAAmB,CAAC;AAAA,IACrD;AAAA,EACA;AAAA,EACI,IAAI,eAAe;AACf,UAAM,gBAAgB,KAAK,YAAY;AACvC,aAAS,IAAI,eAAe,IAAI,KAAK,SAAS,QAAQ,KAAK;AACvD,YAAM,UAAU,KAAK,SAAS,CAAC;AAC/B,UAAI,cAAc,OAAO,GAAG;AACxB,aAAK,WAAW;AAChB,eAAO;AAAA,MACvB;AAAA,IACA;AACQ,WAAO;AAAA,EACf;AAAA,EACI,IAAI,OAAO,aAAa;AACpB,QAAI,UAAU;AACd,QAAI,QAAQ,WAAW,GAAG;AACtB,gBAAU,aAAa,GAAG,WAAW;AAAA,IACjD;AACQ,SAAK,IAAI,SAAS;AAAA,EAC1B;AAAA,EACI,2BAA2B,MAAM,OAAO;AACpC,QAAI,KAAK,cACL,KAAK,YACL,OAAO,sBACN,KAAK,eAAe,QAAQ,KAAK,WAAW,IAAI,IAAI;AACrD,YAAM,oBAAoB,KAAK,eAAe,QAAQ,KAAK,WAAW,IAAI,MAAM,OAC1E,SACA,KAAK,WAAW,IAAI;AAC1B,YAAM,sBAAsB,KAAK,QAAQ,EAAE,CAAC,IAAI,GAAG,MAAO,GAAE,iBAAiB;AAC7E,UAAI,KAAK,aAAa;AAClB,cAAM,kBAAkB,OAAO,KAAK,KAAK,WAAW;AACpD,mBAAW,SAAS,iBAAiB;AACjC,gBAAM,UAAU,KAAK,YAAY,KAAK;AACtC,8BAAoB,GAAG,OAAO,CAAC,YAAY,UAAU;AACjD,oBAAQ,KAAK,MAAM,YAAY,MAAM,OAAO,KAAK;AAAA,UACzE,CAAqB;AAAA,QACrB;AAAA,MACA;AACY,aAAO,oBAAoB,MAAO;AAAA,IAC9C;AACQ,SAAK,IAAI,IAAI,IAAI;AAAA,EACzB;AAAA,EACI,QAAQ,OAAO,mBAAmB;AAC9B,iBAAa,KAAK,UAAU,wCAAwC;AACpE,WAAO,KAAK,IAAI,QAAQ,OAAO,qBAAqB,KAAK,qBAAqB,EAAE;AAAA,EACxF;AAAA,EACI,MAAM,OAAO,mBAAmB;AAC5B,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,CAAE;AACzB,WAAK,oBAAoB;AAAA,IACrC;AACQ,QAAI,mBAAmB;AACnB,WAAK,0BAA0B;AAAA,IAC3C,WACiB,CAAC,KAAK,yBAAyB;AACpC,WAAK,0BACD,qBAAqB,KAAK;AAAA,IAC1C;AACQ,wBAAoB,qBAAqB,KAAK;AAC9C,SAAK,kBAAkB,KAAK,mBAAmB,CAAE;AACjD,SAAK,gBAAgB,KAAK,EAAE,OAAO,kBAAiB,CAAE;AACtD,WAAO;AAAA,EACf;AAAA,EACI,MAAM,QAAQ;AACV,QAAI,YAAY,KAAK,gBAAgB,MAAO;AAC5C,WAAO,WAAW;AACd,WAAK,oBAAoB;AACzB,YAAM,KAAK,QAAQ,UAAU,OAAO,UAAU,iBAAiB,EAC1D,MAAK,EACL,iBAAkB;AACvB,kBAAY,KAAK,gBAAgB,MAAO;AAAA,IACpD;AACQ,SAAK,oBAAoB;AACzB,SAAK,0BAA0B;AAAA,EACvC;AAAA,EACI,WAAW;AACP,QAAI,KAAK,UAAU;AAEf,UAAI,KAAK,iBAAiB,QAAW;AACjC,YAAI,OAAO,KAAK,YAAY,GAAG;AAC3B,cAAI,KAAK,aAAa,KAAK,MAAM,IAAI,MAAM,OAAO;AAC9C;AAAA,UACxB;AAAA,QACA,OACqB;AACD,gBAAM,eAAe,OAAO,KAAK,iBAAiB,WAAW,KAAK,eAAe;AACjF,gBAAM,QAAQ,KAAK;AACnB,cAAI,iBAAiB,QAAQ,eAAe,MAAM,QAAQ;AACtD,kBAAM,QAAQ,MAAM,YAAY;AAChC,0BAAc,KAAK,KAAK,MAAM,SAAU;AACxC;AAAA,UACxB;AAAA,QACA;AAAA,MACA;AAEY,qBAAe,MAAM2B,mBAAiB,IAAI,CAAC;AAAA,IACvD,OACa;AACD,WAAK,aAAa;AAAA,IAC9B;AAAA,EACA;AAAA,EACI,gBAAgB;AACZ,SAAK,IAAI,GAAG,UAAU,MAAM;AAExB,kBAAY,IAAI,KAAK,MAAM;AAC3B,kBAAa;AAAA,IACzB,CAAS;AAAA,EACT;AAAA,EACI,UAAU;AACN,QAAI,SAAS;AACb,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,gBAAU,KAAK,SAAS,CAAC,EAAE;AAAA,IACvC;AACQ,WAAO;AAAA,EACf;AAAA,EACI,UAAU;AACN,QAAI,KAAK,WAAW;AAChB,YAAM,iBAAiB,KAAK,UAAU,IAAI;AAG1C,UAAI,0BAA0B,SAAS;AACnC,uBAAe,KAAK,MAAM,KAAK,SAAQ,CAAE;AAAA,MACzD,OACiB;AACD,aAAK,SAAU;AAAA,MAC/B;AAAA,IACA,OACa;AACD,WAAK,SAAU;AAAA,IAC3B;AAAA,EACA;AAAA,EACI,WAAW;;AACP,QAAI,KAAK,gBAAgB,QAAQ,KAAK,GAAG,GAAG;AACxC,WAAK,IAAI,QAAS;AAClB,WAAI3B,MAAA,KAAK,WAAL,gBAAAA,IAAa,kBAAkB;AAC/B,aAAK,OAAO,aAAc;AAAA,MAC1C;AAAA,IACA;AAAA,EACA;AAAA,EACI,IAAI,MAAM,OAAO;AACb,QAAI,SAAS,KAAK,QAAQ;AAEtB,cAAQ,KAAK,yGAAyG;AAAA,IAClI;AACQ,QAAI,CAAC,OAAO;AACR;AAAA,IACZ;AACQ,SAAK,SAAS;AAEd,eAAWH,QAAO,KAAK,QAAQ;AAE3B,UAAI,KAAKA,IAAG,MAAM,QAAW;AACzB,aAAKA,IAAG,IAAI,KAAK,OAAOA,IAAG;AAAA,MAC3C;AAAA,IACA;AAAA,EACA;AAAA,EACI,IAAI,QAAQ;AACR,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,cAAc;AACd,WAAO,KAAK,SAAS,SAAS;AAAA,EACtC;AAAA,EACI,IAAI,IAAI,KAAK;AACT,QAAI,OAAO,QAAQ,UAAU;AACzB,WAAK,IAAI,MAAM;AACf,UAAI,CAAC,KAAK,SAAS,KAAK,UAAU;AAC9B,aAAK,QAAQ;AAAA,MAC7B;AAAA,IACA,OACa;AACD,WAAK,QAAQ;AAAA,IACzB;AAAA,EACA;AAAA,EACI,IAAI,MAAM;AACN,WAAO,KAAK,IAAI;AAAA,EACxB;AAAA,EACI,aAAa,IAAI;AACb,WAAO,KAAK,SAAS,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE;AAAA,EACpD;AAAA,EACI,mBAAmB,IAAI;AAEnB,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC3C,YAAM,QAAQ,KAAK,SAAS,CAAC;AAC7B,UAAI,cAAc,KAAK,GAAG;AACtB,YAAI,MAAM,OAAO,IAAI;AACjB,iBAAO;AAAA,QAC3B;AACgB,cAAM,QAAQ,MAAM,mBAAmB,EAAE;AACzC,YAAI,OAAO;AACP,iBAAO;AAAA,QAC3B;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EACI,IAAI,OAAO,QAAQ;AACf,SAAK,UAAU,KAAK,UACd,KAAK,QAAQ,MAAM,MAAM,IACzB,IAAI,OAAO,KAAK,cAAc,KAAK,IAAI,GAAG,MAAM;AACtD,QAAI,KAAK,UAAU;AACf,WAAK,cAAe;AAAA,IAChC;AAAA,EACA;AAAA,EACI,IAAI,SAAS;AACT,SAAK,UAAU,KAAK,WAAW,IAAI,OAAO,KAAK,cAAc,KAAK,IAAI,CAAC;AACvE,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,IAAI,oBAAoB;AACpB,WAAO,KAAK,sBAAsB,OAAO;AAAA,EACjD;AAAA,EACI,IAAI,kBAAkB,mBAAmB;AACrC,SAAK,qBAAqB;AAAA,EAClC;AAAA,EACI,IAAI,OAAO,KAAK;AACZ,SAAK,QAAQ,MAAM,IAAI;AAAA,EAC/B;AAAA,EACI,IAAI,SAAS;AACT,WAAO,KAAK,UAAU;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASI,IAAI,UAAU,KAAK;AACf,SAAK,aAAa,MAAM,OAAO;AAC/B,SAAK,cAAc,KAAK,SAAU;AAAA,EAC1C;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,iBAAiB;AACb,WAAO,KAAK,YAAY,UAAU,KAAK;AAAA,EAC/C;AAAA,EACI,IAAI,eAAe,GAAG;AAClB,SAAK,aAAc;AAAA,EAC3B;AAAA,EACI,IAAI,iBAAiB;AACjB,WAAO;AAAA,EACf;AAAA,EACI,eAAe;;AACX,QAAI,KAAK,aAAa;AAClB,UAAI,YAAY,IAAI;AACpB,UAAI,KAAK,YAAY,QAAQ;AACzB,YAAI,cAAc,IAAI,GAAG;AACrB,WAAAG,MAAA,KAAK,WAAL,gBAAAA,IAAa;AAAA,QACjC;AAAA,MACA;AACY,UAAI,OAAO,KAAK,QAAQ,KAAK,KAAK,SAAS,KAAK,MAAM,IAAI,GAAG;AACzD,SAAAC,MAAA,KAAK,WAAL,gBAAAA,IAAa;AAAA,MAC7B;AAAA,IACA;AAAA,EACA;AAAA,EACI,gBAAgB;AACZ,QAAI,mBAAmB,MAAM,KAAK,MAAM;AACxC,QAAI,KAAK,eAAe;AAEpB,YAAM6B,UAAS,KAAK,OAAO,MAAO;AAClC,WAAK,SAAS,QAAQ,CAAC,MAAM;AACzB,UAAE,SAASA;AAAA,MAC3B,CAAa;AAAA,IACb;AACQ,UAAM,SAAS,KAAK;AACpB,QAAI,KAAK,eAAe,UAAU,MAAM,MAAM,GAAG;AAC7C,UAAI;AACJ,UAAI,KAAK,eAAe,KAAK,YAAY,QAAQ;AAC7C,uBAAe,CAAE;AACjB,aAAK,YAAY,QAAQ,CAAC,aAAa;AACnC,cAAI,OAAO;AACP,gBAAI,KAAK,MAAM,QAAQ,MAAM,QAAW;AACpC,sBAAQ,KAAK,kCAAkC,QAAQ;AAAA,YACnF;AAAA,UACA;AACoB,uBAAa,QAAQ,IAAI,KAAK,MAAM,QAAQ;AAAA,QAChE,CAAiB;AAAA,MACjB;AACY,YAAM,YAAY,OAAO;AACzB,UAAI,cAAc,GAAG;AACjB,eAAO,OAAO,MAAM,YAAY;AAChC,aAAK,cAAc,CAAE;AACrB;AAAA,MAChB;AACY,UAAI;AACJ,UAAI,cAAc,GAAG;AACjB,oBAAY,KAAK,OAAO,CAAC,CAAC;AAC1B,oBAAY,eACN,EAAE,GAAG,cAAc,GAAG,UAAS,IAC/B;AAAA,MACtB,OACiB;AACD,oBAAY,OAAO,OAAO,CAAC,KAAK,UAAU;AACtC,gBAAMC,UAAS,KAAK,KAAK;AACzB,iBAAOA,UAAS,EAAE,GAAG,KAAK,GAAGA,QAAQ,IAAG;AAAA,QAC5D,GAAmB,gBAAgB,EAAE;AAAA,MACrC;AACY,UAAI,WAAW;AACX,aAAK,cAAc,OAAO,KAAK,SAAS;AAExC,YAAI,UAAU,eAAe,QAAW;AACpC,eAAK,aAAa,UAAU;AAAA,QAChD;AAEgB,eAAO,OAAO,MAAM,SAAS;AAAA,MAC7C,OACiB;AACD,aAAK,cAAc,CAAE;AAAA,MACrC;AAAA,IACA;AAAA,EACA;AAAA,EACI,OAAO,SAAS;;AAGZ,UAAM,OAAO;AACb,UAAM,SAAS,KAAK;AACpB,QAAI,CAAC,QAAQ;AACT,cAAQ,KAAK,0CAA0C,IAAI;AAC3D;AAAA,IACZ;AACQ,QAAI,CAAC,OAAO,UAAU;AAClB,cAAQ,KAAK,6BAA6B,IAAI;AAC9C;AAAA,IACZ;AACQ,QAAI,OAAO,kBAAkB;AACzB,kBAAY,IAAI,MAAM;AAAA,IAClC;AACQ,QAAI,KAAK,UAAU;AAGf;AAAA,IACZ;AACQ,QAAI,KAAK,SAAS;AACd,WAAK,cAAe;AAAA,IAChC;AACQ,UAAM,QAAQ,KAAK;AACnB,UAAM,IAAI,MAAM,KAAK;AACrB,UAAM,IAAI,MAAM,KAAK;AACrB,UAAM,SAAS,OAAO;AACtB,QAAI,KAAK,SAAS,KAAK,UAAU,GAAG;AAChC,YAAM,KAAK,OAAO,SAAS,KAAK,KAAK;AACrC,YAAM,SAAS;AAAA,IAC3B;AACQ,QAAI,KAAK,UAAU,KAAK,WAAW,GAAG;AAClC,YAAM,KAAK,OAAO,UAAU,KAAK,KAAK;AACtC,YAAM,SAAS;AAAA,IAC3B;AACQ,QAAI,KAAK,QAAQ;AACb,WAAK,UAAU,KAAK,UAAU;AAAA,IAC1C;AACQ,QAAI,KAAK,SAAS;AACd,YAAM,MAAM,OAAO,SAAS,KAAK;AACjC,YAAM,SAAS;AAAA,IAC3B;AACQ,QAAI,KAAK,SAAS;AACd,YAAM,MAAM,OAAO,UAAU,KAAK;AAClC,YAAM,SAAS;AAAA,IAC3B;AACQ,QAAI,cAAc,IAAI,GAAG;AACrB,YAAM,YAAY;AAClB,UAAI,OAAO,cAAc;AACrB,mBAAWlC,QAAO,OAAO,cAAc;AACnC,cAAI,UAAUA,IAAG,MAAM,QAAW;AAC9B,sBAAUA,IAAG,IAAI,OAAO,aAAaA,IAAG;AAAA,UAChE;AAAA,QACA;AAAA,MACA;AACY,gBAAU,OAAO,UAAU,QAAQ,KAAK,QAAS;AACjD,UAAI,UAAU,aAAa,CAAC,UAAU,SAAS;AAC3C,gBAAQ,KAAK,iCAAiC,KAAK,QAAO,CAAE;AAAA,MAC5E;AAEY,UAAI,UAAU,SAAS;AACnB,YAAI,CAAC,UAAU,OAAO;AAClB,oBAAU,SACL,OAAO,SAAS,KAAK,UAAU,KAAK,UAAU,eAAe;AAAA,QACtF;AACgB,YAAI,UAAU,YAAY,UACtB,CAAC,UAAU,UACX,CAAC,UAAU,UAAU;AACrB,oBAAU,UACL,OAAO,UAAU,KAAK,UAAU,KAAK,UAAU,gBAAgB;AAAA,QACxF,WACyB,UAAU,aAAa,GAAG;AAC/B,oBAAU,SAAU,UAAU,UAC1B,UAAU,cACV,UAAU;AAAA,QAClC;AAAA,MACA;AACY,UAAI,KAAK,UAAU;AACf,cAAM,SAAS,uBAAuB,MAAM,KAAK,QAAQ;AAAA,MACzE;AACY,UAAI,eAAe,MAAM,KAAK;AAC9B,WAAK,MAAMQ,WAAS,eAAe,KAAK;AACxC,UAAI,OAAO,kBAAkB;AACzB,YAAI,CAAC,MAAM,SAAS,CAAC,MAAM,QAAQ;AAC/B,eAAK,cAAe;AAAA,QACxC;AAAA,MACA;AAAA,IACA,OACa;AAED,UAAI,CAAC,MAAM,SAAS;AAEhB,YAAI,MAAM,MAAM,KAAK,GAAG;AACpB,gBAAM,SAAS,OAAO,SAAS,KAAK,MAAM;AAC1C,eAAK,aAAa;AAAA,QACtC;AACgB,YAAI,MAAM,MAAM,MAAM,GAAG;AACrB,gBAAM,UAAU,OAAO,UAAU,KAAK,MAAM;AAC5C,eAAK,cAAc;AAAA,QACvC;AACgB,YAAI,MAAM,OAAO,CAAC,MAAM,OAAO;AAC3B,gBAAM,QAAQ;AAAA,QAClC;AACgB,YAAI,CAAC,MAAM,SAAS,CAAC,MAAM,KAAK;AAG5B,gBAAM,QAAQ;AAAA,QAClC;AAAA,MACA;AACY,UAAI,KAAK,UAAU;AACf,cAAM,SAAS,uBAAuB,MAAM,KAAK,QAAQ;AAAA,MACzE;AACY,UAAI,eAAe,MAAM,KAAK;AAC9B,WAAK,MAAMA,WAAS,WAAW,KAAK;AAAA,IAChD;AACQ,SAAK,WAAW;AAChB,QAAI,OAAO;AAEP,WAAK,iBAAiB;AAAA,IAClC;AACQ,QAAI,KAAK,YAAY,OAAO,eAAc,GAAI;AAC1C,WAAK,cAAe;AAAA,IAChC;AACQ,WAAO,KAAK,QAAQ,KAAK,KAAK,SAAS,KAAK,MAAM,IAAI;AACtD,QAAI,KAAK,SAAS;AACd,iBAAW,CAAC,MAAM,OAAO,KAAK,OAAO,QAAQ,KAAK,OAAO,GAAG;AACxD,aAAK,IAAI,GAAG,MAAM,CAAC,QAAQ,SAAS,QAAQ,KAAK,MAAM,MAAM,IAAI,CAAC;AAAA,MAClF;AAAA,IACA;AAGQ,SAAIL,MAAA,KAAK,QAAL,gBAAAA,IAAU,KAAK;AAEf,WAAK,IAAI,IAAI,UAAU;AAAA,IACnC;AACQ,QAAI,KAAK,UAAU,SAAS,SAAS;AAEjC,YAAM,cAAc,KAAK,SAAS;AAClC,eAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AAClC,cAAM,IAAI,KAAK,SAAS,CAAC;AACzB,qBAAa,GAAG,oBAAoB;AACpC,YAAI,cAAc,CAAC,GAAG;AAClB,YAAE,OAAQ;AAAA,QAC9B,WACyB,WAAW,CAAC,GAAG;AAGpB,kBAAQ,KAAK,gCAAgC,CAAC;AAAA,QAClE;AAAA,MACA;AAAA,IACA;AACQ,QAAI,SAAS;AAET,gBAAW;AAAA,IACvB;AACQ,SAAK,cAAc,KAAK,SAAU;AAAA,EAC1C;AACA;AACA,WAAWH,QAAO,8BAA8B;AAC5C,SAAO,eAAe,YAAY,WAAWA,MAAK;AAAA,IAC9C,MAAM;AACF,aAAO,KAAK,IAAIA,IAAG;AAAA,IACtB;AAAA,IACD,IAAI,GAAG;AACH,WAAK,2BAA2BA,MAAK,CAAC;AAAA,IACzC;AAAA,EACT,CAAK;AACL;AACA,WAAWA,QAAO,oCAAoC;AAClD,SAAO,eAAe,YAAY,WAAWA,MAAK;AAAA,IAC9C,MAAM;AACF,aAAO,KAAK,IAAIA,IAAG;AAAA,IACtB;AAAA,IACD,IAAI,GAAG;AACH,WAAK,IAAIA,IAAG,IAAI;AAAA,IACnB;AAAA,EACT,CAAK;AACL;AAEA,SAAS,qBAAqBA,MAAK;AAC/B,SAAO;AAAA,IACH,IAAI,OAAO;AACP,WAAK,UAAU,KAAK,UACd;AAAA,QACE,GAAG,KAAK;AAAA,QACR,CAACA,IAAG,GAAG;AAAA,MAC3B,IACkB,EAAE,CAACA,IAAG,GAAG,MAAO;AAAA,IACzB;AAAA,IACD,MAAM;;AACF,cAAOG,MAAA,KAAK,YAAL,gBAAAA,IAAeH;AAAA,IACzB;AAAA,EACJ;AACL;AACA,IAAI,OAAO;AACP,cAAY,UAAU,UAAU,WAAY;AACxC,WAAO,cAAc,IAAI;AAAA,EAC5B;AACL;AACA,OAAO,iBAAiB,YAAY,WAAW;AAAA,EAC3C,QAAQ,eAAgB;AAAA,EACxB,YAAY,eAAe,MAAM;AAAA,EACjC,aAAa,eAAe,OAAO;AAAA,EACnC,WAAW,eAAe,KAAK;AAAA,EAC/B,cAAc,eAAe,QAAQ;AAAA,EACrC,gBAAgB,qBAAqB,gBAAgB;AAAA,EACrD,gBAAgB,qBAAqB,gBAAgB;AAAA,EACrD,gBAAgB,qBAAqB,wBAAwB;AAAA,EAC7D,cAAc;AAAA,IACV,IAAI,QAAQ;AACR,WAAK,UAAU,KAAK,UACd;AAAA,QACE,GAAG,KAAK;AAAA,QACR,QAAQ,EAAE,OAAQ;AAAA,MACtC,IACkB,EAAE,QAAQ,EAAE,SAAU;AAAA,IAC/B;AAAA,IACD,MAAM;;AACF,cAAOI,OAAAD,MAAA,KAAK,YAAL,gBAAAA,IAAc,WAAd,gBAAAC,IAAsB;AAAA,IAChC;AAAA,EACJ;AACL,CAAC;AC3lBD,MAAM,eAAe;AAAA,EACnB,SAAS;AAAA,EACT,UAAU;AAAA,EACV,SAAS;AAAA,EACT,MAAM;AAAA,EACN,eAAe;AACb,WAAO,aAAa,KAAK,QAAQ,KAAK;AAAA,EACvC;AAAA,EACD,mBAAmB;AACjB,WAAO,aAAa,KAAK,QAAQ,OAAO;AAAA,EAC5C;AACA;AACA,SAAS,aAAaiB,QAAO;AAC3B,QAAM,MAAM,OAAOA,MAAK,GACtB,MAAM,IAAI,SAAS;AACrB,SAAO,aAAa,QAAQ,MAAM,MAAM,OAAO,aAAa,KAAK,GAAG,IAAI,MAAM;AAChF;AACA,SAAS,kBAAkB,SAAS;AAClC,eAAa,UAAU;AACzB;AASA,MAAM,UAAU,CAAC,GAAG,MAAM,MAAM;AAChC,MAAM,SAAS,OAAO,aAAa;AACnC,MAAM,iBAAiB,OAAO,UAAU;AACxC,MAAM,SAAS,OAAO,aAAa;AACnC,MAAM,WAAW,OAAO,qBAAqB;AAC7C,MAAM,gBAAgB;AAAA,EACpB,QAAQ;AACV;AAEA,IAAI,aAAa;AACjB,MAAM,QAAQ;AACd,MAAM,UAAU;AAChB,MAAM,UAAU;AAAA,EACd,OAAO;AAAA,EACP,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AACT;AACA,MAAM,UAAU,CAAE;AAClB,IAAI,QAAQ;AACZ,IAAI,aAAa;AAEjB,IAAI,uBAAuB;AAC3B,IAAI,WAAW;AACf,IAAI,UAAU;AACd,IAAI,UAAU;AACd,IAAI,YAAY;AAMhB,SAAS,WAAW,IAAI,eAAe;AACrC,QAAM,WAAW,UACf,QAAQ,OACR,UAAU,GAAG,WAAW,GACxB,UAAwC,OACxC,OAAO,UACH;AAAA,IACE,OAAO;AAAA,IACP,UAAU;AAAA,IACV,SAAS;AAAA,IACT,OAAO;AAAA,EACjB,IACQ;AAAA,IACE,OAAO;AAAA,IACP,UAAU;AAAA,IACV,SAAS,UAAU,QAAQ,UAAU;AAAA,IACrC,OAAO;AAAA,EACR,GACL,WAAW,UACP,MACE,GAAG,MAAM;AACP,UAAM,IAAI,MAAM,oEAAoE;AAAA,EACrF,KACH,MAAM,GAAG,MAAM,QAAQ,MAAM,UAAU,IAAI,CAAC,CAAC;AAEnD,UAAQ;AACR,aAAW;AACX,MAAI;AACF,WAAO,WAAW,UAAU,IAAI;AAAA,EACpC,UAAY;AACR,eAAW;AACX,YAAQ;AAAA,EACZ;AACA;AACA,SAAS,aAAa,OAAO,SAAS;AACpC,YAAU,UAAU,OAAO,OAAO,IAAI,eAAe,OAAO,IAAI;AAChE,QAAM,IAAI;AAAA,IACR;AAAA,IACA,WAAW;AAAA,IACX,eAAe;AAAA,IACf,YAAY,QAAQ,UAAU;AAAA,EAC/B;AACD;AACE,QAAI,QAAQ,KAAM,GAAE,OAAO,QAAQ;AAEnC,QAAI,CAAC,QAAQ,SAAU,eAAc,CAAC;AAAA,EAC1C;AACE,QAAM,SAAS,CAAAc,WAAS;AACtB,QAAI,OAAOA,WAAU,YAAY;AAE1B,MAAAA,SAAQA,OAAM,EAAE,KAAK;AAAA,IAChC;AACI,WAAO,YAAY,GAAGA,MAAK;AAAA,EAC5B;AACD,SAAO,CAAC,WAAW,KAAK,CAAC,GAAG,MAAM;AACpC;AACA,SAAS,eAAe,IAAI,OAAO,SAAS;AAC1C,QAAM,IAAI,kBAAkB,IAAI,OAAO,MAAM,OAAO,OAAO;AAEtD,oBAAkB,CAAC;AAC1B;AACA,SAAS,mBAAmB,IAAI,OAAO,SAAS;AAC9C,QAAM,IAAI,kBAAkB,IAAI,OAAO,OAAO,OAAO,OAAO;AAEvD,oBAAkB,CAAC;AAC1B;AACA,SAAS,aAAa,IAAI,OAAO,SAAS;AACxC,eAAa;AACR,QAAC,IAAI,kBAAkB,IAAI,OAAO,OAAO,OAAO,OAAO;AAG3B,IAAE,OAAO;AAC1C,YAAU,QAAQ,KAAK,CAAC,IAAI,kBAAkB,CAAC;AACjD;AAqBA,SAAS,WAAW,IAAI,OAAO,SAAS;AACtC,YAAU,UAAU,OAAO,OAAO,IAAI,eAAe,OAAO,IAAI;AAChE,QAAM,IAAI,kBAAkB,IAAI,OAAO,MAAM,GAAG,OAAO;AACvD,IAAE,YAAY;AACd,IAAE,gBAAgB;AAClB,IAAE,aAAa,QAAQ,UAAU;AAI1B,oBAAkB,CAAC;AAC1B,SAAO,WAAW,KAAK,CAAC;AAC1B;AACA,SAAS,UAAU,GAAG;AACpB,SAAO,KAAK,OAAO,MAAM,YAAY,UAAU;AACjD;AACA,SAAS,eAAe,SAAS,UAAU,UAAU;AACnD,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAK,UAAU,WAAW,KAAK,OAAO,aAAa,YAAa,UAAU,WAAW,GAAG;AACtF,aAAS;AACT,cAAU;AACV,cAAU,YAAY,CAAE;AAAA,EAC5B,OAAS;AACL,aAAS;AACT,cAAU;AACV,cAAsB,CAAE;AAAA,EAC5B;AACK,MAAC,KAAK,MACP,QAAQ,SACR,KAAK,MAEL,YAAY,OACZ,WAAW,kBAAkB,SAC7B,UAAU,OAAO,WAAW,cAAc,WAAW,MAAM;AAC7D,QAAM,WAAW,oBAAI,IAAK,GACxB,CAAC,OAAO,QAAQ,KAAK,QAAQ,WAAW,cAAc,QAAQ,YAAY,GAC1E,CAAC,OAAO,QAAQ,IAAI,aAAa,MAAS,GAC1C,CAAC,OAAO,OAAO,IAAI,aAAa,QAAW;AAAA,IACzC,QAAQ;AAAA,EACd,CAAK,GACD,CAAC,OAAO,QAAQ,IAAI,aAAa,WAAW,UAAU,YAAY;AACpE,MAAI,aAAa,SAAS;AACxB,SAAK,aAAa,iBAAkB;AACpC,QAAI,QAAQ,gBAAgB,UAAW,SAAQ,QAAQ;AAAA,aAC9C,aAAa,QAAQ,aAAa,IAAI,EAAE,EAAG,SAAQ,aAAa,KAAK,EAAE;AAAA,EACpF;AACE,WAAS,QAAQ,GAAG,GAAGC,QAAOpC,MAAK;AACjC,QAAI,OAAO,GAAG;AACZ,WAAK;AACL,MAAAA,SAAQ,WAAc,WAAW;AACjC,WAAK,MAAM,SAAS,MAAM,UAAU,QAAQ;AAC1C;AAAA,UAAe,MACb,QAAQ,WAAWA,MAAK;AAAA,YACtB,OAAO;AAAA,UACR;AAAA,QACF;AACH,cAAQ;AAQD,mBAAa,GAAGoC,MAAK;AAAA,IAClC;AACI,WAAO;AAAA,EACX;AACE,WAAS,aAAa,GAAG,KAAK;AAC5B,eAAW,MAAM;AACf,UAAI,QAAQ,OAAW,UAAS,MAAM,CAAC;AACvC,eAAS,QAAQ,SAAY,YAAY,WAAW,UAAU,YAAY;AAC1E,eAAS,GAAG;AACZ,iBAAW,KAAK,SAAS,KAAI,EAAI,GAAE,UAAW;AAC9C,eAAS,MAAO;AAAA,IACjB,GAAE,KAAK;AAAA,EACZ;AACE,WAAS,OAAO;AACd,UAAM,IAAI,iBACR,IAAI,MAAO,GACX,MAAM,MAAO;AACf,QAAI,QAAQ,UAAa,CAAC,GAAI,OAAM;AACpC,QAAI,YAAY,CAAC,SAAS,QAAQ,GAAG;AACnC,qBAAe,MAAM;AACnB,cAAO;AACP,YAAI,IAAI;AACN,cAAI,EAAE,SAAiD;AAAA,mBAC9C,CAAC,SAAS,IAAI,CAAC,GAAG;AACzB,cAAE,UAAW;AACb,qBAAS,IAAI,CAAC;AAAA,UAC1B;AAAA,QACA;AAAA,MACA,CAAO;AAAA,IACP;AACI,WAAO;AAAA,EACX;AACE,WAAS,KAAK,aAAa,MAAM;AAC/B,QAAI,eAAe,SAAS,UAAW;AACvC,gBAAY;AACZ,UAAM,SAAS,UAAU,QAAO,IAAK;AAErC,QAAI,UAAU,QAAQ,WAAW,OAAO;AACtC,cAAQ,IAAI,QAAQ,KAAK,CAAC;AAC1B;AAAA,IACN;AAEI,UAAM,IACJ,UAAU,UACN,QACA;AAAA,MAAQ,MACN,QAAQ,QAAQ;AAAA,QACd,OAAO,MAAO;AAAA,QACd;AAAA,MACD;AAAA,IACF;AACP,QAAI,CAAC,UAAU,CAAC,GAAG;AACjB,cAAQ,IAAI,GAAG,QAAW,MAAM;AAChC,aAAO;AAAA,IACb;AACI,SAAK;AACL,QAAI,WAAW,GAAG;AAChB,UAAI,EAAE,WAAW,UAAW,SAAQ,IAAI,EAAE,OAAO,QAAW,MAAM;AAAA,UAC7D,SAAQ,IAAI,QAAW,UAAU,EAAE,KAAK,GAAG,MAAM;AACtD,aAAO;AAAA,IACb;AACI,gBAAY;AACZ,mBAAe,MAAO,YAAY,KAAM;AACxC,eAAW,MAAM;AACf,eAAS,WAAW,eAAe,SAAS;AAC5C,cAAS;AAAA,IACV,GAAE,KAAK;AACR,WAAO,EAAE;AAAA,MACP,OAAK,QAAQ,GAAG,GAAG,QAAW,MAAM;AAAA,MACpC,OAAK,QAAQ,GAAG,QAAW,UAAU,CAAC,GAAG,MAAM;AAAA,IAChD;AAAA,EACL;AACE,SAAO,iBAAiB,MAAM;AAAA,IAC5B,OAAO;AAAA,MACL,KAAK,MAAM,MAAK;AAAA,IACjB;AAAA,IACD,OAAO;AAAA,MACL,KAAK,MAAM,MAAK;AAAA,IACjB;AAAA,IACD,SAAS;AAAA,MACP,MAAM;AACJ,cAAM,IAAI,MAAO;AACjB,eAAO,MAAM,aAAa,MAAM;AAAA,MACxC;AAAA,IACK;AAAA,IACD,QAAQ;AAAA,MACN,MAAM;AACJ,YAAI,CAAC,SAAU,QAAO,KAAM;AAC5B,cAAM,MAAM,MAAO;AACnB,YAAI,OAAO,CAAC,GAAI,OAAM;AACtB,eAAO,MAAO;AAAA,MACtB;AAAA,IACA;AAAA,EACA,CAAG;AACD,MAAI,QAAS,gBAAe,MAAM,KAAK,KAAK,CAAC;AAAA,MACxC,MAAK,KAAK;AACf,SAAO;AAAA,IACL;AAAA,IACA;AAAA,MACE,SAAS;AAAA,MACT,QAAQ;AAAA,IACd;AAAA,EACG;AACH;AAoEA,SAAS,MAAM,IAAI;AACjB,SAAO,WAAW,IAAI,KAAK;AAC7B;AACA,SAAS,QAAQ,IAAI;AACnB,MAA6B,aAAa,KAAM,QAAO,GAAI;AAC3D,QAAM,WAAW;AACjB,aAAW;AACX,MAAI;AACF,QAAI,qBAAsB;AAC1B,WAAO,GAAI;AAAA,EACf,UAAY;AACR,eAAW;AAAA,EACf;AACA;AACA,SAAS,GAAG,MAAM,IAAI,SAAS;AAC7B,QAAMvB,WAAU,MAAM,QAAQ,IAAI;AAClC,MAAI;AACJ,MAAI,QAAQ,WAAW,QAAQ;AAC/B,SAAO,eAAa;AAClB,QAAI;AACJ,QAAIA,UAAS;AACX,cAAQ,MAAM,KAAK,MAAM;AACzB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,IAAK,OAAM,CAAC,IAAI,KAAK,CAAC,EAAG;AAAA,IAChE,MAAW,SAAQ,KAAM;AACrB,QAAI,OAAO;AACT,cAAQ;AACR,aAAO;AAAA,IACb;AACI,UAAM,SAAS,QAAQ,MAAM,GAAG,OAAO,WAAW,SAAS,CAAC;AAC5D,gBAAY;AACZ,WAAO;AAAA,EACR;AACH;AACA,SAAS,QAAQ,IAAI;AACnB,eAAa,MAAM,QAAQ,EAAE,CAAC;AAChC;AACA,SAAS,UAAU,IAAI;AACrB,MAAI,UAAU;AACZ,YAAQ,KAAK,uEAAuE;AAAA,WAC7E,MAAM,aAAa,KAAM,OAAM,WAAW,CAAC,EAAE;AAAA,MACjD,OAAM,SAAS,KAAK,EAAE;AAC3B,SAAO;AACT;AAoBA,SAAS,WAAW;AAClB,SAAO;AACT;AACA,SAAS,aAAa,GAAG,IAAI;AAC3B,QAAM,OAAO;AACb,QAAM,eAAe;AACrB,UAAQ;AACR,aAAW;AACX,MAAI;AACF,WAAO,WAAW,IAAI,IAAI;AAAA,EAC3B,SAAQ,KAAK;AACZ,gBAAY,GAAG;AAAA,EACnB,UAAY;AACR,YAAQ;AACR,eAAW;AAAA,EACf;AACA;AAIA,SAAS,gBAAgB,IAAI;AAK3B,QAAM,IAAI;AACV,QAAM,IAAI;AACV,SAAO,QAAQ,UAAU,KAAK,MAAM;AAClC,eAAW;AACX,YAAQ;AACR,QAAI;AAeJ,eAAW,IAAI,KAAK;AACpB,eAAW,QAAQ;AACnB,WAAO,IAAI,EAAE,OAAO;AAAA,EACxB,CAAG;AACH;AASA,SAAS,aAAa,MAAM,OAAO;AACjC,QAAM,IAAI;AAAA,IACR,MACE,QAAQ,MAAM;AACZ,aAAO,OAAO,MAAM;AAAA,QAClB,CAAC,QAAQ,GAAG;AAAA,MACtB,CAAS;AACD,aAAO,KAAK,KAAK;AAAA,IACzB,CAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD,IAAE,QAAQ;AACV,IAAE,YAAY;AACd,IAAE,gBAAgB;AAClB,IAAE,OAAO,KAAK;AACd,IAAE,YAAY;AACd,oBAAkB,CAAC;AACnB,SAAO,EAAE,WAAW,SAAY,EAAE,SAAS,EAAE;AAC/C;AACA,SAAS,cAAc,OAAO;AAC5B,MAAI,CAAC,MAAO;AACZ,MAAI,MAAM,UAAW,OAAM,UAAU,KAAK,KAAK;AAAA,MAC1C,OAAM,YAAY,CAAC,KAAK;AAC7B,QAAM,QAAQ;AAChB;AACA,SAAS,cAAc,cAAc,SAAS;AAC5C,QAAM,KAAK,OAAO,SAAS;AAC3B,SAAO;AAAA,IACL;AAAA,IACA,UAAU,eAAe,IAAI,OAAO;AAAA,IACpC;AAAA,EACD;AACH;AACA,SAAS,WAAW,SAAS;AAC3B,MAAI;AACJ,SAAO,SAAS,MAAM,YAAY,QAAQ,MAAM,QAAQ,QAAQ,EAAE,OAAO,SACrE,QACA,QAAQ;AACd;AACA,SAAS,SAAS,IAAI;AACpB,QAAMc,YAAW,WAAW,EAAE;AAC9B,QAAMU,QAAO,WAAW,MAAM,gBAAgBV,UAAQ,CAAE,GAAG,QAAW;AAAA,IACpE,MAAM;AAAA,EACV,CAAG;AACD,EAAAU,MAAK,UAAU,MAAM;AACnB,UAAM,IAAIA,MAAM;AAChB,WAAO,MAAM,QAAQ,CAAC,IAAI,IAAI,KAAK,OAAO,CAAC,CAAC,IAAI,CAAE;AAAA,EACnD;AACD,SAAOA;AACT;AACA,IAAI;AA4BJ,SAAS,aAAa;AAEpB,MAAI,KAAK,WAA8C,KAAK,OAAQ;AAClE,QAAuC,KAAK,UAAW,MAAO,mBAAkB,IAAI;AAAA,SAC/E;AACH,YAAM,UAAU;AAChB,gBAAU;AACV,iBAAW,MAAM,aAAa,IAAI,GAAG,KAAK;AAC1C,gBAAU;AAAA,IAChB;AAAA,EACA;AACE,MAAI,UAAU;AACZ,UAAM,QAAQ,KAAK,YAAY,KAAK,UAAU,SAAS;AACvD,QAAI,CAAC,SAAS,SAAS;AACrB,eAAS,UAAU,CAAC,IAAI;AACxB,eAAS,cAAc,CAAC,KAAK;AAAA,IACnC,OAAW;AACL,eAAS,QAAQ,KAAK,IAAI;AAC1B,eAAS,YAAY,KAAK,KAAK;AAAA,IACrC;AACI,QAAI,CAAC,KAAK,WAAW;AACnB,WAAK,YAAY,CAAC,QAAQ;AAC1B,WAAK,gBAAgB,CAAC,SAAS,QAAQ,SAAS,CAAC;AAAA,IACvD,OAAW;AACL,WAAK,UAAU,KAAK,QAAQ;AAC5B,WAAK,cAAc,KAAK,SAAS,QAAQ,SAAS,CAAC;AAAA,IACzD;AAAA,EACA;AAEE,SAAO,KAAK;AACd;AACA,SAAS,YAAY,MAAM,OAAO,QAAQ;AACxC,MAAI,UAC+E,KAAK;AACxF,MAAI,CAAC,KAAK,cAAc,CAAC,KAAK,WAAW,SAAS,KAAK,GAAG;AAQjD,SAAK,QAAQ;AACpB,QAAI,KAAK,aAAa,KAAK,UAAU,QAAQ;AAC3C,iBAAW,MAAM;AACf,iBAAS,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAK,GAAG;AACjD,gBAAM,IAAI,KAAK,UAAU,CAAC;AAC1B,gBAAM,oBAAoB,cAAc,WAAW;AACnD,cAAI,qBAAqB,WAAW,SAAS,IAAI,CAAC,EAAG;AACrD,cAAI,oBAAoB,CAAC,EAAE,SAAS,CAAC,EAAE,OAAO;AAC5C,gBAAI,EAAE,KAAM,SAAQ,KAAK,CAAC;AAAA,gBACrB,SAAQ,KAAK,CAAC;AACnB,gBAAI,EAAE,UAAW,gBAAe,CAAC;AAAA,UAC7C;AACU,cAAI,CAAC,kBAAmB,GAAE,QAAQ;AAAA,QAE5C;AACQ,YAAI,QAAQ,SAAS,KAAM;AACzB,oBAAU,CAAE;AACZ,cAAI,KAAM,OAAM,IAAI,MAAM,mCAAmC;AAC7D,gBAAM,IAAI,MAAO;AAAA,QAC3B;AAAA,MACO,GAAE,KAAK;AAAA,IACd;AAAA,EACA;AACE,SAAO;AACT;AACA,SAAS,kBAAkB,MAAM;AAC/B,MAAI,CAAC,KAAK,GAAI;AACd,YAAU,IAAI;AACd,QAAM,OAAO;AACb;AAAA,IACE;AAAA,IACiF,KAAK;AAAA,IACtF;AAAA,EACD;AAWH;AACA,SAAS,eAAe,MAAM,OAAO,MAAM;AACzC,MAAI;AACJ,QAAM,QAAQ,OACZ,WAAW;AACb,aAAW,QAAQ;AACnB,MAAI;AACF,gBAAY,KAAK,GAAG,KAAK;AAAA,EAC1B,SAAQ,KAAK;AACZ,QAAI,KAAK,MAAM;AAKN;AACL,aAAK,QAAQ;AACb,aAAK,SAAS,KAAK,MAAM,QAAQ,SAAS;AAC1C,aAAK,QAAQ;AAAA,MACrB;AAAA,IACA;AACI,SAAK,YAAY,OAAO;AACxB,WAAO,YAAY,GAAG;AAAA,EAC1B,UAAY;AACR,eAAW;AACX,YAAQ;AAAA,EACZ;AACE,MAAI,CAAC,KAAK,aAAa,KAAK,aAAa,MAAM;AAC7C,QAAI,KAAK,aAAa,QAAQ,eAAe,MAAM;AACjD,kBAAY,MAAM,SAAe;AAAA,IACvC,MAGW,MAAK,QAAQ;AACpB,SAAK,YAAY;AAAA,EACrB;AACA;AACA,SAAS,kBAAkB,IAAI,MAAM,MAAM,QAAQ,OAAO,SAAS;AACjE,QAAM,IAAI;AAAA,IACR;AAAA,IACA;AAAA,IACA,WAAW;AAAA,IACX,OAAO;AAAA,IACP,SAAS;AAAA,IACT,aAAa;AAAA,IACb,UAAU;AAAA,IACV,OAAO;AAAA,IACP,OAAO;AAAA,IACP,SAAS,QAAQ,MAAM,UAAU;AAAA,IACjC;AAAA,EACD;AAKD,MAAI,UAAU;AACZ,YAAQ,KAAK,gFAAgF;AAAA,WACtF,UAAU,SAAS;AAInB;AACL,UAAI,CAAC,MAAM,MAAO,OAAM,QAAQ,CAAC,CAAC;AAAA,UAC7B,OAAM,MAAM,KAAK,CAAC;AAAA,IAC7B;AAAA,EACA;AACE,MAAI,WAAW,QAAQ,KAAM,GAAE,OAAO,QAAQ;AAe9C,SAAO;AACT;AACA,SAAS,OAAO,MAAM;AAEpB,MAAuC,KAAK,UAAW,EAAG;AAC1D,MAAuC,KAAK,UAAW,QAAS,QAAO,aAAa,IAAI;AACxF,MAAI,KAAK,YAAY,QAAQ,KAAK,SAAS,UAAU,EAAG,QAAO,KAAK,SAAS,QAAQ,KAAK,IAAI;AAC9F,QAAM,YAAY,CAAC,IAAI;AACvB,UAAQ,OAAO,KAAK,WAAW,CAAC,KAAK,aAAa,KAAK,YAAY,YAAY;AAE7E,QAAsC,KAAK,MAAO,WAAU,KAAK,IAAI;AAAA,EACzE;AACE,WAAS,IAAI,UAAU,SAAS,GAAG,KAAK,GAAG,KAAK;AAC9C,WAAO,UAAU,CAAC;AAQlB,QAAuC,KAAK,UAAW,OAAO;AAC5D,wBAAkB,IAAI;AAAA,IACvB,WAA6C,KAAK,UAAW,SAAS;AACrE,YAAM,UAAU;AAChB,gBAAU;AACV,iBAAW,MAAM,aAAa,MAAM,UAAU,CAAC,CAAC,GAAG,KAAK;AACxD,gBAAU;AAAA,IAChB;AAAA,EACA;AACA;AACA,SAAS,WAAW,IAAI,MAAM;AAC5B,MAAI,QAAS,QAAO,GAAI;AACxB,MAAI,OAAO;AACX,MAAI,CAAC,KAAM,WAAU,CAAE;AACvB,MAAI,QAAS,QAAO;AAAA,MACf,WAAU,CAAE;AACjB;AACA,MAAI;AACF,UAAM,MAAM,GAAI;AAChB,oBAAgB,IAAI;AACpB,WAAO;AAAA,EACR,SAAQ,KAAK;AACZ,QAAI,CAAC,KAAM,WAAU;AACrB,cAAU;AACV,gBAAY,GAAG;AAAA,EACnB;AACA;AACA,SAAS,gBAAgB,MAAM;AAC7B,MAAI,SAAS;AAEN,aAAS,OAAO;AACrB,cAAU;AAAA,EACd;AACE,MAAI,KAAM;AAmCV,QAAM,IAAI;AACV,YAAU;AACV,MAAI,EAAE,OAAQ,YAAW,MAAM,WAAW,CAAC,GAAG,KAAK;AAGrD;AACA,SAAS,SAAS,OAAO;AACvB,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAK,QAAO,MAAM,CAAC,CAAC;AACxD;AAkBA,SAAS,eAAe,OAAO;AAC7B,MAAI,GACF,aAAa;AACf,OAAK,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACjC,UAAM,IAAI,MAAM,CAAC;AACjB,QAAI,CAAC,EAAE,KAAM,QAAO,CAAC;AAAA,QAChB,OAAM,YAAY,IAAI;AAAA,EAC/B;AACE,MAAI,aAAa,SAAS;AACxB,QAAI,aAAa,OAAO;AACtB,mBAAa,YAAY,aAAa,UAAU;AAChD,mBAAa,QAAQ,KAAK,GAAG,MAAM,MAAM,GAAG,UAAU,CAAC;AACvD;AAAA,IACN;AACI,sBAAmB;AAAA,EACvB;AACE,MAAI,aAAa,YAAY,aAAa,QAAQ,CAAC,aAAa,QAAQ;AACtE,YAAQ,CAAC,GAAG,aAAa,SAAS,GAAG,KAAK;AAC1C,kBAAc,aAAa,QAAQ;AACnC,WAAO,aAAa;AAAA,EACxB;AACE,OAAK,IAAI,GAAG,IAAI,YAAY,IAAK,QAAO,MAAM,CAAC,CAAC;AAClD;AACA,SAAS,aAAa,MAAM,QAAQ;AAG7B,OAAK,QAAQ;AAClB,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK,GAAG;AAC/C,UAAM,SAAS,KAAK,QAAQ,CAAC;AAC7B,QAAI,OAAO,SAAS;AAClB,YAAM,QAA4C,OAAO;AACzD,UAAI,UAAU,OAAO;AACnB,YAAI,WAAW,WAAW,CAAC,OAAO,aAAa,OAAO,YAAY;AAChE,iBAAO,MAAM;AAAA,MAChB,WAAU,UAAU,QAAS,cAAa,QAAQ,MAAM;AAAA,IAC/D;AAAA,EACA;AACA;AACA,SAAS,eAAe,MAAM;AAE5B,WAAS,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAK,GAAG;AACjD,UAAM,IAAI,KAAK,UAAU,CAAC;AAC1B,QAAoC,CAAC,EAAE,OAAO;AAEvC,QAAE,QAAQ;AACf,UAAI,EAAE,KAAM,SAAQ,KAAK,CAAC;AAAA,UACrB,SAAQ,KAAK,CAAC;AACnB,QAAE,aAAa,eAAe,CAAC;AAAA,IACrC;AAAA,EACA;AACA;AACA,SAAS,UAAU,MAAM;AACvB,MAAI;AACJ,MAAI,KAAK,SAAS;AAChB,WAAO,KAAK,QAAQ,QAAQ;AAC1B,YAAM,SAAS,KAAK,QAAQ,IAAK,GAC/B,QAAQ,KAAK,YAAY,IAAK,GAC9B,MAAM,OAAO;AACf,UAAI,OAAO,IAAI,QAAQ;AACrB,cAAM,IAAI,IAAI,IAAK,GACjB,IAAI,OAAO,cAAc,IAAK;AAChC,YAAI,QAAQ,IAAI,QAAQ;AACtB,YAAE,YAAY,CAAC,IAAI;AACnB,cAAI,KAAK,IAAI;AACb,iBAAO,cAAc,KAAK,IAAI;AAAA,QACxC;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACE,MAAI,KAAK,QAAQ;AACf,SAAK,IAAI,KAAK,OAAO,SAAS,GAAG,KAAK,GAAG,IAAK,WAAU,KAAK,OAAO,CAAC,CAAC;AACtE,WAAO,KAAK;AAAA,EAChB;AAGS,MAAI,KAAK,OAAO;AACrB,SAAK,IAAI,KAAK,MAAM,SAAS,GAAG,KAAK,GAAG,IAAK,WAAU,KAAK,MAAM,CAAC,CAAC;AACpE,SAAK,QAAQ;AAAA,EACjB;AACE,MAAI,KAAK,UAAU;AACjB,SAAK,IAAI,KAAK,SAAS,SAAS,GAAG,KAAK,GAAG,IAAK,MAAK,SAAS,CAAC,EAAG;AAClE,SAAK,WAAW;AAAA,EACpB;AAEO,OAAK,QAAQ;AAClB,SAAO,KAAK;AACd;AAUA,SAAS,UAAU,KAAK;AACtB,MAAI,eAAe,MAAO,QAAO;AACjC,SAAO,IAAI,MAAM,OAAO,QAAQ,WAAW,MAAM,iBAAiB;AAAA,IAChE,OAAO;AAAA,EACX,CAAG;AACH;AAQA,SAAS,YAAY,KAAK,QAAQ,OAAO;AAEvC,QAAM,QAAQ,UAAU,GAAG;AACjB,QAAM;AASlB;AACA,SAAS,gBAAgBV,WAAU;AACjC,MAAI,OAAOA,cAAa,cAAc,CAACA,UAAS,OAAQ,QAAO,gBAAgBA,WAAU;AACzF,MAAI,MAAM,QAAQA,SAAQ,GAAG;AAC3B,UAAM,UAAU,CAAE;AAClB,aAAS,IAAI,GAAG,IAAIA,UAAS,QAAQ,KAAK;AACxC,YAAM,SAAS,gBAAgBA,UAAS,CAAC,CAAC;AAC1C,YAAM,QAAQ,MAAM,IAAI,QAAQ,KAAK,MAAM,SAAS,MAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,IACvF;AACI,WAAO;AAAA,EACX;AACE,SAAOA;AACT;AACA,SAAS,eAAe,IAAI,SAAS;AACnC,SAAO,SAAS,SAAS,OAAO;AAC9B,QAAI;AACJ;AAAA,MACE,MACG,MAAM,QAAQ,MAAM;AACnB,cAAM,UAAU;AAAA,UACd,GAAG,MAAM;AAAA,UACT,CAAC,EAAE,GAAG,MAAM;AAAA,QACb;AACD,eAAO,SAAS,MAAM,MAAM,QAAQ;AAAA,MAC9C,CAAS;AAAA,MACH;AAAA,MACA;AAAA,IACD;AACD,WAAO;AAAA,EACR;AACH;AA0EA,MAAM,WAAW,OAAO,UAAU;AAClC,SAAS,QAAQ,GAAG;AAClB,WAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,IAAK,GAAE,CAAC,EAAG;AAC3C;AACA,SAAS,SAAS,MAAM,OAAO,UAAU,IAAI;AAC3C,MAAI,QAAQ,CAAE,GACZ,SAAS,CAAE,GACX,YAAY,CAAE,GACd,MAAM,GACN,UAAU,MAAM,SAAS,IAAI,CAAE,IAAG;AACpC,YAAU,MAAM,QAAQ,SAAS,CAAC;AAClC,SAAO,MAAM;AACX,QAAI,WAAW,KAAI,KAAM,CAAE,GACzB,SAAS,SAAS,QAClB,GACA;AACF,aAAS,MAAM;AACf,WAAO,QAAQ,MAAM;AACnB,UAAI,YAAY,gBAAgB,MAAM,eAAe,aAAa,OAAO,KAAK,QAAQ;AACtF,UAAI,WAAW,GAAG;AAChB,YAAI,QAAQ,GAAG;AACb,kBAAQ,SAAS;AACjB,sBAAY,CAAE;AACd,kBAAQ,CAAE;AACV,mBAAS,CAAE;AACX,gBAAM;AACN,sBAAY,UAAU;QAChC;AACQ,YAAI,QAAQ,UAAU;AACpB,kBAAQ,CAAC,QAAQ;AACjB,iBAAO,CAAC,IAAI,WAAW,cAAY;AACjC,sBAAU,CAAC,IAAI;AACf,mBAAO,QAAQ,SAAU;AAAA,UACrC,CAAW;AACD,gBAAM;AAAA,QAChB;AAAA,MACA,WAAiB,QAAQ,GAAG;AACpB,iBAAS,IAAI,MAAM,MAAM;AACzB,aAAK,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC3B,gBAAM,CAAC,IAAI,SAAS,CAAC;AACrB,iBAAO,CAAC,IAAI,WAAW,MAAM;AAAA,QACvC;AACQ,cAAM;AAAA,MACd,OAAa;AACL,eAAO,IAAI,MAAM,MAAM;AACvB,wBAAgB,IAAI,MAAM,MAAM;AAChC,oBAAY,cAAc,IAAI,MAAM,MAAM;AAC1C,aACE,QAAQ,GAAG,MAAM,KAAK,IAAI,KAAK,MAAM,GACrC,QAAQ,OAAO,MAAM,KAAK,MAAM,SAAS,KAAK,GAC9C,QACD;AACD,aACE,MAAM,MAAM,GAAG,SAAS,SAAS,GACjC,OAAO,SAAS,UAAU,SAAS,MAAM,GAAG,MAAM,SAAS,MAAM,GACjE,OAAO,UACP;AACA,eAAK,MAAM,IAAI,OAAO,GAAG;AACzB,wBAAc,MAAM,IAAI,UAAU,GAAG;AACrC,sBAAY,YAAY,MAAM,IAAI,QAAQ,GAAG;AAAA,QACvD;AACQ,qBAAa,oBAAI,IAAK;AACtB,yBAAiB,IAAI,MAAM,SAAS,CAAC;AACrC,aAAK,IAAI,QAAQ,KAAK,OAAO,KAAK;AAChC,iBAAO,SAAS,CAAC;AACjB,cAAI,WAAW,IAAI,IAAI;AACvB,yBAAe,CAAC,IAAI,MAAM,SAAY,KAAK;AAC3C,qBAAW,IAAI,MAAM,CAAC;AAAA,QAChC;AACQ,aAAK,IAAI,OAAO,KAAK,KAAK,KAAK;AAC7B,iBAAO,MAAM,CAAC;AACd,cAAI,WAAW,IAAI,IAAI;AACvB,cAAI,MAAM,UAAa,MAAM,IAAI;AAC/B,iBAAK,CAAC,IAAI,OAAO,CAAC;AAClB,0BAAc,CAAC,IAAI,UAAU,CAAC;AAC9B,wBAAY,YAAY,CAAC,IAAI,QAAQ,CAAC;AACtC,gBAAI,eAAe,CAAC;AACpB,uBAAW,IAAI,MAAM,CAAC;AAAA,UAClC,MAAiB,WAAU,CAAC,EAAG;AAAA,QAC/B;AACQ,aAAK,IAAI,OAAO,IAAI,QAAQ,KAAK;AAC/B,cAAI,KAAK,MAAM;AACb,mBAAO,CAAC,IAAI,KAAK,CAAC;AAClB,sBAAU,CAAC,IAAI,cAAc,CAAC;AAC9B,gBAAI,SAAS;AACX,sBAAQ,CAAC,IAAI,YAAY,CAAC;AAC1B,sBAAQ,CAAC,EAAE,CAAC;AAAA,YAC1B;AAAA,UACW,MAAM,QAAO,CAAC,IAAI,WAAW,MAAM;AAAA,QAC9C;AACQ,iBAAS,OAAO,MAAM,GAAI,MAAM,MAAQ;AACxC,gBAAQ,SAAS,MAAM,CAAC;AAAA,MAChC;AACM,aAAO;AAAA,IACb,CAAK;AACD,aAAS,OAAO,UAAU;AACxB,gBAAU,CAAC,IAAI;AACf,UAAI,SAAS;AACX,cAAM,CAAC,GAAG,GAAG,IAAI,aAAa,GAAG;AAAA,UAC/B,MAAM;AAAA,QAChB,CAAS;AACD,gBAAQ,CAAC,IAAI;AACb,eAAO,MAAM,SAAS,CAAC,GAAG,CAAC;AAAA,MACnC;AACM,aAAO,MAAM,SAAS,CAAC,CAAC;AAAA,IAC9B;AAAA,EACG;AACH;AACA,SAAS,WAAW,MAAM,OAAO,UAAU,IAAI;AAC7C,MAAI,QAAQ,CAAE,GACZ,SAAS,CAAE,GACX,YAAY,CAAE,GACd,UAAU,CAAE,GACZ,MAAM,GACN;AACF,YAAU,MAAM,QAAQ,SAAS,CAAC;AAClC,SAAO,MAAM;AACX,UAAM,WAAW,KAAI,KAAM,CAAE,GAC3B,SAAS,SAAS;AACpB,aAAS,MAAM;AACf,WAAO,QAAQ,MAAM;AACnB,UAAI,WAAW,GAAG;AAChB,YAAI,QAAQ,GAAG;AACb,kBAAQ,SAAS;AACjB,sBAAY,CAAE;AACd,kBAAQ,CAAE;AACV,mBAAS,CAAE;AACX,gBAAM;AACN,oBAAU,CAAE;AAAA,QACtB;AACQ,YAAI,QAAQ,UAAU;AACpB,kBAAQ,CAAC,QAAQ;AACjB,iBAAO,CAAC,IAAI,WAAW,cAAY;AACjC,sBAAU,CAAC,IAAI;AACf,mBAAO,QAAQ,SAAU;AAAA,UACrC,CAAW;AACD,gBAAM;AAAA,QAChB;AACQ,eAAO;AAAA,MACf;AACM,UAAI,MAAM,CAAC,MAAM,UAAU;AACzB,kBAAU,CAAC,EAAG;AACd,oBAAY,CAAE;AACd,gBAAQ,CAAE;AACV,iBAAS,CAAE;AACX,cAAM;AAAA,MACd;AACM,WAAK,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC3B,YAAI,IAAI,MAAM,UAAU,MAAM,CAAC,MAAM,SAAS,CAAC,GAAG;AAChD,kBAAQ,CAAC,EAAE,MAAM,SAAS,CAAC,CAAC;AAAA,QACtC,WAAmB,KAAK,MAAM,QAAQ;AAC5B,iBAAO,CAAC,IAAI,WAAW,MAAM;AAAA,QACvC;AAAA,MACA;AACM,aAAO,IAAI,MAAM,QAAQ,KAAK;AAC5B,kBAAU,CAAC,EAAG;AAAA,MACtB;AACM,YAAM,QAAQ,SAAS,UAAU,SAAS;AAC1C,cAAQ,SAAS,MAAM,CAAC;AACxB,aAAQ,SAAS,OAAO,MAAM,GAAG,GAAG;AAAA,IAC1C,CAAK;AACD,aAAS,OAAO,UAAU;AACxB,gBAAU,CAAC,IAAI;AACf,YAAM,CAAC,GAAG,GAAG,IAAI,aAAa,SAAS,CAAC,GAAG;AAAA,QACzC,MAAM;AAAA,MACd,CAAO;AACD,cAAQ,CAAC,IAAI;AACb,aAAO,MAAM,GAAG,CAAC;AAAA,IACvB;AAAA,EACG;AACH;AAMA,SAASW,kBAAgB,MAAM,OAAO;AAUpC,SAAO,aAAa,MAAM,SAAS,EAAE;AACvC;AACA,SAAS,SAAS;AAChB,SAAO;AACT;AACA,MAAM,YAAY;AAAA,EAChB,IAAI,GAAG,UAAU,UAAU;AACzB,QAAI,aAAa,OAAQ,QAAO;AAChC,WAAO,EAAE,IAAI,QAAQ;AAAA,EACtB;AAAA,EACD,IAAI,GAAG,UAAU;AACf,QAAI,aAAa,OAAQ,QAAO;AAChC,WAAO,EAAE,IAAI,QAAQ;AAAA,EACtB;AAAA,EACD,KAAK;AAAA,EACL,gBAAgB;AAAA,EAChB,yBAAyB,GAAG,UAAU;AACpC,WAAO;AAAA,MACL,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,MAAM;AACJ,eAAO,EAAE,IAAI,QAAQ;AAAA,MACtB;AAAA,MACD,KAAK;AAAA,MACL,gBAAgB;AAAA,IACjB;AAAA,EACF;AAAA,EACD,QAAQ,GAAG;AACT,WAAO,EAAE,KAAM;AAAA,EACnB;AACA;AACA,SAAS,cAAc,GAAG;AACxB,SAAO,EAAE,IAAI,OAAO,MAAM,aAAa,MAAM,KAAK,KAAK;AACzD;AACA,SAAS,iBAAiB;AACxB,WAAS,IAAI,GAAG,SAAS,KAAK,QAAQ,IAAI,QAAQ,EAAE,GAAG;AACrD,UAAM,IAAI,KAAK,CAAC,EAAG;AACnB,QAAI,MAAM,OAAW,QAAO;AAAA,EAChC;AACA;AACA,SAASC,gBAAc,SAAS;AAC9B,MAAI,QAAQ;AACZ,WAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,UAAM,IAAI,QAAQ,CAAC;AACnB,YAAQ,SAAU,CAAC,CAAC,KAAK,UAAU;AACnC,YAAQ,CAAC,IAAI,OAAO,MAAM,cAAe,QAAQ,MAAO,WAAW,CAAC,KAAK;AAAA,EAC7E;AACE,MAAI,kBAAkB,OAAO;AAC3B,WAAO,IAAI;AAAA,MACT;AAAA,QACE,IAAI,UAAU;AACZ,mBAAS,IAAI,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AAC5C,kBAAM,IAAI,cAAc,QAAQ,CAAC,CAAC,EAAE,QAAQ;AAC5C,gBAAI,MAAM,OAAW,QAAO;AAAA,UACxC;AAAA,QACS;AAAA,QACD,IAAI,UAAU;AACZ,mBAAS,IAAI,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AAC5C,gBAAI,YAAY,cAAc,QAAQ,CAAC,CAAC,EAAG,QAAO;AAAA,UAC9D;AACU,iBAAO;AAAA,QACR;AAAA,QACD,OAAO;AACL,gBAAM,OAAO,CAAE;AACf,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ;AAClC,iBAAK,KAAK,GAAG,OAAO,KAAK,cAAc,QAAQ,CAAC,CAAC,CAAC,CAAC;AACrD,iBAAO,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC;AAAA,QAClC;AAAA,MACO;AAAA,MACD;AAAA,IACD;AAAA,EACL;AACE,QAAM,aAAa,CAAE;AACrB,QAAM,UAAU,uBAAO,OAAO,IAAI;AAClC,WAAS,IAAI,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AAC5C,UAAM,SAAS,QAAQ,CAAC;AACxB,QAAI,CAAC,OAAQ;AACb,UAAM,aAAa,OAAO,oBAAoB,MAAM;AACpD,aAAShB,KAAI,WAAW,SAAS,GAAGA,MAAK,GAAGA,MAAK;AAC/C,YAAMvB,OAAM,WAAWuB,EAAC;AACxB,UAAIvB,SAAQ,eAAeA,SAAQ,cAAe;AAClD,YAAM,OAAO,OAAO,yBAAyB,QAAQA,IAAG;AACxD,UAAI,CAAC,QAAQA,IAAG,GAAG;AACjB,gBAAQA,IAAG,IAAI,KAAK,MAChB;AAAA,UACE,YAAY;AAAA,UACZ,cAAc;AAAA,UACd,KAAK,eAAe,KAAM,WAAWA,IAAG,IAAI,CAAC,KAAK,IAAI,KAAK,MAAM,CAAC,CAAC;AAAA,QACjF,IACY,KAAK,UAAU,SACf,OACA;AAAA,MACZ,OAAa;AACL,cAAMwC,WAAU,WAAWxC,IAAG;AAC9B,YAAIwC,UAAS;AACX,cAAI,KAAK,IAAK,CAAAA,SAAQ,KAAK,KAAK,IAAI,KAAK,MAAM,CAAC;AAAA,mBACvC,KAAK,UAAU,OAAW,CAAAA,SAAQ,KAAK,MAAM,KAAK,KAAK;AAAA,QAC1E;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACE,QAAM,SAAS,CAAE;AACjB,QAAM,cAAc,OAAO,KAAK,OAAO;AACvC,WAAS,IAAI,YAAY,SAAS,GAAG,KAAK,GAAG,KAAK;AAChD,UAAMxC,OAAM,YAAY,CAAC,GACvB,OAAO,QAAQA,IAAG;AACpB,QAAI,QAAQ,KAAK,IAAK,QAAO,eAAe,QAAQA,MAAK,IAAI;AAAA,QACxD,QAAOA,IAAG,IAAI,OAAO,KAAK,QAAQ;AAAA,EAC3C;AACE,SAAO;AACT;AACA,SAAS,WAAW,UAAU,MAAM;AAClC,MAAI,kBAAkB,UAAU,OAAO;AACrC,UAAM,UAAU,IAAI,IAAI,KAAK,SAAS,IAAI,KAAK,KAAI,IAAK,KAAK,CAAC,CAAC;AAC/D,UAAM,MAAM,KAAK,IAAI,OAAK;AACxB,aAAO,IAAI;AAAA,QACT;AAAA,UACE,IAAI,UAAU;AACZ,mBAAO,EAAE,SAAS,QAAQ,IAAI,MAAM,QAAQ,IAAI;AAAA,UACjD;AAAA,UACD,IAAI,UAAU;AACZ,mBAAO,EAAE,SAAS,QAAQ,KAAK,YAAY;AAAA,UAC5C;AAAA,UACD,OAAO;AACL,mBAAO,EAAE,OAAO,cAAY,YAAY,KAAK;AAAA,UACzD;AAAA,QACS;AAAA,QACD;AAAA,MACD;AAAA,IACP,CAAK;AACD,QAAI;AAAA,MACF,IAAI;AAAA,QACF;AAAA,UACE,IAAI,UAAU;AACZ,mBAAO,QAAQ,IAAI,QAAQ,IAAI,SAAY,MAAM,QAAQ;AAAA,UAC1D;AAAA,UACD,IAAI,UAAU;AACZ,mBAAO,QAAQ,IAAI,QAAQ,IAAI,QAAQ,YAAY;AAAA,UACpD;AAAA,UACD,OAAO;AACL,mBAAO,OAAO,KAAK,KAAK,EAAE,OAAO,OAAK,CAAC,QAAQ,IAAI,CAAC,CAAC;AAAA,UACjE;AAAA,QACS;AAAA,QACD;AAAA,MACR;AAAA,IACK;AACD,WAAO;AAAA,EACX;AACE,QAAM,cAAc,CAAE;AACtB,QAAM,UAAU,KAAK,IAAI,OAAO,CAAE,EAAC;AACnC,aAAW,YAAY,OAAO,oBAAoB,KAAK,GAAG;AACxD,UAAM,OAAO,OAAO,yBAAyB,OAAO,QAAQ;AAC5D,UAAM,gBACJ,CAAC,KAAK,OAAO,CAAC,KAAK,OAAO,KAAK,cAAc,KAAK,YAAY,KAAK;AACrE,QAAI,UAAU;AACd,QAAI,cAAc;AAClB,eAAW,KAAK,MAAM;AACpB,UAAI,EAAE,SAAS,QAAQ,GAAG;AACxB,kBAAU;AACV,wBACK,QAAQ,WAAW,EAAE,QAAQ,IAAI,KAAK,QACvC,OAAO,eAAe,QAAQ,WAAW,GAAG,UAAU,IAAI;AAAA,MACtE;AACM,QAAE;AAAA,IACR;AACI,QAAI,CAAC,SAAS;AACZ,sBACK,YAAY,QAAQ,IAAI,KAAK,QAC9B,OAAO,eAAe,aAAa,UAAU,IAAI;AAAA,IAC3D;AAAA,EACA;AACE,SAAO,CAAC,GAAG,SAAS,WAAW;AACjC;AACA,SAAS,KAAK,IAAI;AAChB,MAAI;AACJ,MAAI;AACJ,QAAM,OAAO,WAAS;AACpB,UAAM,MAAM,aAAa;AACzB,QAAI,KAAK;AACP,YAAM,CAAC,GAAG,GAAG,IAAI,aAAc;AAC/B,mBAAa,UAAU,aAAa,QAAQ;AAC5C,mBAAa;AACb,OAAC,MAAM,IAAI,GAAI,IAAG,KAAK,SAAO;AAC5B,SAAC,aAAa,QAAQ,kBAAkB,GAAG;AAC3C,qBAAa;AACb,YAAI,MAAM,IAAI,OAAO;AACrB,0BAAmB;AAAA,MAC3B,CAAO;AACD,aAAO;AAAA,IACb,WAAe,CAAC,MAAM;AAChB,YAAM,CAAC,CAAC,IAAI,eAAe,OAAO,MAAM,IAAI,GAAE,IAAK,KAAK,SAAO,IAAI,OAAO,CAAC;AAC3E,aAAO;AAAA,IACb;AACI,QAAI;AACJ,WAAO;AAAA,MAAW,OACf,OAAO,KAAM,KACV,QAAQ,MAAM;AACZ,YAAI;AACF,iBAAO,OAAO,MAAM;AAAA,YAClB,CAAC,QAAQ,GAAG;AAAA,UAC5B,CAAe;AACH,YAAI,CAAC,OAAO,aAAa,KAAM,QAAO,KAAK,KAAK;AAChD,cAAM,IAAI,aAAa;AACvB,0BAAkB,GAAG;AACrB,cAAM,IAAI,KAAK,KAAK;AACpB,0BAAkB,CAAC;AACnB,eAAO;AAAA,MACR,KACD;AAAA,IACL;AAAA,EACF;AACD,OAAK,UAAU,MAAM,OAAO,IAAI,GAAI,GAAE,KAAK,SAAQ,OAAO,MAAM,IAAI,OAAQ,GAAG;AAC/E,SAAO;AACT;AAOA,MAAM,gBAAgB,UACpB,4CAA4C,aAAI;AAClD,SAAS,IAAI,OAAO;AAClB,QAAM,WAAW,cAAc,SAAS;AAAA,IACtC,UAAU,MAAM,MAAM;AAAA,EACvB;AACD,SAAO;AAAA,IACL,SAAS,MAAM,MAAM,MAAM,MAAM,UAAU,YAAY,MAAS;AAAA,IAChE;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACZ;AAAA,EACG;AACH;AACA,SAAS,MAAM,OAAO;AACpB,QAAM,WAAW,cAAc,SAAS;AAAA,IACtC,UAAU,MAAM,MAAM;AAAA,EACvB;AACD,SAAO;AAAA,IACL,WAAW,MAAM,MAAM,MAAM,MAAM,UAAU,YAAY,MAAS;AAAA,IAClE;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACZ;AAAA,EACG;AACH;AACA,SAAS,KAAK,OAAO;AACnB,QAAM,QAAQ,MAAM;AACpB,QAAM,YAAY,WAAW,MAAM,MAAM,MAAM,QAAW;AAAA,IACxD,QAAQ,CAAC,GAAG,MAAO,QAAQ,MAAM,IAAI,CAAC,MAAM,CAAC;AAAA,IAC7C,MAAM;AAAA,EACV,CAAG;AACD,SAAO;AAAA,IACL,MAAM;AACJ,YAAM,IAAI,UAAW;AACrB,UAAI,GAAG;AACL,cAAM,QAAQ,MAAM;AACpB,cAAM,KAAK,OAAO,UAAU,cAAc,MAAM,SAAS;AACzD,eAAO,KACH;AAAA,UAAQ,MACN;AAAA,YACE,QACI,IACA,MAAM;AACJ,kBAAI,CAAC,QAAQ,SAAS,EAAG,OAAM,cAAc,MAAM;AACnD,qBAAO,MAAM;AAAA,YACnC;AAAA,UACA;AAAA,QACA,IACY;AAAA,MACZ;AACM,aAAO,MAAM;AAAA,IACd;AAAA,IACD;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACZ;AAAA,EACG;AACH;AAkQA,IAAI,YAAY;AACd,MAAI,CAAC,WAAW,QAAS,YAAW,UAAU;AAAA;AAE5C,YAAQ;AAAA,MACN;AAAA,IACD;AACL;ACp5DO,MAAM,CAAC,eAAe,gBAAgB,IAAI,aAE/C,MAAS;ACEK,kBAAS,QAAyB,IAAY;AACxD,gBAAU,KAAK,GAAG;AACb;AAAA;AAGL,aAAO,UAAU,UAAU;AAEzB,cAAM,WAAW,GAAG,GAAG;AAClB;AAAA,QACL,MAAM,QAAQ,KAAK,IAAI,KAAK,MAAM,WAAW,IAAI,OAAO;AAAA,MAC1D;AAAA;AAGE,cAAM,WAAW,IAAI,GAAG;AAC1B,aAAO,OAAO,KAAK;AAAA;AAErB,WAAO,OAAO,QAAQ,MAAM,WAAW,IAAI,QAAQ,OAAO,MAAM;AAAA;AAG3D;AACT;AAEgB,uBACd,QACA,QACG;AACH,MAAI,CAAC,QAAQ;AACJ;AAAA;AAGT,MAAI,CAAC,QAAQ;AACJ;AAAA;AAGF;AAAA,IACL,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AACF;ACnCA,SAAS,iBAAiB;AAAA,EACxB,eAAAyC;AAAA,EACA,gBAAAC;AAAA,EACA,YAAAC;AAAA,EACA;AAAA,EACA,YAAAC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAG;AACD,WAASC,QAAO,QAAQ,UAAU,QAAQ,SAAS;AACjD,QAAI,WAAW,UAAa,CAAC,QAAS,WAAU,CAAE;AAClD,QAAI,OAAO,aAAa,WAAY,QAAO,iBAAiB,QAAQ,UAAU,SAAS,MAAM;AAC7F,uBAAmB,aAAW,iBAAiB,QAAQ,SAAQ,GAAI,SAAS,MAAM,GAAG,OAAO;AAAA,EAChG;AACE,WAAS,iBAAiB,QAAQ,OAAO,SAAS,QAAQ,aAAa;AACrE,WAAO,OAAO,YAAY,WAAY,WAAU,QAAS;AACzD,QAAI,UAAU,QAAS,QAAO;AAC9B,UAAM,IAAI,OAAO,OACf,QAAQ,WAAW;AACrB,QAAI,MAAM,YAAY,MAAM,UAAU;AACpC,UAAI,MAAM,SAAU,SAAQ,MAAM,SAAU;AAC5C,UAAI,OAAO;AACT,YAAI,OAAO,QAAQ,CAAC;AACpB,YAAI,QAAQF,YAAW,IAAI,GAAG;AAC5B,sBAAY,MAAM,KAAK;AAAA,QACjC,MAAe,QAAOD,gBAAe,KAAK;AAClC,kBAAU,cAAc,QAAQ,SAAS,QAAQ,IAAI;AAAA,MAC7D,OAAa;AACL,YAAI,YAAY,MAAM,OAAO,YAAY,UAAU;AACjD,sBAAY,cAAc,MAAM,GAAI,UAAU,KAAO;AAAA,QAC/D,OAAe;AACL,wBAAc,QAAQ,SAAS,QAAQA,gBAAe,KAAK,CAAC;AAC5D,oBAAU;AAAA,QACpB;AAAA,MACA;AAAA,IACK,WAAU,SAAS,QAAQ,MAAM,WAAW;AAC3C,gBAAU,cAAc,QAAQ,SAAS,MAAM;AAAA,IACrD,WAAe,MAAM,YAAY;AAC3B,yBAAmB,MAAM;AACvB,YAAI,IAAI,MAAO;AACf,eAAO,OAAO,MAAM,WAAY,KAAI,EAAG;AACvC,kBAAU,iBAAiB,QAAQ,GAAG,SAAS,MAAM;AAAA,MAC7D,CAAO;AACD,aAAO,MAAM;AAAA,IACd,WAAU,MAAM,QAAQ,KAAK,GAAG;AAC/B,YAAM,QAAQ,CAAE;AAChB,UAAI,uBAAuB,OAAO,OAAO,WAAW,GAAG;AACrD;AAAA,UACE,MAAO,UAAU,iBAAiB,QAAQ,OAAO,SAAS,QAAQ,IAAI;AAAA,QACvE;AACD,eAAO,MAAM;AAAA,MACrB;AACM,UAAI,MAAM,WAAW,GAAG;AACtB,cAAM,cAAc,cAAc,QAAQ,SAAS,MAAM;AACzD,YAAI,MAAO,QAAQ,UAAU;AAAA,MACrC,OAAa;AACL,YAAI,MAAM,QAAQ,OAAO,GAAG;AAC1B,cAAI,QAAQ,WAAW,GAAG;AACxB,wBAAY,QAAQ,OAAO,MAAM;AAAA,UAClC,MAAM,iBAAgB,QAAQ,SAAS,KAAK;AAAA,QAC9C,WAAU,WAAW,QAAQ,YAAY,IAAI;AAC5C,sBAAY,QAAQ,KAAK;AAAA,QACnC,OAAe;AACL,0BAAgB,QAAS,SAAS,WAAY,CAAC,cAAc,MAAM,CAAC,GAAG,KAAK;AAAA,QACtF;AAAA,MACA;AACM,gBAAU;AAAA,IAChB,OAAW;AACL,UAAI,MAAM,QAAQ,OAAO,GAAG;AAC1B,YAAI,MAAO,QAAQ,UAAU,cAAc,QAAQ,SAAS,QAAQ,KAAK;AACzE,sBAAc,QAAQ,SAAS,MAAM,KAAK;AAAA,MAClD,WAAiB,WAAW,QAAQ,YAAY,MAAM,CAAC,cAAc,MAAM,GAAG;AACtE,QAAAE,YAAW,QAAQ,KAAK;AAAA,MACzB,MAAM,aAAY,QAAQ,OAAO,cAAc,MAAM,CAAC;AACvD,gBAAU;AAAA,IAChB;AACI,WAAO;AAAA,EACX;AACE,WAAS,uBAAuB,YAAY,OAAO,QAAQ;AACzD,QAAI,UAAU;AACd,aAAS,IAAI,GAAG,MAAM,MAAM,QAAQ,IAAI,KAAK,KAAK;AAChD,UAAI,OAAO,MAAM,CAAC,GAChB;AACF,UAAI,QAAQ,QAAQ,SAAS,QAAQ,SAAS,MAAM;AAAA,eAC3C,MAAM,QAAQ,IAAI,GAAG;AAC5B,kBAAU,uBAAuB,YAAY,IAAI,KAAK;AAAA,MAC9D,YAAkB,IAAI,OAAO,UAAU,YAAY,MAAM,UAAU;AAC3D,mBAAW,KAAKF,gBAAe,IAAI,CAAC;AAAA,MAC5C,WAAiB,MAAM,YAAY;AAC3B,YAAI,QAAQ;AACV,iBAAO,OAAO,SAAS,WAAY,QAAO,KAAM;AAChD,oBACE,uBAAuB,YAAY,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK;AAAA,QACvF,OAAe;AACL,qBAAW,KAAK,IAAI;AACpB,oBAAU;AAAA,QACpB;AAAA,MACA,MAAa,YAAW,KAAK,IAAI;AAAA,IACjC;AACI,WAAO;AAAA,EACX;AACE,WAAS,gBAAgB,YAAY,GAAG,GAAG;AACzC,QAAI,UAAU,EAAE,QACd,OAAO,EAAE,QACT,OAAO,SACP,SAAS,GACT,SAAS,GACT,QAAQ,eAAe,EAAE,OAAO,CAAC,CAAC,GAClC,MAAM;AACR,WAAO,SAAS,QAAQ,SAAS,MAAM;AACrC,UAAI,EAAE,MAAM,MAAM,EAAE,MAAM,GAAG;AAC3B;AACA;AACA;AAAA,MACR;AACM,aAAO,EAAE,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,GAAG;AAClC;AACA;AAAA,MACR;AACM,UAAI,SAAS,QAAQ;AACnB,cAAM,OACJ,OAAO,UAAW,SAAS,eAAe,EAAE,SAAS,CAAC,CAAC,IAAI,EAAE,OAAO,MAAM,IAAK;AACjF,eAAO,SAAS,KAAM,CAAAE,YAAW,YAAY,EAAE,QAAQ,GAAG,IAAI;AAAA,MACtE,WAAiB,SAAS,QAAQ;AAC1B,eAAO,SAAS,MAAM;AACpB,cAAI,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,MAAM,CAAC,EAAG,YAAW,YAAY,EAAE,MAAM,CAAC;AACjE;AAAA,QACV;AAAA,MACO,WAAU,EAAE,MAAM,MAAM,EAAE,OAAO,CAAC,KAAK,EAAE,MAAM,MAAM,EAAE,OAAO,CAAC,GAAG;AACjE,cAAM,OAAO,eAAe,EAAE,EAAE,IAAI,CAAC;AACrC,QAAAA,YAAW,YAAY,EAAE,QAAQ,GAAG,eAAe,EAAE,QAAQ,CAAC,CAAC;AAC/D,QAAAA,YAAW,YAAY,EAAE,EAAE,IAAI,GAAG,IAAI;AACtC,UAAE,IAAI,IAAI,EAAE,IAAI;AAAA,MACxB,OAAa;AACL,YAAI,CAAC,KAAK;AACR,gBAAM,oBAAI,IAAK;AACf,cAAI,IAAI;AACR,iBAAO,IAAI,KAAM,KAAI,IAAI,EAAE,CAAC,GAAG,GAAG;AAAA,QAC5C;AACQ,cAAM,QAAQ,IAAI,IAAI,EAAE,MAAM,CAAC;AAC/B,YAAI,SAAS,MAAM;AACjB,cAAI,SAAS,SAAS,QAAQ,MAAM;AAClC,gBAAI,IAAI,QACN,WAAW,GACX;AACF,mBAAO,EAAE,IAAI,QAAQ,IAAI,MAAM;AAC7B,mBAAK,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,QAAQ,MAAM,QAAQ,SAAU;AAC3D;AAAA,YACd;AACY,gBAAI,WAAW,QAAQ,QAAQ;AAC7B,oBAAM,OAAO,EAAE,MAAM;AACrB,qBAAO,SAAS,MAAO,CAAAA,YAAW,YAAY,EAAE,QAAQ,GAAG,IAAI;AAAA,YAC7E,MAAmB,aAAY,YAAY,EAAE,QAAQ,GAAG,EAAE,QAAQ,CAAC;AAAA,UACxD,MAAM;AAAA,QACR,MAAM,YAAW,YAAY,EAAE,QAAQ,CAAC;AAAA,MACjD;AAAA,IACA;AAAA,EACA;AACE,WAAS,cAAc,QAAQ,SAAS,QAAQ,aAAa;AAC3D,QAAI,WAAW,QAAW;AACxB,UAAI;AACJ,aAAQ,UAAU,cAAc,MAAM,EAAI,YAAW,QAAQ,OAAO;AACpE,qBAAeA,YAAW,QAAQ,WAAW;AAC7C,aAAO;AAAA,IACb;AACI,UAAM,OAAO,eAAeF,gBAAe,EAAE;AAC7C,QAAI,QAAQ,QAAQ;AAClB,UAAI,WAAW;AACf,eAAS,IAAI,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AAC5C,cAAM,KAAK,QAAQ,CAAC;AACpB,YAAI,SAAS,IAAI;AACf,gBAAM,WAAW,cAAc,EAAE,MAAM;AACvC,cAAI,CAAC,YAAY,CAAC;AAChB,uBAAW,YAAY,QAAQ,MAAM,EAAE,IAAIE,YAAW,QAAQ,MAAM,MAAM;AAAA,cACvE,aAAY,WAAW,QAAQ,EAAE;AAAA,QACvC,MAAM,YAAW;AAAA,MAC1B;AAAA,IACK,MAAM,CAAAA,YAAW,QAAQ,MAAM,MAAM;AACtC,WAAO,CAAC,IAAI;AAAA,EAChB;AACE,WAAS,YAAY,QAAQ,OAAO,QAAQ;AAC1C,aAAS,IAAI,GAAG,MAAM,MAAM,QAAQ,IAAI,KAAK,IAAK,CAAAA,YAAW,QAAQ,MAAM,CAAC,GAAG,MAAM;AAAA,EACzF;AACE,WAAS,YAAY,QAAQ,SAAS,SAAS;AAC7C,IAAAA,YAAW,QAAQ,SAAS,OAAO;AACnC,eAAW,QAAQ,OAAO;AAAA,EAC9B;AACE,WAAS,iBAAiB,MAAM,OAAO,YAAY,IAAI,cAAc;AACnE,cAAU,QAAQ;AAClB,QAAI,CAAC,cAAc;AACjB;AAAA,QACE,MAAO,UAAU,WAAW,iBAAiB,MAAM,MAAM,UAAU,UAAU,QAAQ;AAAA,MACtF;AAAA,IACP;AACI,uBAAmB,MAAM,MAAM,OAAO,MAAM,IAAI,IAAI,CAAC;AACrD,uBAAmB,MAAM;AACvB,iBAAW,QAAQ,OAAO;AACxB,YAAI,SAAS,cAAc,SAAS,MAAO;AAC3C,cAAM,QAAQ,MAAM,IAAI;AACxB,YAAI,UAAU,UAAU,IAAI,EAAG;AAC/B,oBAAY,MAAM,MAAM,OAAO,UAAU,IAAI,CAAC;AAC9C,kBAAU,IAAI,IAAI;AAAA,MAC1B;AAAA,IACA,CAAK;AACD,WAAO;AAAA,EACX;AACE,SAAO;AAAA,IACL,OAAO,MAAM,SAAS;AACpB,UAAI;AACJ,iBAAW,CAAAE,aAAW;AACpB,mBAAWA;AACX,QAAAD,QAAO,SAAS,MAAM;AAAA,MAC9B,CAAO;AACD,aAAO;AAAA,IACR;AAAA,IACD,QAAAA;AAAA,IACA,OAAO,MAAM,UAAU,cAAc;AACnC,UAAI,OAAO,aAAa,YAAY;AAClC,2BAAmB,aAAW,iBAAiB,MAAM,YAAY,SAAS,YAAY,CAAC;AAAA,MACxF,MAAM,kBAAiB,MAAM,UAAU,QAAW,YAAY;AAAA,IAChE;AAAA,IACD,eAAAJ;AAAA,IACA,gBAAAC;AAAA,IACA,YAAAE;AAAA,IACA,QAAQ,MAAM,MAAM,OAAO,MAAM;AAC/B,kBAAY,MAAM,MAAM,OAAO,IAAI;AACnC,aAAO;AAAA,IACR;AAAA,IACL,YAAIL;AAAAA,IACA,QAAQ;AAAA,IACR,MAAM;AAAA,IACV,iBAAID;AAAAA,IACA,IAAI,IAAI,SAAS,KAAK;AACpB,aAAO,QAAQ,MAAM,GAAG,SAAS,GAAG,CAAC;AAAA,IAC3C;AAAA,EACG;AACH;AAEA,SAASS,iBAAe,SAAS;AAC/B,QAAMvC,YAAW,iBAAiB,OAAO;AACzC,EAAAA,UAAS,aAAa+B;AACtB,SAAO/B;AACT;ACnPA,MAAe;AAAA,EACb,cAAc,MAA2B;AAChC,eAAI,YAAY,IAAI;AAAA,EAC7B;AAAA,EACA,eAAewC,OAAwB;AAErC,WAAO,EAAE,OAAO,SAAS,MAAM,MAAAA,MAAK;AAAA,EACtC;AAAA,EACA,YAAY,MAAgB,OAAqB;AAC3C,0BAAkB,MAAM,KAAK;AACjC,SAAK,OAAO;AACZ,UAAM,SAAS,KAAK;AACpB,iBAAa,MAAM;AACZ,kBAAO,OAAO,QAAQ;AAAA,EAC/B;AAAA,EACA,YAAY,MAAmB,MAAc,QAAa,MAAY;AACpE,SAAK,IAAI,IAAI;AAAA,EACf;AAAA,EACA,WAAW,QAAqB,MAAiB,QAAyB;AACpE,oBAAY,QAAQ,MAAM,MAAM;AAE7B,uBAAY,MAAM,MAAM;AAC/B,SAAK,eAAe;AAEpB,QAAI,gBAAgB,aAAa;AACxB,yBAAY,KAAK,OAAO,IAAI;AAAA,eAC1B,cAAc,MAAM,GAAG;AAEzB,oBAAO,OAAO,QAAQ;AAAA;AAAA,EAEjC;AAAA,EACA,WAAW,MAA0B;AACnC,WAAO,cAAc,IAAI;AAAA,EAC3B;AAAA,EACA,WAAW,QAAqB,MAAuB;AACjD,oBAAY,QAAQ,IAAI;AAC5B,WAAO,YAAY,IAAI;AACvB,SAAK,eAAe;AACpB,QAAI,gBAAgB,aAAa;AAIhB,2BAAM,KAAK,SAAS;AAAA;AAAA,EAEvC;AAAA,EACA,cAAc,MAAwD;AACpE,WAAO,KAAK;AAAA,EACd;AAAA,EACA,cAAc,MAA0C;AAC/C,gBAAK,SAAS,CAAC;AAAA,EACxB;AAAA,EACA,eAAe,MAAwC;AACrD,UAAMrB,YAAW,KAAK,OAAQ,YAAY,CAAC;AAC3C,UAAM,QAAQA,UAAS,QAAQ,IAAW,IAAI;AAC1C,gBAAQA,UAAS,QAAQ;AAC3B,aAAOA,UAAS,KAAK;AAAA;AAEhB;AAAA;AAEX;AClDA,MAAM,gBAAgBsB,iBAA+B,QAAQ;AAE7D,IAAI;AACS,iBAAW,SAAS,cAAc,KAAK;AAEpD,MAAMC,WAAS,SAAU,MAAwB;AAExC,uBAAc,OAAO,MAAM,QAAQ;AAC5C;AAEgB,wBACd,iBACA,MACA;AACM,kBACgB,OAAO;AAElB,oCAAuB,SAAiB,KAAK;AAExD,SAAO,mBAAmB;AAC1B,WAAS,MAAM,SAAS;AACxB,WAAS,WAAW;AACb;AAAA,IACL;AAAA,IACA;AAAA,IACAA;AAAAA,EACF;AACF;AAEa;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,IAAI;AASG,SAAS,QACd,OAGY;AACN,SAAC,GAAG,MAAM,IAAI,WAAW,OAAO,CAAC,WAAW,CAAC;AAEnD,QAAM,SAAS,WAAW,MAAM,EAAE,SAAS;AAE3C,SAAO,WAAW,MAAM;AACtB,UAAM,YAAY,OAAO;AACzB,YAAQ,OAAO,WAAW;AAAA,MACxB,KAAK;AACH,eAAO,QAAQ,MAAM,UAAU,MAAM,CAAC;AAAA,MAExC,KAAK,UAAU;AACP,mBAAK,cAAc,SAAS;AAClC,eAAO,IAAI,MAAM;AACV;AAAA;AAAA,IAIP;AAAA,EACJ,CACD;AACH;AAGa,aAAO,CAAC,UAAqB;AAClC,aAAK,cAAc,MAAM;AACxB,aAAI,OAAO,KAAK;AAChB;AACT;AAEa,aAAO,CAAC,UAAqB;AAClC,aAAK,cAAc,MAAM;AACxB,aAAI,OAAO,KAAK;AAChB;AACT;AC9EO,MAAM,mBAAmB;ACGzB,SAAS,mBAAmB,aAAa,eAAe,UAAU,eAAe,SAAS,eAAe,cAAc,WAAW,OAAO;AAE5I,QAAM,iBAAiB,KAAK,IAAI,KAAK,IAAI,aAAa,cAAc,CAAC,GAAG,UAAU,MAAM;AACxF,QAAM,YAAY;AAClB,QAAM,EAAE,QAAO,IAAK;AACpB,eAAa,SAAS,yBAAyB;AAC/C,eAAa,SAAS,MAAM,sBAAsB;AAKlD,QAAM,qBAAqB,QAAQ,WAAW,QAAQ,aAAa;AACnE,MAAI,0BAA0B;AAC9B,MAAI,kBAAkB,UAAU;AAC5B,+BAA2B,gBAAgB,qBAAqB;AAAA,EACxE,WACa,kBAAkB,UAAU;AACjC,8BAA0B,gBAAgB;AAAA,EAClD;AACI,QAAM,aAAa,UAAU;AAO7B,QAAM,qBAAqB,SAAS,KAAK,OAAO;AAIhD,QAAM,wBAAwB,QAAQ,WAAW;AAKjD,QAAM,uBAAuB,wBAAwB;AACrD,QAAM,YAAY,aACd,uBACA,iBAAiB,gBACjB;AAEJ,MAAI,SAAS,aAAa,QAAQ,eAAe;AAC7C;AAAA,EACR;AACI,SAAO;AAAA,IACH,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,EACd;AACL;AC5DO,MAAM,iBAAiB;AAAA,EAI1B,YAAY,UAAU,YAAY,GAAG;AAHrC;AACA,sCAAa,CAAE;AACf;AAEI,SAAK,WAAW;AAChB,SAAK,WAAW;AAChB,SAAK,aAAa,YAAY;AAC9B,SAAK,aAAa,CAAE;AAAA,EAC5B;AAAA,EACI,OAAO;AACH,UAAM,aAAa,KAAK,WAAW,SAAS;AAAA;AAAA,MAEpC,KAAK,WAAW,IAAG;AAAA,QACrB,KAAK,SAAS,KAAM;AAC1B,QAAI,WAAW,MAAM;AACjB,WAAK,aAAa;AAAA,IAC9B,OACa;AACD,WAAK;AAAA,IACjB;AACQ,WAAO;AAAA,EACf;AAAA,EACI,OAAO;AACH,QAAI,KAAK,WAAW,SAAS,GAAG;AAI5B,aAAO,KAAK,WAAW,CAAC;AAAA,IACpC;AACQ,UAAM,SAAS,KAAK,SAAS,KAAM;AACnC,SAAK,WAAW,KAAK,MAAM;AAC3B,WAAO;AAAA,EACf;AAAA,EACI,IAAI,YAAY;AACZ,WAAO,KAAK;AAAA,EACpB;AACA;ACrCO,UAAU,qBAAqBF,OAAM,QAAQ,GAAG;AACnD,MAAI,IAAI;AACR,SAAO,IAAIA,MAAK,QAAQ;AACpB,UAAM,YAAYA,MAAK,YAAY,CAAC;AACpC,QAAI,cAAc,QAAW;AACzB,YAAM,IAAI,MAAM,4BAA4B;AAAA,IACxD;AACQ,UAAM;AACN,SAAK,aAAa,QAAS,IAAI;AAAA,EACvC;AACA;ACJO,SAAS,YAAYA,OAAM,aAAa,QAAQ;AACnD,QAAM,SAAS,OAAO,UAAU,aAAa,IAAI,iBAAiB,qBAAqBA,OAAM,CAAC,GAAG,CAAC,CAAC;AACnG,MAAI,QAAQ;AACZ,aAAW,SAAS,QAAQ;AACxB,QAAI,MAAM,UAAU,MAAM,cAAc,MAAM;AAE1C,eAAS,MAAM;AAAA,IAC3B;AAAA,EACA;AACI,SAAO;AACX;AChBO,SAAS,WAAW,cAAc,QAAQ,QAAQA,OAAM,WAAW,OAAO,QAAQ,UAAU,YAAY,eAI/G,cAAc,SAId,WAAW,OAAO,YAAY,qBAAqB,YAAY,gBAAgB,UAAU;AACrF,eAAa,YAAY,0BAA0B;AACnD,eAAa,WAAW,QAAQ,0BAA0B;AAC1D,eAAa,WAAW,MAAM,0BAA0B;AACxD,eAAa,WAAW,QAAQ,0BAA0B;AAY1D,QAAM,gBAAgB,WAAW,WAAW,KAAK,KAAK;AAItD,QAAM,mBAAmB,aAAa;AAItC,QAAM,UAAU,QAAQ;AAIxB,QAAM,iBAAiB,gBAAgB;AACvC,QAAM,yBAAyB,UAAU,YAAY;AACrD,QAAM,0BAAyB,iEAAwB,mBAAkB;AACzE,QAAM,gBAAe,iEAAwB,SAAQ;AACrD,QAAM,gBAAe,iEAAwB,SAAQ;AACrD,MAAI,OAAO;AACX,MAAI,OAAO;AACX,MAAI,OAAO;AACX,MAAI,OAAO;AACX,MAAI,eAAe;AAInB,QAAM,WAAW;AAAA,IACb,gBAAgB;AAAA,IAChB,cAAc;AAAA,IACd,QAAQ;AAAA,EACX;AAED,QAAM,SAAS,WAAW;AAC1B,QAAM,cAAc;AAAA,IAChB,eAAe;AAAA,EAClB;AAED,MAAI,SAAS,OAAO,UAAU,aAAa,IAAI,iBAAiB,qBAAqBA,OAAM,sBAAsB,GAAG,sBAAsB,CAAC;AAC3I,MAAI;AACJ,MAAI,qBAAqB;AACzB,QAAM,kBAAkB,CAAE;AAC1B,QAAM,uBAAuB,SAAS;AACtC,QAAM,0BAA0B,YAAY,gBAAgB,aAAa,MAAM;AAE/E,MAAI,YAAY;AAChB,SAAO,WAAW;AACd,UAAM,mBAAmB,aAAa,KAAK,eAAe,IAAI,cACzD,YAAY,UACT,cACA,OAAO,mBAAmB,WAAW,iBACjC;AACZ,UAAM,cAAc,kBACd,UACA,UAAU;AAIhB,QAAI,yBAAyB;AAC7B,UAAM,uBAAuB,OAAO,WAAW,iBAAiB,MAAM;AACtE,UAAM,0BAA0B,QAAQ,MAAM;AAC9C,UAAM,qBAAqB,wBAAwB;AAGnD,YAAQ,cAAc,OAAO,KAAI,MAAO,CAAC,YAAY,MAAM;AACvD,YAAM,QAAQ,YAAY;AAC1B,UAAI,iBAAiB,UAAU,QAAQ;AACnC,kBAAU,KAAK;AAAA,UACX,gBAAgB,MAAM;AAAA,UACtB;AAAA,UACA;AAAA,QACpB,CAAiB;AAAA,MACjB,WACqB,eAAe,UAAU,QAAQ;AACtC,cAAM,IAAI,MAAM,6BAA6B;AAAA,MAC7D;AAGY,UAAI,MAAM,cAAc,MACpB,MAAM,cAAc,MACpB,MAAM,cAAc,MAAM;AAC1B,YAAI,SAAS,mBAAmB,IAAI;AAChC,mBAAS,iBAAiB;AAC1B,mCAAyB;AAAA,QAC7C;AAAA,MACA,WACqB,SAAS,mBAAmB,IAAI;AACrC,iBAAS,iBAAiB,MAAM;AAChC,iBAAS,eAAe;AACxB,iBAAS,SAAS;AAAA,MAClC;AACY,UAAI,MAAM,QAAQ;AAEd,cAAM,WAAW,OAAO,MAAM,UAAU,MAAM;AAE9C;AAAA;AAAA,UAEA,YAAY;AAAA,UAER,YAAY;AAAA,UAEZ,SAAS,mBAAmB;AAAA,UAE5B,SAAS,SAAS;AAAA,UAAG;AAIrB,cAAI,iBAAiB;AACjB,qBAAS,OAAO,UAAU,aAAa,IAAI,iBAAiB,qBAAqBA,OAAM,SAAS,cAAc,GAAG,SAAS,cAAc,CAAC;AACzI,2BAAe,SAAS;AACxB;AAAA,UACxB,OACyB;AACD,qBAAS,OAAO,UAAU,aAAa,IAAI,iBAAiB,qBAAqB,gBAAgB,CAAC,GAAG,CAAC,CAAC;AACvG,mBAAO,SAAS;AAChB,2BAAe,SAAS;AAGxB,sBAAU;AAAA,UAClC;AAAA,QACA,OACqB;AAED,gBAAM,QAAQ,OAAO,MAAM;AAC3B,gBAAM,QAAQ,OAAO,MAAM;AAE3B,cAAI,oBAAoB;AACpB,gBAAI,uBAAuB,IAAI;AAC3B,mCAAqB;AAAA,YACjD;AACwB,kBAAM,aAAa,WAAW,cAAc,MAAM,OAAO;AAEzD,kBAAM,IAAI,WAAW,IAAI,WAAW,KAAK,OAAO;AAChD,kBAAM,IAAI,WAAW,IAAI,WAAW,KAAK,OAAO;AAChD,kBAAM,UAAU,WAAW,QAAQ,WAAW,KAAK,OAAO;AAC1D,kBAAM,WAAW,WAAW,SAAS,WAAW,KAAK,OAAO;AAI5D,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI;AAE/B,yBAAa,cAAc,IAAI,QAAQ,MAAM;AAC7C,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI,IAAI;AACnC,yBAAa,cAAc,IAAI;AAE/B,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI,QAAQ,MAAM;AAC7C,yBAAa,cAAc,IAAI;AAC/B,yBAAa,cAAc,IAAI,IAAI;AAEnC,yBAAa,cAAc,IAAI,QAAQ,MAAM;AAC7C,yBAAa,cAAc,IAAI,QAAQ,MAAM;AAC7C,yBAAa,cAAc,IAAI,IAAI;AACnC,yBAAa,cAAc,IAAI,IAAI;AAAA,UAC3D;AACoB,iBAAO,KAAK,IAAI,MAAM,QAAQ,MAAM,MAAM;AAC1C,iBAAO,KAAK,IAAI,MAAM,QAAQ,MAAM,KAAK;AACzC,kBAAQ,MAAM;AAAA,QAClC;AAAA,MACA,OACiB;AAGD,YAAI,MAAM,cAAc,IAAI;AACxB,cAAI,iBAAiB;AAEjB;AAAA,UACxB,OACyB;AAED,qBAAS,OAAO,UAAU,aAAa,IAAI,iBAAiB,qBAAqB,gBAAgB,CAAC,GAAG,CAAC,CAAC;AAGvG,sBAAU;AAAA,UAClC;AAAA,QACA;AAAA,MACA;AAAA,IACA;AAEQ,QAAI,uBAAuB,IAAI;AAC3B,sBAAgB,KAAK;AAAA,QACjB,aAAa;AAAA,QACb,WAAW;AAAA,MAC3B,CAAa;AACD,2BAAqB;AAAA,IACjC;AACQ,WAAO;AACP,YAAQ;AACR;AACA,aAAS,iBAAiB;AAC1B,6BAAyB;AAEzB,QAAI,CAAC,uBAAuB,YAAY,UAAU,OAAO,MAAM,IAAI;AAM/D,kBAAY;AAAA,IACxB,WACiB,eAAe,YAAY,MAAM;AAEtC,kBAAY;AAAA,IACxB,WACiB,CAAC,iBAAiB;AAGvB,kBAAY;AAAA,IACxB;AAAA,EACA;AAGI,MAAI,cAAc,UAAU;AACxB,UAAM,cAAc,YAAY,SAAS,OAAO;AAChD,aAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC7C,YAAM,OAAO,gBAAgB,CAAC;AAE9B,YAAM;AAAA;AAAA,QAEN,aAAa,KAAK,YAAY,CAAC,IAAI,aAAa,KAAK,WAAW;AAAA;AAChE,YAAM,WAAW,cAAc,aAAa;AAC5C,eAAS,IAAI,KAAK,aAAa,IAAI,KAAK,WAAW,KAAK,GAAG;AAEvD,qBAAa,CAAC,KAAK;AAAA,MACnC;AAAA,IACA;AAAA,EACA,WACa,cAAc,SAAS;AAC5B,UAAM,cAAc,YAAY,SAAS,OAAO;AAChD,aAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC7C,YAAM,OAAO,gBAAgB,CAAC;AAC9B,YAAM,YAAY,KAAK,cAAc,KAAK,cACpC;AAAA;AAAA,QAEE,aAAa,KAAK,YAAY,CAAC,IAAI,aAAa,KAAK,WAAW;AAAA;AACxE,YAAM,UAAU,cAAc;AAC9B,eAAS,IAAI,KAAK,aAAa,IAAI,KAAK,WAAW,KAAK,GAAG;AAEvD,qBAAa,CAAC,KAAK;AAAA,MACnC;AAAA,IACA;AAAA,EACA;AACI,eAAa,WAAW;AACxB,SAAO;AAAA,IACH,iBAAiB;AAAA,IACjB,gBAAgB,eAAe;AAAA,IAC/B,qBAAqB,YAAY,OAC3BA,MAAK,SAAS,yBACd,YAAY,MAAM,UAAU,yBAAyB;AAAA,IAC3D,gBAAgB,CAAC,CAAC,YAAY;AAAA,IAC9B;AAAA,IACA;AAAA,IACA,UAAU,UAAU;AAAA,EACvB;AACL;ACrRO,SAAS,kBAAkB,OAAO,UAAU;AAC/C,SAAO,KAAK,KAAK,QAAQ,QAAQ,IAAI;AACzC;AAQO,SAAS,oBAAoB,OAAO,UAAU;AACjD,SAAO,KAAK,MAAM,QAAQ,QAAQ,IAAI;AAC1C;ACDO,SAAS,gBAAgB,iBAAiB,GAAG,GAAG,SAAS,YAAY,cAAc,eAAe,eAAe;AACpH,QAAM,EAAE,QAAQ,IAAG,IAAK;AACxB,MAAI,CAAC,gBAAgB,aAAa,GAAG;AACjC,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,QAAI,KAAK;AACT,oBAAgB,WAAW;AAC3B,oBAAgB,eAAe;AAAA,EACvC,OACS;AACD,UAAM,KAAK,cAAc,KAAK;AAC9B,UAAM,KAAK,MAAM,cAAc,KAAK,cAAc;AAClD,UAAM,SAAS,cAAc,KAAK,IAAI;AACtC,UAAM,KAAK,oBAAoB,SAAS,cAAc,cAAc,CAAC;AACrE,UAAM,KAAK,kBAAkB,UAAU,cAAc,KAAK,cAAc,MAAM,cAAc,cAAc,CAAC;AAC3G,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,WAAO,KAAK;AACZ,QAAI,KAAK,KAAK;AACd,QAAI,KAAK,KAAK;AACd,QAAI,KAAK,KAAK;AACd,QAAI,KAAK,KAAK;AACd,oBAAgB,WAAW,KAAK,MAAM,KAAK,MAAM,UAAU;AAC3D,oBAAgB,eAAe,aAAa,KAAK,MAAM,KAAK,UAAU,IAAI;AAAA,EAClF;AACI,kBAAgB,QAAQ;AAC5B;AC1DO,SAAS,sBAAsB,SAAS,UAAU;AACrD,SAAO,YAAY,QAAQ,WAAW,QAAQ,YAAY,QAAQ;AACtE;ACuBA,MAAM,UAAU;AAAA,EACZ,GAAG;AAAA,EACH,GAAG;AAAA,EACH,OAAO;AAAA,EACP,QAAQ;AACZ;AAOO,MAAM,wBAAwB,aAAa;AAAA,EAa9C,YAAY,OAAO;AACf,UAAM,KAAK;AAVf;AAAA;AAAA;AAAA,4CAAmB,CAAE;AACrB,4CAAmB,CAAE;AACrB,2CAAkB;AAAA,MACd,KAAK;AAAA,MACL,KAAK;AAAA,IACR;AACD;AACA;AACA,gCAAO;AAGH,SAAK,YAAY,KAAK,MAAM,UAAU,WAAW,aAAa;AAAA,MAC1D,WAAW,IAAI,aAAc;AAAA,MAC7B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,MACT,eAAe;AAAA,MACf,OAAO;AAAA,IACV,GAAE;AACH,SAAK,iBAAiB;AAAA,MAClB,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI,KAAK,MAAM,QAAQ;AAAA,MACvB,IAAI,KAAK,MAAM,QAAQ;AAAA,IAC1B;AAAA,EACT;AAAA;AAAA,EAEI,qBAAqB;AACjB,WAAO;AAAA,MACH,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,aAAK,gBAAgB,KAAK;AAC1B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,aAAK,gBAAgB,KAAK;AAC1B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,WAAW,CAAC,OAAO,UAAU;AACzB,cAAM,MAAM,YAAY;AACxB,aAAK,gBAAgB,KAAK;AAC1B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,aAAa,CAAC,OAAO,UAAU;AAC3B,cAAM,MAAM,cAAc;AAC1B,aAAK,gBAAgB,KAAK;AAC1B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,UAAU,CAAC,OAAO,UAAU;AACxB,cAAM,MAAM,WAAW;AACvB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,MAAM,CAAC,OAAO,UAAU;AACpB,cAAM,MAAM,OAAO;AACnB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,WAAW,CAAC,OAAO,UAAU;AACzB,cAAM,MAAM,YAAY;AACxB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,OAAO,CAAC,OAAO,UAAU;AACrB,cAAM,MAAM,QAAQ;AAAA,MACvB;AAAA,MACD,GAAG,CAAC,OAAO,UAAU;AACjB,cAAM,MAAM,IAAI;AAChB,YAAI,MAAM,cAAc,OAAO;AAC3B,eAAK,kBAAkB,KAAK;AAI5B,cAAI,CAAC,MAAM,aAAa,SACpB,cAAc,MAAM,eAAe,KAAK,cAAc,GAAG;AACzD,iBAAK,oBAAoB,KAAK;AAAA,UACtD;AAAA,QACA;AAAA,MACa;AAAA,MACD,GAAG,CAAC,OAAO,UAAU;AACjB,cAAM,MAAM,IAAI;AAChB,YAAI,MAAM,cAAc,OAAO;AAC3B,eAAK,kBAAkB,KAAK;AAE5B,cAAI,CAAC,MAAM,aAAa,SACpB,cAAc,MAAM,eAAe,KAAK,cAAc,GAAG;AACzD,iBAAK,oBAAoB,KAAK;AAAA,UACtD;AAAA,QACA;AAAA,MACa;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AACtB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,OAAO,CAAC,OAAO,UAAU;AACrB,cAAM,MAAM,QAAQ;AAEpB,YAAI,MAAM,MAAM,YAAY,QAAQ;AAChC,eAAK,sBAAsB,KAAK;AAAA,QACpD;AAAA,MACa;AAAA,MACD,QAAQ,CAAC,OAAO,UAAU;AACtB,cAAM,MAAM,SAAS;AAErB,YAAI,MAAM,MAAM,YAAY,QAAQ;AAChC,eAAK,sBAAsB,KAAK;AAAA,QACpD;AAAA,MACa;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AACtB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AAGtB,aAAK,oBAAoB,KAAK;AAAA,MACjC;AAAA,MACD,eAAe,CAAC,OAAO,UAAU;AAC7B,cAAM,MAAM,gBAAgB;AAC5B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,cAAM,gBAAgB;AACtB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,UAAU,CAAC,OAAO,UAAU;AACxB,cAAM,MAAM,WAAW;AACvB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,cAAc,CAAC,OAAO,UAAU;AAC5B,cAAM,MAAM,eAAe;AAC3B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,eAAe,CAAC,OAAO,UAAU;AAC7B,cAAM,MAAM,gBAAgB;AAC5B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,gBAAgB,CAAC,OAAO,UAAU;AAC9B,cAAM,MAAM,iBAAiB;AAC7B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,OAAO,CAAC,OAAO,UAAU;AACrB,cAAM,MAAM,QAAQ;AAAA,MACvB;AAAA,IACJ;AAAA,EACT;AAAA,EACI,cAAc,OAAO;AAIjB,UAAM,EAAE,WAAU,IAAK;AACvB,WAAQ,cAAc,KAAK,oBACvB,cAAc,KAAK,oBACnB,eAAe;AAAA,EAC3B;AAAA,EACI,oBAAoB,UAAU;AAC1B,WAAO,oBAAoB;AAAA,EACnC;AAAA,EACI,YAAY,UAAU;AAGlB,iBAAa,oBAAoB,aAAa;AAC9C,UAAM,aAAa,SAAS;AAC5B,UAAM,cAAc,SAAS,SAAS,SAChC,KAAK,mBACL,SAAS,SAAS,SACd,KAAK,mBACL;AACV,QAAI,CAAC,aAAa;AACd,cAAQ,KAAK,2BAA2B,gBAAS,KAAM;AACvD;AAAA,IACZ;AACQ,QAAI,UAAU,YAAY,UAAU;AACpC,QAAI,CAAC,SAAS;AACV,gBAAU,oBAAI,IAAK;AACnB,kBAAY,UAAU,IAAI;AAAA,IACtC;AACQ,YAAQ,IAAI,QAAQ;AAAA,EAC5B;AAAA,EACI,YAAY,OAAO;AACf,WAAO;AAAA,MACH;AAAA,MACA,QAAQ;AAAA,MACR,iBAAiB;AAAA,MACjB,SAAS,IAAI,aAAc;AAAA,MAC3B,WAAW,CAAE;AAAA,MACb,qBAAqB;AAAA,MACrB,cAAc;AAAA,QACV,QAAQ;AAAA,UACJ,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,IAAI;AAAA,QACP;AAAA,QACD,KAAK;AAAA,UACD,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,IAAI;AAAA,QACP;AAAA,QACD,cAAc;AAAA,QACd,UAAU;AAAA,QACV,OAAO;AAAA,MACV;AAAA,MACD,eAAe;AAAA,QACX,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,OAAO;AAAA,MACV;AAAA,MACD,cAAc;AAAA,QACV,GAAG;AAAA,QACH,GAAG;AAAA,QACH,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,MACV;AAAA,MACD,iBAAiB;AAAA,MACjB,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,OAAO;AAAA,MACP,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,eAAe;AAAA,MACf,WAAW;AAAA,QACP,aAAa;AAAA,QACb,aAAa;AAAA,QACb,yBAAyB;AAAA,QACzB,WAAW;AAAA,QACX,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,MACf;AAAA,IACJ;AAAA,EACT;AAAA,EACI,YAAY,OAAO;AACf,QAAI,EAAE,WAAU,IAAK;AACrB,UAAM,EAAE,OAAO,WAAW,WAAW,oBAAqB,IAAG;AAC7D,cAAU;AAEV,QAAI,MAAM,WAAW,gBAAgB;AACjC,WAAK,UAAU,OAAO,SAAS;AAAA,IAC3C;AAEQ,QAAI,eAAe,QAAW;AAC1B,mBAAa,KAAK,gBAAgB,MAAM,KAAK;AAC7C,YAAM,aAAa;AACnB,UAAI,eAAe,QAAW;AAC1B,cAAM,MAAM,6DAA6D,aAAM,MAAM,YAAU;AAC/F,gBAAQ,MAAM,GAAG;AACjB,aAAK,UAAU,OAAO,UAAU,IAAI,MAAM,GAAG,CAAC;AAC9C;AAAA,MAChB;AACY,iBAAW,QAAQ,mBAAmB,OAAO,IAAI;AAAA,IAC7D;AAGQ,QAAI,WAAW,WAAW,OAAO;AAC7B,iBAAW,KAAK,UAAU,MAAM;AAC5B,aAAK,oBAAoB,KAAK;AAAA,MAC9C,CAAa;AACD;AAAA,IACZ;AAEQ,iBAAa,WAAW,MAAM,iCAAiC;AAC/D,iBAAa,WAAW,SAAS,oCAAoC;AACrE,UAAM,EAAE,MAAAA,OAAM,UAAU,GAAG,GAAG,SAAS,OAAO,QAAQ,eAAe,YAAY,gBAAgB,SAAW,IAAG,MAAM;AAErH,UAAM,UAAU,YAAY,UAAU,aAAa,MAAM,MAAM,UAAU;AACzE,UAAM,EAAE,aAAY,IAAK;AAIzB,UAAM,cAAc,WAAW,KAAK,KAAK;AAKzC,UAAM,gBAAgB,WAAW;AAEjC,QAAI,gBAAgB,MAAM;AAC1B,QAAI,kBAAkB,QAAW;AAC7B,YAAM,aAAa,MAAM,MAAM;AAE/B,UAAI,eAAe,QAAW;AAC1B,wBAAgB,sBAAsB,WAAW,SAAS,QAAQ;AAAA,MAClF,OACiB;AACD,wBAAgB;AAAA,MAChC;AACY,YAAM,gBAAgB;AAAA,IAClC;AAEQ,UAAM,gBAAgB,gBAAgB;AACtC,UAAM,gBACF,gBAAgB,WAAW,KAAK,cAAc;AAElD,UAAM,eAAeA,MAAK,SAAS;AACnC,QAAI,eAAe,MAAM;AACzB,QAAI,CAAC,gBAAgB,aAAa,SAAS,cAAc;AACrD,qBAAe,IAAI,aAAa,eAAe,CAAC;AAAA,IAC5D;AACQ,UAAM,gBAAgB,MAAM;AAC5B,QAAI,CAAC,cAAc,OAAO;AACtB,WAAK,kBAAkB,KAAK;AAC5B,WAAK,kBAAkB,KAAK;AAC5B,oBAAc,QAAQ;AAAA,IAClC;AAIQ,QAAI,CAAC,uBAAuB,aAAa,OAAO;AAC5C,YAAM,WAAW,aAAa;AAC9B,UAAI,IAAI,SAAS,MAAM,cAAc,MACjC,IAAI,SAAS,MAAM,cAAc,MACjC,IAAI,UAAU,SAAS,MAAM,cAAc,MAC3C,IAAI,UAAU,SAAS,MAAM,cAAc,IAAI;AAC/C,aAAK,UAAU,OAAO,QAAQ;AAC9B;AAAA,MAChB;AAEY,mBAAa,QAAQ;AACrB,WAAK,UAAU,OAAO,SAAS;AAAA,IAC3C;AACQ,UAAM,EAAE,SAAS,UAAW,IAAG,MAAM;AAErC,QAAI,CAAC,aAAa,OAAO;AACrB,YAAM,qBAAqB,cAAc,eAAe,KAAK,cAAc;AAC3E,UAAI,CAAC,oBAAoB;AAErB;AAAA,MAChB;AACY,sBAAgB,cAAc,GAAG,GAAG,SAAS,eAAe,YAAY,SAAS,cAAc,KAAK,cAAc,KAAK,GAAG,eAAe,aAAa;AAAA,IAElK;AACQ,UAAM,QAAQ,mBAAmB,aAAa,eAAe,YAAY,eAAe,SAAS,eAAe,cAAc,WAAW,KAAK;AAC9I,QAAI,CAAC,OAAO;AAGR,WAAK,UAAU,OAAO,QAAQ;AAC9B;AAAA,IACZ;AACQ,UAAM,EAAE,kBAAkB,MAAM;AAChC,UAAM,OAAO,WAAW,MAAM,WAAW,MAAM,MAAM,MAAM,MAAMA,OAAM,WAAW,OAAO,QAAQ,UAAU,eAAe,eAAe,cAAc,SAAS,WAAW,aAAa,KAAK,YAAY,qBAAqB,YAAY,gBAAgB,QAAQ;AAClQ,UAAM,iBAAiB;AACvB,UAAM,kBAAkB,KAAK;AAC7B,UAAM,iBAAiB,KAAK;AAC5B,UAAM,eAAe;AACrB,UAAM,eAAe;AACrB,cAAU,0BAA0B,KAAK;AACzC,cAAU,aAAa,aAAa;AAEpC,QAAI,KAAK,gBAAgB;AACrB,YAAM,QAAQ,KAAK,OAAO;AAC1B,YAAM,QAAQ,KAAK,WAAW,gBAAgB;AAAA,IAC1D;AAKQ,SAAK,UAAU,OAAO,QAAQ;AAAA,EACtC;AAAA,EACI,YAAY,OAAO,WAAW,cAAc,OAAO,wBAAwB,uBAAuB;;AAC9F,QAAI,CAAC,MAAM,cAAc;AAErB;AAAA,IACZ;AACQ,UAAMxC,YAAW,KAAK,MAAM;AAC5B,iBAAaA,qBAAoB,iBAAiB;AAClD,UAAM,EAAE,UAAU,OAAO,SAAS,YAAY,QAAQ,UAAU,MAAM;AAEtE,UAAM,UAAU,YAAY,UAAU,aAAa,MAAM,MAAM,UAAU;AACzE,UAAM,EAAE,QAAQ,GAAG,QAAQ,GAAG,eAAe,cAAc,gBAAgB,YAAY,cAAgB,IAAG;AAC1G,QAAI,EAAE,aAAY,IAAK;AACvB,QAAI,CAAC,cAAc;AACf,YAAM,MAAMA,UAAS;AACrB,YAAM,SAAS,IAAI,aAAa;AAChC,YAAM,cAAc,IAAI,aAAc;AACtC,mBAAa,WAAW;AACxB,YAAM,eAAe,IAAI,iBAAiB;AAAA,QACtC;AAAA,UACI,QAAQ;AAAA,UACR,YAAY;AAAA,YACR,YAAY;AAAA,cACR,MAAM;AAAA,cACN,MAAM;AAAA;AAAA,cACN,MAAM,IAAI;AAAA;AAAA,cACV,YAAY;AAAA;AAAA,cACZ;AAAA;AAAA,cACA,QAAQ;AAAA;AAAA,YACX;AAAA,YACD,qBAAqB;AAAA,cACjB,MAAM;AAAA,cACN,MAAM;AAAA,cACN,MAAM,IAAI;AAAA,cACV,YAAY;AAAA,cACZ;AAAA,cACA,QAAQ,IAAI,aAAa;AAAA,YAC5B;AAAA,UACJ;AAAA,QACJ;AAAA,MACjB,CAAa;AACD,YAAM,iBAAiB;AACvB,mBAAa,MAAM,YAAY;AAC/B,qBAAe,MAAM;AAAA,IACjC;AACQ,QAAI,CAAC,gBAAgB;AACjB,YAAM,MAAMA,UAAS;AACrB,YAAM,UAASL,MAAA,6CAAc,UAAU,2BAAxB,OAAAA,MAAkD;AACjE,UAAI,gBAAgB,QAAQ,cAAc,IAAI,WAAW;AACzD,YAAM,iBAAiB;AAAA,IACnC;AACQ,iBAAa,UAAU;AACvB,QAAI,cAAc,YAAY,QAAQ;AAClC,mBAAa,cAAc,KAAK;AAChC,YAAM,cAAc,mBAAmB,eAAe,OAAO;AAC7D,UAAI,aAAa,OAAO;AACpB,cAAM,aAAa,QAAQ;AAC3B,uBAAe,cAAc,cAAc,aAAa,MAAM,YAAY;AAAA,MAC1F,OACiB;AACD,cAAM,aAAa,QAAQ;AAC3B,uBAAe,SAAS,aAAa,MAAM,YAAY;AAAA,MACvE;AAAA,IACA;AACQ,UAAM,WAAW,IAAI,kBAAkBK,UAAS,KAAKA,UAAS,SAAS,cAAc,KAAK,WAAW;AAAA,MACjG,WAAW,UAAU,YAAa;AAAA;AAAA;AAAA;AAAA,MAIlC,OAAO,gBAAgB,OAAO,KAAK;AAAA,MACnC,MAAM,cAAYJ,MAAA,WAAW,SAAX,gBAAAA,IAAiB,KAAK,SAAQ;AAAA,MAChD;AAAA,MACA;AAAA,MACA,OAAO,MAAM;AAAA,IAChB,GAAE,OAAO,cAAc,EAAE,QAAQ,OAAO,OAAO,MAAO,GAAE,GAAG,QAAQ,OAAO,wBAAwB,qBAAqB;AACxH,UAAM,WAAUC,MAAA,MAAM,eAAN,gBAAAA,IAAkB;AAClC,iBAAa,OAAO;AACpB,UAAM,aAAa,QAAQ;AAC3B,aAAS,WAAW,UAAU;AAC9B,aAAS,SAAS,MAAM;AACxB,aAAS,WAAW,MAAM;AAC1B,IAAAG,UAAS,YAAY,QAAQ;AAAA,EA+CrC;AAAA,EACI,gBAAgB,OAAO,YAAY;;AAC/B,UAAM,gBAAgB,OAAO,UAAU;AACvC,KAAAL,MAAA,MAAM,eAAN,gBAAAA,IAAkB,QAAQ,mBAAmB,OAAO;AAAA,EAC5D;AAAA,EACI,aAAa,OAAO;;AAChB,UAAM,aAAa,KAAK;AAExB,KAAAA,MAAA,MAAM,eAAN,gBAAAA,IAAkB,QAAQ,mBAAmB,OAAO;AAAA,EAC5D;AAAA;AAAA,EAEI,gBAAgB,OAAO;AACnB,WAAO,KAAK,MAAM,YAAY,gBAAgB,KAAK,iBAAiB,OAAO,KAAK;AAAA,EACxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,gBAAgB,OAAO;AACnB,UAAM,gBAAgB;AACtB,QAAI,MAAM,YAAY;AAClB,YAAM,WAAW,QAAQ,mBAAmB,OAAO,KAAK;AACxD,YAAM,aAAa;AAAA,IAC/B;AAAA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUI,sBAAsB,OAAO;AACzB,UAAM,aAAa,QAAQ;AAC3B,UAAM,cAAc,QAAQ;AAC5B,UAAM,QAAQ;AACd,UAAM,QAAQ;AACd,UAAM,YAAY,CAAE;AACpB,SAAK,UAAU,OAAO,SAAS;AAC/B,SAAK,oBAAoB,KAAK;AAAA,EACtC;AAAA,EACI,kBAAkB,OAAO;AACrB,UAAM,EAAE,GAAG,SAAS,MAAO,IAAG,MAAM;AACpC,UAAM,EAAE,cAAa,IAAK;AAC1B,kBAAc,KAAK;AACnB,kBAAc,KAAK,YAAY,SAAS,IAAI,QAAQ;AAAA,EAC5D;AAAA,EACI,kBAAkB,OAAO;AACrB,UAAM,EAAE,GAAG,SAAS,OAAQ,IAAG,MAAM;AACrC,UAAM,EAAE,cAAa,IAAK;AAC1B,kBAAc,KAAK;AACnB,kBAAc,KAAK,YAAY,SAAS,IAAI,SAAS;AAAA,EAC7D;AACA;ACtiBO,SAAS,iBAAiB,OAAO;AACpC,SAAO,UAAU,MAAM,UAAU;AACrC;AA8DO,SAAS,kBAAkB,SAAS,UAAU,UAAU;AAC3D,MAAI,SAAS,SAAS;AAClB,WAAO,SAAS;AAAA,EACxB;AAeI,QAAM,iBAAiB,QAAQ,YAAY,sDAAsD;AACjG,UAAQ,KAAK,iDAAiD,gBAAS,YAAU,QAC7E,qNAE0E;AAC9E,MAAI;AACJ,MAAI,eAAe,4BACf,eAAe,yBAAyB;AACxC,cAAU;AAAA,MACN,UAAU,eAAe,0BAA0B;AAAA,MACnD,WAAW,CAAC,eAAe,2BAA2B;AAAA,MACtD,SAAS;AAAA,IACZ;AAAA,EACT,OACS;AAGD,cAAU;AAAA,MACN,UAAU;AAAA,MACV,WAAW;AAAA,MACX,SAAS;AAAA,IACZ;AAAA,EACT;AAEI,WAAS,UAAU;AACnB,SAAO;AACX;AC5IA,MAAM,wBAAwB;AAW9B,SAAS,WAAW,cAAc,UAAU,YAAY,UAAU,SAAS;AACvE,QAAM,iBAAiB,iBAAiB,WAAW,MAAM,WAAW;AACpE,SAAQ,cAAc,WAAW,KAC7B,iBACA,KAAK,IAAI,YAAY,QAAQ,KAC5B,WAAW;AACpB;AACO,MAAM,6BAA6B;AAAA,EAItC,YAAY,QAAQ,SAAS;AAH7B;AACA;AACA;AAEI,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,YAAY,KAAK,cAAc,EAAE;AAAA,EAC9C;AAAA,EACI,IAAI,SAAS,GAAG;AACZ,SAAK,YAAY,KAAK,cAAc,CAAC;AAAA,EAC7C;AAAA,EACI,IAAI,WAAW;AACX,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,eAAe;AACX,WAAO,KAAK,UAAU;AAAA,EAC9B;AAAA,EACI,oBAAoB;AAChB,SAAK,SAAS,OAAO,KAAK,gBAAiB;AAC3C,SAAK,SAAS,eAAe,KAAK,UAAU;AAAA,EACpD;AAAA,EACI,kBAAkB;AACd,UAAM,KAAK,CAAC,KAAK,UAAU,UAAU;AACrC,UAAM,MAAM,CAAE;AACd,aAAS,IAAI,GAAG,IAAI,GAAG,QAAQ,IAAI,GAAG,KAAK;AACvC,UAAI,GAAG,CAAC,MAAM,WAAW,GAAG,CAAC,MAAM,cAAc;AAC7C,YAAI,KAAK,GAAG,CAAC,CAAC;AAAA,MAC9B,OACiB;AACD,YAAI,KAAK,IAAI,UAAG,CAAC,GAAC,IAAG;AAAA,MACrC;AAAA,IACA;AACQ,WAAO,GAAG,YAAK,UAAU,WAAS,KAAI,YAAK,UAAU,WAAW,KAAK,aAAY,GAAE,OAAM,WAAI,KAAK,GAAG;AAAA,EAC7G;AAAA,EACI,QAAQ;AACJ,QAAY,SAAS,OAAO;AACxB,YAAM,cAAc,KAAK,gBAAiB;AAC1C,UAAI;AACA,YAAI,CAAC,SAAS,MAAM,MAAM,aAAa,KAAK,UAAU,IAAI,GAAG;AAEzD,iBAAO,SAAS,MACX,KAAK,aAAa,KAAK,UAAU,IAAI,EACrC,MAAM,CAAC,QAAQ;AAEhB,oBAAQ,KAAK,+BAA+B,KAAK,WAAW;AAAA,UAC/D,GACI,KAAK,MAAM;AACZ,gBAAI,CAAC,SAAS,MAAM,MAAM,aAAa,KAAK,UAAU,IAAI,GAAG;AACzD,sBAAQ,KAAK,8BAA8B,WAAW;AAAA,YAClF;AAAA,UACA,CAAqB;AAAA,QACrB;AAAA,MACA,SACmB,GAAG;AACN,gBAAQ,KAAK,8CAA8C,WAAW;AAAA,MACtF;AAAA,IACA;AAAA,EACA;AAAA,EACI,sBAAsB;AAClB,UAAM,aAAa,CAAE;AACrB,UAAM,YAAY,KAAK,aAAc;AACrC,UAAM,cAAc,KAAK,UAAU,cAAc;AACjD,UAAM,eAAe,KAAK,UAAU,eAAe;AACnD,UAAM,WAAW,KAAK,UAAU,WAAW;AAC3C,QAAI,UAAU,KAAK,UAAU,YAAY,OACnC,OACA,KAAK,UAAU,UAAU;AAC/B,UAAM,IAAI,KAAK,UAAU,IAAI;AAC7B,UAAM,IAAI,KAAK,UAAU,IAAI;AAC7B,QAAI,gBAAgB,KAAK,UAAU,gBAAgB;AACnD,UAAM,QAAQ,KAAK,UAAU,QAAQ;AACrC,UAAM,QAAQ,KAAK,UAAU,QAAQ;AACrC,UAAM,QAAQ,KAAK,UAAU,QAAQ;AACrC,UAAM,QAAQ,KAAK,UAAU,QAAQ;AACrC,UAAM,iBAAiB,KAAK,UAAU,iBAAiB,KAAK;AAC5D,UAAM,aAAa,KAAK,UAAU,aAAa;AAC/C,UAAM,aAAa,KAAK,UAAU;AAElC,SAAK,kBAAmB;AACxB,iBAAa,UAAU;AACvB,UAAM,UAAU,kBAAkB,KAAK,UAAU,YAAY,QAAQ;AACrE,UAAM,gBAAgB,sBAAsB,SAAS,QAAQ,IAAI;AACjE,UAAM,aAAa,KAAK,UAAU,eAAe,OAC3C,KAAK,UAAU,aAAa,YAC5B;AACN,UAAM,YAAY,KAAK,UAAU;AACjC,UAAM,oBAAoB,cAAc,QAAQ,aAAa,IACvD,KAAK,MAAM,YAAY,UAAU,IACjC;AACN,UAAM,cAAc,KAAK,UAAU;AACnC,UAAM,eAAe,oBAAoB,KAAK,cAAc,IACtD,KAAK,IAAI,mBAAmB,WAAW,IACvC,KAAK,IAAI,mBAAmB,WAAW;AAE7C,QAAI,QAAQ,KAAK,OAAO,KAAK,aAAc;AAE3C,QAAI,aAAa,QAAQ;AACzB,QAAI,aAAa,IAAI;AACjB,eAAS,KAAK;AACd,mBAAa;AAAA,IACzB;AACQ,QAAI,CAAC,eAAe;AAChB,sBAAgB;AAAA,IAC5B;AAEQ,QAAI,KAAK,UAAU,gBAAgB,CAAC,KAAK,UAAU,UAAU;AACzD,UAAI;AACJ,cAAQ,KAAK,UAAU,cAAY;AAAA,QAC/B,KAAK;AACD,mBAAS;AACT;AAAA,QACJ,KAAK;AACD,mBAAS,KAAK,UAAU;AACxB;AAAA,QACJ;AACI,mBAAS,KAAK,UAAU;AAAA,MAC5C;AACY,WAAK,UAAU,OAAO,KAAK,SAAS,KAAK,UAAU,MAAM,gBAAgB,YAAY,MAAM;AAAA,IACvG;AAGQ,QAAI;AACJ,QAAI,KAAK,UAAU,UAAU;AACzB,kBAAY,KAAK,SAAS,KAAK,UAAU,MAAM,eAAe,eAAe,UAAU;AAAA,IACnG,OACa;AACD,kBAAY,EAAE,GAAG,KAAK,UAAU,KAAK,MAAM,gBAAgB,GAAG,GAAG,GAAI;AACrE,YAAM,IAAI,UAAU,EAAE;AACtB,eAAS,IAAI,GAAG,IAAI,IAAI,GAAG,KAAK;AAC5B,kBAAU,EAAE,KAAK,CAAC;AAAA,MAClC;AAAA,IACA;AACQ,QAAI,QAAQ,UAAU;AACtB,QAAI,gBAAgB,MAAM,SAAS,cAAc;AAC7C,YAAM,YAAY,MAAM,MAAM,GAAG,YAAY;AAC7C,UAAI,aAAa;AACjB,UAAI,KAAK,UAAU,gBAAgB;AAE/B,cAAMgD,KAAI,KAAK,UAAU,iBACnB,KAAK,YAAY,KAAK,UAAU,cAAc,IAC9C;AACN,cAAM,KAAK,KAAK,SAAS,UAAU,UAAU,SAAS,CAAC,GAAG,gBAAgBA,IAAG,eAAe,UAAU;AACtG,kBAAU,UAAU,SAAS,CAAC,IAAI,GAAG,UAAG,EAAE,CAAC,GAAI,YAAK,UAAU;AAC9D,qBAAa,CAAC,GAAG,EAAE,SAAS,IAAI,GAAG,EAAE,CAAC,IAAI,EAAE;AAAA,MAC5D,OACiB;AACD,qBAAa,CAAC,EAAE;AAAA,MAChC;AAEY,UAAI;AACJ,YAAM,IAAI,MAAM;AAChB,UAAI,IAAI;AACR,YAAM,IAAI,UAAU,EAAE;AACtB,WAAK,IAAI,cAAc,IAAI,GAAG,KAAK;AAC/B,mBAAW,CAAC,KAAK,GAAG,kBAAW,CAAC,IAAI,MAAM,IAAK,aAAM,CAAC;AACtD,YAAI,IAAI,IAAI,KAAK,UAAU,EAAE,IAAI,CAAC,GAAG;AACjC;AAAA,QACpB;AAAA,MACA;AACY,iBAAW,gBAAgB,WAAW,KAAK,IAAI;AAC/C,iBAAW,gBAAgB;AAC3B,cAAQ;AAAA,IACpB,OACa;AACD,iBAAW,gBAAgB;AAC3B,iBAAW,gBAAgB;AAAA,IACvC;AAEQ,QAAI,eAAe;AACnB,UAAM,aAAa,CAAE;AACrB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACnC,YAAM,YAAY,KAAK,YAAY,MAAM,CAAC,GAAG,aAAa,KAAK,MAAM,IAAI,aAAa;AACtF,iBAAW,KAAK,SAAS;AACzB,qBAAe,KAAK,IAAI,cAAc,SAAS;AAAA,IAC3D;AACQ,eAAW,aAAa;AACxB,QAAI,CAAC,GAAG;AAEJ,cAAQ,eAAe,cAAc;AACrC,mBAAa;AAAA,IACzB;AACQ,QAAI;AACJ,QAAI,GAAG;AACH,eAAS;AAAA,IACrB,OACa;AACD,eAAS,WAAW,KAAK,UAAU,cAAc,UAAU,YAAY,MAAM,QAAQ,OAAO;AAAA,IACxG;AACQ,QAAI,YAAY,MAAM;AAClB,gBAAU;AAAA,IACtB;AACQ,eAAW,IAAI;AACf,eAAW,IAAI;AACf,eAAW,QAAQ;AACnB,eAAW,YAAY;AACvB,QAAI,CAAC,OAAO;AAER,cAAQ;AAAA,IACpB;AACQ,QAAI,CAAC,QAAQ;AAET,eAAS;AAAA,IACrB;AACQ,QAAI,SAAS,OAAO;AAChB,cAAQ,KAAK,IAAI,OAAO,QAAQ,KAAK;AAAA,IACjD;AACQ,QAAI,SAAS,OAAO;AAChB,eAAS,KAAK,IAAI,QAAQ,QAAQ,KAAK;AAAA,IACnD;AACQ,eAAW,QAAQ;AACnB,eAAW,aAAa;AACxB,eAAW,SAAS;AACpB,eAAW,WAAW;AACtB,eAAW,QAAQ;AACnB,eAAW,QAAQ;AACnB,eAAW,QAAQ;AACnB,eAAW,QAAQ;AACnB,eAAW,aAAa;AACxB,eAAW,gBAAgB;AAC3B,eAAW,aAAa;AACxB,eAAW,UAAU;AACrB,eAAW,cAAc;AACzB,eAAW,eAAe;AAC1B,eAAW,gBAAgB;AAC3B,eAAW,aAAa;AACxB,eAAW,UAAU;AACrB,WAAO;AAAA,EACf;AAAA,EACI,KAAK,YAAY,eAAe;AAC5B,UAAM,YAAY,KAAK,aAAc;AAErC,UAAM,SAAQ,+CAAe,UAAS,WAAW;AACjD,UAAM,cAAa,+CAAe,eAAc,WAAW;AAC3D,UAAM,SAAS,gBACT,WAAW,KAAK,UAAU,cAAc,WAAW,UAAU,WAAW,YAAY,cAAc,MAAM,QAAQ,KAAK,UAAU,YAAY,OACvI,OACA,KAAK,UAAU,UAAU,SAAS,IACtC,WAAW;AAEjB,SAAK,QAAQ,QAAQ,KAAK,IAAI,KAAK,KAAK,WAAW,QAAQ,KAAK,UAAU,qBAAqB,GAAG,qBAAqB;AACvH,SAAK,QAAQ,SAAS,KAAK,IAAI,KAAK,KAAK,MAAM,GAAG,qBAAqB;AAEvE,SAAK,kBAAmB;AACxB,QAAI,WAAW,YAAY,KAAK;AAE5B,WAAK,SAAS,cAAc;AAC5B,WAAK,SAAS,SAAS,GAAG,GAAG,MAAM,IAAI;AACvC,WAAK,SAAS,cAAc;AAAA,IACxC;AACQ,QAAI,WAAW,SAAS,WAAW,OAAO;AACtC,WAAK,SAAS,UAAU,CAAC,WAAW,OAAO,CAAC,WAAW,KAAK;AAAA,IACxE;AACQ,QAAI;AACJ,QAAI;AACJ,UAAM,YAAY,CAAE;AACpB,UAAM,EAAE,QAAO,IAAK;AAIpB,UAAM,aAAa,UACb,QAAQ,WAAW,WAAW,WAC9B,WAAW;AAKjB,UAAM,oBAAoB,QAAQ,WAAW,QAAQ,aAAa,WAAW;AAE7E,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC1C,sBAAgB,MAAM,IAAI,WAAW,aAAa;AAElD,sBAAgB,IAAI,WAAW,aAAa;AAC5C,UAAI,KAAK,UAAU,iBAAiB,UAAU;AAC1C,0BAAkB,WAAW,aAAa,oBAAoB;AAAA,MAC9E,WACqB,KAAK,UAAU,iBAAiB,UAAU;AAC/C,yBAAiB,WAAW,aAAa;AAAA,MACzD;AACY,UAAI,KAAK,UAAU,cAAc,SAAS;AACtC,yBAAiB,WAAW,aAAa,WAAW,CAAC;AAAA,MACrE,WACqB,KAAK,UAAU,cAAc,UAAU;AAC5C,0BAAkB,WAAW,aAAa,WAAW,CAAC,KAAK;AAAA,MAC3E;AACY,uBAAiB,WAAW;AAC5B,gBAAU,KAAK;AAAA,QACX,MAAM,MAAM,CAAC;AAAA,QACb,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG,WAAW,CAAC;AAAA,MAC/B,CAAa;AAAA,IACb;AAEQ,QAAI,KAAK,UAAU,WAAW;AAC1B,YAAM,QAAQ,KAAK,UAAU;AAC7B,YAAM,WAAW,KAAK,UAAU,kBAAkB,aAAa,WAAW,WAAW;AACrF,YAAM,SAAS,KAAK,UAAU,kBAAkB;AAChD,YAAM,gBAAgB,KAAK,UAAU,yBAAyB,OACxD,KAAK,UAAU,uBAAuB,YACtC,WAAW;AACjB,YAAM,iBAAiB,KAAK,UAAU,0BAA0B,OAC1D,KAAK,UAAU,wBAAwB,YACvC,WAAW;AACjB,WAAK,SAAS,YAAY,cAAc,KAAK;AAC7C,eAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACvC,cAAM,WAAW,UAAU,CAAC;AAC5B,aAAK,SAAS,SAAS,SAAS,IAAI,eAAe,SAAS,IAAI,WAAW,UAAU,QAAQ,SAAS,IAAI,iBAAiB,eAAe,QAAQ;AAAA,MAClK;AAAA,IACA;AAEQ,QAAI,qBAAqB;AACzB,QAAI,KAAK,UAAU,QAAQ;AACvB,2BAAqB;AAAA,QACjB,KAAK,SAAS;AAAA,QACd,KAAK,SAAS;AAAA,QACd,KAAK,SAAS;AAAA,QACd,KAAK,SAAS;AAAA,MACjB;AACD,WAAK,SAAS,cAAc,cAAc,KAAK,UAAU,WAAW;AACpE,WAAK,SAAS,gBAAgB,KAAK,UAAU,gBAAgB;AAC7D,WAAK,SAAS,gBAAgB,KAAK,UAAU,gBAAgB;AAC7D,WAAK,SAAS,aAAa,KAAK,UAAU,aAAa;AAAA,IACnE;AACQ,SAAK,SAAS,YAAY,cAAc,KAAK,UAAU,SAAS;AAChE,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AAC9C,YAAM,WAAW,UAAU,CAAC;AAC5B,UAAI,WAAW,kBAAkB,GAAG;AAChC,aAAK,SAAS,SAAS,SAAS,MAAM,SAAS,GAAG,SAAS,CAAC;AAAA,MAC5E,OACiB;AACD,cAAM,YAAY,SAAS,KAAK,MAAM,EAAE;AACxC,YAAI,IAAI,SAAS;AACjB,iBAAS5B,KAAI,GAAG,IAAI,UAAU,QAAQA,KAAI,GAAGA,MAAK;AAC9C,eAAK,SAAS,SAAS,UAAUA,EAAC,GAAG,GAAG,SAAS,CAAC;AAClD,eAAK,KAAK,YAAY,UAAUA,EAAC,GAAG,WAAW,aAAa;AAAA,QAChF;AAAA,MACA;AAAA,IACA;AACQ,QAAI,oBAAoB;AACpB,WAAK,SAAS,cAAc,mBAAmB,CAAC;AAChD,WAAK,SAAS,gBAAgB,mBAAmB,CAAC;AAClD,WAAK,SAAS,gBAAgB,mBAAmB,CAAC;AAClD,WAAK,SAAS,aAAa,mBAAmB,CAAC;AAAA,IAC3D;AACQ,QAAI,WAAW,SAAS,WAAW,OAAO;AACtC,WAAK,SAAS,UAAU,WAAW,OAAO,WAAW,KAAK;AAAA,IACtE;AAAA,EACA;AAAA,EACI,SAAS,MAAM,eAAe,QAAQ;AAClC,UAAM,cAAc,KAAK,SAAS,YAAY,MAAM,EAAE;AACtD,UAAM,UAAU,KAAK;AACrB,UAAM,YAAY,KAAK,SAAS,YAAY,IAAI,EAAE;AAElD,QAAI,aAAa,eAAe;AAC5B,aAAO;AAAA,IACnB;AAEQ,QAAI,cAAc,KAAK,MAAO,gBAAgB,UAAW,SAAS;AAClE,QAAI,iBAAiB,KAAK,SAAS,YAAY,KAAK,UAAU,GAAG,WAAW,CAAC,EAAE,QAC3E;AAEJ,QAAI,iBAAiB,eAAe;AAChC,aAAO,cAAc,GAAG;AACpB,yBACI,KAAK,SAAS,YAAY,KAAK,UAAU,GAAG,WAAW,CAAC,EAAE,QACtD;AACR,YAAI,iBAAiB,eAAe;AAChC,yBAAe;AAAA,QACnC,OACqB;AACD;AAAA,QACpB;AAAA,MACA;AAAA,IAEA,OACa;AACD,aAAO,cAAc,SAAS;AAC1B,yBACI,KAAK,SAAS,YAAY,KAAK,UAAU,GAAG,WAAW,CAAC,EAAE,QACtD;AACR,YAAI,iBAAiB,eAAe;AAChC,yBAAe;AAAA,QACnC,OACqB;AAED,yBAAe;AACf;AAAA,QACpB;AAAA,MACA;AAAA,IACA;AAEQ,WAAQ,KAAK,UAAU,GAAG,WAAW,KAChC,iBAAiB,cAAc,SAAS;AAAA,EACrD;AAAA;AAAA;AAAA;AAAA;AAAA,EAKI,SAASyB,OAAM,eAAe,eAAe,SAAS,GAAG;AACrD,UAAM,aAAa;AACnB,UAAM,QAAQA,MAAK,MAAM,QAAQ;AACjC,QAAI,WAAW,CAAE;AACjB,UAAM,eAAe,CAAE;AACvB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACnC,YAAM,cAAc,CAAE;AACtB,UAAI,SAAS;AACb,UAAI,YAAY,gBAAgB;AAEhC,YAAM,QAAQ,MAAM,CAAC,EAAE,MAAM,UAAU;AACvC,YAAM,SAAS,MAAM,CAAC,EAAE,MAAM,UAAU,KAAK,CAAE;AAC/C,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACnC,cAAM,QAAQ,OAAO,IAAI,CAAC,KAAK;AAC/B,cAAM,OAAO,MAAM,CAAC;AACpB,cAAM,YAAY,KAAK,YAAY,MAAM,aAAa;AACtD,cAAM,qBAAqB,iBAAiB,KAAK,IAC3C,YACA,YAAY,KAAK,YAAY,OAAO,aAAa;AACvD,YAAI,MAAM,KAAK,qBAAqB,WAAW;AAC3C,cAAI,IAAI,GAAG;AACP,wBAAY,KAAK,MAAM;AACvB,qBAAS;AAAA,UACjC;AACoB,oBAAU;AACV,sBAAY,gBAAgB,aAAa,MAAM,IAAI,SAAS;AAAA,QAChF,OACqB;AACD,uBAAa;AACb,oBAAU,QAAQ;AAAA,QACtC;AAAA,MACA;AACY,kBAAY,KAAK,MAAM;AACvB,eAAS;AACT,iBAAW,SAAS,OAAO,WAAW;AACtC,UAAI,IAAI,MAAM,SAAS,GAAG;AACtB,qBAAa,KAAK,SAAS,MAAM;AAAA,MACjD;AAAA,IACA;AACQ,WAAO,EAAE,GAAG,UAAU,GAAG,aAAc;AAAA,EAC/C;AAAA,EACI,YAAY,MAAM,QAAQ,GAAG;AACzB,QAAI,CAAC,OAAO;AACR,aAAO,KAAK,SAAS,YAAY,IAAI,EAAE;AAAA,IACnD;AAEQ,WAAO,KAAK,MAAM,EAAE,EAAE,OAAO,CAAC,KAAK,SAAS;AAExC,UAAI,iBAAiB,IAAI,GAAG;AACxB,eAAO;AAAA,MACvB;AACY,aAAO,MAAM,KAAK,SAAS,YAAY,IAAI,EAAE,QAAQ;AAAA,IACxD,GAAE,CAAC;AAAA,EACZ;AAAA,EACI,cAAc,UAAU;AACpB,WAAO;AAAA,MACH,MAAM;AAAA,MACN,GAAG;AAAA,MACH,GAAG;AAAA,MACH,WAAW;AAAA,MACX,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,eAAe;AAAA,MACf,WAAW;AAAA,MACX,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,WAAW;AAAA,MACX,eAAe;AAAA,MACf,SAAS;AAAA,MACT,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,WAAW,CAAC,GAAK,GAAK,GAAK,CAAG;AAAA,MAC9B,aAAa;AAAA,MACb,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,aAAa,CAAC,GAAK,GAAK,GAAK,CAAG;AAAA,MAChC,eAAe;AAAA,MACf,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,gBAAgB,CAAC,GAAK,GAAK,GAAK,CAAG;AAAA,MACnC,iBAAiB;AAAA,MACjB,sBAAsB;AAAA,MACtB,uBAAuB;AAAA,MACvB,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,MACP,kBAAkB;AAAA,MAClB,mBAAmB;AAAA,MACnB,WAAW;AAAA,MACX,uBAAuB;AAAA,MACvB,GAAG;AAAA,IACN;AAAA,EACT;AACA;ACrgBA,MAAM,iBAAiB,OAAO,SAAS,cAAc,aAAa;AAIlE,MAAM,kBAAiB,oBAAe,aAAf,mBAAyB,UAC5C,eAAe;AACnB,SAAS,iBAAiB,OAAO;AAC7B,QAAM,EAAE,YAAY,WAAW,YAAY,aAAa,SAAQ,IAAK;AACrE,SAAO,CAAC,WAAW,YAAY,aAAa,GAAG,iBAAQ,OAAM,UAAU,EAAE,KAAK,GAAG;AACrF;AACO,MAAM,2BAA2B,aAAa;AAAA,EAUjD,YAAY,OAAO;AACf,UAAM,KAAK;AAVf;AACA;AAKA;AAAA;AAAA;AAAA;AAAA,wCAAe,CAAE;AACjB,2CAAkB,CAAC,KAAK,YAAY;AACpC,gCAAO;AA8PP,oCAAW,CAAC,UAAU;AAClB,YAAM,YAAY,iBAAiB,MAAM,KAAK;AAC9C,YAAM,aAAa,KAAK,MAAM,YAAY,gBAAgB,KAAK,iBAAiB,MAAM,OAAO,QAAQ;AACrG,mBAAa,YAAY,mCAAmC,iBAAW;AACvE,YAAM,WAAW;AAAA,QACb,UAAU;AAAA,QACV;AAAA;AAAA,QAEA,QAAQ;AAAA,MACX;AAED,UAAI,CAAC,MAAM,SAAS,QAAQ;AACxB,sBACK,KAAK,SAAS,EACd,KAAK,KAAK,aAAa,KAAK,MAAM,OAAO,SAAS,CAAC,EACnD,MAAM,KAAK,gBAAgB,KAAK,MAAM,OAAO,SAAS,CAAC;AAC5D;AAAA,MACZ;AAAA,IACK;AA7QG,QAAI,OAAO,oBAAoB,aAAa;AACxC,WAAK,SAAS,IAAI,gBAAgB,GAAG,CAAC;AAAA,IAClD,OACa;AACD,WAAK,SAAS,SAAS,cAAc,QAAQ;AAAA,IACzD;AAEQ,QAAI,UAAU,KAAK,OAAO,WAAW,MAAM;AAAA,MACvC,oBAAoB;AAAA,IAChC,CAAS;AACD,QAAI,CAAC,SAAS;AAIV,WAAK,SAAS,SAAS,cAAc,QAAQ;AAC7C,gBAAU,KAAK,OAAO,WAAW,MAAM;AAAA,QACnC,oBAAoB;AAAA,MACpC,CAAa;AAAA,IACb;AACQ,iBAAa,OAAO;AACpB,SAAK,UAAU;AAEf,SAAK,YAAY,IAAI,cAAc;AAAA,MAC/B,YAAY;AAAA,MACZ,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,IACrB,CAAS,CAAC;AAAA,EACV;AAAA;AAAA,EAEI,qBAAqB;AACjB,WAAO;AAAA,MACH,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,cAAM,WAAW;AACjB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,cAAM,WAAW;AACjB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,WAAW,CAAC,OAAO,UAAU;AACzB,cAAM,MAAM,YAAY;AACxB,cAAM,WAAW;AACjB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,aAAa,CAAC,OAAO,UAAU;AAC3B,cAAM,MAAM,cAAc;AAC1B,cAAM,WAAW;AACjB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,UAAU,CAAC,OAAO,UAAU;AACxB,cAAM,MAAM,WAAW;AACvB,cAAM,WAAW;AACjB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,MAAM,CAAC,OAAO,UAAU;AACpB,cAAM,MAAM,OAAO;AACnB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,WAAW,CAAC,OAAO,UAAU;AACzB,cAAM,MAAM,YAAY;AACxB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,OAAO,CAAC,OAAO,UAAU;AACrB,cAAM,MAAM,QAAQ;AACpB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,GAAG,CAAC,OAAO,UAAU;AACjB,cAAM,MAAM,IAAI;AAAA,MACnB;AAAA,MACD,GAAG,CAAC,OAAO,UAAU;AACjB,cAAM,MAAM,IAAI;AAAA,MACnB;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AACtB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,OAAO,CAAC,OAAO,UAAU;AACrB,cAAM,MAAM,QAAQ;AAEpB,YAAI,MAAM,MAAM,YAAY,QAAQ;AAChC,eAAK,sBAAsB,KAAK;AAAA,QACpD;AAAA,MACa;AAAA,MACD,QAAQ,CAAC,OAAO,UAAU;AACtB,cAAM,MAAM,SAAS;AAErB,YAAI,MAAM,MAAM,YAAY,QAAQ;AAChC,eAAK,sBAAsB,KAAK;AAAA,QACpD;AAAA,MACa;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AACtB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,SAAS,CAAC,OAAO,UAAU;AACvB,cAAM,MAAM,UAAU;AAAA,MACzB;AAAA,MACD,eAAe,CAAC,OAAO,UAAU;AAC7B,cAAM,MAAM,gBAAgB;AAC5B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,YAAY,CAAC,OAAO,UAAU;AAC1B,cAAM,MAAM,aAAa;AACzB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,UAAU,CAAC,OAAO,UAAU;AACxB,cAAM,MAAM,WAAW;AACvB,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,cAAc,CAAC,OAAO,UAAU;AAC5B,cAAM,MAAM,eAAe;AAC3B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,eAAe,CAAC,OAAO,UAAU;AAC7B,cAAM,MAAM,gBAAgB;AAC5B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,MACD,gBAAgB,CAAC,OAAO,UAAU;AAC9B,cAAM,MAAM,iBAAiB;AAC7B,aAAK,sBAAsB,KAAK;AAAA,MACnC;AAAA,IACJ;AAAA,EACT;AAAA;AAAA,EAEI,cAAc,OAAO;AAIjB,WAAO;AAAA,EACf;AAAA,EACI,oBAAoB,UAAU;AAC1B,WAAO,oBAAoB;AAAA,EACnC;AAAA,EACI,YAAY,UAAU;AAGlB,iBAAa,oBAAoB,aAAa;AAC9C,UAAM,aAAa,SAAS;AAI5B,QAAI,eAAe,cAAc;AAG7B,oBAAc,IAAI,SAAS,QAAQ;AAAA,IAC/C;AACQ,QAAI,UAAU,KAAK,aAAa,UAAU;AAC1C,QAAI,CAAC,SAAS;AACV,gBAAU,oBAAI,IAAK;AACnB,WAAK,aAAa,UAAU,IAAI;AAAA,IAC5C;AACQ,YAAQ,IAAI,QAAQ;AAAA,EAC5B;AAAA,EACI,YAAY,OAAO,MAAM;AACrB,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,MACR,iBAAiB;AAAA,MACjB,SAAS,IAAI,aAAc;AAAA,MAC3B,aAAa;AAAA,MACb,wBAAwB,IAAI,6BAA6B,KAAK,QAAQ,KAAK,OAAO;AAAA,MAClF,YAAY;AAAA,MACZ,qBAAqB;AAAA,MACrB,OAAO;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,cAAc;AAAA,MACd,WAAW;AAAA,QACP,aAAa;AAAA,QACb,aAAa;AAAA,QACb,WAAW;AAAA,QACX,yBAAyB;AAAA,QACzB,WAAW;AAAA,QACX,SAAS;AAAA,QACT,YAAY;AAAA,MACf;AAAA,IACJ;AAAA,EACT;AAAA,EACI,YAAY,OAAO;AAEf,QAAI,MAAM,WAAW,gBAAgB;AACjC,WAAK,UAAU,OAAO,SAAS;AAAA,IAK3C;AACQ,QAAI,MAAM,WAAW,UAAU;AAE3B;AAAA,IACZ;AAEQ,QAAI,CAAC,MAAM,UAAU;AACjB,aAAO,KAAK,SAAS,KAAK;AAAA,IACtC;AAEQ,QAAI,CAAC,MAAM,SAAS,QAAQ;AACxB;AAAA,IACZ;AACQ,QAAI,CAAC,MAAM,YAAY;AACnB,YAAM,aAAa,KAAK,oBAAoB,KAAK;AACjD,YAAM,QAAQ,MAAM,WAAW,aAAa,MAAM,WAAW,MAAM;AACnE,YAAM,QAAQ,MAAM,WAAW;AAC/B,WAAK,uBAAuB,KAAK;AAAA,IAC7C;AAAA,EAMA;AAAA,EACI,uBAAuB,OAAO;AAC1B,iBAAa,MAAM,UAAU;AAC7B,UAAM,OAAO,MAAM;AACnB,UAAM,UAAU,KAAK,MAAM,UAAU,YAAY,gBAAgB;AAAA,MAC7D,MAAK,SAAU,wBAAwB,YAAY;AAE/C,qBAAa,UAAU;AACvB,+BAAuB,KAAK,YAAY;AAAA,UACpC,OAAO,WAAW;AAAA,UAClB,YAAY,WAAW;AAAA,QAC3C,CAAiB;AACD,YAAI,KAAK,OAAO,UAAU,KAAK,KAAK,OAAO,WAAW,GAAG;AACrD,iBAAO;AAAA,QAC3B;AACgB,eAAO,KAAK,QAAQ,aAAa,GAAG,GAAG,KAAK,OAAO,OAAO,KAAK,OAAO,MAAM;AAAA,MAC5F,GAAc,KAAK,MAAM,MAAM,wBAAwB,MAAM,UAAU;AAAA,IACvE,CAAS;AACD,QAAI,MAAM,aAAa;AAEnB,YAAM,YAAY,UAAU;AAE5B,YAAM,YAAY,QAAQ,4BAA4B,MAAM,MAAM,KAAK;AAAA,IACnF,OACa;AAED,YAAM,cAAc,KAAK,MAAM,WAAW;AAAA,QACtC,QAAQ;AAAA,QACR;AAAA,QACA,UAAU;AAAA;AAAA;AAAA,QAGV,OAAO,4BAA4B,MAAM,MAAM,KAAK;AAAA,MACpE,CAAa;AACD,YAAM,cAAc;AAAA,IAChC;AACQ,SAAK,UAAU,OAAO,QAAQ;AAAA,EACtC;AAAA,EAoBI,oBAAoB,OAAO;;AACvB,UAAM,uBAAuB,WAAW;AAAA,MACpC,MAAM,MAAM,MAAM;AAAA,MAClB,WAAW,MAAM,MAAM;AAAA,MACvB,YAAY,MAAM,MAAM;AAAA,MACxB,aAAY7C,MAAA,MAAM,aAAN,gBAAAA,IAAgB;AAAA,MAC5B,UAAU,MAAM,MAAM;AAAA,MACtB,WAAW;AAAA,QACP,MAAM,MAAM;AAAA,QACZ,MAAM,MAAM;AAAA,QACZ,MAAM,MAAM;AAAA,MAC5B,EAAc,KAAK,GAAG;AAAA,MACV,WAAW,4BAA4B,MAAM,MAAM,KAAK;AAAA,MACxD,SAAS,MAAM,MAAM;AAAA,MACrB,UAAU,MAAM,MAAM,YAAY;AAAA,MAClC,eAAe,MAAM,MAAM,YAAY,SAAS,SAAY,MAAM,MAAM;AAAA,MACxE,eAAe,MAAM,MAAM;AAAA,MAC3B,aAAYC,MAAA,MAAM,MAAM,eAAZ,OAAAA,MAA0B;AAAA,MACtC,UAAU,MAAM,MAAM;AAAA,MACtB,WAAW,MAAM,MAAM,YAAY,SAC7B,MAAM,MAAM,SAAS,MAAM,MAAM,UACjC;AAAA,MACN,cAAc,MAAM,MAAM;AAAA,MAC1B,eAAe,MAAM,MAAM;AAAA,MAC3B,gBAAgB,MAAM,MAAM;AAAA,MAC5B,GAAG,MAAM,MAAM,YAAY,SAAS,MAAM,MAAM,QAAQ;AAAA,IAC3D;AACD,UAAM,aAAa,MAAM,uBAAuB,oBAAqB;AACrE,WAAO,MAAM;AAAA,EACrB;AAAA,EACI,cAAc;AAGV;AAAA,EACR;AAAA,EACI,aAAa,OAAO;AAChB,QAAI,MAAM,WAAW,aAAa;AAC9B;AAAA,IACZ;AACQ,UAAM,aAAa,KAAK;AACxB,QAAI,MAAM,aAAa;AACnB,YAAM,YAAY,QAAS;AAC3B,aAAO,MAAM;AAAA,IACzB;AACQ,WAAO,MAAM;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWI,sBAAsB,OAAO;AACzB,UAAM,aAAa;AACnB,SAAK,UAAU,OAAO,SAAS;AAC/B,SAAK,oBAAoB,KAAK;AAAA,EACtC;AAAA,EACI,aAAa,OAAO,WAAW;;AAC3B,QAAI,gBAAcD,MAAA,MAAM,aAAN,gBAAAA,IAAgB,cAAa,CAAC,MAAM,UAAU;AAC5D;AAAA,IACZ;AACQ,UAAM,SAAS,SAAS;AACxB,SAAK,oBAAoB,KAAK;AAAA,EACtC;AAAA,EACI,gBAAgB,OAAO,WAAW,OAAO;;AACrC,QAAI,gBAAcA,MAAA,MAAM,aAAN,gBAAAA,IAAgB,cAAa,CAAC,MAAM,UAAU;AAC5D;AAAA,IACZ;AAGQ,UAAM,SAAS,SAAS;AACxB,YAAQ,MAAM,2CAA2C,aAAM,SAAS,WAAS,MAAK,KAAK;AAC3F,SAAK,oBAAoB,KAAK;AAAA,EACtC;AACA;ACzXA,MAAM,QAAQ;AAAA,EACV,SAAS;AAAA,EACT,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AACP;AAIO,SAAS,WAAW,MAAM;AAC7B,MAAI,SAAS,YAAY;AACrB,WAAO;AAAA,EACf;AACI,QAAM,KAAM,SAAS,KAAM,OAAQ;AACnC,QAAM,IAAK,SAAS,KAAM,MAAO;AACjC,QAAM,IAAK,SAAS,IAAK,MAAO;AAChC,QAAM,IAAI,OAAO,MAAO;AACxB,SAAO,EAAE,SAAS,OAAO,GAAG,GAAG,GAAG,EAAG;AACzC;AAIO,SAAS,eAAe,MAAM;AACjC,MAAI,SAAS,YAAY;AACrB,WAAO;AAAA,EACf;AACI,QAAM,IAAK,SAAS,KAAM;AAC1B,QAAM,IAAK,SAAS,KAAM,MAAO;AACjC,QAAM,IAAK,SAAS,IAAK,MAAO;AAChC,QAAM,KAAK,OAAO,MAAO,OAAQ;AACjC,SAAO,EAAE,SAAS,OAAO,GAAG,GAAG,GAAG,EAAG;AACzC;AAIO,SAAS,WAAW,EAAE,GAAG,GAAG,GAAG,EAAC,GAAI;AACvC,SAAO,QAAQ,UAAC,KAAI,UAAC,KAAI,UAAC,KAAI,UAAC;AACnC;ACnCO,MAAM,0BAA0B,mBAAmB;AAAA,EAAnD;AAAA;AACH;AACA;AAAA;AAAA,EACA,OAAO;AACH,QAAI,KAAK,cAAc,UAAU,SAAS;AACtC;AAAA,IACZ;AACQ,SAAK,cAAc,SAAS,SAAS;AACrC,SAAK,cAAa,EACb,KAAK,CAAC,SAAS;AAChB,WAAK,cAAc,SAAS,UAAU,IAAI;AAC1C,WAAK,cAAe;AAAA,IACvB,GACI,MAAM,CAAC,QAAQ;AAChB,WAAK,cAAc,SAAS,UAAU,GAAG;AAAA,IACrD,CAAS;AAAA,EACT;AAAA,EACI,OAAO;AACH,SAAK,QAAQ;AACb,SAAK,YAAY;AACjB,SAAK,cAAc,SAAS,OAAO;AACnC,SAAK,iBAAiB,CAAC;AAAA,EAC/B;AAAA,EACI,gBAAgB;AAIZ,UAAM,OAAO,KAAK,YAAY,IAAI;AAClC,QAAI,KAAK,cAAc,YAAY;AAC/B,YAAM,EAAE,OAAO,OAAQ,IAAG,KAAK,cAAc;AAC7C,WAAK,iBAAiB,QAAQ,SAAS,IAAI;AAAA,IACvD;AAAA,EACA;AAAA,EACI,WAAW;AACP,WAAO,KAAK,UAAU;AAAA,EAC9B;AAAA,EACI,SAAS,OAAO;;AACZ,UAAM,QAAQ,KAAK;AACnB,iBAAa,OAAO,uCAAuC;AAC3D,QAAI,MAAM,SAAS;AACf,UAAI,KAAK,WAAW;AAChB,aAAK,YAAY;AACjB,aAAK,cAAe;AAAA,MACpC;AACY,aAAO;AAAA,IACnB;AACQ,UAAMH,OAAM,WAAW,KAAK;AAC5B,UAAIG,MAAA,KAAK,cAAL,gBAAAA,IAAgB,SAAQH,MAAK;AAC7B,aAAO,KAAK,UAAU;AAAA,IAClC;AACQ,UAAM,cAAc,KAAK,YAAY,OAAOA,IAAG;AAC/C,SAAK,YAAY;AAAA,MACb,KAAAA;AAAA,MACA,OAAO;AAAA,IACV;AACD,SAAK,cAAe;AACpB,WAAO;AAAA,EACf;AAAA,EACI,YAAY,QAAQ,OAAO;AACvB,UAAM,EAAE,OAAO,OAAM,IAAK;AAC1B,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,QAAQ;AACf,WAAO,SAAS;AAChB,UAAM,MAAM,OAAO,WAAW,IAAI;AAClC,QAAI,KAAK;AAEL,UAAI,YAAY;AAChB,UAAI,2BAA2B;AAC/B,UAAI,SAAS,GAAG,GAAG,OAAO,MAAM;AAEhC,UAAI,2BAA2B;AAC/B,UAAI,UAAU,QAAQ,GAAG,GAAG,OAAO,QAAQ,GAAG,GAAG,OAAO,MAAM;AAE9D,UAAI,2BAA2B;AAC/B,UAAI,UAAU,QAAQ,GAAG,GAAG,OAAO,QAAQ,GAAG,GAAG,OAAO,MAAM;AAAA,IAC1E;AACQ,WAAO;AAAA,EACf;AAAA,EACI,MAAM,gBAAgB;AAClB,UAAM,EAAE,KAAM,IAAG,MAAM,KAAK,cAAc,eAAgB;AAG1D,QAAI,gBAAgB,WAAW;AAC3B,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,QAAQ,KAAK;AACpB,aAAO,SAAS,KAAK;AACrB,YAAM,MAAM,OAAO,WAAW,IAAI;AAClC,UAAI;AACA,YAAI,aAAa,MAAM,GAAG,CAAC;AAC/B,WAAK,QAAQ;AACb,aAAO,EAAE,OAAO,KAAK,OAAO,QAAQ,KAAK,OAAQ;AAAA,IAC7D,WACiB,OAAO,gBAAgB,eAC5B,gBAAgB,aAAa;AAC7B,WAAK,QAAQ;AACb,aAAO,EAAE,OAAO,KAAK,OAAO,QAAQ,KAAK,OAAQ;AAAA,IAC7D;AACQ,WAAO,EAAE,OAAO,GAAG,QAAQ,EAAG;AAAA,EACtC;AACA;ACjGO,SAAS,UAAU,MAAM;;AAC5B,MAAI,KAAK,kBAAkB,mBAAmB;AAC1C,UAAM,SAAS,KAAK,OAAO;AAC3B,QAAI,WAAW,+BAA+B;AAC1C,cAAOI,OAAAD,MAAA,KAAK,gBAAL,gBAAAA,IAAkB,WAAlB,OAAAC,MAA4B;AAAA,IAC/C,WACiB,WAAW,iBAAiB;AACjC,YAAM,WAAUC,MAAA,KAAK,gBAAL,gBAAAA,IAAkB;AAClC,UAAI,SAAS;AACT,cAAMJ,UAAS,QAAQ,KAAK,CAACA,YAAW;;AACpC,iBAAOA,QAAO,SAAS,cAAYE,MAAAF,WAAA,gBAAAA,QAAQ,UAAR,gBAAAE,IAAe;AAAA,QACtE,CAAiB;AACD,eAAQF,WAAUA,QAAO,SAAS,YAAYA,QAAO,MAAM,UAAW;AAAA,MACtF;AAAA,IACA;AAAA,EACA;AACI,SAAO;AACX;AAGO,SAAS,UAAU,MAAM,YAAY,IAAI;;AAC5C,MAAI,KAAK,kBAAkB,mBAAmB;AAC1C,UAAM,SAAS,KAAK,OAAO;AAC3B,QAAI,WAAW,iBAAiB;AAC5B,YAAM,WAAUE,MAAA,KAAK,gBAAL,gBAAAA,IAAkB;AAClC,UAAI,WAAW,QAAQ,QAAQ;AAC3B,cAAMF,UAAS,QAAQ,KAAK,CAACA,YAAW;AACpC,iBAAQA,QAAO,SAAS,SAAS,qBAC7BA,QAAO,SACPA,QAAO,MAAM;AAAA,QACrC,CAAiB;AACD,eAAOA,WAAUA,QAAO;AAAA,MACxC;AAAA,IACA;AAAA,EACA;AACI,SAAO;AACX;AACO,SAAS,UAAU,GAAG,GAAG,OAAO,QAAQ,QAAQ;AACnD,QAAM,UAAU,OAAO,eAAe,IAAI;AAC1C,MAAI,CAAC,QAAQ,WAAW;AACpB,UAAM,wBAAwB,CAACmD,WAAU;AACrC,YAAM,YAAY,KAAK,IAAI,QAAQ,GAAG,SAAS,CAAC;AAChD,YAAM,kBAAkBA,OAAM,UAAUA,OAAM,WAAWA,OAAM,cAAcA,OAAM;AACnF,UAAI,kBAAkB,SAAS,kBAAkB,QAAQ;AACrD,cAAM,QAAQ,YACV,KAAK,IAAIA,OAAM,SAASA,OAAM,UAAUA,OAAM,aAAaA,OAAM,UAAU;AAC/E,QAAAA,OAAM,WAAW;AACjB,QAAAA,OAAM,YAAY;AAClB,QAAAA,OAAM,eAAe;AACrB,QAAAA,OAAM,cAAc;AAAA,MACpC;AAAA,IACS;AACD,UAAM,QAAQ,OAAO,WAAW,WAC1B;AAAA,MACE,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,MACb,YAAY;AAAA,IAC5B,IACc,EAAE,SAAS,GAAG,UAAU,GAAG,aAAa,GAAG,YAAY,GAAG,GAAG,OAAQ;AAC3E,0BAAsB,KAAK;AAC3B,SAAK,OAAO,IAAI,MAAM,SAAS,CAAC;AAChC,SAAK,OAAO,IAAI,QAAQ,MAAM,UAAU,CAAC;AACzC,SAAK,QAAQ,IAAI,QAAQ,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM,UAAU,MAAM,UAAU,GAAG,MAAM,KAAK,IAAI,IAAI,KAAK,EAAE;AAC1H,SAAK,OAAO,IAAI,OAAO,IAAI,SAAS,MAAM,WAAW;AACrD,SAAK,QAAQ,IAAI,QAAQ,MAAM,aAAa,IAAI,SAAS,MAAM,aAAa,MAAM,aAAa,MAAM,aAAa,GAAG,GAAG,MAAM,KAAK,EAAE;AACrI,SAAK,OAAO,IAAI,MAAM,YAAY,IAAI,MAAM;AAC5C,SAAK,QAAQ,IAAI,MAAM,YAAY,IAAI,SAAS,MAAM,YAAY,MAAM,YAAY,MAAM,YAAY,GAAG,MAAM,KAAK,IAAI,KAAK,EAAE;AAC/H,SAAK,OAAO,GAAG,IAAI,MAAM,OAAO;AAChC,SAAK,QAAQ,IAAI,MAAM,SAAS,IAAI,MAAM,SAAS,MAAM,SAAS,MAAM,SAAS,GAAG,KAAK,IAAI,MAAM,KAAK,EAAE;AAAA,EAClH,OACS;AACD,SAAK,UAAU,GAAG,GAAG,OAAO,QAAQ,MAAM;AAAA,EAClD;AACA;AACO,SAAS,WAAW,KAAK,GAAG,GAAG,OAAO,QAAQ,YAAY,GAAG,OAAO,WAAW;AAClF,MAAI,CAAC,WAAW;AACZ;AAAA,EACR;AACI,MAAI,IAAI,KAAK;AACb,MAAI,IAAI,KAAK;AACb,UAAQ,WAAS;AAAA,IACb,KAAK;AACD,WAAK;AACL,WAAK;AACL,WAAK,QAAQ;AACb,WAAK;AACL;AAAA,IACJ,KAAK;AACD,WAAK,IAAI;AACT,WAAK;AACL,WAAK,IAAI;AACT,WAAK,IAAI;AACT;AAAA,IACJ,KAAK;AACD,WAAK;AACL,WAAK,IAAI;AACT,WAAK,IAAI;AACT,WAAK,IAAI;AACT;AAAA,IACJ,KAAK;AACD,WAAK;AACL,WAAK;AACL,WAAK;AACL,WAAK,IAAI;AACT;AAAA,EACZ;AACI,MAAI,UAAW;AACf,MAAI,YAAY;AAChB,MAAI,cAAc,WAAW,eAAe,wBAAS,CAAC,CAAC;AACvD,MAAI,OAAO,IAAI,EAAE;AACjB,MAAI,OAAO,IAAI,EAAE;AACjB,MAAI,OAAQ;AAChB;AC/GO,MAAM,2BAA2B,aAAa;AAAA,EAQjD,YAAY,SAAS;AACjB,UAAM,OAAO;AARjB;AACA;AACA;AACA;AACA,iDAAwB;AACxB,yCAAgB;AAChB;AAGI,SAAK,OAAO;AACZ,SAAK,UAAU,WAAW;AAC1B,UAAM,EAAE,QAAQ,YAAY,WAAY,IAAG;AAC3C,SAAK,SAAS;AACd,SAAK,UAAU,OAAO,WAAW,IAAI;AACrC,SAAK,aAAa;AAClB,SAAK,aAAa,aAAa,kBAAkB,UAAU,IAAI;AAG/D,SAAK,eAAe;AAAA,MAChB,MAAM;AAAA,MACN,OAAO,CAAE;AAAA,MACT,QAAQ,IAAI,kBAAkB,eAAe;AAAA,MAC7C,kBAAkB,MAAM,MAAM;AAC1B,eAAO,CAAE;AAAA,MACZ;AAAA,IACJ;AAAA,EACT;AAAA,EACI,QAAQ;AAEJ,SAAK,OAAO,QAAQ,KAAK,OAAO;AAChC,UAAM,MAAM,KAAK;AACjB,QAAI,KAAK,YAAY;AACjB,YAAM,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,KAAK;AAC1B,UAAI,YAAY,QAAQ,UAAC,MAAK,UAAC,MAAK,UAAC,MAAK,WAAI,KAAG;AACjD,UAAI,SAAS,GAAG,GAAG,KAAK,OAAO,OAAO,KAAK,OAAO,MAAM;AAAA,IACpE;AACQ,QAAI,MAAM,KAAK,YAAY,KAAK,UAAU;AAAA,EAClD;AAAA,EACI,SAAS;AAAA,EAEb;AAAA,EACI,QAAQ,MAAM;;AACV,UAAM,MAAM,KAAK;AACjB,UAAM,EAAE,IAAI,IAAI,OAAO,QAAQ,OAAO,SAAS,SAAS,SAAS,IAAI,IAAI,IAAI,IAAI,aAAY,IAAM;AACnG,QAAI,UAAU,KAAK;AACnB,QAAI,aAAa;AACjB,QAAI;AACJ,QAAI,SAAS;AACT,UAAI,mBAAmB,YAAY;AAC/B,gBAAQ,QAAQ;AAChB,kBAAU,QAAQ;AAAA,MAClC;AACY,mBAAa,QAAQ;AACrB,UAAI,QAAQ,UAAU,SAAS;AAC3B,mBAAW,KAAM;AACjB;AAAA,MAChB;AACY,UAAI,QAAQ,UAAU,YAAY,CAAC,WAAW,SAAQ,GAAI;AACtD;AAAA,MAChB;AAAA,IACA;AACQ,UAAM,QAAQ,WAAW,OAAO;AAChC,UAAM,eAAe,OAAO;AAC5B,UAAM,cAAc,aAAa,UAAU,KAAK,aAAa,WAAW;AACxE,UAAM,cAAc,YAAY,WAAW,YAAY;AACvD,UAAM,gBAAgB,QAAQ,KAAK,MAAM;AACzC,UAAM,SAAS,gBAAgB,UAAU,IAAI,IAAI;AACjD,UAAM,SAAS,gBAAgB,UAAU,IAAI,IAAI;AACjD,QAAI,gBAAgB,eAAe,QAAQ;AACvC,UAAI,KAAM;AAAA,IACtB;AACQ,QAAI,aAAa;AACb,YAAM,OAAO,IAAI,OAAQ;AACzB,YAAM,EAAE,GAAG,GAAG,OAAAjC,QAAO,QAAAC,QAAQ,IAAG;AAChC,WAAK,KAAK,GAAG,GAAGD,QAAOC,OAAM;AAC7B,UAAI,KAAK,IAAI;AAAA,IACzB;AACQ,QAAI,cAAc;AASd,YAAM,QAAQ,KAAK;AACnB,UAAI,aAAa,IAAI,IAAI,IAAI,IAAI,KAAK,OAAO,KAAK,KAAK;AACvD,UAAI,MAAM,OAAO,KAAK;AACtB,UAAI,UAAU,CAAC,IAAI,CAAC,EAAE;AAAA,IAClC;AACQ,QAAI,QAAQ;AACR,YAAM,OAAO,IAAI,OAAQ;AACzB,gBAAU,KAAK,MAAM,IAAI,IAAI,OAAO,QAAQ,MAAM;AAClD,UAAI,KAAK,IAAI;AAAA,IACzB;AACQ,QAAI,YAAY;AACZ,YAAM,QAAQ,WAAW,SAAS,KAAK;AACvC,UAAI,eAAcjB,MAAA,MAAM,MAAN,OAAAA,MAAW;AAC7B,UAAI,OAAO;AACP,YAAI,UAAU,OAAO,MAAM,GAAG,MAAM,GAAG,MAAM,OAAO,MAAM,QAAQ,IAAI,IAAI,OAAO,MAAM;AAAA,MACvG,OACiB;AACD,YAAI,UAAU,OAAO,IAAI,IAAI,OAAO,MAAM;AAAA,MAC1D;AACY,UAAI,cAAc;AAAA,IAC9B,WACiB,aAAa;AAClB,UAAI,OAAO;AACX,UAAI,OAAO;AACX,UAAI;AACJ,UAAI,YAAY,SAAS;AAErB,eAAO;AACP,eAAO,KAAK;AACZ,mBAAW,WAAW,OAAO;AAAA,MAC7C,OACiB;AAED,eAAO,KAAK;AACZ,eAAO;AACP,mBAAW,WAAW,OAAO;AAAA,MAC7C;AACY,YAAM,WAAW,IAAI,qBAAqB,IAAI,IAAI,MAAM,IAAI;AAC5D,eAAS,aAAa,GAAG,WAAW,KAAK,CAAC;AAC1C,eAAS,aAAa,GAAG,WAAW,QAAQ,CAAC;AAC7C,UAAI,YAAY;AAChB,UAAI,SAAS,IAAI,IAAI,OAAO,MAAM;AAAA,IAC9C,OACa;AACD,UAAI,YAAY,WAAW,KAAK;AAChC,UAAI,SAAS,IAAI,IAAI,OAAO,MAAM;AAAA,IAC9C;AACQ,QAAI,UAAU,OAAO,OAAO;AACxB,YAAM,cAAc,OAAO;AAC3B,YAAM,mBAAmB,OAAO,QAAQ;AACxC,YAAM,cAAc,WAAW,gBAAeC,MAAA,OAAO,UAAP,OAAAA,MAAgB,CAAC,CAAC;AAChE,UAAI,UAAW;AACf,UAAI,YAAY;AAChB,UAAI,cAAc;AAClB,UAAI,cAAc;AAClB,UAAI,QAAQ;AACR,kBAAU,KAAK,KAAK,KAAK,kBAAkB,KAAK,kBAAkB,QAAQ,aAAa,SAAS,aAAa,MAAM;AACnH,YAAI,OAAQ;AAAA,MAC5B,OACiB;AACD,YAAI,WAAW,KAAK,kBAAkB,KAAK,kBAAkB,QAAQ,aAAa,SAAS,WAAW;AAAA,MACtH;AACY,UAAI,cAAc;AAAA,IAC9B,WACiB,eAAe;AACpB,YAAM,YAAY,UAAU,MAAM,KAAK;AACvC,YAAM,cAAc,UAAU,MAAM,OAAO;AAC3C,YAAM,eAAe,UAAU,MAAM,QAAQ;AAC7C,YAAM,aAAa,UAAU,MAAM,MAAM;AACzC,UAAI,WAAW;AACX,mBAAW,KAAK,IAAI,IAAI,OAAO,QAAQ,UAAU,OAAO,UAAU,OAAO,KAAK;AAAA,MAC9F;AACY,UAAI,aAAa;AACb,mBAAW,KAAK,IAAI,IAAI,OAAO,QAAQ,YAAY,OAAO,YAAY,OAAO,OAAO;AAAA,MACpG;AACY,UAAI,cAAc;AACd,mBAAW,KAAK,IAAI,IAAI,OAAO,QAAQ,aAAa,OAAO,aAAa,OAAO,QAAQ;AAAA,MACvG;AACY,UAAI,YAAY;AACZ,mBAAW,KAAK,IAAI,IAAI,OAAO,QAAQ,WAAW,OAAO,WAAW,OAAO,MAAM;AAAA,MACjG;AAAA,IACA;AACQ,QAAI,gBAAgB,eAAe,QAAQ;AACvC,UAAI,QAAS;AAAA,IACzB;AAAA,EACA;AAAA,EACI,iBAAiB,eAAe;AAC5B,WAAO,IAAI,kBAAkB,KAAK,cAAc,aAAa;AAAA,EACrE;AAAA,EACI,mBAAmB;AACf,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,kBAAkB;AACd,WAAO,KAAK;AAAA,EACpB;AAAA,EACI,iBAAiB;AAAA,EAErB;AAAA,EACI,cAAc,MAAM;AAAA,EAExB;AAAA,EACI,gBAAgB,MAAM;AAAA,EAE1B;AAAA,EACI,gBAAgB;AACZ,WAAO;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMI,iBAAiB,OAAO;AACpB,SAAK,aAAa,QAAQ,kBAAkB,KAAK,IAAI;AAAA,EAC7D;AACA;AChOA,MAAM,mBAAmB;AAAA,EACrB,OAAO,CAAC,MAAM;AACV,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,WAAW,OAAO,GAAG,UAAK;AAAA,EAC5C;AAAA,EACD,GAAG,CAAC,MAAM;AACN,WAAO,EAAE,MAAM,QAAQ,OAAO,GAAG,UAAC,MAAM;AAAA,EAC3C;AAAA,EACD,GAAG,CAAC,MAAM;AACN,WAAO,EAAE,MAAM,OAAO,OAAO,GAAG,UAAC,MAAM;AAAA,EAC1C;AAAA,EACD,OAAO,CAAC,MAAM;AACV,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,SAAS,OAAO,GAAG,UAAC,MAAM;AAAA,EAC5C;AAAA,EACD,QAAQ,CAAC,MAAM;AACX,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,UAAU,OAAO,GAAG,UAAC,MAAM;AAAA,EAC7C;AAAA,EACD,QAAQ,MAAM;AAAA,EACd,YAAY,MAAM;AAAA,EAClB,UAAU,MAAM;AAAA,EAChB,WAAW,MAAM;AAAA,EACjB,YAAY,MAAM;AAAA,EAClB,aAAa,MAAM;AAAA,EACnB,YAAY,MAAM;AAAA,EAClB,eAAe,MAAM;AAAA,EACrB,WAAW,MAAM;AAAA,EACjB,gBAAgB,MAAM;AAAA,EACtB,UAAU,MAAM;AAAA,EAChB,SAAS,MAAM;AAAA,EACf,eAAe,MAAM;AAAA,EACrB,UAAU,CAAC,MAAM;AACb,QAAI,MAAM,OAAO;AACb,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,YAAY,OAAO,IAAI,WAAW,UAAW;AAAA,EAC/D;AAAA,EACD,UAAU,CAAC,MAAM;AACb,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,aAAa,OAAO,UAAU,UAAC,QAAQ;AAAA,EACzD;AAAA,EACD,OAAO,CAAC,MAAM;AACV,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,aAAa,OAAO,SAAS,UAAC,KAAK;AAAA,EACrD;AAAA,EACD,QAAQ,CAAC,MAAM;AACX,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,aAAa,OAAO,UAAU,UAAC,KAAK;AAAA,EACtD;AAAA,EACD,QAAQ,CAAC,MAAM;AACX,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,aAAa,OAAO,UAAU,UAAC,KAAK;AAAA,EACtD;AAAA,EACD,OAAO,CAAC,MAAM;AACV,QAAI,MAAM,GAAG;AACT,aAAO;AAAA,IACnB;AACQ,WAAO,EAAE,MAAM,SAAS,OAAO,mBAAmB,CAAC,EAAG;AAAA,EACzD;AACL;AACA,MAAM,qBAAqB,CAAC,UAAU;AAClC,QAAM,KAAK,QAAQ,OAAQ;AAC3B,QAAM,IAAK,SAAS,IAAK;AACzB,QAAM,IAAK,SAAS,KAAM;AAC1B,QAAM,IAAK,SAAS,KAAM;AAC1B,SAAO,QAAQ,UAAC,KAAI,UAAC,KAAI,UAAC,KAAI,UAAC;AACnC;AACA,MAAM,iBAAiB;AAAA,EACnB,IAAI;AACR;AAWA,MAAM,kBAAkB,oBAAI,IAAI;AAAA,EAC5B,GAAG,OAAO,KAAK,gBAAgB;AAAA,EAC/B,GAAG,OAAO,KAAK,cAAc;AAAA;AAAA,EAE7B;AAAA,EACA;AACJ,CAAC;AACM,MAAM,UAAU;AAAA,EAOnB,YAAY,QAAQ,UAAU;AAN9B,gCAAO;AACP,kCAAS;AACT,kCAAS;AACT,iCAAQ;AACR,kCAAS;AACT,kCAAS;;AAEL,QAAI,wBAAyB;AACzB;AACJ,QAAI,CAAC,UAAU;AACX,YAAM,IAAI,MAAM,sBAAsB;AAAA,IAClD;AAEQ,SAAK,SAAS,KAAK,MAAKA,MAAA,SAAS,cAAT,OAAAA,MAAsB,SAAQD,MAAA,SAAS,4BAAT,OAAAA,MAAoC,EAAE;AAC5F,SAAK,QAAQ,KAAK,MAAK,cAAS,aAAT,YAAqB,SAAQE,MAAA,SAAS,4BAAT,OAAAA,MAAoC,EAAE;AAC1F,SAAK,UAAS,cAAS,4BAAT,YAAoC;AAClD,SAAK,UAAS,cAAS,4BAAT,YAAoC;AAClD,SAAK,SAAS;AACd,SAAK,OAAO,SAAS,cAAc,KAAK;AACxC,SAAK,gBAAiB;AACtB,aAAS,KAAK,YAAY,KAAK,IAAI;AAEnC,UAAM,mBAAmB,IAAI,iBAAiB,KAAK,gBAAgB,KAAK,IAAI,CAAC;AAC7E,qBAAiB,QAAQ,QAAQ;AAAA,MAC7B,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,SAAS;AAAA,IACrB,CAAS;AAED,UAAM,iBAAiB,IAAI,eAAe,KAAK,gBAAgB,KAAK,IAAI,CAAC;AACzE,mBAAe,QAAQ,MAAM;AAE7B,WAAO,iBAAiB,UAAU,KAAK,gBAAgB,KAAK,IAAI,CAAC;AACjE,YAAQ,KAAK,oDAAoD;AAAA,EACzE;AAAA,EACI,kBAAkB;AACd,QAAI,KAAK,SAAS,QAAQ,KAAK,WAAW,MAAM;AAC5C;AAAA,IACZ;AAEQ,UAAM,OAAO,KAAK,OAAO,sBAAuB;AAChD,UAAM,MAAM,SAAS,gBAAgB,YAAY,KAAK;AACtD,UAAM,OAAO,SAAS,gBAAgB,aAAa,KAAK;AACxD,SAAK,KAAK,KAAK;AACf,SAAK,KAAK,MAAM,OAAO,GAAG,aAAI;AAC9B,SAAK,KAAK,MAAM,MAAM,GAAG,YAAG;AAC5B,SAAK,KAAK,MAAM,QAAQ,GAAG,YAAK,OAAK;AACrC,SAAK,KAAK,MAAM,SAAS,GAAG,YAAK,QAAM;AACvC,SAAK,KAAK,MAAM,WAAW;AAC3B,SAAK,KAAK,MAAM,kBAAkB;AAClC,SAAK,KAAK,MAAM,YAAY,SAAS,YAAK,QAAM,MAAK,YAAK,QAAM;AAChE,SAAK,KAAK,MAAM,WAAW;AAC3B,SAAK,KAAK,MAAM,SAAS;AAAA,EACjC;AAAA,EACI,UAAU,IAAI,YAAY;AACtB,UAAM,MAAM,SAAS,cAAc,KAAK;AACxC,QAAI,MAAM,WAAW;AACrB,QAAI,KAAK,GAAG,SAAU;AAEtB,eAAWL,QAAO,YAAY;AAC1B,WAAK;AAAA,QAAmB;AAAA;AAAA,QAExBA;AAAA,QAAK,WAAWA,IAAG;AAAA,QAAG;AAAA,MAAU;AAAA,IAC5C;AACQ,WAAO;AAAA,EACf;AAAA,EACI,WAAW,MAAM;AACb,UAAM,MAAM,KAAK,UAAU,KAAK,IAAI,KAAK,KAAK;AAC9C,QAAI,OAAO;AACX,SAAK,MAAM;AACX,SAAK,GAAG,cAAc,MAAM,IAAI,aAAa,SAAS,YAAY,CAAC;AACnE,SAAK,GAAG,YAAY,MAAM,IAAI,aAAa,SAAS,UAAU,CAAC;AAC/D,SAAK,GAAG,eAAe,MAAM,IAAI,aAAa,SAAS,aAAa,CAAC;AAErE,WAAO,KAAK,YAAY,MAAM,GAAG;AAAA,EACzC;AAAA,EACI,eAAe,MAAM;AACjB,UAAM,MAAM,KAAK,UAAU,KAAK,IAAI,KAAK,KAAK;AAC9C,QAAI,OAAO;AACX,SAAK,MAAM;AACX,WAAO,KAAK,YAAY,MAAM,GAAG;AAAA,EACzC;AAAA,EACI,YAAY,MAAM,KAAK;AAEnB,oBAAgB,QAAQ,CAAC,aAAa;AAClC,UAAI,eAAe,OAAO,yBAAyB,MAAM,QAAQ;AACjE,UAAI,iBAAiB,QAAW;AAE5B,cAAM,QAAQ,OAAO,eAAe,IAAI;AACxC,uBAAe,OAAO,yBAAyB,OAAO,QAAQ;AAAA,MAC9E;AACY,UAAI,iBAAiB,QAAW;AAC5B;AAAA,MAChB;AACY,aAAO,eAAe,MAAM,UAAU;AAAA,QAClC,MAAM;;AAEF,kBAAOG,MAAA,6CAAc,QAAd,gBAAAA,IAAmB,KAAK;AAAA,QAClC;AAAA,QACD,KAAK,CAAC,UAAU;;AACZ,WAAAA,MAAA,6CAAc,QAAd,gBAAAA,IAAmB,KAAK,MAAM;AAC9B,eAAK,mBAAmB,KAAK,UAAU,OAAO,KAAK,KAAK;AAAA,QAC3D;AAAA,QACD,cAAc;AAAA,QACd,YAAY;AAAA,MAC5B,CAAa;AAAA,IACb,CAAS;AACD,UAAM,kBAAkB,KAAK;AAC7B,WAAO,eAAe,MAAM,WAAW;AAAA,MACnC,OAAO,MAAM;AACT,aAAK,YAAY,KAAK,EAAE;AACxB,wBAAgB,KAAK,IAAI;AAAA,MAC5B;AAAA,IACb,CAAS;AAED,UAAM,kBAAkB,KAAK;AAC7B,WAAO,eAAe,MAAM,WAAW;AAAA,MACnC,OAAO,CAAC,OAAO,aAAa;AACxB,cAAM,sBAAsB,gBAAgB,KAAK,MAAM,OAAO,QAAQ;AACtE,cAAM,gBAAgB,oBAAoB,MAAM,KAAK,mBAAmB;AACxE,4BAAoB,QAAQ,MAAM;AAC9B,eAAK,YAAY,KAAK,OAAO,QAAQ;AACrC,iBAAO,cAAe;AAAA,QACzB;AACD,eAAO;AAAA,MACV;AAAA,IACb,CAAS;AACD,WAAO;AAAA,EACf;AAAA,EACI,YAAY,IAAI;AACZ,UAAM,MAAM,SAAS,eAAe,GAAG,SAAQ,CAAE;AACjD,+BAAK;AAAA,EACb;AAAA,EACI,mBAAmB,KAAK,UAExB,OAAO,OAAO;;AACV,QAAI,KAAK,SAAS,QAAQ,UAAU,UAAa,UAAU,MAAM;AAC7D;AAAA,IACZ;AAIQ,QAAI,aAAa,UAAU;AACvB,YAAM,WAAW,MAAM;AAGvB,UAAI,aAAa,GAAG;AAChB,aAAK,KAAK,YAAY,GAAG;AACzB;AAAA,MAChB;AACY,YAAM,SAAS,SAAS,eAAe,SAAS,SAAQ,CAAE;AAC1D,uCAAQ,YAAY;AACpB;AAAA,IACZ;AAEQ,QAAI,aAAa,QAAQ;AACrB,UAAI,YAAY,OAAO,KAAK;AAG5B,UAAI,MAAM,aAAa;AACvB;AAAA,IACZ;AAIQ,QAAI,aAAa,SAAS,OAAO;AAC7B,UAAI,aAAa,YAAY,OAAO,KAAK,CAAC;AAC1C;AAAA,IACZ;AASQ,QAAI,iBAAiB,QAAQ,GAAG;AAC5B,YAAM,uBAAsBA,MAAA,iBAAiB,cAAjB,gBAAAA,IAAA,uBAA6B;AACzD,UAAI,wBAAwB,MAAM;AAC9B;AAAA,MAChB;AACY,UAAI,OAAO,wBAAwB,UAAU;AACzC,YAAI,MAAM,YAAY,qBAAqB,OAAO,KAAK,CAAC;AACxD;AAAA,MAChB;AACY,UAAI,OAAO,wBAAwB,UAAU;AACzC,YAAIgC,SAAQ,oBAAoB;AAChC,YAAI,aAAa,KAAK;AAClB,gBAAM,QAAQ,MAAM;AACpB,gBAAM,QAAQ,MAAM;AACpB,cAAI,OAAO;AACP,YAAAA,SAAQ,GAAG,gBAASA,MAAK,IAAI,QAAQ,OAAK;AAAA,UAClE;AAAA,QACA,WACyB,aAAa,KAAK;AACvB,gBAAM,QAAQ,MAAM;AACpB,gBAAM,SAAS,MAAM;AACrB,cAAI,OAAO;AACP,YAAAA,SAAQ,GAAG,gBAASA,MAAK,IAAI,SAAS,OAAK;AAAA,UACnE;AAAA,QACA;AACgB,YAAI,MAAM,YAAY,oBAAoB,MAAMA,MAAK;AAAA,MACrE;AACY;AAAA,IACZ;AAEQ,QAAI,eAAe,QAAQ,GAAG;AAC1B,YAAM,cAAc,eAAe,QAAQ;AAC3C,UAAI,CAAC,aAAa;AACd;AAAA,MAChB;AACY,UAAI,aAAa,OAAO,WAAW,GAAG,OAAO,KAAK,CAAC;AACnD;AAAA,IACZ;AAEQ,QAAI,aAAa,QAAQ;AACrB,iBAAWnC,QAAO,OAAO;AAErB,cAAM,WAAW,MAAMA,IAAG;AAC1B,YAAI,aAAa,QAAW;AACxB,cAAI,gBAAgB,QAAQ,OAAAA,KAAK;AAAA,QACrD,OACqB;AACD,cAAI,aAAa,QAAQ,OAAAA,OAAO,OAAO,QAAQ,CAAC;AAAA,QACpE;AAAA,MACA;AACY;AAAA,IACZ;AAAA,EACA;AAAA;AAAA,EAEI,YAAY,KAAK,OAAO,UAAU;AAC9B,UAAM;AAAA,MAAE,WAAW;AAAA,MAAM,OAAAE,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,IAKzC,IAAa;AACL,UAAM,EAAE,GAAG,GAAG,OAAO,QAAQ,QAAQ,GAAG,WAAW,GAAG,QAAQ,GAAG,OAAO,QAAQ,OAAM,IAAM;AAE5F,aAAS,UAAU;AACf,iBAAW,MAAM;AACb,YAAI,MAAM,MAAM,GAAG,WAAI,SAAS,QAAM;AACtC,YAAI,MAAM,OAAO,GAAG,WAAI,QAAQ,QAAM;AACtC,YAAI,MAAM,QAAQ,GAAG,cAAK;AAC1B,YAAI,MAAM,SAAS,GAAG,eAAM;AAC5B,YAAI,MAAM,UAAU,GAAG;AACvB,YAAI,MAAM,SAAS,GAAG,iBAAQ;AAC9B,YAAI,MAAM,QAAQ,GAAG;AACrB,YAAI,MAAM,QAAQ,mBAAmB,KAAK;AAAA,MAC7C,GAAE,QAAQ;AAAA,IACvB;AACQ,eAAW,SAASA,MAAK;AAAA,EACjC;AACA;AC+sBA,MAAM,SAAS,MAAM;AA6BrB,MAAM,WAAW;ACnlCV,SAAS,oBAAoB;AAChC,MAAI,YAAY,oBAAI,IAAK;AACzB,WAAS,UAAU,UAAU;AACzB,cAAU,IAAI,QAAQ;AACtB,WAAO,MAAM,UAAU,OAAO,QAAQ;AAAA,EAC9C;AACI,MAAI,SAAS;AACb,WAAS,QAAQ,IAAI,SAAS;AAC1B,QAAI;AACA,aAAO,EAAE,SAAS;AACtB,UAAM,IAAI;AAAA,MACN;AAAA,MACA;AAAA,MACA,kBAAkB;AAAA,MAClB,gBAAgB,MAAO,EAAE,mBAAmB;AAAA,IAC/C;AACD,eAAW,KAAK;AACZ,QAAE,SAAS;AAAA,QACP,GAAG;AAAA,QACH,MAAM,EAAE;AAAA,QACR,OAAO,CAAC,UAAU;AACd,oBAAU,SAAS;AACnB,YAAE,SAAS,IAAI,EAAE,GAAG,SAAS,SAAS,OAAO;AAAA,QACjE;AAAA,MACA,CAAa;AACL,WAAO,CAAC,EAAE;AAAA,EAClB;AACI,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EACH;AACL;AAEA,IAAI;AACG,SAAS,mBAAmB;AAC/B,MAAI,CAAC,OAAO,QAAQ,SAAS,OAAO,QAAQ,MAAM,UAAU,MAAM;AAC9D,WAAO,QAAQ,aAAa,EAAE,GAAG,OAAO,QAAQ,OAAO,QAAQ,OAAO,QAAQ,SAAS,EAAC,GAAI,EAAE;AAAA,EACtG;AACI,UAAQ,OAAO,QAAQ,MAAM;AACjC;AACe;AACX,mBAAkB;AACtB;AACO,SAAS,UAAU,OAAO;AAC7B,SAAO;AAAA,IACH,GAAG;AAAA,IACH,QAAQ,OAAO,QAAQ,SAAS,OAAO,QAAQ,MAAM;AAAA,EACxD;AACL;AACO,SAAS,mBAAmB,QAAQ,OAAO;AAC9C,MAAI,SAAS;AACb,SAAO,MAAM;AACT,UAAM,YAAY;AAClB,qBAAkB;AAClB,UAAM,QAAQ,aAAa,OAAO,OAAO,QAAQ;AACjD,QAAI,QAAQ;AACR,eAAS;AACT;AAAA,IACZ;AACQ,QAAI,SAAS,MAAM,KAAK,GAAG;AACvB,eAAS;AACT,aAAO,QAAQ,GAAG,CAAC,KAAK;AAAA,IACpC,OACa;AACD,aAAQ;AAAA,IACpB;AAAA,EACK;AACL;ACnEA,MAAM,iBAAiB;AACvB,MAAM,gBAAgB;AACf,MAAM,WAAW;AACjB,SAAS,cAAc,MAAM,YAAY,OAAO;AACnD,QAAM,IAAI,KAAK,QAAQ,eAAe,IAAI;AAC1C,SAAO,IAAK,aAAa,QAAQ,KAAK,CAAC,IAAI,IAAI,MAAM,IAAK;AAC9D;AACO,SAAS,YAAY,MAAM,MAAM,MAAM;AAC1C,MAAI,eAAe,KAAK,IAAI,GAAG;AAC3B,WAAO;AAAA,EACf;AACI,QAAMJ,YAAW,cAAc,IAAI;AACnC,QAAM,WAAW,QAAQ,cAAc,IAAI;AAC3C,MAAI,SAAS;AACb,MAAI,CAAC,YAAY,KAAK,WAAW,GAAG,GAAG;AACnC,aAASA;AAAA,EACjB,WACa,SAAS,cAAc,QAAQA,UAAS,YAAW,CAAE,MAAM,GAAG;AACnE,aAASA,YAAW;AAAA,EAC5B,OACS;AACD,aAAS;AAAA,EACjB;AACI,UAAQ,UAAU,OAAO,cAAc,MAAM,CAAC,MAAM;AACxD;AACO,SAAS,UAAU,OAAO,SAAS;AACtC,MAAI,SAAS,MAAM;AACf,UAAM,IAAI,MAAM,OAAO;AAAA,EAC/B;AACI,SAAO;AACX;AACO,SAAS,UAAU,MAAM,IAAI;AAChC,SAAO,cAAc,IAAI,EAAE,QAAQ,gBAAgB,EAAE,IAAI,cAAc,EAAE;AAC7E;AACO,SAAS,oBAAoB,KAAK;AACrC,QAAMoB,UAAS,CAAE;AACjB,MAAI,aAAa,QAAQ,CAAC,OAAOlB,SAAQ;AACrC,QAAIA,QAAOkB,SAAQ;AACf,UAAI,MAAM,QAAQA,QAAOlB,IAAG,CAAC;AACzB,QAAAkB,QAAOlB,IAAG,EAAE,KAAK,KAAK;AAAA;AAEtB,QAAAkB,QAAOlB,IAAG,IAAI,CAACkB,QAAOlB,IAAG,GAAG,KAAK;AAAA,IACjD;AAEY,MAAAkB,QAAOlB,IAAG,IAAI;AAAA,EAC1B,CAAK;AACD,SAAOkB;AACX;AACO,SAAS,cAAc,MAAM,SAAS,cAAc;AACvD,QAAM,CAAC,SAAS,KAAK,IAAI,KAAK,MAAM,MAAM,CAAC;AAC3C,QAAM,WAAW,QAAQ,MAAM,GAAG,EAAE,OAAO,OAAO;AAClD,QAAM,MAAM,SAAS;AACrB,SAAO,CAAC,aAAa;AACjB,UAAM,cAAc,SAAS,MAAM,GAAG,EAAE,OAAO,OAAO;AACtD,UAAM,UAAU,YAAY,SAAS;AACrC,QAAI,UAAU,KAAM,UAAU,KAAK,UAAU,UAAa,CAAC,SAAU;AACjE,aAAO;AAAA,IACnB;AACQ,UAAM,QAAQ;AAAA,MACV,MAAM,MAAM,KAAK;AAAA,MACjB,QAAQ;AAAA,IACX;AACD,UAAM,cAAc,CAAC,MAAM,iBAAiB,SAAY,SAAY,aAAa,CAAC;AAClF,aAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC1B,YAAM,UAAU,SAAS,CAAC;AAC1B,YAAM,UAAU,QAAQ,CAAC,MAAM;AAC/B,YAAM,aAAa,UAAU,YAAY,CAAC,IAAI,YAAY,CAAC,EAAE,YAAa;AAC1E,YAAMlB,OAAM,UAAU,QAAQ,MAAM,CAAC,IAAI,QAAQ,YAAa;AAC9D,UAAI,WAAW,aAAa,YAAY,YAAYA,IAAG,CAAC,GAAG;AACvD,cAAM,OAAOA,IAAG,IAAI;AAAA,MACpC,WACqB,WAAW,CAAC,aAAa,YAAYA,IAAG,GAAG;AAChD,eAAO;AAAA,MACvB;AACY,YAAM,QAAQ,IAAI;AAAA,IAC9B;AACQ,QAAI,OAAO;AACP,YAAM,YAAY,UAAU,YAAY,MAAM,CAAC,OAAO,EAAE,KAAK,GAAG,IAAI;AACpE,UAAI,aAAa,WAAW,YAAY,KAAK,CAAC,GAAG;AAC7C,cAAM,OAAO,KAAK,IAAI;AAAA,MACtC,OACiB;AACD,eAAO;AAAA,MACvB;AAAA,IACA;AACQ,WAAO;AAAA,EACV;AACL;AACA,SAAS,aAAa,OAAO,QAAQ;AACjC,QAAM,UAAU,CAAC,MAAM,MAAM;AAC7B,MAAI,WAAW,QAAW;AACtB,WAAO;AAAA,EACf,WACa,OAAO,WAAW,UAAU;AACjC,WAAO,QAAQ,MAAM;AAAA,EAC7B,WACa,OAAO,WAAW,YAAY;AACnC,WAAO,OAAO,KAAK;AAAA,EAC3B,WACa,MAAM,QAAQ,MAAM,GAAG;AAC5B,WAAO,OAAO,KAAK,OAAO;AAAA,EAClC,WACa,kBAAkB,QAAQ;AAC/B,WAAO,OAAO,KAAK,KAAK;AAAA,EAChC;AACI,SAAO;AACX;AACO,SAAS,WAAW,OAAO;AAC9B,QAAM,CAAC,SAAS,KAAK,IAAI,MAAM,QAAQ,MAAM,MAAM,CAAC;AACpD,QAAM,WAAW,QAAQ,MAAM,GAAG,EAAE,OAAO,OAAO;AAClD,SAAO,SAAS,OAAO,CAAC,OAAO,YAAY,SAAS,QAAQ,WAAW,GAAG,IAAI,IAAI,IAAI,SAAS,UAAU,UAAU,SAAY,IAAI,EAAE;AACzI;AACO,SAAS,iBAAiB,IAAI;AACjC,QAAM,MAAM,oBAAI,IAAK;AACrB,QAAM,QAAQ,SAAU;AACxB,SAAO,IAAI,MAAM,IAAI;AAAA,IACjB,IAAI,GAAG,UAAU;AACb,UAAI,CAAC,IAAI,IAAI,QAAQ,GAAG;AACpB,qBAAa,OAAO,MAAM,IAAI,IAAI,UAAU,WAAW,MAAM,GAAE,EAAG,QAAQ,CAAC,CAAC,CAAC;AAAA,MAC7F;AACY,aAAO,IAAI,IAAI,QAAQ,EAAG;AAAA,IAC7B;AAAA,IACD,2BAA2B;AACvB,aAAO;AAAA,QACH,YAAY;AAAA,QACZ,cAAc;AAAA,MACjB;AAAA,IACJ;AAAA,IACD,UAAU;AACN,aAAO,QAAQ,QAAQ,IAAI;AAAA,IACvC;AAAA,EACA,CAAK;AACL;AAuBO,SAAS,gBAAgB,SAAS;AACrC,MAAI,QAAQ,kBAAkB,KAAK,OAAO;AAC1C,MAAI,CAAC;AACD,WAAO,CAAC,OAAO;AACnB,MAAI,SAAS,QAAQ,MAAM,GAAG,MAAM,KAAK;AACzC,MAAI,SAAS,QAAQ,MAAM,MAAM,QAAQ,MAAM,CAAC,EAAE,MAAM;AACxD,QAAM,WAAW,CAAC,QAAS,UAAU,MAAM,CAAC,CAAG;AAM/C,SAAQ,QAAQ,kBAAkB,KAAK,MAAM,GAAI;AAC7C,aAAS,KAAM,UAAU,MAAM,CAAC,CAAG;AACnC,aAAS,OAAO,MAAM,MAAM,CAAC,EAAE,MAAM;AAAA,EAC7C;AACI,SAAO,gBAAgB,MAAM,EAAE,OAAO,CAAC,SAAS,cAAc,CAAC,GAAG,SAAS,GAAG,SAAS,IAAI,OAAK,IAAI,SAAS,CAAC,GAAG,EAAE;AACvH;ACxKA,MAAM,gBAAgB;AACf,MAAM,mBAAmB,cAAe;AACxC,MAAM,kBAAkB,cAAe;AACvC,MAAM,YAAY,MAAM,UAAU,WAAW,gBAAgB,GAAG,kEAAkE;AAiC7H,MAAC,cAAc,MAAM,UAAS,EAAG,iBAAgB;AAWtD,MAAM,cAAc,MAAM,UAAS,EAAG;AA4BtC,MAAM,kBAAkB,MAAM;AACjC,QAAM,MAAM,UAAS,EAAG;AACxB,SAAO,CAAC,KAAK,UAAU,OAAO,IAAI,eAAe,MAAM,MAAM,IAAI,IAAI,KAAK,QAAQ,GAAG,QAAQ,WAAW;AAC5G;AAYO,MAAM,WAAW,CAAC,MAAM,iBAAiB;AAC5C,QAAM,WAAW,YAAa;AAC9B,QAAM,WAAW,WAAW,MAAM,gBAAgB,KAAI,CAAE,EAAE,IAAI,CAAAqD,UAAQ,cAAcA,OAAM,QAAW,YAAY,CAAC,CAAC;AACnH,SAAO,WAAW,MAAM;AACpB,eAAW,WAAW,YAAY;AAC9B,YAAM,QAAQ,QAAQ,SAAS,QAAQ;AACvC,UAAI;AACA,eAAO;AAAA,IACvB;AAAA,EACA,CAAK;AACL;AAoGO,SAAS,aAAa,UAAU,OAAO,IAAI;AAC9C,QAAM,EAAE,WAAW,SAAAC,UAAS,MAAM,UAAA3B,WAAU,KAAI,IAAK;AACrD,QAAM,SAAS,CAACA,aAAa,MAAM,QAAQA,SAAQ,KAAK,CAACA,UAAS;AAClE,QAAM,SAAS;AAAA,IACX,KAAK;AAAA,IACL;AAAA,IACA,SAAS2B,YAAW;AAAA,IACpB;AAAA,EACH;AACD,SAAO,QAAQ,SAAS,IAAI,EAAE,OAAO,CAAC,KAAK,iBAAiB;AACxD,eAAW,gBAAgB,gBAAgB,YAAY,GAAG;AACtD,YAAM,OAAO,UAAU,MAAM,YAAY;AACzC,UAAI,UAAU,SAAS,OAAO,KAAK,MAAM,MAAM,CAAC,EAAE,CAAC;AACnD,gBAAU,QACL,MAAM,GAAG,EACT,IAAI,CAAC,MAAM;AACZ,eAAO,EAAE,WAAW,GAAG,KAAK,EAAE,WAAW,GAAG,IAAI,IAAI,mBAAmB,CAAC;AAAA,MAC3E,GACI,KAAK,GAAG;AACb,UAAI,KAAK;AAAA,QACL,GAAG;AAAA,QACH;AAAA,QACA;AAAA,QACA,SAAS,cAAc,SAAS,CAAC,QAAQ,SAAS,YAAY;AAAA,MAC9E,CAAa;AAAA,IACb;AACQ,WAAO;AAAA,EACV,GAAE,EAAE;AACT;AACO,SAAS,aAAa,QAAQ,QAAQ,GAAG;AAC5C,SAAO;AAAA,IACH;AAAA,IACA,OAAO,WAAW,OAAO,OAAO,SAAS,CAAC,CAAC,IAAI,MAAQ;AAAA,IACvD,QAAQ,UAAU;AACd,YAAM,UAAU,CAAE;AAClB,eAAS,IAAI,OAAO,SAAS,GAAG,KAAK,GAAG,KAAK;AACzC,cAAM,QAAQ,OAAO,CAAC;AACtB,cAAM,QAAQ,MAAM,QAAQ,QAAQ;AACpC,YAAI,CAAC,OAAO;AACR,iBAAO;AAAA,QAC3B;AACgB,gBAAQ,QAAQ;AAAA,UACZ,GAAG;AAAA,UACH;AAAA,QACpB,CAAiB;AAAA,MACjB;AACY,aAAO;AAAA,IACnB;AAAA,EACK;AACL;AACA,SAAS,QAAQ,OAAO;AACpB,SAAO,MAAM,QAAQ,KAAK,IAAI,QAAQ,CAAC,KAAK;AAChD;AACO,SAAS,eAAe,UAAU,OAAO,IAAI,QAAQ,CAAE,GAAE,WAAW,IAAI;AAC3E,QAAM,YAAY,QAAQ,QAAQ;AAClC,WAAS,IAAI,GAAG,MAAM,UAAU,QAAQ,IAAI,KAAK,KAAK;AAClD,UAAM,MAAM,UAAU,CAAC;AACvB,QAAI,OAAO,OAAO,QAAQ,UAAU;AAChC,UAAI,CAAC,IAAI,eAAe,MAAM;AAC1B,YAAI,OAAO;AACf,YAAM,SAAS,aAAa,KAAK,IAAI;AACrC,iBAAW,SAAS,QAAQ;AACxB,cAAM,KAAK,KAAK;AAChB,cAAM,eAAe,MAAM,QAAQ,IAAI,QAAQ,KAAK,IAAI,SAAS,WAAW;AAC5E,YAAI,IAAI,YAAY,CAAC,cAAc;AAC/B,yBAAe,IAAI,UAAU,MAAM,SAAS,OAAO,QAAQ;AAAA,QAC/E,OACqB;AACD,gBAAM,SAAS,aAAa,CAAC,GAAG,KAAK,GAAG,SAAS,MAAM;AACvD,mBAAS,KAAK,MAAM;AAAA,QACxC;AACgB,cAAM,IAAK;AAAA,MAC3B;AAAA,IACA;AAAA,EACA;AAEI,SAAO,MAAM,SAAS,WAAW,SAAS,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAC9E;AACO,SAAS,gBAAgB,UAAU,UAAU;AAChD,WAAS,IAAI,GAAG,MAAM,SAAS,QAAQ,IAAI,KAAK,KAAK;AACjD,UAAM,QAAQ,SAAS,CAAC,EAAE,QAAQ,QAAQ;AAC1C,QAAI,OAAO;AACP,aAAO;AAAA,IACnB;AAAA,EACA;AACI,SAAO,CAAE;AACb;AACA,SAAS,eAAe,MAAM,OAAO,cAAc;AAC/C,QAAM,SAAS,IAAI,IAAI,QAAQ;AAC/B,QAAM,MAAM,WAAW,UAAQ;AAC3B,UAAM,QAAQ,KAAM;AACpB,QAAI;AACA,aAAO,IAAI,IAAI,OAAO,MAAM;AAAA,IACxC,SACe,KAAK;AACR,cAAQ,MAAM,gBAAgB,aAAO;AACrC,aAAO;AAAA,IACnB;AAAA,EACK,GAAE,QAAQ;AAAA,IACP,QAAQ,CAAC,GAAG,MAAM,EAAE,SAAS,EAAE;AAAA,EACvC,CAAK;AACD,QAAM,WAAW,WAAW,MAAM,IAAG,EAAG,QAAQ;AAChD,QAAM,SAAS,WAAW,MAAM,IAAG,EAAG,QAAQ,IAAI;AAClD,QAAM,OAAO,WAAW,MAAM,IAAG,EAAG,IAAI;AACxC,QAAMtD,OAAM,MAAM;AAClB,QAAM,UAAU,GAAG,QAAQ,MAAM,oBAAoB,IAAG,CAAE,CAAC;AAC3D,SAAO;AAAA,IACH,IAAI,WAAW;AACX,aAAO,SAAU;AAAA,IACpB;AAAA,IACD,IAAI,SAAS;AACT,aAAO,OAAQ;AAAA,IAClB;AAAA,IACD,IAAI,OAAO;AACP,aAAO,KAAM;AAAA,IAChB;AAAA,IACD,IAAI,QAAQ;AACR,aAAO,MAAO;AAAA,IACjB;AAAA,IACD,IAAI,MAAM;AACN,aAAOA,KAAK;AAAA,IACf;AAAA,IACD,OAAO,eAAe,aAAa,OAAO,IAAI,iBAAiB,OAAO;AAAA,EACzE;AACL;AACA,IAAI;AACG,SAAS,YAAY;AACxB,SAAO;AACX;AAKO,SAAS,eAAe,OAAO;AAEtC;AACO,SAAS,oBAAoB,aAAa,UAAU,YAAY,UAAU,IAAI;AACjF,QAAM,EAAE,QAAQ,CAAC,QAAQ,SAAS,GAAG,QAAQ,CAAE,MAAK;AACpD,QAAM,YAAY,MAAM,cAAc,OAAK;AAC3C,QAAM,aAAa,MAAM,eAAe,OAAK;AAC7C,QAAM,cAAc,MAAM,eAAe,kBAAmB;AAC5D,QAAMF,YAAW,YAAY,IAAI,QAAQ,QAAQ,EAAE;AACnD,MAAIA,cAAa,QAAW;AACxB,UAAM,IAAI,MAAM,GAAG,OAAAA,WAAQ,4BAA2B;AAAA,EAC9D,WACaA,aAAY,CAAC,OAAQ,EAAC,OAAO;AAClC,cAAU,EAAE,OAAOA,WAAU,SAAS,MAAM,QAAQ,OAAO;AAAA,EACnE;AACI,QAAM,CAAC,WAAW,YAAY,IAAI,aAAa,KAAK;AAEpD,MAAI;AAEJ,QAAM,aAAa,CAAC,WAAW,cAAc;AACzC,QAAI,UAAU,UAAU,UAAW,KAAI,UAAU,UAAU,MAAO;AAC9D;AACJ,QAAI,yBAAyB;AACzB,mBAAa,IAAI;AACrB,aAAS;AACT,2BAAuB;AACvB,oBAAgB,MAAM;AAClB,UAAI,yBAAyB;AACzB;AACJ,mBAAa,qBAAqB,KAAK;AACvC,eAAS,qBAAqB,KAAK;AAG/B,kBAAY,CAAC,EAAE,UAAQ,KAAK,OAAO,OAAK,EAAE,OAAO,CAAC;AAAA,IAClE,CAAS,EAAE,QAAQ,MAAM;AACb,UAAI,yBAAyB;AACzB;AAEJ,YAAM,MAAM;AACR,iBAAS;AACT,YAAI,cAAc;AACd,sBAAY,oBAAoB;AACpC,qBAAa,KAAK;AAClB,+BAAuB;AAAA,MACvC,CAAa;AAAA,IACb,CAAS;AAAA,EACJ;AACD,QAAM,CAAC,WAAW,YAAY,IAAI,aAAa,OAAQ,EAAC,KAAK;AAC7D,QAAM,CAAC,OAAO,QAAQ,IAAI,aAAa,OAAQ,EAAC,KAAK;AACrD,QAAM,WAAW,eAAe,WAAW,OAAO,MAAM,YAAY;AACpE,QAAM,YAAY,CAAE;AACpB,QAAM,cAAc,aAA0C,EAAE;AAChE,QAAM,UAAU,WAAW,MAAM;AAC7B,QAAI,OAAO,QAAQ,iBAAiB,YAAY;AAC5C,aAAO,gBAAgB,YAAY,QAAQ,aAAa,SAAS,QAAQ,CAAC;AAAA,IACtF;AACQ,WAAO,gBAAgB,YAAY,SAAS,QAAQ;AAAA,EAC5D,CAAK;AACD,QAAM,cAAc,MAAM;AACtB,UAAM,IAAI,QAAS;AACnB,UAAMoB,UAAS,CAAE;AACjB,aAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,KAAK;AAC/B,aAAO,OAAOA,SAAQ,EAAE,CAAC,EAAE,MAAM;AAAA,IAC7C;AACQ,WAAOA;AAAA,EACV;AACD,QAAMA,UAAS,MAAM,gBACf,MAAM,cAAc,aAAa,QAAQ,IACzC,iBAAiB,WAAW;AAClC,QAAM,YAAY;AAAA,IACd,SAASpB;AAAA,IACT,MAAM,MAAMA;AAAA,IACZ,QAAQ,MAAM;AAAA,IACd,YAAY,IAAI;AACZ,aAAO,YAAYA,WAAU,EAAE;AAAA,IAC3C;AAAA,EACK;AAED,qBAAmB,GAAG,QAAQ,CAAAyD,YAAU,WAAW,UAAUA,OAAM,GAAG,EAAE,OAAO,KAAM,EAAC;AACtF,SAAO;AAAA,IACH,MAAM;AAAA,IACN;AAAA,IACA,QAAArC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,cAAc,QAAQ,iBAAiB,SAAY,OAAO,QAAQ;AAAA,IAClE;AAAA,EACH;AACD,WAAS,kBAAkB,OAAO,IAAIsC,UAAS;AAE3C,YAAQ,MAAM;AACV,UAAI,OAAO,OAAO,UAAU;AACxB,YAAI,CAAC,IAAI;AAAA,QAEzB,WACyB,MAAM,IAAI;AACf,gBAAM,GAAG,EAAE;AAAA,QAC/B,OACqB;AACD,kBAAQ,KAAK,sDAAsD;AAAA,QACvF;AACgB;AAAA,MAChB;AACY,YAAM,YAAY,CAAC,MAAM,GAAG,CAAC,MAAM;AACnC,YAAM,EAAE,SAAS,SAAS,QAAAC,SAAQ,OAAO,UAAS,IAAK;AAAA,QACnD,SAAS;AAAA,QACT,SAAS,CAAC;AAAA,QACV,QAAQ;AAAA,QACR,GAAGD;AAAA,MACN;AACD,YAAM,aAAa,UACb,MAAM,YAAY,EAAE,IACpB,YAAa,aAAa,SAAS,YAAa,IAAI,EAAE;AAC5D,UAAI,eAAe,QAAW;AAC1B,cAAM,IAAI,MAAM,SAAS,WAAE,2BAA0B;AAAA,MACrE,WACqB,UAAU,UAAU,eAAe;AACxC,cAAM,IAAI,MAAM,oBAAoB;AAAA,MACpD;AACY,YAAM,UAAU,UAAW;AAC3B,UAAI,eAAe,WAAW,cAAc,MAAK,GAAI;AACjD,YAAI,SAAU;AAAA,iBAKL,YAAY,QAAQ,YAAYA,QAAO,GAAG;AAC/C,oBAAU,KAAK,EAAE,OAAO,SAAS,SAAS,QAAAC,SAAQ,OAAO,MAAK,GAAI;AAClE,qBAAW,YAAY;AAAA,YACnB,OAAO;AAAA,YACP,OAAO;AAAA,UAC/B,CAAqB;AAAA,QACrB;AAAA,MACA;AAAA,IACA,CAAS;AAAA,EACT;AACI,WAAS,iBAAiB,OAAO;AAE7B,YAAQ,SAAS,WAAW,eAAe,KAAK;AAChD,WAAO,CAAC,IAAID,aAAY,kBAAkB,OAAO,IAAIA,QAAO;AAAA,EACpE;AACI,WAAS,YAAY,MAAM;AACvB,UAAM,QAAQ,UAAU,CAAC;AACzB,QAAI,OAAO;AACP,gBAAU;AAAA,QACN,GAAG;AAAA,QACH,SAAS,MAAM;AAAA,QACf,QAAQ,MAAM;AAAA,MAC9B,CAAa;AACD,gBAAU,SAAS;AAAA,IAC/B;AAAA,EACA;AACI,WAAS,aAAa,KAAK,aAAa;AACpC,UAAME,WAAU,gBAAgB,SAAQ,GAAI,IAAI,QAAQ;AACxD,UAAM,aAAa;AACnB,aAAS;AACT,aAAS,SAASA,UAAS;AACvB,YAAM,EAAE,OAAO,QAAAxC,YAAWwC,SAAQ,KAAK;AACvC,YAAM,aACF,MAAM,UAAU,WAChB,MAAM,UAAU,QAAS;AAC7B,YAAM,EAAE,SAAAJ,SAAO,IAAK;AAEpB,qBACIA,YACA,aAAa,cAAc,MAAMA,SAAQ;AAAA,QACrC,QAAApC;AAAA,QACA,UAAU;AAAA,UACN,UAAU,IAAI;AAAA,UACd,QAAQ,IAAI;AAAA,UACZ,MAAM,IAAI;AAAA,UACV,OAAO,oBAAoB,GAAG;AAAA,UAC9B,OAAO;AAAA,UACP,KAAK;AAAA,QACR;AAAA,QACD,QAAQ;AAAA,MAC5B,CAAiB,CAAC;AAAA,IAElB;AACQ,aAAS;AAAA,EACjB;AAKA;AACO,SAAS,mBAAmB,QAAQ,QAAQ,QAAQ,OAAO;AAC9D,QAAM,EAAE,MAAM,UAAU,QAAAA,QAAQ,IAAG;AACnC,QAAM,EAAE,SAAS,WAAW,SAAAoC,SAAO,IAAK,MAAO,EAAC;AAChD,QAAM,OAAO,WAAW,MAAM,MAAK,EAAG,IAAI;AAC1C,eACI,UAAU,WACV,UAAU,QAAS;AAEvB,QAAM,OAAOA,WAAUA,SAAQ,EAAE,QAAApC,SAAQ,UAAU,QAAQ,UAAU,UAAW,KAAI;AAEpF,QAAM,QAAQ;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,IACA,QAAQ,MAAM,YACRoB,kBAAgB,WAAW;AAAA,MACzB,QAAApB;AAAA,MACA;AAAA,MACA;AAAA,MACA,IAAI,WAAW;AACX,eAAO,OAAQ;AAAA,MACnC;AAAA,IACa,KACC,OAAQ;AAAA,IACd,YAAY,IAAI;AACZ,aAAO,YAAY,KAAK,KAAM,GAAE,IAAI,KAAI,CAAE;AAAA,IACtD;AAAA,EACK;AACD,SAAO;AACX;AC1iBayC,8BAAyBC,YAAYC,CAAU;AAClD;AAAA,IAAEC;AAAAA,MAASD;AACjB,QAAME,YAAYpC,SAAS,MAAMkC,MAAMlC,QAAQ;AACzCqC,mBAAWC,WAAW,MAAMC,eAAeH,aAAaF,MAAMC,QAAQ,EAAE,CAAC;AAC3EK;AACJ,QAAMC,cAAcC,oBAAoBT,QAAQI,UAAU,MAAMG,SAAS;AAAA,IACrEL;AAAAA,IACAQ,cAAcT,MAAMS;AAAAA,IACpBC,cAAcV,MAAMU;AAAAA,GACvB;AACMC,mBAAUZ,OAAOY,OAAOJ,WAAW;AAC1CK,yBAASC,iBAAiBC,UAAQ;AAAA,IAACxC,OAAOiC;AAAAA,IAAW,IAAAzC,WAAA;AAAA,aAAA8C,gBAClDG,MAAI;AAAA,QAACR;AAAAA,QAAwB,IAAES,OAAI;AAAA,iBAAEhB,MAAMgB;AAAAA,QAAI;AAAA,YAAEvB,UAAO;AAAEO,uBAAMiB,eAAejB,MAAMkB;AAAAA,QAAQ;AAAA,YAAApD,WAAA;AAAA,kBAAAqD,KAAA,OAC1Fb,UAAUc,eAAe,IAAI,GAAAR,gBAC9BS,QAAM;AAAA,YAACd;AAAAA,YAAwB,IAAEJ,WAAQ;AAAA,qBAAEA,SAAS;AAAA;AAAA,UAAC;AAAA;AAAA;AAAA;AAAA;AAG9D;AACA,SAASY,KAAKf,OAAO;AACXsB,mBAAWtB,MAAMO,YAAYe;AAC7BjE,kBAAS2C,MAAMO,YAAYlD;AACjC,QAAMkE,OAAOnB,WAAW,MAAMJ,MAAMP,WAChC+B,QAAQ,MAAM;AACVC,mBAAe,IAAI;AACnBzB,UAAMP,QAAQ;AAAA,MAAEpC;AAAAA,MAAQiE;AAAAA,MAAUI,QAAQC,eAAe;AAAA,KAAW;AACpEF,mBAAe,KAAK;AAAA,GACvB,CAAC;AACN,SAAAb,gBAASgB,MAAI;AAAA,QAACC,OAAI;AAAA,aAAE7B,MAAMgB;AAAAA,IAAI;AAAA,IAAEc,OAAK;AAAA,QAACC,WAAQ;AAAA,aAAE/B,MAAMlC;AAAAA,IAAQ;AAAA,IAAAA,UAC3DiD,WAAIH,gBAAMG,OAAI;AAAA,MAAC1D;AAAAA,MAAgBiE;AAAAA,MAAkB,IAAEC,OAAI;AAAA,eAAEA,KAAK;AAAA,MAAC;AAAA,UAAAzD,WAAA;AAAA,eAC3DkC,MAAMlC;AAAAA;AAAAA,IAAQ;AAAA,GACT;AAEhB;AACA,SAASuD,OAAOrB,OAAO;AAiBnB,QAAMgC,YAAY,CAAE;AAChBhB;AACEiB,sBAAc7B,WAAW8B,GAAGlC,MAAMO,YAAYV,SAAS,CAACsC,aAAaC,aAAaC,SAAS;AAC7F,QAAIC,QAAQF,eAAeD,YAAYI,WAAWH,YAAYG;AAC9D,UAAMC,OAAO,CAAE;AACf,aAAS9E,IAAI,GAAG+E,MAAMN,YAAYI,QAAQ7E,IAAI+E,KAAK/E,KAAK;AAC9CgF,wBAAYN,eAAeA,YAAY1E,CAAC;AACxCiF,wBAAYR,YAAYzE,CAAC;AAC/B,UAAI2E,QAAQK,aAAaC,UAAUC,MAAMzG,QAAQuG,UAAUE,MAAMzG,KAAK;AAC7DuB,cAAC,IAAI2E,KAAK3E,CAAC;AAAA,aAEf;AACO;AACJsE,sBAAUtE,CAAC,GAAG;AACdsE,oBAAUtE,CAAC,EAAE;AAAA;AAEjBmF,mBAAW5D,CAAWA,aAAA;AAClB+C,oBAAUtE,CAAC,IAAIuB;AACVvB,gBAAC,IAAIoF,mBAAmB9C,MAAMO,aAAaiC,KAAK9E,IAAI,CAAC,KAAKsC,MAAMO,YAAYN,MAAM8C,aAAa,MAAMd,YAAY,EAAEvE,IAAI,CAAC,CAAC,GAAG,MAAMsC,MAAMO,YAAYV,QAAUnC,GAAC,CAAC;AAAA,SACxK;AAAA;AAAA,IACL;AAEJsE,cAAUgB,OAAOb,YAAYI,MAAM,EAAEU,QAAQhE,cAAWA,UAAS;AACjE,QAAIoD,QAAQC,OAAO;AACRD;AAAAA;AAEXrB,WAAOwB,KAAK,CAAC;AACNA;AAAAA,GACV,CAAC;AACF,SAAOO,aAAa,MAAMd,YAAY,KAAKjB,IAAI,EAAE;AACrD;AACA,MAAM+B,eAAgBG,CAAU;AACrB,eAAAtC,gBAAQgB,MAAI;AAAA,QAACC,OAAI;AAAA,aAAEqB,MAAM;AAAA,IAAC;AAAA,IAAEpB,OAAK;AAAA,IAAAhE,UACrCoF,YAAKtC,gBAAKuC,gBAAgBrC,UAAQ;AAAA,MAACxC,OAAO4E;AAAAA,MAAK,IAAApF,WAAA;AAAA,eAAGoF,OAAME,OAAO;AAAA;AAAA,IAAC;AAAA,GAC3D;AACZ;AACO,MAAMC,QAASrD,CAAU;AAC5B,QAAMsD,cAAcxF,SAAS,MAAMkC,MAAMlC,QAAQ;AACjD,SAAOY,aAAWsB,OAAO;AAAA,IACrB,IAAIlC,WAAW;AACX,aAAOwF,YAAY;AAAA;AAAA,EACvB,CACH;AACL;AC/FA,SAAS,UAAU,CAAC,OAAO,QAAQ,GAAGC,MAAK,KAAK;AAC5C,SAAO,CAA4B,OAAO,MAAM,CAAC,MAAM,SAAS,IAAI,CAAC,CAAC,IAAI,QAAQ;AACtF;AACO,SAAS,aAAa,QAAQ;AACjC,MAAI,SAAS;AACb,QAAM,OAAO,CAAC,UAAW,OAAO,UAAU,WAAW,EAAE,MAAO,IAAG;AACjE,QAAM,SAAS,UAAU,aAAa,KAAK,OAAO,IAAG,CAAE,GAAG;AAAA,IACtD,QAAQ,CAAC,GAAG,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE;AAAA,EAC/D,CAAK,GAAG,QAAW,UAAQ;AACnB,KAAC,UAAU,OAAO,IAAI,IAAI;AAC1B,QAAI,aAAa,YAAY,CAAC,aAAa;AACvC,mBAAa,OAAO;AACxB,WAAO;AAAA,EACf,CAAK;AACD,SAAO,QACH,UAAU,OAAO,KAAK,CAAC,QAAQ,OAAO,UAAU;AAC5C,aAAS;AACT,WAAO,CAAC,EAAE,KAAK,KAAK,CAAC;AACrB,aAAS;AAAA,EACrB,CAAS,CAAC;AACN,SAAO,sBAAsB;AAAA,IACzB;AAAA,IACA,QAAQ,OAAO;AAAA,IACf,OAAO,OAAO;AAAA,EACtB,CAAK;AACL;ACjBO,SAASC,WAAWC,KAAa;AACtC,QAAMC,KAAKD,IAAIE,QAAQ,SAAS,EAAE;AAClC,MAAI,CAACD,GAAGE,WAAW,GAAG,GAAG;AACjB,WAAGpE,SAAO,GAAG,IAAIqE,OAAOvC,SAASwC,KAAKC,MAAM,KAAK,CAAC;AACjD,cAAGvE,aAAI,KAAIkE;AAAAA,EAAE;AAEfA;AACT;AAQgBM,mBACdC,QACAC,MACAC,SACA;AACOC,0BAAiBF,MAAMC,OAAO;AACrC,SAAO,MAAMF,OAAOI,oBAAoBH,MAAMC,OAAO;AACvD;AAEO,SAASG,WAAWtE,OAAqC;AAC9D,QAAMuE,YAAYA,MAAMV,OAAOvC,SAASwC,KAAKU,MAAM,CAAC;AACpD,QAAMC,cAAcC,kBAAkB;AACtC,SAAOC,aAAa;AAAA,IAClBpB,KAAKgB;AAAAA,IACLK,IAAI;AAAA,MAAEtG;AAAAA,MAAOqF;AAAAA,MAASkB;AAAAA,OAAS;AAC7B,UAAIlB,SAAS;AACXE,eAAOiB,QAAQC,aAAaC,UAAUH,KAAK,GAAG,IAAI,MAAMvG,KAAK;AAAA,aACxD;AACLuF,eAAOiB,QAAQG,UAAUJ,OAAO,IAAI,MAAMvG,KAAK;AAAA;AAEhC;AAAA,IACnB;AAAA,IACA4G,MAAOC,CACLnB,qBACEH,QACA,cACAuB,mBACED,QACCE,CACC,WAACZ,YAAYa,QAAQD,SAASA,QAAQ,IAAIA,QAAQd,UAAW,EACjE,CACF;AAAA,IACFgB,OAAO;AAAA,MACLC,IAAKH,WAAUxB,OAAOiB,QAAQU,GAAGH,KAAK;AAAA,MACtCI,YAAajG,CAAS,aAAIA;AAAAA,MAC1BkG,WAAWlC;AAAAA,MACXiB;AAAAA;AAAAA,EAEH,GAAEzE,KAAK;AACV;AC/CA,MAAM,CAAC,WAAW,YAAY,IAAI,aAA4B,EAAE;AAGnD,wBAAkB,CAC7B,YACA,mBACG;AACH,QAAM,QAAQ,SAAS;AACvB,QAAM,eAAe,aAAa,KAAK,QAAM,KAAK;AAClD,SAAO,mBAAmB,CAAC,cACzB,aAAa,MAAM,iBAAiB,SAAS,CAAC;AAEhD,QAAM,EAAE,SAAS,WAAW,kBAAkB2F,kBAAoB;AAAA,IAChE;AAAA,IACA;AAAA,IACA;AAAA,GACD;AAED;AAAA,IACE;AAAA,MACE;AAAA,MACA,MAAM;AACJ,qBAAa,CAAC,GAAG,cAAc,CAAC,CAAC;AAAA,MACnC;AAAA,MACA,EAAE,OAAO,KAAK;AAAA;AAAA,EAElB;AAEA,YAAU,OAAO;AACnB;ACnCA,SAAS,eAAe,SAAuB,IAAkB;AAC/D,QAAM,kBAAkB,CAAC;AAErB;AACJ,OAAK,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AAC5B,cAAI,OAAO,CAAC;AAClB,QAAI,OAAO,MAAM,YAAY,CAAC,EAAE,SAAS,QAAQ,GAAG;AAClC,2BAAK,OAAO,CAAC,CAAC;AAAA,WACzB;AACL;AAAA;AAAA,EACF;AAMF,SAAQ,CAAC,gBAAgB,KAAK,MAAM,CAAC,EAAmB;AAAA,IACtD,OAAO,MAAM,CAAC;AAAA,EAChB;AACF;AAEA,SAAS,MAAM,OAAe;AACrB,aAAI,QAAQ,CAAC,YAAY;AAC9B,eAAW,SAAS,KAAK;AAAA,GAC1B;AACH;AAUA,SAAS,MACP,QACA,YACA,OAAO,SACP;AACA,QAAM,QAAQ,OAAO;AACrB,SAAO,IAAI,QAAc,CAAC,SAAS,WAAW;AACtC,sBAAY,IAAI,yBAAyB,MAAM;AACrD,cAAU,OAAO;AACjB,cAAU,QAAQ,MAAM;AACd;AAAA,IACV;AACU,wBAAU,CAAC,MAAM;AACzB,aAAO,CAAC;AAAA,IACV;AACA,eAAW,KAAK,SAAS;AACzB,UAAM,MAAM,SAAS;AAAA,GACtB;AACH;AAEA,SAAS,YACP,QACA,MACA,OAAO,MACO;AACd,QAAM,QAAQ,OAAO;AACrB,QAAM,mBAAmB;AAAA,IACvB,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AAAA,EAC1C;AACA,QAAM,sBAAsC,CAAC;AAM7C,QAAM,aAAyC,CAAC;AAChD,MAAI,SAAkB;AAEtB,QAAM,eAAe,YAAY;AAC3B;AACK,uBAAU,iBAAiB,QAAQ;AACxC,cAAM,SAAS,MAAM,QAAQ,QAAQ,iBAAiB,OAAO;AAC7D,YAAI,CAAC,QAAQ;AAGX;AAAA,mBACS,OAAO,WAAW,YAAY,OAAO,SAAS,QAAQ,GAAG;AAE9D,sBAAQ,OAAO,OAAO,MAAM,QAAQ,EAAE,CAAC,CAAC,IAAI;AAC5C,oBAAM,KAAK,GAAG;AACR;AAAA;AAEV,gBAAM,MAAM,KAAK;AAAA,QACR,kBAAO,WAAW,YAAY,OAAO,QAAQ;AAEtD,gBAAM,eAAe;AACrB,cAAI,cAAc;AACX,2BAAU,cAAc,GAAG;AAC5B;AACI,0BAAM,QAAQ,YAAY,IAAI;AACtB;AAAA,qBACP,GAAG;AACV,kBAAI,aAAa,2BAA2B;AACtC,sBAAE,UAAU,WAAW;AACzB;AACQ;AAAA,oBACN,iDAAiD;AAAA,kBACnD;AACM,8BAAM,OAAO,eAAe,YAAY;AAAA,2BAE9C,EAAE,UAAU,cACZ,EAAE,UAAU,eACZ;AAEc;AAAA,uBACT;AACL,wBAAM,IAAI,MAAM,8BAA8B,SAAE,MAAO;AAAA;AAAA,cACzD,OACK;AACC;AAAA;AAAA,YACR;AAAA,UACF;AAAA,QACF,WACS,OAAO,WAAW,YAAY;AACvC,gBAAM,eAAe,YAAY,OAAO,GAAG,MAAM,KAAK;AACtD,8BAAoB,KAAK,YAAY;AACrC,gBAAM,aAAa;AAAA,QACV,iBAAM,QAAQ,MAAM,GAAG;AAEhC,gBAAM,eAAe,YAAY,QAAQ,MAAM,KAAK;AACpD,8BAAoB,KAAK,YAAY;AACrC,gBAAM,aAAa;AAAA;AAAA,MACrB;AAAA,IACF,UACA;AACS;AAAA;AAAA,EACX,GACC;AACI;AAAA,IACL,QAAQ;AAAA,IACR,IAAI,SAAS;AACJ;AAAA,IACT;AAAA,IACA,QAAQ,CAAC,YAAwB;AAC/B,uBAAiB,KAAK,OAAO;AAAA,IAC/B;AAAA,IACA,QAAQ,MAAM;AACZ,UAAI,CAAC,QAAQ;AACX;AAAA;AAEF,UAAI,MAAM;AACR,cAAM,OAAO;AAAA;AAEK,kCAAQ,CAACC,yBAAwB;AACnDA,6BAAoB,OAAO;AAAA,OAC5B;AACQ;AAAA;AAAA,EAEb;AACF;AAEA,IAAI;AACqB,+BAAqB,OAAe,SAAS;AACpE,mBAAiB,cAAc,OAAO;AACtB,8BAAY,SAAS,IAAI;AAClC;AACT;ACxKA,IAAI,WAAW,CAAC,UAAU,SAAS;AAIjC,MAAI;AACJ,QAAM,QAAQ,MAAM,aAAa,SAAS;AAC1C,MAAI,SAAQ,EAAI,WAAU,KAAK;AAC/B,QAAM,YAAY,IAAI,SAAS;AAC7B,QAAI,cAAc,OAAQ,OAAO;AACjC,gBAAY,WAAW,MAAM,SAAS,GAAG,IAAI,GAAG,IAAI;AAAA,EACrD;AACD,SAAO,OAAO,OAAO,WAAW,EAAE,MAAK,CAAE;AAC3C;ACSA,IAAI;AACJ,IAAI,gBAA+B,CAAC;AACpC,IAAI;AACJ,IAAI,mBAAmB;AACvB,MAAM,cAAc;AAEpB,SAAS,kBACP,UACA,MAC8B;AACxB,kBAAU,SAAS,UAAU,IAAI;AACnC;AAEE,oBAAY,CAAC,aAAgB;AACnB;AACd,YAAQ,QAAQ;AAAA,EAClB;AAEA,YAAU,QAAQ,MAAM;AACtB,YAAQ,MAAM;AACd,aAAS,WAAW;AAAA,EACtB;AAEA,YAAU,QAAQ,QAAQ;AAEnB;AACT;AAEA,SAAS,WAAW,KAA0B;AACpC,aAAI,MAAM,IAAI;AACxB;AAEA,SAAS,kBAAkB1H,aAA2B,IAAI;AACxD,MAAI,CAAC,UAAU,iBAAiB,CAAC,UAAU,SAAS;AAClD;AAAA;AAGF,QAAM,SAASA,WAAU,MAAM,CAAC,QAAQ,CAAC,IAAI,OAAO;AAC9C,oBAAYA,WAAU,OAAO,CAAC,QAAQ,CAAC,cAAc,SAAS,GAAG,CAAC;AAEpD;AAEhB,OAAC,UAAU,UAAU,eAAe;AAC5B,4BAAc,EAAE;AAC1B;AAAA;AAGcA,6BAAU,MAAM,CAAC;AAEjC,QAAM,iBAA+B,CAAC;AACtC,QAAM,aAAa,UAAU;AAAA,IAC3B,CAAC,KAAqC,QAAQ;AAC5C,UAAI,IAAI,UAAU;AACZ,iBAAK,CAAC,WAAW,GAAG,GAAG,YAAY,IAAI,QAAQ,CAAC;AACrC,4BAAK,IAAI,QAAQ;AAAA,iBACvB,IAAI,OAAO;AAChB,iBAAK,CAAC,WAAW,GAAG,GAAG,SAAS,IAAI,KAAK,CAAC;AAC/B,4BAAK,IAAI,KAAK;AAAA,aACxB;AACL,YAAI,KAAK,CAAC,WAAW,GAAG,GAAG,eAAe,EAAE,CAAC;AAAA;AAExC;AAAA,IACT;AAAA,IACA;AAAA,EACF;AAEA,YAAU,QAAQ,EAAE,OAAO,CAAC,KAAK,QAAQ;AACvC,QAAI,IAAI,iBAAiB;AACnB,eAAK,CAAC,WAAW,GAAG,GAAG,WAAW,IAAI,eAAe,CAAC;AAC3C,0BAAK,IAAI,eAAe;AAAA,WAClC;AACL,UAAI,KAAK,CAAC,WAAW,GAAG,GAAG,cAAc,EAAE,CAAC;AAAA;AAEvC;AAAA,KACN,UAAU;AAEb,MAAI,UAAU,OAAO;AACnB,YAAQ,MAAM,UAAU;AAAA;AAG1B,MAAI,eAAe,QAAQ;AACzB,WAAO,UAAU;AAAA,MACf,eAAe,OAAO,CAAC,KAAmB,QAAQ,IAAI,OAAO,GAAG,GAAG,CAAE;AAAA,IACvE;AAAA;AAEJ;AAEA,SAAS,aAAa,SAAqB,MAAc;AACvD,MAAI,kBAAkB;AACpB;AAAA;AAGM,6BAAoB,aAAa,SAAS,IAAI;AACxD;AAoBO,MAAM,YAAuB;AAAA,EAClC,OAAO;AAAA,EACP,SAAS;AAAA,EACT,MAAM;AAAA,EACN,QAAQ,WAAY;AAClB,yBAAqB,kBAAkB,OAAO;AAAA,EAChD;AAAA,EACA,gBAAgB,SAAU2H,SAAQ,GAAG;AACnB,kCAAc,MAAM,GAAGA,MAAK;AACxB;AAAA,EACtB;AAAA,EACA,OAAO,SAAU1G,OAAM,EAAE,SAAS,OAAO,eAAe,MAAS,QAAI;AAC/D,kBAAU,iBAAiB,UAAU,SAAS;AAChD,gBAAU,cAAc,MAAM;AAC1B,oBAAU,qBAAqB,kBAAkB,QAAQ;AAC3D,0BAAkB,OAAOA,KAAI;AAAA,aACxB;AACL,kBAAU,OAAO;AACJ,qBAAAA,OAAM,UAAU,IAAI;AAAA;AAGnC,UAAI,cAAc;AACG;AACA,sEAChB,QAAQ,MAAM;AACM;AACnB,oBAAU,QAAQ;AAAA,WAEnB,MAAM,QAAQ;AAAA,MAAK;AAAA,IACxB;AAGK;AAAA,EACT;AAAA,EACA,SAAS,SAAU0G,SAAQ,GAAG;AAC5B,cAAU,eAAeA,MAAK;AAC9B,cAAU,iBACR,UAAU,cAAc,QAAQ,MAAM,WAAW,CAAC;AAAA,EACtD;AAAA,EACA,aAAa,SAAU;AAAA,IACrB,gBAAgB;AAAA,IAChB,qBAAqB;AAAA,EACvB,IAAI,IAAI;AACN,cAAU,gBAAgB;AAAA,MACxB;AAAA,MACA;AAAA,IACF;AAEA,0BAAsB,kBAAkB,MAAM;AAE5C,sBAAgB,CAAC;AAAA,OAChB,kBAAkB;AAAA;AAEzB;AC3LO,MAAM,eAAe,MAAM;AAChC,YAAU,YAAY;AACT,kBAAG,WAAW,UAAU,eAAgB,EAAE,OAAO,MAAM,CAAC;AAE9D;AACT;ACEO,SAASC,OACd9F,OAUA;AACM,SAAC+F,GAAGC,MAAM,IAAIC,WAAWjG,OAAO,CACpC,aACA,QACA,YACA,UAAU,CACX;AAED,QAAM,CAACkG,QAAQC,SAAS,IAAIC,aAAa,CAAC;AAE1CC,eAAa,MAAM;AACPrG,oBAAMsG,YAAY,CAAC;AAAA,GAC9B;AAEKC,gBAAQnG,WAAW,MAAM;AAC7B,QAAI2F,EAAES,MAAM;AACV,aAAOT,EAAES,KAAKhC,MAAM,GAAGxE,MAAMyG,UAAUP,QAAQ;AAAA;AAAA,EACjD,CACD;AAEKQ,gBAAQtG,WAAW,MAAM;;AAE3B4F,kBAAOW,cAAc,WACrBX,aAAOY,UAAPZ,oBAAca,mBAAkB,SAChCb,OAAOa,kBAAkB;AAAA,GAE5B;AAEKC,sBAAc1G,WAAW,MAAM;AACnC,UAAM2G,eAAeA,MAAM;AACzBZ,gBACG9D,CAAS0D,WAAES,QAAQQ,KAAKC,IAAI5E,OAAO,GAAG0D,EAAES,KAAKjE,SAASvC,MAAMyG,OAAO,CACtE;AAAA,IACF;AAEA,WAAOC,UAAU;AAAA,MAAEQ,SAASH;AAAAA,QAAiB;AAAA,MAAEI,QAAQJ;AAAAA,IAAa;AAAA,GACrE;AAEDnG,yBACGwG,SAAOC,WAAA;AAAA,QAACC,YAAS;AAAA,aAAEvB,EAAEuB;AAAAA;AAAAA,EAAS,GAAMtB,QAAYc,aAAW;AAAA,QAAAhJ,WAAA;AAAA,aAAA8C,gBACzD2G,OAAK;AAAA,YAACf,OAAI;AAAA,iBAAED,MAAM;AAAA,QAAC;AAAA,YAAExE,WAAQ;AAAA,iBAAEgE,EAAEhE;AAAAA,QAAQ;AAAA,YAAEjE,WAAQ;AAAA,iBAAEiI,EAAEjI;AAAAA;AAAAA,MAAQ;AAAA;AAAA;AAGtE;AC7DO,SAAS,cAA+B;AAC7C,MAAI,CAAC,QAAQ,KAAK,SAAS,WAAW,EAAU;AAE3C,kBAAW,KAAK,YAAY;AAC7B,cAAQ,KAAK,WAAW,KAAK,SAAS,KAAK,QAAQ,IAAI,KAAK;AAEhE,SAAO,+BAAO,WAAW;AAClB;AACG,iBAAK,SAAS,KAAK,QAAQ;AAAA;AAEjC,QAAE,iBAAiB,aAAqB;AAC5C,QAAM,SAAS;AACR;AACT;AAGO,SAAS,eAAe,mBAAsC;AACnE,SAAO,WAAkC;AACvC,WAAO,kBAAkB;AAAA,MACvB;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,KAAK,SAAS,KAAK,QAAQ;AAAA,IAC7B;AAAA,EACF;AACF;AAEO,SAAS,iBACd,WACY;AACZ,SAAO,WAAY;;AACX,wBAAc,KAAK,SAAS;AAClC,UAAM,OAAO,KAAK;AACZ,yBAAe,KAAK,YAAY;AAEtC,QAAI,gBAAgB,GAAG;AACd;AAAA;AAGL,sBAAc,WAAW,cAAc,QAAQ;AAC9C;AACD,aAAK,YAAa,KAAK,YAAY,KAAK,cAAe;AACnD,iBAAK,YAAY,aAAa;AAChC,cAAI,CAAC,MAAM;AACT,iBAAK,WAAW;AAChB;AAAA;AAEF,eAAK,WAAW;AAAA;AAAA,MAEX,UAAAxB,MAAA,KAAK,SAAS,KAAK,QAAQ,MAA3B,gBAAAA,IAA8B;AAAA,IAC9B,yBAAc,UAAU,cAAc,MAAM;AAClD;AACD,aAAK,YAAa,KAAK,YAAY,KAAK,cAAe;AACnD,iBAAK,WAAW,GAAG;AACrB,cAAI,CAAC,MAAM;AACT,iBAAK,WAAW;AAChB;AAAA;AAEF,eAAK,WAAW,cAAc;AAAA;AAAA,MAEzB,UAAAC,MAAA,KAAK,SAAS,KAAK,QAAQ,MAA3B,gBAAAA,IAA8B;AAAA;AAGrC,aAAK,aAAa,IAAI;AACxB,WAAK,WAAW;AAChB,WACEC,MAAA,KAAK,SAAS,KAAK,QAAQ,MAA3B,gBAAAA,IAA8B,OAAQ;AAAA,QACpC,OAAO,iBAAiB;AAAA,SAE1B;AAEO;AAAA;AAAA,IACT;AAEF,UAAM,SAAS,KAAK,SAAS,KAAK,YAAY,CAAC;AAC/C,iBAAa,kBAAkB,WAAW;AAC1C,UAAM,gBAAgB;AAER,uCACZ,cAAc,kBAAkB;AAAA,MAC9B;AAAA,MACA,cAAc;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEF,QAAI,KAAK,QAAQ;AAGT,gCAAoB,KAAK,SAAS,YAAY;AACpD,mBAAa,6BAA6B,WAAW;AAC/C,kBAAM,kBAAkB,YAAY;AACnC,wBACL,MAAM,OAAO,SAAS,SAAS,MAAM,OAAO,SAAS,SAAS;AAAA;AAElE,WAAO,SAAS;AACT;AAAA,EACT;AACF;ACrFA,MAAM,aAAa;AACnB,MAAM,aAAa,CAAC,SAAoC;AAC/C,cAAK,IAAI,gBAAgB;AAClC;AAOO,SAAS,cAAc,OAAgB;AACtC,oBAAY,QAAQ,UAAU;AAC9B,eAAO,QAAQ,MAAM;AAE3B,SAAO,CACL,UACA,WACA,iBACA,iBACG;;AACH,QAAI,eAAe;AACf,eAAO,aAAa,UAAU;AACjB;AACf,iBAAW,aAAa,YAAY;AAAA;AAEtC,QACE,CAAC,gBACD,aAAa,WAAW,UACxB,CAAC,aAAa,SAAS;AAEvB;AAEF,UAAM,MAAM,aAAa;AACnB,UAAAgL,cAAa,QAAQ,IAAI,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK;AAEjE,UAAM,iBACJ,iBAAiB,UAAa,eAAe,MAAM;AAEjD,qBAAa,kBAAkB,QAAW;AACxC,uBAAa,OAAQ,UAAU;AACjC,cAAM,IAAI,aAAa;AACV,iCACXA,gBAAe,QAAQ,EAAE,OAAO,EAAE,SAAS,KAAK,EAAE,SAAS;AAAA;AAGlD,oCACXlL,MAAA,aAAa,WAAb,OAAAA,OACC,QAAQ,IAAI,OAAO,IAAI,QAAQ,aAAa,IAAI;AAAA;AAGrD,UAAM,eAAe,aAAa;AAC5B,gBAAM,aAAa,OAAO;AAC1B,UAAAsD,UAAS,aAAa,UAAU;AAGtC,UAAM,kBAAiBrD,MAAA,aAAa,oBAAb,OAAAA,MAAgC,aAAa,IAAI;AACxE,UAAM,eAAe,iBACjB,KAAK,IAAI,gBAAgB,aAAa,IAAI,CAAC,IAC3C,KAAK,IAAI,gBAAgB,aAAa,IAAI,CAAC;AAClC,2BAASC,MAAA,aAAa,WAAb,OAAAA,MAAuB;AAC7C,UAAM,SAAS,aAAa;AAE1B,yCAAoB,aAAa,SAAS,QAAQ;AAC9C,8BAAmB,qBAAgB,IAAI,MAApB,YAAyB;AAC5C,0BAAe,qBAAgB,SAAS,MAAzB,YAA8B;AACnD,UAAM,iBACJ,2BAAgB,UAAhB,aACC,2BAAgB,UAAhB,mBAAuB,UAAvB,mBAAyC,UAD1C,YAEA;AACF,UAAM,qBAAqB,eAAe;AACpC,2BAAgB,kBAAa,SAAS,MAAtB,YAA2B;AACjD,UAAM,YAAY,KAAK;AAAA,MACrBgL,cACE,gBACA,gBACC,aAAa,aAAa,IAAI;AAAA,MACjC;AAAA,IACF;AAGA,UAAM,YAAY,iBAAiB,WAAW,IAAI,WAAW;AAC7D,UAAM,cAAc,aAAa,SAAS,SAAS,KAAK;AAGxD,QAAI,eAAe;AAGnB,QAAI,gBAAgB,cAAc;AACjB,sBAAC,oBAAoBA,cAAa,sBAAsB;AAAA,eAC9D5H,YAAW,UAAU;AAC9B,qBAAe,CAAC,mBAAmB;AAAA,eAC1BA,YAAW,UAAU;AAC9B,qBACE,CAAC,oBACA4H,cAAa,sBAAsB,IACpC;AAAA,eACO,CAAC,aAAa;AAEvB,qBAAe,iBAAiB,YAAY;AAAA,eACnC5H,YAAW,QAAQ;AAC5B,UAAI,aAAa,eAAe,aAAa,cAAc,GAAG;AAEtD,2BAAa,aAAa,SAAS;AACnC,6BAAe,aAAa,aAAa;AAE/C,YACE,kBACA,aAAa,YAAY,aAAa,aACtC;AACA,yBAAe,eAAe,eAAe;AAAA,QACpC,YAAC,kBAAkB,aAAa,WAAW,cAAc;AAClE,yBAAe,eAAe,eAAe;AAAA;AAAA,iBAEtC,gBAAgB;AACzB,uBAAe,CAAC,mBAAmB;AAAA,aAC9B;AACL,uBAAe,eAAe,eAAe;AAAA;AAAA,IAGxC,6BAAkB,WAAW,WAAW,GAAG;AAClD,qBAAe,eAAe,eAAe;AAAA,eACpC,WAAW,WAAW,GAAG;AAClC,qBAAe,CAAC,mBAAmB;AAAA;AAKnC,qCAAkBA,YAAW,WACzB,KAAK,IAAI,cAAc,SAAS,IAChC,KAAK,IAAI,cAAc,MAAM;AAG/B,qBAAa,IAAI,MAAM,cAAc;AACvC,mBAAa,IAAI,IAAI;AAErB,mBAAa,kBAAkB;AAAA;AAAA,EAEnC;AACF;ACtJO,SAAS,kBACX,MACH;AACA,QAAM,gBAAgB,KAAK,OAAO,CAAC,SAAS,OAAO,SAAS,UAAU;AAClE,oBAAc,WAAW,GAAG;AACvB;AAAA;AAGL,oBAAc,WAAW,GAAG;AAC9B,WAAO,cAAc,CAAC;AAAA;AAGxB,SAAO,YAAgC,WAAsB;AACvD;AACJ,eAAW,QAAQ,eAAe;AACvB,oBAAK,MAAM,MAAM,SAAS;AACnC,UAAI,WAAW,MAAM;AACZ;AAAA;AAAA,IACT;AAEK;AAAA,EACT;AACF;ACjBA,MAAM6H,eAA2B;AAAA,EAC/BC,SAAS;AAAA,EACTb,eAAe;AAAA,EACfc,KAAK;AAAA,EACLC,YAAY;AAAA,IACVC,GAAG;AAAA,MACDC,UAAU;AAAA,MACVC,QAAQ;AAAA;AAAA,EACV;AAEJ;AAEA,MAAMC,OAAOC,iBAAiB,IAAI;AAClC,MAAMd,SAASc,iBAAiB,MAAM;AACtC,MAAMrI,WAASsI,cAAc,KAAK;AAC3B,MAAMC,SAAkCnI,CAAU;AACvDY,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,IACTgI,MAAkBK,eAAerI,MAAMgI,MAAMA,IAAI;AAAA,IACjDb,QAAoBkB,eAAerI,MAAMmH,QAAQA,MAAM;AAAA,IAAC,IACxDb,WAAQ;AAAA,aAAEtG,MAAMsG,YAAY;AAAA,IAAC;AAAA,IAC7BgC,cAAcC;AAAAA,IACdC,SACcH,eACVrI,MAAMwI,SACNxI,MAAMyI,qBAAqBC,eAAe1I,MAAMyI,iBAAiB,CACnE;AAAA,IAEFE,UAEE3I,MAAMsG,WAAW+B,eAAerI,MAAM2I,UAAU/I,QAAM,IAAII,MAAM2I;AAAAA,IAElEF,mBACcJ,eACVrI,MAAMyI,mBACNzI,MAAMJ,WAAW,SAASA,WAASgJ,MACrC;AAAA,IAEFhC,OAAmBiC,cAAc7I,MAAM4G,OAAOa,YAAY;AAAA,GAAC;AAGjE;AC1CA,MAAMqB,YAAwB;AAAA,EAC5BpB,SAAS;AAAA,EACTC,KAAK;AAAA,EACLC,YAAY;AAAA,IACVmB,GAAG;AAAA,MACDjB,UAAU;AAAA,MACVC,QAAQ;AAAA;AAAA,EACV;AAEJ;AAEA,MAAMiB,SAASf,iBAAiB,MAAM;AACtC,MAAMf,UAAUe,iBAAiB,OAAO;AACxC,MAAMrI,SAASsI,cAAc,IAAI;AAE1B,MAAMe,MAA4BjJ,CAAU;AACjDY,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,QACTsG,WAAQ;AAAA,aAAEtG,MAAMsG,YAAY;AAAA,IAAC;AAAA,IAC7B0C,QAAoBX,eAAerI,MAAMgJ,QAAQA,MAAM;AAAA,IACvD9B,SAAqBmB,eAAerI,MAAMkH,SAASA,OAAO;AAAA,IAC1DsB,SACcH,eACVrI,MAAMwI,SACNxI,MAAMyI,qBAAqBC,eAAe1I,MAAMyI,iBAAiB,CACnE;AAAA,IAEFH,cAAcC;AAAAA,IACdI,UAEE3I,MAAMsG,WAAW+B,eAAerI,MAAM2I,UAAU/I,MAAM,IAAII,MAAM2I;AAAAA,IAElEF,mBACcJ,eACVrI,MAAMyI,mBACNzI,MAAMJ,WAAW,SAASA,SAASgJ,MACrC;AAAA,IAEFhC,OAAmBiC,cAAc7I,MAAM4G,OAAOkC,SAAS;AAAA,GAAC;AAG9D;AC3CgB,yBACd,KACA,aACwD;AAClD,2BAAmBnM,WAAS,cAAc,gBAAgB;AAAA,IAC9D;AAAA,GACD;AAED,SAAO,YAAY,OAEjB,CAAC,KAAK,MAAM;AACZ,UAAM,EAAE,GAAG,GAAG,OAAO,OAAW;AAChC,QAAI,EAAE,IAAI,IAAIA,WAAS,cAAc,cAAc;AAAA,MACjD,SAAS;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,KACD;AACM;AAAA,EACT,GAAG,EAAE;AACP;AC9BO,MAAM,CAAC,kBAAkB,mBAAmB,IAAI,aAAqB,EAAE;ACD9E,MAAe;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,SAAS;AAAA,IACT,WAAW;AAAA,IACX,UAAU;AAAA,IACV,UAAU;AAAA,IACV,MAAM;AAAA,IACN,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,EACT;AAAA,EACD,WAAW;AAAA,IACT,UAAU;AAAA,MACR,MAAM;AAAA,MACN,OAAO;AAAA,MACP,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,OAAO;AAAA,IACR;AAAA,IACD,OAAO,EAAE,MAAM,GAAG,OAAO,IAAI,MAAM,IAAI,QAAQ,IAAI,MAAM,IAAI,OAAO,GAAI;AAAA,IACxE,YAAY;AAAA,MACV,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,oBAAoB;AAAA,MAClB,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,gBAAgB;AAAA,MACd,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,UAAU;AAAA,MACR,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,kBAAkB;AAAA,MAChB,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,cAAc;AAAA,MACZ,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,SAAS;AAAA,MACP,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,iBAAiB;AAAA,MACf,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IACX;AAAA,IACD,aAAa;AAAA,MACX,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,UAAU;AAAA,IAChB;AAAA,EACG;AAAA,EACD,OAAO;AAAA,IACL,WACE;AAAA,IACF,YACE;AAAA,IACF,kBACE;AAAA,IACF,OACE;AAAA,EACH;AAAA,EACD,OAAO;AAAA,IACL,SAAS,CAAE;AAAA,IACX,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM;AAAA,IACN,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,UAAU;AAAA,IACV,iBAAiB;AAAA,IACjB,yBAAyB;AAAA,IACzB,iBAAiB;AAAA,IACjB,yBAAyB;AAAA,IACzB,eAAe;AAAA,IACf,uBAAuB;AAAA,IACvB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,IACrB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,IACrB,WAAW;AAAA,IACX,oBAAoB;AAAA,IACpB,mBAAmB;AAAA,IACnB,mBAAmB;AAAA,IACnB,cAAc;AAAA,IACd,cAAc;AAAA,IACd,UAAU;AAAA,IACV,aAAa;AAAA,IACb,iBAAiB;AAAA,IACjB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,IACrB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,IACrB,WAAW;AAAA,IACX,oBAAoB;AAAA,IACpB,mBAAmB;AAAA,IACnB,mBAAmB;AAAA,IACnB,cAAc;AAAA,IACd,cAAc;AAAA,IACd,UAAU;AAAA,IACV,aAAa;AAAA,IACb,eAAe;AAAA,IACf,wBAAwB;AAAA,IACxB,uBAAuB;AAAA,IACvB,uBAAuB;AAAA,IACvB,eAAe;AAAA,IACf,wBAAwB;AAAA,IACxB,uBAAuB;AAAA,IACvB,uBAAuB;AAAA,IACvB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,IACrB,gBAAgB;AAAA,IAChB,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,eAAe;AAAA,IACf,oBAAoB;AAAA,IACpB,yBAAyB;AAAA,IACzB,6BAA6B;AAAA,IAC7B,oBAAoB;AAAA,IACpB,yBAAyB;AAAA,IACzB,6BAA6B;AAAA,IAC7B,kBAAkB;AAAA,IAClB,uBAAuB;AAAA,IACvB,2BAA2B;AAAA,IAC3B,eAAe;AAAA,IACf,oBAAoB;AAAA,IACpB,wBAAwB;AAAA,IACxB,mBAAmB;AAAA,IACnB,eAAe;AAAA,IACf,oBAAoB;AAAA,IACpB,wBAAwB;AAAA,IACxB,mBAAmB;AAAA,IACnB,aAAa;AAAA,IACb,kBAAkB;AAAA,IAClB,sBAAsB;AAAA,IACtB,iBAAiB;AAAA,EAClB;AAAA,EACD,MAAM,CAAE;AAAA,EACR,QAAQ;AAAA,IACN,aAAa;AAAA,IACb,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,SAAS;AAAA,IACT,SAAS;AAAA,IACT,SAAS;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,IACT,SAAS;AAAA,EACV;AAAA,EACD,QAAQ,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,GAAI;AAAA,EACxD,QAAQ;AAAA,IACN,MAAM;AAAA,IACN,KAAK;AAAA,IACL,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,KAAK;AAAA,IACL,MAAM;AAAA,EACP;AAAA,EACD,QAAQ,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,EAAG;AAAA,EAC/C,YAAY;AAAA,IACV,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,OAAO;AAAA,MACL,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,OAAO;AAAA,MACL,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,OAAO;AAAA,MACL,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,SAAS;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,SAAS;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,UAAU;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,MAAM;AAAA,MACJ,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,WAAW;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACf;AAAA,IACD,YAAY;AAAA,MACV,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,IACpB;AAAA,EACG;AAAA,EACD,iBAAiB;AAAA,IACf,UAAU;AAAA,MACR,MAAM;AAAA,QACJ,UAAU;AAAA,UACR,QAAQ;AAAA,YACN,OAAO;AAAA,YACP,MAAM;AAAA,UAClB;AAAA,QACA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACA;ACjWA,SAAwBuM,aAAa;AACnC,QAAM7L,UAAS,IAAI8L,gBAAgBtF,OAAOvC,SAAS8H,MAAM;AACzD,QAAMC,YAAYhM,QAAOkG,IAAI,WAAW,MAAM;AAE9C,MAAI+F,KAAKC,KAAKC;AACd,MAAIC,SAAS;AACb,QAAMC,QAAQ;AACd,QAAMC,oBAAoB;AAAA,IACxB7B,UAAU;AAAA,IACVC,QAAQ;AAAA,EACV;AACA,QAAM6B,WAAW;AAAA,IACfF;AAAAA,IACAG,OAAO;AAAA,EACT;AAEAC,UAAQ,MAAM;AACZ,QAAIT,WAAW;AACbG,eAASO,MAAM;AACfP,eAASQ,YAAY;AACrBR,eAASS,aAAa;AACtB;AAAA;AAAA,EACF,CACD;AAED,WAASC,kBAAkBC,KAAsB;AAC/C,QAAId,WAAW;AACbG,eAASO,MAAM;AACfP,eAASQ,YAAY;AACrBR,eAASS,aAAa;AACtB;AAAA;AAGE,eAAOE,QAAQ,UAAU;AAC3Bb,UAAIO,QAAQM;AACZb,UAAIS,MAAM;AACVT,UAAII,QAAQ;AACH;AACTH,UAAIG,QAAQ;AACZF,eAASE,QAAQ;AACjB;AAAA,WACK;AACLJ,UAAIO,QAAQ;AACZL,eAASE,QAAQ;AAAA;AAGbU,sBAAYX,WAAW,IAAIF,MAAMD;AACjCe,mBAASZ,WAAW,IAAIH,MAAMC;AAEpCa,cAAUL,MAAMI;AAChB,QAAIV,WAAW,GAAG;AAChBW,gBAAUV,QAAQ;AAAA,WACb;AACLU,gBAAUV,QAAQ;AAClBU,gBAAUE,QAAQ;AAAA,QAAEZ,OAAO;AAAA,SAAKC,iBAAiB,EAAEY,MAAM;AAAA;AAG3DF,WAAOC,QAAQ;AAAA,MAAEZ,OAAO;AAAA,OAAQC,iBAAiB,EAAEY,MAAM;AAChDd,wBAAW,IAAI,IAAI;AAAA;AAI5BvH,kBACEsI,kBACA,CAACL,QAAyB;AACxBD,sBAAkBC,GAAG;AAAA,KAEvB;AAAA,IAAEM,OAAO;AAAA,GACX,CACF;AAEA,SAAA7J,gBAEKwH,MAAI;AAAA,IAAC9K,OAAO;AAAA,IAAMC,QAAQ;AAAA,IAAMmN,QAAQ;AAAA,IAAE,IAAA5M,WAAA;AAAA8C,8BACxCwH,MAAI;AAAA,QAAAuC,IAAAC,IAAA;AAAA,cAAAC,QAAMvB;AAAG,iBAAAuB,6BAAAD,EAAA,IAAHtB,MAAGsB;AAAAA,QAAA;AAAA,QAAEhE,OAAOgD;AAAAA,OAAQhJ,mBAC9BwH,MAAI;AAAA,QAAAuC,IAAAC,IAAA;AAAA,cAAAE,SAAMvB;AAAG,iBAAAuB,+BAAAF,EAAA,IAAHrB,MAAGqB;AAAAA,QAAA;AAAA,QAAEhE,OAAOgD;AAAAA,QAAUF,OAAO;AAAA,OAAC9I,mBACxCwH,MAAI;AAAA,QAAAuC,IAAAC,IAAA;AAAA,cAAAG,SACEvB;AAAQ,iBAAAuB,+BAAAH,EAAA,IAARpB,WAAQoB;AAAAA,QAAA;AAAA,QACbb,KAAG;AAAA,YACHF,QAAK;AAAEmB,0BAASC,MAAMpB,MAAMqB,aAAa;AAAA,QAAC;AAAA,QAC1C5N,OAAO;AAAA,QACPC,QAAQ;AAAA,OAAI;AAAA;AAAA;AAKtB;AC7FA,MAAe;AAAA,EACb,QAAQ;AAAA,IACN,eAAe;AAAA,IACf,SAAS;AAAA,IACT,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,YAAY;AAAA,MACV,GAAG;AAAA,QACD,UAAU;AAAA,QACV,QAAQ;AAAA;AAAA,IAEZ;AAAA,IACA,GAAG;AAAA,IACH,QAAQ;AAAA,MACN,OAAO;AAAA,MACP,GAAG,MAAM,OAAO;AAAA;AAAA,EAEpB;AAAA,EACA,UAAU;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,KAAK;AAAA,IACL,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ;AAAA,MACN,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAAA,IACA,YAAY,EAAE,OAAO,MAAM,OAAO,KAAK;AAAA,EACzC;AAAA,EACA,WAAW;AAAA,IACT,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,cAAc;AAAA,IACd,OAAO;AAAA,IACP,QAAQ;AAAA,MACN,OAAO;AAAA,IACT;AAAA,IACA,SAAS;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA;AAAA,EACV;AAEJ;AChDA,MAAMtB,aAAWkP;AAEjB,MAAMC,QAAQ,CACZ;AAAA,EAAEC,MAAM;AAAA,EAAQ/N,OAAO;AAAA,EAAKC,QAAQ;AAAA,EAAIwL,GAAG;AAAA,EAAIlB,GAAG;AAAE,GACpD;AAAA,EAAEwD,MAAM;AAAA,EAAU/N,OAAO;AAAA,EAAKC,QAAQ;AAAA,EAAIwL,GAAG;AAAA,EAAKlB,GAAG;AAAE,GACvD;AAAA,EAAEwD,MAAM;AAAA,EAAU/N,OAAO;AAAA,EAAIC,QAAQ;AAAA,EAAKwL,GAAG;AAAA,EAAKlB,GAAG;AAAE,CAAC;AAO1D,IAAIyD;AACJ,SAASC,KAAKvL,OAAkB;AAC9BsL,WACEA,UAAUE,gBAAgBvP,aAAW,0BAA0BmP,KAAK;AACtExK,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,QACTyL,UAAO;AAAEH,oBAAOtL,MAAMqL,IAAI;AAAA,IAAC;AAAA,QAC3B/N,QAAK;AAAA,aAAEgO,OAAOtL,MAAMqL,IAAI,EAAErL,MAAM1C;AAAAA,IAAK;AAAA,QACrCC,SAAM;AAAA,aAAE+N,OAAOtL,MAAMqL,IAAI,EAAErL,MAAMzC;AAAAA,IAAM;AAAA,QACvCwL,IAAC;AAAA,cAAG,OAAOuC,OAAOtL,MAAMqL,IAAI,EAAErL,MAAM1C,SAAS,MAAM;AAAA,IAAC;AAAA,QACpDuK,IAAC;AAAA,cAAG,OAAOyD,OAAOtL,MAAMqL,IAAI,EAAErL,MAAMzC,UAAU,MAAM;AAAA;AAAA,EAAC;AAG3D;ACbA,MAAMmO,sBAAsB;AAAA,EAC1BC,UAAU;AAAA,EACV5C,GAAG;AAAA,EACHlB,GAAG;AAAA,EACHtK,QAAQ;AAAA,EACRmM,OAAO;AAAA,EACPkC,SAAS;AAAA,IACPlC,OAAO;AAAA;AAEX;AAEA,SAASmC,UAAU7L,OAAiC;AAClDY,yBACGwH,MAAIf,WAAKrH,OAAK;AAAA,IAAE8L,eAAa;AAAA,QAAClF,QAAK;AAAA,aAAEvI,SAAOwN;AAAAA,IAAS;AAAA,QAAA/N,WAAA;AAAA8C,8BACnDwH,MAAI;AAAA,QAACP,GAAG;AAAA,QAAG,IAAA/J,WAAA;AAAA,iBAAA8C,gBACT2K,MAAI;AAAA,YAACQ,OAAO;AAAA,YAAG,IAAEV,OAAI;AAAA,qBAAErL,MAAMgM;AAAAA;AAAAA,UAAI;AAAA;AAAA,OAAApL,mBAEnCqL,MAAI;AAAA,QAACrF,OAAO8E;AAAAA,QAAmB,IAAA5N,WAAA;AAAA,iBAAGkC,MAAMlC;AAAAA;AAAAA,MAAQ;AAAA;AAAA;AAGvD;AAEA,SAAwBoO,UAAUlM,OAAY;AACxCmM;AACJ,QAAMC,WAAWC,YAAY;AAC7B,WAAS7D,UAA2B;;AACxBpK,oBAAOkO,IAAI,QAAQ;AAC7B,SAAKxO,SAASmF,QAASsJ,OAAMA,EAAEnO,OAAOkO,IAAI,SAAS,CAAC;AACpD,SAAKxO,UAASxB,MAAA,KAAKgK,aAAL,OAAAhK,MAAiB,CAAC,EAAEkQ,SAAS;AAAA;AAG7C,WAASC,SAA0B;AACvBrO,oBAAOsO,OAAO,QAAQ;AAChC,SAAKpG,WAAW;AAChB,SAAKxI,SAASmF,QAASsJ,OAAMA,EAAEnO,OAAOsO,OAAO,SAAS,CAAC;AAAA;AAGzD,WAASC,eAAeC,MAAc;AAC9BC,qBAAWC,SAAS,MAAMF,IAAI;AACpC,QAAIC,YAAY;AACd,aAAO7M,MAAM+M,UAAU;AAAA;AAGzBX,aAASQ,IAAI;AAAA;AAGf,UAAAhM,gBAEKuH,QAAMd,WACDrH,OAAK;AAAA,IACTwI;AAAAA,IACAiE;AAAAA,IAAc,IACd7F,QAAK;AAAA,aAAEvI,SAAO8J;AAAAA,IAAM;AAAA,IACpBvI,QAAM;AAAA,QAAA9B,WAAA;AAAA8C,8BAELiL,WAAS;AAAA,QACRmB,SAASA,MAAML,eAAe,GAAG;AAAA,QACjCX,MAAI;AAAA,QAAAlO,UAAA;AAAA,OAAA8C,mBAILiL,WAAS;AAAA,QAACG,MAAI;AAAA,QAAUgB,SAASA,MAAML,eAAe,eAAe;AAAA,QAAC7O,UAAA;AAAA,OAAA8C,mBAGtEiL,WAAS;AAAA,QAACG,MAAI;AAAA,QAAUgB,SAASA,MAAML,eAAe,YAAY;AAAA,QAAC7O,UAAA;AAAA;AAAA;AAAA,GAAA8C,oBAIrEwH,MAAI;AAAA,IAAC6E,WAAS;AAAA,IAAAtC,IAAAC,IAAA;AAAA,UAAAC,QAAMsB;AAAQ,aAAAtB,6BAAAD,EAAA,IAARuB,WAAQvB;AAAAA,IAAA;AAAA,QAAEhE,QAAK;AAAA,aAAEvI,SAAO6O;AAAAA;AAAAA,EAAQ;AAG3D;ACpEe,SAAS,kBAAkB,SAAS;AAC/C,MAAI,CAAC,WAAW,CAAC,QAAQ,OAAO,QAAQ,GAAG;AACvC,UAAM,IAAI,MAAM,uDAAuD;AAAA,EAC/E;AACI,QAAM,MAAM,CAAE;AACd,aAAW,CAAC/Q,MAAK,KAAK,KAAK,SAAS;AAChC,QAAIA,IAAG,IAAI;AAAA,EACnB;AACI,SAAO;AACX;ACTA,MAAM,kBAAkB,CAAC,SAAS,UAAU;AAC5C,MAAM,kBAAkB,CAAC,SAAS,WAAW,SAAS;AAC/C,SAAS,oBAAoB,EAAE,WAAW,MAAM,aAAAgR,cAAa,QAAQ,IAAI,QAAQ,IAAI,WAAW,iBAAiB,WAAW,gBAAiB,GAAE,QAAQ,OAAO;AAMjK,QAAM,iBAAiB,CAACC,QAAO,sBAAsB,eAAe;AAChE,UAAM,aAAa,SAAS,IAAI,UAAQ;;AACpC,YAAM/O,UAAS,CAAE;AAGjB,YAAM,YAAY,IAAI;AAAA;AAAA,QAEtB,CAAE,EAAC,OAAO,MAAM,CAAE,GAAE,EAAC/B,MAAA8Q,UAAA,gBAAAA,OAAQ,UAAR,OAAA9Q,MAAiB,KAAIC,MAAA,6DAAuB,UAAvB,OAAAA,MAAgC,EAAE,EAAE,IAAI,OAAO,IAAI,CAAC;AAAA,MAAC;AAE/F,gBAAU,QAAQ,cAAY;;AAE1B,YAAI,CAAC,SAAS,SAAS,QAAQ,GAAG;AAC9B,UAAA8B,QAAO,QAAQ,KAAI7B,OAAAF,MAAA,6DAAuB,UAAvB,gBAAAA,IAA+B,cAA/B,OAAAE,OAA4CD,MAAA6Q,UAAA,gBAAAA,OAAQ,UAAR,gBAAA7Q,IAAgB;AAAA,QACnG;AAAA,MACA,CAAa;AAOD,eAAS,QAAQ,UAAQ;;AACrB,QAAA8B,QAAO,IAAI,IAAI;AAAA,UACX,GAAG,WAAW,IAAI;AAAA;AAAA,UAClB,IAAG/B,MAAA8Q,UAAA,gBAAAA,OAAQ,UAAR,gBAAA9Q,IAAgB;AAAA;AAAA,UACnB,IAAGC,MAAA,6DAAuB,UAAvB,gBAAAA,IAA+B;AAAA;AAAA,QACrC;AAAA,MACjB,CAAa;AACD,aAAO,CAAC,MAAM8B,OAAM;AAAA,IAChC,CAAS;AACD,WAAO,kBAAkB,UAAU;AAAA,EACtC;AAMD,QAAM,iBAAiB,CAACgP,QAAO,yBAAyB;AACpD,UAAM,aAAa,SAAS,IAAI,UAAQ;AACpC,aAAO,CAAC,MAAM,EAAE,GAAGA,UAAA,gBAAAA,OAAQ,OAAO,GAAG,6DAAuB,OAAO;AAAA,IAC/E,CAAS;AACD,UAAM,aAAa,kBAAkB,UAAU;AAC/C,WAAO;AAAA,EACV;AAOD,QAAM,iBAAiB,CAACpN,OAAM,yBAAyB;AACnD,UAAM,aAAa;AAAA,MACf,GAAGA;AAAA,MACH,GAAG,qBAAqB;AAAA,IAC3B;AACD,WAAO;AAAA,EACV;AAKD,QAAM,sBAAsB,iBAAe,kBAAkB,OAAO,QAAQ,SAAS,EAChF,OAAO,CAAC,CAAC,GAAG,QAAQ,MAAM,YAAY,QAAQ,CAAC,EAC/C,IAAI,CAAC,CAAC,UAAU,QAAQ,MAAM,CAAC,UAAU,YAAY,QAAQ,CAAC,CAAC,CAAC;AACrE,QAAM,yBAAyB,CAAAkN,iBAAe;AAC1C,UAAM,uBAAuB;AAAA;AAAA,MAE7B,OAAO,QAAQA,YAAW,EAAE,IAAI,CAAC,CAAC,aAAa9O,OAAM,MAAM;AAEvD,cAAM,kBAAkB,oBAAoBA,OAAM;AAElD,eAAO,QAAQA,OAAM,EAChB,OAAO,CAAC,CAAC,WAAW,CAAC,MAAM,SAAS,SAAS,SAAS,CAAC,EACvD,QAAQ,CAAC,CAAC,UAAU,UAAU,MAAM;AACrC,0BAAgB,QAAQ,IAAI,oBAAoB,UAAU;AAAA,QAC1E,CAAa;AACD,eAAO,CAAC,aAAa,eAAe;AAAA,MAChD,CAAS;AAAA,IAAC;AACF,WAAO;AAAA,EACV;AACD,QAAM,sCAAsC,CAAC4B,OAAMoN,QAAOD,WAAU;AAChE,UAAM,uBAAuB,uBAAuBD,YAAW;AAC/D,aAAS,QAAQ,IAAI,oBAAoB;AACzC,UAAM,aAAa,eAAelN,OAAM,oBAAoB;AAC5D,aAAS,QAAQ,IAAI,UAAU;AAC/B,UAAM,aAAa,eAAeoN,QAAO,oBAAoB;AAC7D,aAAS,QAAQ,IAAI,UAAU;AAC/B,UAAM,aAAa,eAAeD,QAAO,sBAAsB,UAAU;AACzE,aAAS,QAAQ,IAAI,UAAU;AAC/B,WAAO;AAAA,MACH,MAAM;AAAA,QACF,GAAG;AAAA,QACH,GAAG;AAAA,MACN;AAAA,MACD,OAAO;AAAA,IACV;AAAA,EACJ;AACD,SAAO,oCAAoC,MAAM,OAAO,KAAK;AACjE;AC5GO,SAAS,kBAAkB,UAAU,GAAG;AAC3C,QAAM,UAAU,MAAM,OAAO;AAC7B,QAAM,cAAc,MAAM,OAAO;AACjC,QAAM,UAAU,MAAM,OAAO;AAC7B,QAAM,UAAU,MAAM,OAAO;AAC7B,MAAI,UAAU,KAAK,UAAU,aAAa;AACtC,YAAQ,MAAM,oDAAoD,oBAAW,eAAc,gBAAO,6BAA4B;AAC9H,cAAU;AAAA,EAClB;AAEI,QAAM,cAAc,UAAU,UAAU;AAExC,QAAM,kBAAkB,UAAU,KAAK;AAEvC,QAAM,oBAAoB,cAAc;AAExC,SAAO,oBAAoB;AAC/B;ACfA,MAAM,EAAE,SAAS,eAAEE,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAClF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,IACd,aAAa;AAAA,IACb,WAAW;AAAA,IACX,eAAe;AAAA,IACf,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,aAAa;AAAA,IACb,WAAW,MAAM,MAAM;AAAA,IACvB,eAAe,MAAM,MAAM;AAAA,IAC3B,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,cAAc,MAAM,OAAO;AAAA,EAC9B;AAAA,EACDJ;AACJ;AACkB,oBAAoBI,WAAS;ACtB/C,MAAM,EAAE,OAAO,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,MAAM;AAC/E,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,IACP,cAAc;AAAA,IACd,KAAK;AAAA,EACR;AAAA,EACD,MAAM;AAAA;AAAA;AAAA,IAGF,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,OAAO;AAAA;AAAA,IAC3B,QAAQ;AAAA,MACJ,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO,MAAM,OAAO;AAAA,IACvB;AAAA,IACD,KAAK,MAAM,OAAO;AAAA,IAClB,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,YAAY;AAAA,EACf;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,OAAO;AAAA,MAC3B,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACpC;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,OAAO;AAAA,MAC3B,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACpC;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACA,MAAMhO,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,GAAG,MAAM,WAAW;AAAA,IACpB,OAAO,MAAM,MAAM;AAAA,IACnB,YAAY,MAAM,WAAW,KAAK,aAAa;AAAA,IAC/C,aAAa,MAAM,OAAO,KAAK,MAAM,OAAO;AAAA,IAC5C,YAAY,MAAM,OAAO,KAAK,MAAM,OAAO;AAAA,EAC9C;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDgO;AACJ;AACA,MAAMnB,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,EACtB;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDmB;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoBvB,MAAI;AACxB,oBAAoB7M,MAAI;ACjFrC,MAAM,EAAE,QAAQ,eAAEmO,eAAa,GAAG,kBAAiB,IAAK,EAAE,mBAAmB,CAAE,QAAO,+BAAO;AAE7F,MAAM,EAAE,SAAS,EAAE,oBAAoB,GAAG,mBAAkB,IAAK,EAAE,oBAAoB,CAAE,QAAO,+BAAO;AACvG,MAAMH,gBAAc;AAAA,EAChB,GAAG;AAAA,EACH,GAAG;AACP;AACA,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,IACd,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,aAAa;AAAA,EAChB;AAAA,EACD,MAAM;AAAA,IACF,QAAQ,MAAM,WAAW,QAAQ,aAAa,MAAM,OAAO,KAAK;AAAA,IAChE,SAAS;AAAA,IACT,SAAS,CAAC,MAAM,OAAO,MAAM,MAAM,OAAO,EAAE;AAAA,IAC5C,OAAO,MAAM,MAAM;AAAA,IACnB,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,cAAc,MAAM,OAAO;AAAA,IAC3B,cAAc,MAAM,MAAM;AAAA,EAC7B;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IAC7B;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACA,MAAM,UAAU;AAAA,EACZ,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,EACtB;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACDA;AACJ;AACA,MAAMhO,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,GAAG,MAAM,WAAW;AAAA,IACpB,WAAW;AAAA,IACX,SAAS;AAAA,EACZ;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACDgO;AACJ;AACkB,oBAAoBI,WAAS;AAC/B,oBAAoB,OAAO;AAC9B,oBAAoBpO,MAAI;AC5GrC,MAAM,EAAE,UAAU,eAAEmO,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AACnF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,IACP,cAAc;AAAA,IACd,QAAQ;AAAA,IACR,gBAAgB;AAAA,EACnB;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,OAAO;AAAA,IACpB,QAAQ,MAAM,OAAO;AAAA,IACrB,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,OAAO,MAAM,MAAM;AAAA,IACnB,YAAY;AAAA,IACZ,cAAc,MAAM,OAAO,MAAM;AAAA,IACjC,QAAQ;AAAA,MACJ,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO,MAAM,OAAO;AAAA,IAChC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,cAAc,MAAM,OAAO,MAAM;AAAA,MACjC,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACvB;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,SAAS;AAAA,QACL,cAAc,MAAM,OAAO,MAAM;AAAA,QACjC,QAAQ;AAAA,UACJ,OAAO,MAAM,MAAM;AAAA,UACnB,OAAO,MAAM,OAAO;AAAA,QACvB;AAAA,QACD,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACS;AAAA,IACD,SAAS;AAAA,MACL,cAAc,MAAM,OAAO,MAAM;AAAA,MACjC,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACvB;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,SAAS;AAAA,QACL,cAAc,MAAM,OAAO,MAAM;AAAA,QACjC,QAAQ;AAAA,UACJ,OAAO,MAAM,MAAM;AAAA,UACnB,OAAO,MAAM,OAAO;AAAA,QACvB;AAAA,QACD,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACS;AAAA,IACD,SAAS;AAAA,MACL,cAAc,MAAM,OAAO,MAAM;AAAA,MACjC,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACvB;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,SAAS;AAAA,QACL,cAAc,MAAM,OAAO,MAAM;AAAA,QACjC,QAAQ;AAAA,UACJ,OAAO,MAAM,MAAM;AAAA,UACnB,OAAO,MAAM,OAAO;AAAA,QACvB;AAAA,QACD,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACD,UAAU,CAAC,SAAS,YAAY,SAAS;AAAA,EACzCJ;AACJ;AACA,MAAM,OAAO;AAAA,EACT,WAAW;AAAA;AAAA,IAEP,OAAO;AAAA,IACP,QAAQ;AAAA,EACX;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,OAAO;AAAA,IACpB,QAAQ,MAAM,OAAO;AAAA,IACrB,KAAK,MAAM,MAAM;AAAA,EACpB;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDA;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoB,IAAI;ACxGrC,MAAM,EAAE,MAAM,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAC/E,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO,MAAM,MAAM;AAAA,EACtB;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDJ;AACJ;AACkB,oBAAoBI,WAAS;ACpB/C,MAAM,EAAE,QAAQ,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AACjF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,KAAK;AAAA,IACL,aAAa;AAAA,IACb,YAAY;AAAA,EACf;AAAA,EACD,MAAM;AAAA,IACF,SAAS;AAAA,IACT,eAAe;AAAA,IACf,KAAK,MAAM,OAAO;AAAA,IAClB,YAAY;AAAA,MACR,GAAG;AAAA,QACC,GAAG,MAAM,UAAU;AAAA,QACnB,UAAU,MAAM,UAAU,SAAS;AAAA,MACnD;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACkB,oBAAoBI,WAAS;ACpB/C,MAAM,EAAE,WAAW,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AACpF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,GAAG;AAAA,IACH,GAAG;AAAA,IACH,cAAc,MAAM,OAAO;AAAA,IAC3B,QAAQ;AAAA,MACJ,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO,MAAM,OAAO;AAAA,IAChC;AAAA,EACK;AAAA,EACDJ;AACJ;AACkB,oBAAoBI,WAAS;ACf/C,MAAM,EAAE,OAAO,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAChF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,IACd,OAAO;AAAA,IACP,gBAAgB;AAAA,EACnB;AAAA,EACD,MAAM;AAAA;AAAA;AAAA,IAGF,OAAO,kBAAkB,CAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,SAAS,CAAC,MAAM,OAAO,MAAM,MAAM,OAAO,EAAE;AAAA,IAC5C,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,MAAM;AAAA,IAC1B,cAAc,MAAM,OAAO;AAAA,IAC3B,SAAS,MAAM,OAAO;AAAA,IACtB,aAAa;AAAA,EAChB;AAAA,EACDJ;AACJ;AACA,MAAMhO,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,WAAW;AAAA,IACX,OAAO,MAAM,MAAM;AAAA,IACnB,GAAG,MAAM,WAAW;AAAA,EACvB;AAAA,EACDgO;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoBpO,MAAI;AClCrC,MAAM,EAAE,KAAK,eAAEmO,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAC9E,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,YAAY,MAAM,OAAO;AAAA,IACzB,QAAQ,MAAM,OAAO,KAAK;AAAA,IAC1B,UAAU,MAAM,OAAO;AAAA,IACvB,cAAc,MAAM,MAAM;AAAA,IAC1B,OAAO;AAAA,MACH,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,KAAK;AAAA,IACR;AAAA,IACD,SAAS,CAAC,MAAM,OAAO,EAAE;AAAA,IACzB,WAAW,MAAM,OAAO,KAAK;AAAA,IAC7B,OAAO,MAAM,MAAM;AAAA,IACnB,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,cAAc,MAAM,OAAO;AAAA,EAC9B;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IAC7B;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IACtC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,OAAO;AAAA,QACH,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACA,MAAMhO,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,GAAG,MAAM,WAAW;AAAA,IACpB,WAAW;AAAA,IACX,SAAS;AAAA,EACZ;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACDgO;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoBpO,MAAI;ACrFrC,MAAM,EAAE,KAAK,eAAEmO,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAC9E,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,KAAK;AAAA,IACL,aAAa;AAAA,IACb,YAAY;AAAA,EACf;AAAA,EACD,MAAM;AAAA,IACF,SAAS;AAAA,IACT,eAAe;AAAA,IACf,KAAK,MAAM,OAAO;AAAA,IAClB,YAAY;AAAA,MACR,GAAG;AAAA,QACC,GAAG,MAAM,UAAU;AAAA,QACnB,UAAU,MAAM,UAAU,SAAS;AAAA,MACnD;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACkB,oBAAoBI,WAAS;ACpB/C,MAAM,EAAE,UAAU,eAAED,eAAa,GAAGH,cAAW,IAAK,CAAE,MAAK,+BAAO;AAElE,MAAM,EAAE,KAAK,EAAE,GAAG,eAAc,IAAK,GAAI,IAAG,+BAAO;AACnD,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,KAAK;AAAA,IACL,OAAO;AAAA,IACP,SAAS;AAAA,IACT,WAAW;AAAA,EACd;AAAA,EACD,MAAM;AAAA,IACF,KAAK,MAAM,OAAO;AAAA,IAClB,OAAO,MAAM,OAAO;AAAA,IACpB,SAAS;AAAA,IACT,SAAS,MAAM,OAAO;AAAA,IACtB,WAAW;AAAA,IACX,cAAc;AAAA,EACjB;AAAA;AAAA,EAEDJ;AACJ;AACA,MAAM,MAAM;AAAA,EACR,WAAW;AAAA,IACP,KAAK;AAAA,IACL,cAAc;AAAA,IACd,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,IACP,cAAc;AAAA;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,KAAK,MAAM,OAAO;AAAA,IAClB,QAAQ,MAAM,OAAO,KAAK;AAAA,IAC1B,OAAO;AAAA,MACH,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,KAAK;AAAA,IACR;AAAA,IACD,cAAc,MAAM,MAAM;AAAA,IAC1B,SAAS,CAAC,MAAM,OAAO,MAAM,MAAM,OAAO,EAAE;AAAA,IAC5C,WAAW,MAAM,OAAO,KAAK;AAAA,IAC7B,OAAO,MAAM,MAAM;AAAA,IACnB,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,cAAc,MAAM,OAAO;AAAA,EAC9B;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IAC7B;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IACtC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,OAAO;AAAA,QACH,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACA;AAAA,EACK;AAAA,EACD,aAAa;AACjB;AACA,MAAMhO,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,GAAG,MAAM,WAAW;AAAA,EACvB;AAAA,EACD,OAAO;AAAA,IACH,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA;AAAA,EAEDgO;AACJ;AACkB,oBAAoBI,WAAS;AACnC,oBAAoB,GAAG;AACtB,oBAAoBpO,MAAI;ACxGrC,MAAM,EAAE,OAAO,eAAEmO,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAChF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,OAAO,MAAM,MAAM;AAAA,IACnB,SAAS,CAAC,MAAM,OAAO,IAAI,MAAM,OAAO,EAAE;AAAA;AAAA,IAC1C,QAAQ,MAAM,WAAW,SAAS,aAAa,MAAM,OAAO,KAAK;AAAA,IACjE,cAAc,CAAC,MAAM,OAAO,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO,IAAI;AAAA,IACnF,SAAS;AAAA,MACL,iBAAiB,MAAM,MAAM;AAAA,IACzC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,QACH,OAAO,MAAM,MAAM;AAAA,MACnC;AAAA,IACA;AAAA,EACK;AAAA,EACDJ;AACJ;AACA,MAAM,OAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACF,GAAG,MAAM,WAAW;AAAA,IACpB,OAAO,MAAM,MAAM;AAAA,IACnB,YAAY,MAAM,WAAW,SAAS,aAAa,MAAM,OAAO,KAAK;AAAA,IACrE,aAAa,MAAM,OAAO;AAAA,IAC1B,YAAY,MAAM,OAAO;AAAA,EAC5B;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDA;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoB,IAAI;ACpDrC,MAAM,EAAE,aAAa,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AACtF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,QAAQ,MAAM,OAAO;AAAA,IACrB,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,OAAO;AAAA,EAC9B;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDJ;AACJ;AACA,MAAM,WAAW;AAAA,EACb,WAAW;AAAA,IACP,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,cAAc,MAAM,OAAO;AAAA,IAC3B,OAAO,MAAM,MAAM;AAAA,EACtB;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IACtB;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDA;AACJ;AACkB,oBAAoBI,WAAS;AAC3B,oBAAoB,QAAQ;ACtChD,MAAM,EAAE,OAAO,eAAED,eAAa,GAAGH,cAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AAChF,MAAMI,cAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,IACd,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,QAAQ,MAAM,OAAO,MAAM,MAAM,OAAO,KAAK;AAAA,IAC7C,OAAO,MAAM,OAAO,MAAM,MAAM,OAAO,KAAK;AAAA,IAC5C,cAAc,MAAM,OAAO,MAAM,IAAI,MAAM,OAAO;AAAA,IAClD,QAAQ;AAAA,MACJ,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO,MAAM,OAAO;AAAA,IAChC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACpC;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO,MAAM,OAAO;AAAA,MACpC;AAAA,IACA;AAAA,EACK;AAAA,EACD,UAAU,CAAC,SAAS,YAAY,SAAS;AAAA,EACzCJ;AACJ;AACA,MAAMK,SAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,MAAM;AAAA,IAC1B,OAAO,MAAM,OAAO;AAAA,IACpB,QAAQ,MAAM,OAAO;AAAA,IACrB,cAAc,MAAM,OAAO,MAAM;AAAA,EACpC;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,IAC/B;AAAA,EACK;AAAA,EACDL;AACJ;AACkB,oBAAoBI,WAAS;AAClC,oBAAoBC,MAAI;ACzDrC,MAAM,EAAE,QAAQ,EAAE,aAAa,GAAG,YAAW,IAAK,EAAE,aAAa,CAAE,QAAO,+BAAO;AACjF,MAAM,WAAW,MAAM,OAAO;AAC9B,MAAM,cAAc,MAAM,OAAO;AACjC,MAAM,cAAc,MAAM,OAAO;AACjC,MAAM,YAAY;AAAA,EACd,WAAW;AAAA,IACP,cAAc;AAAA,IACd,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,MAAM;AAAA,IAC1B,QAAQ,YAAY,cAAc,eAAe;AAAA,IACjD,QAAQ,cAAc,cAAc,IAAI,YAAY;AAAA,IACpD,cAAc,WAAW,IAAI,cAAc;AAAA,IAC3C,QAAQ;AAAA;AAAA,MAEJ,OAAO,MAAM,MAAM;AAAA,MACnB,OAAO;AAAA,IACnB;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,OAAO,CAAE;AAAA,IACT,UAAU;AAAA,MACN,cAAc,WAAW,IAAI,cAAc;AAAA,MAC3C,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO;AAAA,MACV;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IACtC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,cAAc,WAAW,IAAI,cAAc;AAAA,MAC3C,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO;AAAA,MACV;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,MAC1B,UAAU;AAAA,QACN,cAAc,WAAW,IAAI,cAAc;AAAA,QAC3C,QAAQ;AAAA,UACJ,OAAO,MAAM,MAAM;AAAA,UACnB,OAAO;AAAA,QACV;AAAA,QACD,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,cAAc,WAAW,IAAI,cAAc;AAAA,MAC3C,QAAQ;AAAA,QACJ,OAAO,MAAM,MAAM;AAAA,QACnB,OAAO;AAAA,MACV;AAAA,MACD,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,MAC1B,UAAU;AAAA,QACN,cAAc,WAAW,IAAI,cAAc;AAAA,QAC3C,QAAQ;AAAA,UACJ,OAAO,MAAM,MAAM;AAAA,UACnB,OAAO;AAAA,QACV;AAAA,QACD,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACA;AAAA,EACK;AAAA;AAAA,EAED;AACJ;AACA,MAAM,OAAO;AAAA,EACT,WAAW;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,cAAc;AAAA,IACd,OAAO;AAAA,IACP,cAAc;AAAA,EACjB;AAAA,EACD,MAAM;AAAA,IACF,OAAO,MAAM,MAAM;AAAA,IACnB,cAAc,MAAM,MAAM;AAAA,IAC1B,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,cAAc,WAAW;AAAA,IACzB,SAAS;AAAA,EACZ;AAAA,EACD,OAAO;AAAA,IACH,OAAO,CAAE;AAAA,IACT,UAAU;AAAA,MACN,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,IACtC;AAAA,EACK;AAAA,EACD,OAAO;AAAA,IACH,SAAS;AAAA,MACL,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,MAC1B,UAAU;AAAA,QACN,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACS;AAAA,IACD,OAAO;AAAA,MACH,OAAO,MAAM,MAAM;AAAA,MACnB,cAAc,MAAM,MAAM;AAAA,MAC1B,UAAU;AAAA,QACN,OAAO,MAAM,MAAM;AAAA,QACnB,cAAc,MAAM,MAAM;AAAA,MAC1C;AAAA,IACA;AAAA,EACK;AAAA,EACD;AACJ;AACkB,oBAAoB,SAAS;AAClC,oBAAoB,IAAI;ACzHrC,MAAMC,WAAW;AAAA,EACb5D,OAAO;AAAA,EACPtM,QAAQ;AAAA,EACRD,OAAO;AAAA,EACPyL,GAAG;AAAA,EACHlB,GAAG;AAAA,EACH6F,QAAQ;AAAA,EACRhE,OAAO;AAAA,EACPgB,QAAQ;AACZ;AACA,MAAMiD,WAAW;AAAA,EACb5E,GAAG;AAAA,EACH4C,UAAU;AAAA,EACViC,WAAW;AACf;AACA,MAAMC,WAAW;AAAA,EACblC,UAAU;AAAA,EACViC,WAAW;AACf;AACA,MAAM,CAACzQ,KAAK2Q,MAAM,IAAI1H,aAAa,CAAC;AACpC,MAAM,CAAC2H,QAAQC,SAAS,IAAI5H,aAAa,CAAC;AAC1C,MAAM,CAAC6H,QAAQC,SAAS,IAAI9H,aAAa,EAAE;AAC3C,MAAM,CAAC+H,QAAQC,SAAS,IAAIhI,aAAa,CAAC;AAC1C,MAAM,CAACiI,yBAAyBC,0BAA0B,IAAIlI,aAAa,EAAE;AAC7E,MAAM,CAACmI,uBAAuBC,wBAAwB,IAAIpI,aAAa,EAAE;AACzE,MAAM,CAACqI,yBAAyBC,0BAA0B,IAAItI,aAAa,EAAE;AAC7E,MAAM,CAACuI,eAAeC,gBAAgB,IAAIxI,aAAa,EAAE;AACzD,MAAM,CAACyI,gCAAgCC,iCAAiC,IAAI1I,aAAa,CAAC;AAC1F,MAAM,CAAC2I,sBAAsBC,uBAAuB,IAAI5I,aAAa,CAAC;AACtE,IAAI5I,QAAQ;AACZ,IAAIyR,WAAW;AACf,MAAMC,eAAe;AAOrB,SAAShT,UAAUiT,OAAO;AACtB,UAAQA,QAAQ,OAAO,MAAMC,QAAQ,CAAC,IAAI;AAC9C;AACA,MAAMC,UAAWlS,UAAQ;AACrB,MAAI,CAACA,KACD;AACJ2Q,SAAO3Q,IAAG;AACV+Q,YAAU7L,CAAQ2E,cAAKC,IAAI9J,MAAKkF,IAAI,CAAC;AACrC+L,YAAU/L,CAAQ2E,cAAKsI,IAAInS,MAAKkF,IAAI,CAAC;AACzBlF;AACZK;AACAwQ,YAAUhH,KAAKuI,MAAMN,WAAWzR,KAAK,CAAC;AAC1C;AACA,SAASgS,iBAAiBC,OAAO;AACvBC,kBAAUD,MAAME,aAAaC,cAAc;AACtB1T,uCAAUwT,QAAQG,iBAAiB,CAAC;AACtC3T,qCAAUwT,QAAQI,eAAe,CAAC;AAChC5T,uCAAUwT,QAAQK,iBAAiB,CAAC;AAC9C7T,6BAAUwT,QAAQM,OAAO,CAAC;AAC3ClB,oCAAkCY,QAAQO,wBAAwB;AAClEjB,0BAAwBU,QAAQQ,cAAc;AAClD;AACA,IAAIC,aAAa;AACV,SAASC,SAASpP,MAAM;AAC3BA,OAAKrE,SAASuF,GAAG,aAAa,CAAC+B,QAAQoM,YAAY;AAC/C,UAAMlT,OAAM,OAAOkT,YAAY,WAAWA,UAAUA,QAAQlT;AAE5D,QAAIA,OAAM,GAAG;AACTkS,cAAQlS,IAAG;AACPgT,uBAAa,OAAO,GAAG;AACvBX,yBAAiBvL,OAAOwL,KAAK;AAChB;AAAA;AAEjBU;AAAAA;AAAAA,EACJ,CACH;AACL;AAEO,MAAMG,aAAatQ,CAAS;AAC/BY,yBAASwH,MAAIf,WAAKrH,OAAK;AAAA,IAAE4G,OAAO6G;AAAAA,IAAQ,IAAA3P,WAAA;AAAA8C,8BACrCwH,MAAI;AAAA,QAACP,GAAG;AAAA,QAAC,IAAA/J,WAAA;AAAA8C,kCACPqL,MAAI;AAAA,YAACrF,OAAO+G;AAAAA,YAAQ7P,UAAA;AAAA,WAAA8C,mBACpBqL,MAAI;AAAA,YAACrF,OAAOiH;AAAAA,YAAU9E,GAAG;AAAA,YAAE,IAAAjL,WAAA;AACzBX,2BAAMoT,SAAS;AAAA;AAAA,UAAC;AAAA;AAAA,OAAA3P,mBAIpBwH,MAAI;AAAA,QAACP,GAAG;AAAA,QAAGkB,GAAG;AAAA,QAAG,IAAAjL,WAAA;AAAA8C,kCACfqL,MAAI;AAAA,YAACrF,OAAO+G;AAAAA,YAAQ7P,UAAA;AAAA,WAAA8C,mBACpBqL,MAAI;AAAA,YAACrF,OAAOiH;AAAAA,YAAU9E,GAAG;AAAA,YAAG,IAAAjL,WAAA;AAC1BiQ,8BAASwC,SAAS;AAAA;AAAA,UAAC;AAAA;AAAA,OAAA3P,mBAIvBwH,MAAI;AAAA,QAACW,GAAG;AAAA,QAAGlB,GAAG;AAAA,QAAE,IAAA/J,WAAA;AAAA8C,kCACdqL,MAAI;AAAA,YAACrF,OAAO+G;AAAAA,YAAQ7P,UAAA;AAAA,WAAA8C,mBACpBqL,MAAI;AAAA,YAACrF,OAAOiH;AAAAA,YAAU9E,GAAG;AAAA,YAAE,IAAAjL,WAAA;AACzBmQ,8BAASsC,SAAS;AAAA;AAAA,UAAC;AAAA;AAAA,OAAA3P,mBAIvBwH,MAAI;AAAA,QAACW,GAAG;AAAA,QAAKlB,GAAG;AAAA,QAAE,IAAA/J,WAAA;AAAA8C,kCAChBqL,MAAI;AAAA,YAACrF,OAAO+G;AAAAA,YAAQ7P,UAAA;AAAA,WAAA8C,mBACpBqL,MAAI;AAAA,YAACrF,OAAOiH;AAAAA,YAAU9E,GAAG;AAAA,YAAG,IAAAjL,WAAA;AAC1BqQ,8BAASoC,SAAS;AAAA;AAAA,UAAC;AAAA;AAAA,OAAA3P,mBAIvBwH,MAAI;AAAA,QAACV,SAAO;AAAA,QAAQb,eAAa;AAAA,QAAUgB,GAAG;AAAA,QAAIF,KAAK;AAAA,QAAC,IAAA7J,WAAA;AAAA8C,kCACtDwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAAA,yBAClDuQ,wBAAwB;AAAA;AAAA,cAAC;AAAA;AAAA,WAAAzN,mBAI7BwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAAA,yBAClDyQ,sBAAsB;AAAA;AAAA,cAAC;AAAA;AAAA,WAAA3N,mBAI3BwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAAA,yBAClD2Q,wBAAwB;AAAA;AAAA,cAAC;AAAA;AAAA,WAAA7N,mBAI7BwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAAA,yBAClD6Q,cAAc;AAAA;AAAA,cAAC;AAAA;AAAA,WAAA/N,mBAInBwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAClD+Q,0DAAiC0B,SAAS;AAAA;AAAA,cAAC;AAAA;AAAA,WAAA3P,mBAI/CwH,MAAI;AAAA,YAAC7K,QAAQ2R;AAAAA,YAAY,IAAApR,WAAA;AAAA8C,sCACvBqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAQ7P,UAAA;AAAA,eAAA8C,mBAG5CqL,MAAI;AAAA,gBAACN,UAAUuD;AAAAA,gBAActI,OAAO+G;AAAAA,gBAAU5E,GAAG;AAAA,gBAAG,IAAAjL,WAAA;AAClDiR,gDAAuBwB,SAAS;AAAA;AAAA,cAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAK9C;ACzJA,MAAMC,MAAOxQ,CAAU;AACL;AAAA,IACdyQ,WAAW,CAAC,GAAG;AAAA,IACfC,MAAM,CAAC,GAAG;AAAA,IACVC,QAAQ,CAAC,UAAU,EAAE;AAAA,IACrBC,WAAW,CAAC,aAAa,CAAC;AAAA,IAC1BC,MAAM,CAAC,aAAa,EAAE;AAAA,IACtBC,OAAO,CAAC,cAAc,EAAE;AAAA,IACxBC,IAAI,CAAC,WAAW,EAAE;AAAA,IAClBC,MAAM,CAAC,aAAa,EAAE;AAAA,IACtBC,OAAO,CAAC,SAAS,EAAE;AAAA,GACC;AACtB,QAAMC,YAAYC,aAAa;AAC/BD,YAAUE,UAAU;AACpB,QAAMhF,WAAWC,YAAY;AAE7B,MAAIgF,WAAWC;AAEN;AAAA,IAAE3U;AAAAA,GAAU;AAErB,WAAS4U,iBAAiB;AACxB,QAAIF,UAAUjT,OAAOoT,IAAI,OAAO,GAAG;AAC1B;AAAA;AAETF,kBAActT,cAAc;AAC5B,WAAOqT,UAAU7E,SAAS;AAAA;AAG5B,QAAM,CAACiF,aAAaC,cAAc,IAAItL,aAAa,IAAI;AACvD,QAAM9E,WAAWqQ,YAAY;AACvBC,sBAAc,CAAC,WAAW,SAAS;AACzCvL,eAAa,MAAM;AACjB,UAAMwL,cAAcvQ,SAASwQ;AACvB9Q,iBAAO+Q,SAASC,eAAe,MAAM;AAC3C,QAAIC,iBAAiBL,YAAYM,KAAM1S,UACrCqS,YAAYjO,WAAWpE,IAAI,CAC7B;AAEA,QAAIqS,gBAAgB,KAAK;AACN;AAAA;AAGf7Q,mBAAW0L,OAAO;AAEtBgF,mBAAeO,cAAc;AAAA,GAC9B;AAED,QAAM,CAACE,SAASC,UAAU,IAAIhM,aAAiC;AAC/D,QAAM,CAACiM,WAAWC,YAAY,IAAIlM,aAAiC;AACnE,QAAMmM,kBAAmBC,CAAM;AAC7BJ,eAAW,aAAaI,SAAErW,KAAG,YAAWqW,SAAEC,QAAS;AAAA,EACrD;AACSrO,4BAAiB,WAAWmO,eAAe;AACpD,QAAMG,eAAgBF,CAAM;AAC1BF,iBAAcvM,CAAOA,YAAK,MAAM,OAAOyM,EAAEG,OAAO;AAAA,EAClD;AACSvO,4BAAiB,WAAWsO,YAAY;AACjDE,YAAU,MAAM;AACLvO,iCAAoB,WAAWqO,YAAY;AAC3CrO,iCAAoB,WAAWkO,eAAe;AAAA,GACxD;AAEGM;AAEJ,SAAAjS,gBACGwH,MAAI;AAAA,IAAAuC,IAAAC,IAAA;AAAA,UAAAC,QACEhH,OAAOiP;AAAG,aAAAjI,6BAAAD,EAAA,IAAV/G,OAAOiP,MAAGlI;AAAAA,IAAA;AAAA,IACfmI,aAAaA,MAAO7B,UAAUE,UAAU,CAACF,UAAUE;AAAAA,IACnD4B,QAAQA,MAAMlO,QAAQmO,KAAK;AAAA,IAC3BC,QAAQA,MAAM9G,SAAS,GAAG;AAAA,IAC1BxF,OAAO;AAAA,MAAEtJ,OAAO;AAAA,MAAMC,QAAQ;AAAA,IAAK;AAAA,IACnC4V,aAAa5B;AAAAA,IACbvI,QAAQuI;AAAAA,IACRrK,SAASA,MACPmK,UAAUjT,OAAOoT,IAAI,OAAO,MAC3BF,eAAeuB,eAAerG,SAAS;AAAA,IAAC,IAAA1O,WAAA;AAAA,cAAA8C,gBAG1CsI,YAAUtI,qBACV0P,YAAU;AAAA,QAAC5C,QAAQ;AAAA,QAAG3E,GAAG;AAAA,QAAMlB,GAAG;AAAA,QAAE,IAAE6B,QAAK;AAAE+H,iCAAgB,IAAI;AAAA;AAAA,MAAI,CAAA7Q,mBACrEwH,MAAI;AAAA,QACHsF,QAAQ;AAAA,QACRpQ,OAAO;AAAA,QACPC,QAAQ;AAAA,QACRwL,GAAG;AAAA,QACHlB,GAAG;AAAA,QACHgC,OAAO;AAAA,QAAU,IACjBuJ,SAAM;AAAA,iBAAE,CAAC3B,YAAY;AAAA,QAAC;AAAA,YAAA3T,WAAA;AAAA,iBAAA8C,gBAErBqL,MAAI;AAAA,YAACN,UAAU;AAAA,YAAI9D,GAAG;AAAA,YAAGkB,GAAG;AAAA,YAAC,IAAAjL,WAAA;AAAA,qBAC3BqU,QAAQ;AAAA;AAAA,UAAC;AAAA;AAAA,OAAAvR,mBAIbqL,MAAI;AAAA,QAAClD,GAAG;AAAA,QAAKlB,GAAG;AAAA,QAAI8D,UAAU;AAAA,QAAI0H,SAAO;AAAA,QAAS/V,OAAO;AAAA,QAAG,IAAAQ,WAAA;AAAA,iBAC1DuU,UAAU;AAAA;AAAA,MAAC,CAAAzR,mBAEbwH,MAAI;AAAA,QAAAuC,IAAAC,IAAA;AAAA,cAAAE,SAAM+H;AAAa,iBAAA/H,+BAAAF,EAAA,IAAbiI,gBAAajI;AAAAA,QAAA;AAAA,QAAEtC,cAAc;AAAA,QAAC,IAAAxK,WAAA;AAAA,iBACtCkC,MAAMlC;AAAAA;AAAAA,MAAQ,CAAA8C,mBAEhBsL,WAAS;AAAA,QAAAvB,IAAAC,IAAA;AAAA,cAAAG,SACHsG;AAAS,iBAAAtG,+BAAAH,EAAA,IAATyG,YAASzG;AAAAA,QAAA;AAAA,QACdmC,WAAWA,MAAMuE,YAAY9E,SAAS;AAAA,QAAC,IACvCiF,cAAW;AAAA,iBAAEA,YAAY;AAAA;AAAA,MAAC;AAAA;AAAA;AAIlC;ACpHA,MAAM,SAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM;AACzD,MAAM,cAAc,OAAO,IAAI,aAAa,MAAM;AAElD,MAAe;AAAA,EACb,MAAM;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,EACV;AAAA,EACA,cAAc;AAAA,IACZ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,EACb;AAAA,EACA,iBAAiB;AAAA,IACf,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,EACb;AAAA,EACA,gBAAgB;AAAA,IACd,OAAO,MAAM,OAAO;AAAA,IACpB,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AAAA,EACA,WAAW;AAAA,IACT,cAAc,cAAc,KAAK;AAAA,IACjC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,YAAY,EAAE,OAAO,EAAE,UAAU,KAAK,QAAQ,gBAAgB;AAAA,IAC9D,QAAQ,EAAE,OAAO,GAAG,OAAO,EAAW;AAAA,IACtC,QAAQ,EAAE,OAAO,KAAK,QAAQ,EAAE,OAAO,YAAkB,SAAI;AAAA,EAC/D;AAAA,EACA,WAAW;AAAA,IACT,cAAc;AAAA,IACd,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AAAA,EACA,KAAK;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,GAAG;AAAA,IACH,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AAAA,EACA,UAAU;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,UAAU;AAAA,IACV,WAAW;AAAA,EACb;AAAA,EACA,UAAU;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,UAAU;AAAA,IACV,WAAW;AAAA,EACb;AAAA,EACA,cAAc,EAAE,GAAG,IAAI,GAAG,GAAG;AAAA,EAC7B,cAAc;AAAA,IACZ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,cAAc;AAAA,IACd,UAAU;AAAA,IACV,OAAO;AAAA,IACP,QAAQ;AAAA,EACV;AAAA,EACA,KAAK;AAAA,IACH,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,QAAQ;AAAA,EACV;AAAA,EACA,QAAQ;AAAA,IACN,SAAS;AAAA,IACT,eAAe;AAAA,IACf,gBAAgB;AAAA,IAChB,cAAc;AAAA,IACd,KAAK;AAAA,IACL,OAAO,MAAM,OAAO,UAAU,IAAI,MAAM,OAAO;AAAA,IAC/C,GAAG,MAAM,OAAO,UAAU,MAAM,OAAO;AAAA,IACvC,GAAG;AAAA,IACH,YAAY,EAAE,GAAG,EAAE,UAAU,KAAK,QAAQ,gBAAgB;AAAA,IAC1D,QAAQ;AAAA,EACV;AAAA,EACA,MAAM;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,OAAO;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACT,GAAG,MAAM,WAAW;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,OAAO;AAAA,IACP,QAAQ;AAAA;AAEZ;AAEA,MAAM6B,WAAS;AAAA,EACb,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,IACN,OAAO;AAAA;AAEX;AAEA,MAAM,SAAS;AAAA,EACb,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,GAAG;AAAA,EACH,GAAG;AAAA,EACH,OAAOA,SAAO,QAAQ;AACxB;AAEA,MAAM,aAAa;AAAA,EACjB,UAAU;AAAA,EACV,YAAYA,SAAO;AAAA,EACnB,SAAS;AAAA,EACT,WAAW;AAAA,EACX,QAAQA,SAAO;AAAA,EACf,OAAOA,SAAO;AAAA,EACd,OAAO;AAAA,EACP,QAAQ;AAAA,IACN,OAAO;AAAA;AAEX;AAEO,MAAM,eAAe;AAAA,EAC1B,WAAWA;AAAAA,EACX,QAAQ;AAAA,EACR,MAAM;AACR;AC/JO,SAASC,UAAUvT,OAA2B;AACnDY,yBAAQwH,MAAIf,WAAKrH,OAAK;AAAA,QAAE4G,QAAK;AAAA,aAAEvI,OAAOkV;AAAAA;AAAAA,EAAS;AACjD;AAWO,SAASC,QAAQxT,OAAqB;AAC3CY,yBACGqI,KAAG5B,WAAKrH,OAAK;AAAA,QAAE4G,QAAK;AAAA,aAAEvI,OAAO4K;AAAAA,IAAG;AAAA,QAAAnL,WAAA;AAAA,aAAA8C,gBAC9B2G,OAAK;AAAA,YAACf,OAAI;AAAA,iBAAExG,MAAMuG;AAAAA,QAAK;AAAA,QAAAzI,UAAI2V,UAAI7S,gBAAM2S,WAAcE,IAAI;AAAA,OAAI;AAAA;AAAA;AAGlE;AAEO,SAASH,OAAOtT,OAAO;AAC5BY,yBACGwH,MAAIf,WAAKrH,OAAK;AAAA,IAAE8L,eAAa;AAAA,QAAClF,QAAK;AAAA,aAAE8M,aAAanG;AAAAA,IAAS;AAAA,QAAAzP,WAAA;AAAA,aAAA8C,gBACzDqL,MAAI;AAAA,YAACrF,QAAK;AAAA,iBAAE8M,aAAavU;AAAAA,QAAI;AAAA,YAAArB,WAAA;AAAA,iBAAGkC,MAAMlC;AAAAA;AAAAA,MAAQ;AAAA;AAAA;AAGrD;AAEA,MAAM6V,iBAAiB;AAAA,EACrB7L,UAAU;AAAA,EACVC,QAAQ;AACV;AAEA,MAAM6L,iBAAiB;AAAA,EACrBC,YAAY;AAAA,EACZlI,UAAU;AAAA,EACVpO,QAAQ;AAAA,EACRuW,YAAY;AACd;AAEO,SAASC,SAAS/T,OAAqB;AAC5C,QAAMoM,WAAWC,YAAY;AAE7B,WAASW,UAA2B;AAClC,QAAIgH,OAAO,KAAKA;AAEhBC,iBAAaD,IAAI;AACjB5H,aAAS4H,IAAI;AAEN;AAAA;AAGT,SAAApT,gBACGwH,MAAI;AAAA,QAAC7K,SAAM;AAAA,aAAEyC,MAAMzC;AAAAA,IAAM;AAAA,IAAE+K,cAAc;AAAA,IAAG4L,WAAW;AAAA,IAAE,IAAApW,WAAA;AAAA8C,8BACvDqL,MAAI;AAAA,QAACgB,WAAS;AAAA,QAACrG,OAAOgN;AAAAA,QAAc,IAAA9V,WAAA;AAAA,iBAClCkC,MAAMmU;AAAAA;AAAAA,MAAK,CAAAvT,mBAEbkF,QAAM;AAAA,QACLwB,WAAW2B;AAAAA,QACXtC,WAAS;AAAA,QACTgB,KAAK;AAAA,QACLlB,SAAS;AAAA,QAAE,IACXD,OAAI;AAAA,iBAAExG,MAAMuG;AAAAA,QAAK;AAAA,QACjBsB,GAAG;AAAA,QAAE/J,UAEH2V,UAAI7S,gBACHwG,SAAOC,WAAA;AAAA,cAACC,YAAS;AAAE8M,mCAAgBpU,MAAMqU,IAAInQ,IAAI;AAAA;AAAA,WAAOuP,MAAI;AAAA,UAAIzG;AAAAA,SAAgB;AAAA,OAClF;AAAA;AAAA;AAIT;AAEA,MAAMsH,eAAe;AAAA,EACnBhX,OAAO;AAAA,EACPC,QAAQ;AAAA,EACRwO,OAAO;AAAA,EACPrB,QAAQ;AAAA,EACRb,OAAO;AAAA,EACPjC,YAAY;AAAA,IACVmE,OAAO;AAAA,MAAEjE,UAAU;AAAA,MAAKC,QAAQ;AAAA;AAAA,EAClC;AAAA,EACAwM,QAAQ;AAAA,IAAExI,OAAO;AAAA,IAAKlC,OAAO;AAAA;AAC/B;AAEO,SAAS2K,OAAOxU,OAAkB;AACvCY,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,IACTyU,QAAS7W,CAAUA,cAAKmM,MAAM;AAAA,IAC9BnD,OAAO0N;AAAAA,GAAY;AAGzB;AAEA,MAAMI,oBAAoB;AAAA,EACxBb,YAAY;AAAA,EACZlI,UAAU;AAAA,EACVmI,YAAY;AAAA,EACZvW,QAAQ;AAAA,EACRwL,GAAG;AAAA,EACHlB,GAAG;AAAA,EACHwL,SAAS;AAAA,EACT/V,OAAO;AAAA,EACPqX,UAAU;AAAA,EACVjL,OAAO;AAAA,EACP6K,QAAQ;AAAA,IACN7K,OAAO;AAAA,IACP7B,GAAG;AAAA,EACL;AAAA,EACAD,YAAY;AAAA,IACVC,GAAG8L;AAAAA,IACHjK,OAAOiK;AAAAA;AAEX;AAEO,SAASiB,YAAY5U,OAAsC;AAChEY,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,IACTyU,QAAS7W,CAAUA,cAAKmM,MAAM;AAAA,IAC9BnD,OAAO0N;AAAAA,IACPxI,eAAa;AAAA,QAAAhO,WAAA;AAAA,aAAA8C,gBAEZqL,MAAI;AAAA,QAACrF,OAAO8N;AAAAA,QAAiB,IAAA5W,WAAA;AAAA,iBAAGkC,MAAMmU;AAAAA;AAAAA,MAAK;AAAA;AAAA;AAGlD;AAEA,MAAMU,aAAa;AAAA,EACjBvX,OAAO;AAAA,EACPC,QAAQ;AAAA,EACRwO,OAAO;AAAA,EACPrB,QAAQ;AAAA,EACRoK,UAAU;AAAA,EACVC,aAAa;AAAA,EACbnN,YAAY;AAAA,IACVmE,OAAO4H;AAAAA,EACT;AAAA,EACAY,QAAQ;AAAA,IAAExI,OAAO;AAAA;AACnB;AAEA,MAAMiJ,iBAAiB;AAAA,EACrBnB,YAAY;AAAA,EACZR,SAAS;AACX;AAEO,SAAS4B,KACdjV,OAMA;AACA,QAAM,CAACkV,UAAUC,WAAW,IAAI/O,aAAa,KAAK;AAClDxF,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,QACT+J,MAAG;AAAA,aAAE/J,MAAMmM;AAAAA,IAAQ;AAAA,IACnBvF,OAAOiO;AAAAA,IACPO,gBAAgBD;AAAAA,IAChBrJ,eAAa;AAAA,QAAAhO,WAAA;AAAA,aAAA8C,gBAEZwH,MAAI;AAAA,QAACR,YAAY;AAAA,UAAE8B,OAAOiK;AAAAA,QAAe;AAAA,QAAC,IAAEjK,QAAK;AAAEwL,8BAAa,IAAI;AAAA,QAAC;AAAA,YAAApX,WAAA;AAAA8C,kCACnEwH,MAAI;AAAA,YAAC9K,OAAO;AAAA,YAAKC,QAAQ;AAAA,YAAKwL,GAAG;AAAA,YAAIlB,GAAG;AAAA,YAAG,IAAEkC,MAAG;AAAA,qBAAE/J,MAAM+J;AAAAA;AAAAA,UAAG,CAAAnJ,mBAC3DqL,MAAI;AAAA,YACHpE,GAAG;AAAA,YACHkB,GAAG;AAAA,YACH4C,UAAU;AAAA,YACVrO,OAAO;AAAA,YACPqX,UAAU;AAAA,YACV/N,OAAOoO;AAAAA,YAAc,IAAAlX,WAAA;AAAA,qBAEpBkC,MAAMmU;AAAAA;AAAAA,UAAK,CAAAvT,mBAEbqL,MAAI;AAAA,YACHpE,GAAG;AAAA,YACHkB,GAAG;AAAA,YACH4C,UAAU;AAAA,YACVrO,OAAO;AAAA,YACPqX,UAAU;AAAA,YACVb,YAAY;AAAA,YACZjK,OAAO;AAAA,YACPjD,OAAOoO;AAAAA,YAAc,IAAAlX,WAAA;AAAA,qBAEpBkC,MAAMqV;AAAAA;AAAAA,UAAQ;AAAA;AAAA;AAAA;AAAA;AAKzB;AAEA,MAAMjB,kBAAkB;AAAA,EACtBI;AAAAA,EACAS;AAAAA,EACAL;AACF;ACpNO,SAAS,qBAAqB,SAAyC;AAC5E,QAAM,CAAC,OAAO,QAAQ,IAAI,aAAoB,EAAE;AAChD,QAAM,CAAC,MAAM,OAAO,IAAI,aAAa,CAAC;AACtC,QAAM,CAAC,KAAK,MAAM,IAAI,aAAa,KAAK;AAExC,QAAM,CAAC,QAAQ,IAAI,eAAe,MAAM,OAAO;AAE/C,iBAAe,MAAM;AACnB,UAAMU,WAAU,SAAS;AACzB,QAAI,CAACA,SAAS;AACd,UAAM,MAAM;AACV,UAAIA,SAAQ,WAAW,EAAG,QAAO,IAAI;AACrC,eAAS,CAAC,MAAM,CAAC,GAAG,GAAG,GAAGA,QAAO,CAAC;AAAA,KACnC;AAAA,GACF;AAEM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;ACtBA,MAAMC,aAAa;AAEnB,MAAMC,oBAAoB;AAAA,EACxB9N,SAAS;AAAA,EACTb,eAAe;AAAA,EACf4O,cAAc;AAAA,EACdnY,OAAOiY;AAAAA,EACPhY,QAAQ;AAAA,EACRoK,KAAK;AACP;AAEA,MAAM+N,iBAAiB;AAAA,EACrB,GAAGzK,MAAM0K,WAAWC;AAAAA,EACpB/B,YAAY;AAAA,EACZgC,YAAY;AAAA,EACZlB,UAAU;AAAA,EACVrX,OAAOiY;AAAAA,EACPlC,SAAS;AACX;AACA,MAAMyC,WAAY9V,WAAKY,gBAAMqL,MAAI5E,WAAKrH,OAAK;AAAA,EAAE4G,OAAO8O;AAAc,CAAS;AAE3E,MAAMK,oBAAoB;AAAA,EACxB,GAAG9K,MAAM0K,WAAWK;AAAAA,EACpBnC,YAAY;AAAA,EACZgC,YAAY;AAAA,EACZ/B,YAAY;AAAA,EACZxW,OAAOiY;AAAAA,EACPZ,UAAU;AAAA,EACVtB,SAAS;AACX;AAEA,MAAM4C,aAAa;AAAA,EACjBtK,UAAU;AAAA,EACVmI,YAAY;AAAA,EACZoC,YAAY;AAAA,EACZC,aAAa;AACf;AAEA,MAAMC,cAAepW,WAAKY,gBACvBqL,MAAI5E,WAAKrH,OAAK;AAAA,EAAE4G,OAAOmP;AAAAA,EAAiB,IAAAjY,WAAA;AAAA,WACtCkC,MAAMlC;AAAAA;AAAQ,CAElB;AAEM,MAAMuY,QAASrW,CAAU;AAC9BY,yBACGwH,MAAIf,WACCrH,OAAK;AAAA,IACT4G,OAAO;AAAA,MACLiD,OAAO;AAAA,MACPyM,cAAc;AAAA,MACdC,QAAQ;AAAA,QAAEjZ,OAAO;AAAA,QAAGuM,OAAO;AAAA,MAAa;AAAA,MACxCnC,SAAS;AAAA,MACTnK,QAAQ;AAAA,IACV;AAAA,IAAC,IAAAO,WAAA;AAAA,aAAA8C,gBAEAqL,MAAI;AAAA,QAAC6H,YAAY;AAAA,QAAIlN,OAAOqP;AAAAA,QAAU,IAAAnY,WAAA;AAAA,iBACpCkC,MAAMlC;AAAAA;AAAAA,MAAQ;AAAA;AAAA;AAIvB;AAEA,MAAM0Y,gBAAgB;AAAA,EACpB,GAAGvL,MAAM0K,WAAWc;AAAAA,EACpB5C,YAAY;AAAA,EACZgC,YAAY;AACd;AAEA,MAAMa,WAAY1W,CAAKY,0BACpBwH,MAAI;AAAA,EACHxB,OAAO;AAAA,IACLc,SAAS;AAAA,IACTb,eAAe;AAAA,IACfc,KAAK;AAAA,IACLrK,OAAOiY;AAAAA,IACPhY,QAAQ;AAAA,EACV;AAAA,EAAC,IAAAO,WAAA;AAAA8C,4BAEAwH,MAAI;AAAA,MAACP,GAAG;AAAA,MAAIkC,KAAG;AAAA,MAAsBzM,OAAO;AAAA,MAAKC,QAAQ;AAAA,KAAEqD,mBAC3DwH,MAAI;AAAA,MACHP,GAAG;AAAA,MACH8O,UAAU;AAAA,MACVC,UAAQ;AAAA,UACRtZ,QAAK;AAAG,qBAAM0C,MAAM6W,cAAe;AAAA,MAAE;AAAA,MACrCtZ,QAAQ;AAAA,MAAE,IAAAO,WAAA;AAAA,eAAA8C,gBAETwH,MAAI;AAAA,UAAC2B,KAAG;AAAA,UAA2BzM,OAAO;AAAA,UAAKC,QAAQ;AAAA,SAAE;AAAA;AAAA,KAAAqD,mBAE3DqL,MAAI;AAAA,MAACrF,OAAO4P;AAAAA,MAAa,IAAA1Y,WAAA;AAAA,gBAAAqD,KAAA,MAAGnB,MAAM8W,SAAS;AAAA;AAAA,KAAAlW,mBAC3CqL,MAAI;AAAA,MAACrF,OAAO4P;AAAAA,MAAa,IAAA1Y,WAAA;AAAA,eAAGkC,MAAM+W;AAAAA;AAAAA,IAAQ,CAAAnW,mBAC1CoW,KAAG;AAAA,UAACxQ,OAAI;AAAA,eAAExG,MAAMiX;AAAAA,MAAM;AAAA,MAAAnZ,UAAI2V,CAAI7S,yBAAMyV,OAAK;AAAA,QAACxO,GAAG;AAAA,QAAE/J,UAAG2V;AAAAA,MAAI;AAAA,KAAS;AAAA;AAAA,CAEnE;AAED,MAAMyD,eAAgBlX,WAAKY,gBACxBwH,MAAIf,WAAA;AAAA,EAAC8P,IAAE;AAAA,EAAgBvQ,OAAO4O;AAAiB,GAAMxV,OAAK;AAAA,MAAAlC,WAAA;AAAA8C,4BACxDkV,UAAQ;AAAA,UAAAhY,WAAA;AAAA,eAAEkC,MAAMsV,QAAQnB;AAAAA;AAAAA,IAAK,CAAAvT,mBAC7BwV,aAAW;AAAA,UAAAtY,WAAA;AAAA,eAAEkC,MAAMsV,QAAQ8B;AAAAA;AAAAA,IAAW,CAAAxW,mBACtCgB,MAAI;AAAA,UAACC,OAAI;AAAA,eAAE7B,MAAMsV,QAAQwB;AAAAA,MAAS;AAAA,UAAAhZ,WAAA;AAAA,eAAA8C,gBAChC8V,UAAQ;AAAA,cACPK,WAAQ;AAAA,mBAAE/W,MAAMsV,QAAQyB;AAAAA,UAAQ;AAAA,cAChCE,SAAM;AAAA,mBAAEjX,MAAMsV,QAAQ2B;AAAAA,UAAM;AAAA,cAC5BH,YAAS;AAAA,mBAAE9W,MAAMsV,QAAQwB;AAAAA,UAAS;AAAA,cAClCD,cAAW;AAAA,mBAAE7W,MAAMsV,QAAQuB;AAAAA;AAAAA,QAAW;AAAA;AAAA;AAAA;AAAA,CAI7C;ACzFD,MAAMQ,SAAUrX,CAAU;AACxB,QAAM,CAACsX,SAASC,UAAU,IAAInR,aAAa,CAAC;AAC5C,QAAM3G,WAAU+X,gBAAgB;AAChC,QAAM,CAACC,aAAaC,cAAc,IAAItR,aAAa,EAAE;AACrD,QAAMgG,WAAWC,YAAY;AAC7B,MAAIsL,WAAW;AAETC,mBAAWxX,WAAW,MAAM;AACzByX,gCAAqB7X,MAAMuB,MAAM;AAAA,GACzC;AAED,QAAMuW,qBAAqBC,SACzB,CAAC5N,QAAgB6N,oBAAoB7N,GAAG,GACxC,GACF;AACM8N,sBAAcF,SAClB,CAACzC,aAAgBoC,eAAepC,YAAW,EAAE,GAC7C,GACF;AAGEpT,kBACElE,eACCka,CAAQ;AACP,QAAI,CAACA,IAAK;AAEV,QAAIP,UAAU;AACZ,UAAIO,IAAI/L,UAAU;AAChB6L,4BAAoBE,IAAI/L,QAAQ;AAAA;AAGlC,UAAI+L,IAAIT,aAAa;AACnBC,uBAAeQ,IAAIT,WAAW;AAAA;AAGhChY,eAAQ,cAAc;AAAA,QAAE0Y,aAAa;AAAA,OAAM;AAC3C1Y,eAAQ,iBAAiB;AAAA,QAAE0Y,aAAa;AAAA,OAAM;AAEnC;AACX;AAAA;AAGF,QAAID,IAAIlE,MAAM;AACZvU,eAAQyY,IAAIlE,MAAM;AAAA,QAAEmE,aAAa;AAAA,OAAM;AAAA;AAGzC,QAAID,IAAI/L,UAAU;AAChB2L,yBAAmBI,IAAI/L,QAAQ;AAAA;AAGjC,QAAI+L,IAAIT,aAAa;AACnBQ,kBAAYC,IAAIT,WAAW;AAAA;AAAA,EAC7B,GAEF;AAAA,IAAEhN,OAAO;AAAA,GACX,CACF;AAEA,WAAS2N,aAA8B;AACpC,SAAKta,SAAS,KAAKwI,YAAY,CAAC,EAAkBkG,SAAS;AAC5D+K,gBAAY,KAAK1P,KAAK,KAAK,KAAK,EAAE;AAClC,QAAIwQ,WAAWT,WAAWU,MAAQ/V;AAClC,SAAK1E,OAAQyI,WAAW,KAAKzI,OAAQC,SAASya,QAAQ,IAAI;AAGxDF,qBAAa,KACZ,KAAKxa,OAAQyI,YAAY,KAAKzI,OAAQyI,YAAY+R,WAAW,GAC9D;AACAT,eAAWY,UAASzS,CAAMA,UAAI,CAAC;AAAA;AAAA,EACjC;AAGF,WAASiH,UAA2B;AAClC,SAAKtF,UAAU;AACX+Q,iBAAS,KAAK3a,SAAS4a,KAAMnM,OAC/BA,EAAEnO,OAAQoT,IAAI,OAAO,CACvB;AACaiH,2BAAUA,OAAOzE,IAAI;AAClC5H,aAASqM,OAAOzE,IAAI;AACb;AAAA;AAGT,SAAApT,gBACGgB,MAAI;AAAA,QAACC,OAAI;AAAE+V,wBAAWU,QAAQ/V;AAAAA,IAAM;AAAA,QAAAzE,WAAA;AAAA8C,8BAClCsW,cAAY;AAAA,QAACrP,GAAG;AAAA,QAAKkB,GAAG;AAAA,QAAG,IAAEuM,UAAO;AAAA,iBAAEmC,YAAY;AAAA;AAAA,MAAC,CAAA7W,mBACnDwH,MAAI;AAAA,QACH9K,OAAO;AAAA,QACPC,QAAQ;AAAA,QACRwL,GAAG;AAAA,QACHlB,GAAG;AAAA,QACH6C,QAAQ;AAAA,QAAG,IAAA5M,WAAA;AAAA,iBAAA8C,gBAEVwH,MAAI;AAAA,YAACP,GAAG;AAAA,YAAKkC,KAAG;AAAA,YAAqBzM,OAAO;AAAA,YAAKC,QAAQ;AAAA,WAAG;AAAA;AAAA,OAAAqD,mBAE9DwH,MAAI;AAAA,QAACwO,UAAQ;AAAA,YAAChQ,QAAK;AAAA,iBAAEvI,OAAOsa;AAAAA,QAAc;AAAA,YAAA7a,WAAA;AAAA,iBAAA8C,gBACxCuH,QAAM;AAAA,YACLgP,IAAE;AAAA,YACFyB,QAAM;AAAA,YACNC,UAAQ;AAAA,gBACRhR,IAAC;AAAA,qBAAEyP,QAAQ;AAAA,YAAC;AAAA,YACZ1X,QAAM;AAAA,YACNkZ,WAAS;AAAA,gBACTlS,QAAK;AAAA,qBAAEvI,OAAO8J;AAAAA,YAAM;AAAA,gBAAArK,WAAA;AAAA,qBAAA8C,gBAEnBoW,KAAG;AAAA,oBAACxQ,OAAI;AAAEoR,oCAAWU,MAAM;AAAA,gBAAC;AAAA,gBAAAxa,UACzByI,CAAK3F,0BACJ4S,SAAO;AAAA,kBACNjN;AAAAA,kBACAjJ,OAAO;AAAA,kBACPkL,SAAS4P;AAAAA,kBACTpL;AAAAA,gBAAgB;AAAA,eAEnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMb;ACnIA,MAAM+L,OAAQ/Y,CAAU;AACtB,QAAM,CAACyX,aAAaC,cAAc,IAAItR,aAAa,EAAE;AACjD4S,oBACFC,SACAtB,WAAW;AAEPG,6BAAqBC,SAASC,qBAAqB,GAAG;AACtDC,sBAAcF,SAClB,CAACzC,aAAgBoC,eAAepC,YAAW,EAAE,GAC7C,GACF;AAGEpT,kBACElE,eACCka,CAAQ;AACP,QAAI,CAACA,IAAK;AAEV,QAAIP,UAAU;AACRxL,sBAAY6L,oBAAoBE,IAAI/L,QAAQ;AAC5CsL,yBAAeC,eAAeQ,IAAIT,WAAW;AACtC;AAAA,WACN;AACDtL,sBAAY2L,mBAAmBI,IAAI/L,QAAQ;AAC3CsL,yBAAeQ,YAAYC,IAAIT,WAAW;AAAA;AAAA,EAChD,GAEF;AAAA,IAAEhN,OAAO;AAAA,GACX,CACF;AAEShC,6BAAqCyQ,eAAeC,QAAQ9E,KAAK;AAClE+E,mBACJF,kBAAkB,IAAI;AAAA,MAAErR,GAAG;AAAA,MAAK6B,OAAO;AAAA,QAAM;AAAA,MAAE7B,GAAG;AAAA,MAAK6B,OAAO;AAAA,IAAE;AAClEsP,iBACG1O,QAAQ8O,QAAQ;AAAA,MAAEtR,UAAU;AAAA,MAAKC,QAAQ;AAAA,IAAe,GACxDwC,MAAM;AAEH8O,oBACJH,kBAAkB,IAAI;AAAA,MAAErR,GAAG;AAAA,MAAI6B,OAAO;AAAA,QAAM;AAAA,MAAE7B,GAAG;AAAA,MAAG6B,OAAO;AAAA,IAAE;AAC7DuP,YACC3O,QAAQ+O,SAAS;AAAA,MAAEvR,UAAU;AAAA,MAAKC,QAAQ;AAAA,IAAe,GACzDwC,MAAM;AAAA;AAGX3J,0BAEKwH,MAAI;AAAA,IAAAuC,IAAAC,IAAA;AAAA,UAAAC,QACEoO;AAAO,aAAApO,6BAAAD,EAAA,IAAPqO,UAAOrO;AAAAA,IAAA;AAAA,IACZtN,OAAO;AAAA,IACPC,QAAQ;AAAA,IACRwL,GAAG;AAAA,IACHlB,GAAG;AAAA,IACH6C,QAAQ;AAAA,IAAG,IAAA5M,WAAA;AAAA,aAAA8C,gBAEVwH,MAAI;AAAA,QAACP,GAAG;AAAA,QAAKkC,KAAG;AAAA,QAAqBzM,OAAO;AAAA,QAAKC,QAAQ;AAAA,OAAG;AAAA;AAAA,GAAAqD,mBAG9DsW,cAAY;AAAA,IAAAvM,IAAAC,IAAA;AAAA,UAAAE,SACNkO;AAAY,aAAAlO,+BAAAF,EAAA,IAAZoO,eAAYpO;AAAAA,IAAA;AAAA,IACjB/C,GAAG;AAAA,IACHkB,GAAG;AAAA,IAAG,IACNuM,UAAO;AAAA,aAAEmC,YAAY;AAAA;AAAA,EAAC,CAAA7W,mBAEvBkF,QAAM;AAAA,IACL+B,GAAG;AAAA,IACHP,WAAWa;AAAAA,IACXxB,WAAS;AAAA,IACTF,SAAS;AAAA,IAAC,IACVD,OAAI;AAAA,aAAExG,MAAMuB,KAAK+X;AAAAA,IAAI;AAAA,IACrBnC,IAAE;AAAA,IACF1O;AAAAA,IAAoC,IACpCqQ,YAAS;AAAA,aAAE9Y,MAAMuB,KAAK+X,KAAK,CAAC,EAAE/S,MAAM;AAAA,IAAC;AAAA,IACrCoB,KAAK;AAAA,IACLC,YAAY;AAAA,MAAEC,GAAG;AAAA,QAAEC,UAAU;AAAA,QAAKC,QAAQ;AAAA;AAAA,IAAgB;AAAA,IAAC,IAC3DnB,QAAK;AAAA,aAAEvI,OAAO8J;AAAAA,IAAM;AAAA,IAAArK,UAElBuW,CACAA,cAAMnQ,SAAS,SAAMtD,gBAClBkF,QAAM;AAAA,MACLwB,WAAW2B;AAAAA,MACXtC,WAAS;AAAA,MACTgB,KAAK;AAAA,MACLlB,SAAS;AAAA,MACT7G,QAAM;AAAA,MACN2Z,cAAY;AAAA,UACZ/S,OAAI;AAAE6N,qBAAM9N,MAAM;AAAA,MAAC;AAAA,MACnBsB,GAAG;AAAA,MAAE,IACLtK,SAAM;AAAA,eAAE8W,IAAM9W;AAAAA,MAAM;AAAA,MAAAO,UAElB2V,CAAI7S,yBAAMqU,MAAI5N,WAAKoM,IAAI;AAAA,KAAM7S,oBAGhCmT,UAAQ;AAAA,UACPM,MAAG;AAAA,eAAEA,IAAI;AAAA,MAAC;AAAA,UACVF,QAAK;AAAA,eAAEE,IAAMF;AAAAA,MAAK;AAAA,UAClB5W,SAAM;AAAA,eAAE8W,IAAM9W;AAAAA,MAAM;AAAA,UACpBgJ,QAAK;AAAE8N,qBAAM9N,MAAM;AAAA;AAAA,IAAC;AAAA,GAEvB;AAKX;ACtGA,MAAMiT,UAAWxZ,CAAU;AACzB,QAAM,CAACyX,aAAaC,cAAc,IAAItR,aAAmB;AACzD,QAAM,CAACqT,WAAWC,YAAY,IAAItT,aAAa,CAAC;AAExC,gBAAM4R,oBAAoB,SAAO;AAEzC3R,eACEnE,GAAG,CAAClC,MAAMuB,KAAKoY,QAAQpT,OAAOkT,SAAS,GAAG,CAAC,CAACG,OAAOC,KAAK,MAAM;AAC5D,QAAID,MAAOlC,gBAAekC,MAAMC,KAAK,CAAC;AACtC,QAAID,SAASC,QAAQD,MAAMrX,SAAS,GAAG;AAC/B4H,kBAAM,IAAI2P,MAAM;AACtB3P,UAAI4P,cAAc;AAClB5P,UAAIJ,MAAM6P,MAAMC,QAAQ,CAAC,EAAE1N;AAAAA;AAAAA,EAC7B,CACD,CACH;AAEA,WAAShF,UAAS;AACZsS,uBAAe,GAAW;AAChB1T,wBAAMA,IAAI,CAAC;AAAA;AAG3B,WAASiC,QAAO;AACVyR,wBAAgB,EAAU;AAChB1T,wBAAMA,IAAI,CAAC;AAClB;AAAA;AAGT,WAASiU,WAAWpc,MAAM;AACxB,WAAOA,KACJ0M,QAAQ;AAAA,MAAEzC,GAAG;AAAA,MAAK6B,OAAO;AAAA,OAAK;AAAA,MAAE5B,UAAU;AAAA,MAAKC,QAAQ;AAAA,KAAe,EACtEwC,MAAM,EACN0P,iBAAiB;AAAA;AAGtB,WAASC,UAAUtc,MAAM;AACvBA,SAAK8L,QAAQ;AACb9L,SAAKiK,IAAI;AACT,WAAOjK,KACJ0M,QAAQ;AAAA,MAAEzC,GAAG;AAAA,MAAG6B,OAAO;AAAA,OAAK;AAAA,MAAE5B,UAAU;AAAA,MAAKC,QAAQ;AAAA,KAAe,EACpEwC,MAAM,EACN0P,iBAAiB;AAAA;AAGtB,SAAArZ,gBACGwH,MAAI;AAAA,IAACW,GAAG;AAAA,IAAKlB,GAAG;AAAA,IAAKV;AAAAA,IAAgBa;AAAAA,IAAU,IAAAlK,WAAA;AAAA8C,8BAC7CwH,MAAI;AAAA,QACH2B,KAAK;AAAA,QACLzM,OAAO;AAAA,QACPC,QAAQ;AAAA,QACRwL,GAAG;AAAA,QACHlB,GAAG;AAAA,QAAI,IACPsS,WAAQ;AAAA,iBAAEnT,KAAKoT;AAAAA;AAAAA,MAAE,CAAAxZ,mBAElBgB,MAAI;AAAA,YAACC,OAAI;AAAA,iBAAE4V,YAAY;AAAA,QAAC;AAAA,QAAE3V,OAAK;AAAA,YAAAhE,WAAA;AAAA,iBAAA8C,gBAC7BqU,MAAI;AAAA,YACHkC,IAAE;AAAA,YACF2B,WAAS;AAAA,YACTuB,WAAWL;AAAAA,YACXM,UAAUJ;AAAAA,YAAS,IACnBnQ,MAAG;AAAA,qBAAE0N,YAAe1N;AAAAA,YAAG;AAAA,gBACvBoC,WAAQ;AAAA,qBAAEsL,YAAetL;AAAAA,YAAQ;AAAA,gBACjCgI,QAAK;AAAA,qBAAEsD,YAAetD;AAAAA,YAAK;AAAA,gBAC3BkB,WAAQ;AAAA,qBAAEoC,YAAepC;AAAAA;AAAAA,UAAQ;AAAA;AAAA;AAAA;AAAA;AAK3C;AChFa,iBAAW;AACX,mBAAa;ACC1B,IAAI;AACJ,IAAI;AAEJ,MAAM,iBAAiB;AAEvB,MAAM,qBAAkC;AAAA,EACtC,SAAS;AAAA,IACP,gBAAgB;AAAA,IAChB,eAAe,UAAU;AAAA,EAAU;AAEvC;AAQgB,qBAAY,MAAc,aAAqB,gBAAwB;AACrF,SAAO,GAAG,qBAAe,mBAAa;AACxC;AAQA,SAAS,IAAI,MAAchY,UAAsB,IAAkB;AACjE,MAAI,YAAY;AACP,gBAAK,MAAMA,OAAM;AAAA,SACnB;AACL,WAAO,WAAa,OAAK,MAAM,KAAK,MAAMA,OAAM,CAAC;AAAA;AAErD;AAQA,SAAS,KAAK,MAAcA,UAAsB,IAAkB;AAClE,SAAO,MAAM,GAAG,iBAAW,cAAQ,EAAE,GAAG,oBAAoB,GAAGA,QAAA,CAAQ,EAAE,KAAK,CAAC,MAAM,EAAE,MAAM;AAC/F;AAMA,eAAe,aAA2B;AACxC,SAAO,KAAK,gBAAgB,EAAE,KAAK,CAAC,SAAS;;AAC9B;AACb,oBAAef,MAAA,KAAK,WAAL,gBAAAA,IAAa;AACrB;AAAA,GACR;AACH;AAGA,MAAe;AAAA,EACb;AAAA,EACA;AACF;AChEgB,wBAAe,KAAa,WAA2B;AACjE,UAAI,SAAS,WAAW;AAC1B,WAAO,IAAI,UAAU,GAAG,YAAY,CAAC,IAAI;AAAA;AAEpC;AACT;ACiBO,SAAS,oBAAoB,QAAe,CAAC,GAAG,MAAuB;AACrE,eAAM,IAAI,CAAC,UAAU;AAAA,IAC1B,KAAK,YAAY,KAAK,eAAe,KAAK,YAAY;AAAA,IACtD,SAAS,YAAY,KAAK,iBAAiB,KAAK,cAAc,MAAM;AAAA,IACpE,UAAU,YAAY,KAAK,eAAe,OAAO;AAAA,IACjD,MAAM,WAAW,YAAK,cAAc,QAAQ,UAAQ,KAAI,YAAK;AAAA,IAC7D,YAAY,eAAe,KAAK,SAAS,KAAK,MAAM,EAAE;AAAA,IACtD,OAAO,KAAK,SAAS,KAAK;AAAA,IAC1B,UAAU,KAAK;AAAA,IACf;AAAA,IACA,YAAY;AAAA,MACV,MAAM,KAAK,cAAc,QAAQ;AAAA,MACjC,IAAI,KAAK;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACX,OAAO,KAAK,SAAS,KAAK;AAAA,MAC1B,aAAa,KAAK;AAAA;AAAA,EACpB,EACA;AACJ;ACrCA,MAAM,gBAAgB,OAAO,UAAwB,SAAiB;AAC9D,UAAE,QAAQ,IAAI,MAAM;AAC1B,QAAM,OAAO,QAAQ,OAAO,CAAC,MAAW,CAAC,EAAE,KAAK;AACzC,6BAAoB,MAAM,IAAI;AACvC;AAEA,MAAM,eAAe,OAAO,SAAiB;AAC3C,QAAM,OAAO,MAAM,IAAI,IAAI,IAAI,aAAI,WAAU;AACtC,uBAAc,MAAM,IAAI;AACjC;AAEA,MAAM,iBAAiB,IAAI,IAAI,mBAAmB;AAClD,MAAM,mBAAmB,OAAO,WAA8B;AAC5D,QAAM,cAAc,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AAC5D,QAAM,YAAY,MAAM;AACxB,QAAM,iBAAiB,UAAU,OAC9B,OAAO,CAAC,SAAc,YAAY,SAAS,KAAK,IAAI,CAAC,EACrD,IAAI,CAAC,SAAc,KAAK,EAAE;AACtB,uBAAc,IAAI,IAAI,+BAA+B,sBAAe,KAAM,EAAE,GAAG,OAAO;AAC/F;AASO,SAAS,WAAW;AACzB,QAAM,OAAkB,CAAC;AAEzB,QAAM,gBAAgB;AAAA,IACpB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,aAAa,OAAO,CAAC,EAAE,CAAC;AAAA,IACpD,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,gBAAgB;AAAA,IACpB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,SAAS,CAAC,EAAE,CAAC;AAAA,IAC1D,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,eAAe;AAAA,IACnB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,QAAQ,CAAC,EAAE,CAAC;AAAA,IACzD,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,iBAAiB;AAAA,IACrB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,aAAa,IAAI,CAAC,EAAE,CAAC;AAAA,IACjD,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,UAAU;AAAA,IACd,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,CAAC,aAAa,QAAQ,CAAC,CAAC,EAAE,CAAC;AAAA,IACxE,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,gBAAgB;AAAA,IACpB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,aAAa,CAAC,EAAE,CAAC;AAAA,IAC9D,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,QAAM,iBAAiB;AAAA,IACrB,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,SAAS,CAAC,EAAE,CAAC;AAAA,IAC1D,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEA,OAAK,KAAK,eAAe,eAAe,cAAc,gBAAgB,SAAS,eAAe,cAAc;AAE5G,SAAO,EAAE,KAAK;AAChB;AAEO,SAAS,cAAc;AAC5B,QAAM,UAAU;AAAA,IACd,OAAO;AAAA,IACP,OAAO,eAAe,MAAM,iBAAiB,CAAC,aAAa,QAAQ,CAAC,CAAC,EAAE,CAAC;AAAA,IACxE,MAAM;AAAA,IACN,QAAQ;AAAA,EACV;AAEO;AAAA,IACL;AAAA,EACF;AACF;ACpGA,MAAMie,WAAWA,MAAM;AACrB;AAAAC,eAAAC,cAAA;AAAAC,YAAAF,MAAoB;AAAA,MAAEld,OAAO;AAAA,MAAMC,QAAQ;AAAA,MAAMsM,OAAO;AAAA,KAAY;AAAA2Q;AAAAA,KAAA;AACtE;ACAA,MAAM,WAAW;AAEjB,MAAe;AAAA,EACf;AAAA,IAAE,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,aAAa;AAAA,MACX,QAAQ;AAAA,IACV;AAAA,IACA,cAAc,WAAW;AAAA,IACzB,UAAU,WAAW;AAAA,EACvB;AAAA,EACA;AAAA,IAAE,MAAS;AAAA,IACT,YAAY;AAAA,IACZ,aAAa;AAAA,MACX,QAAQ;AAAA,IACV;AAAA,IACA,cAAc,WAAW;AAAA,IACzB,UAAU,WAAW;AAAA,EACvB;AAAA,EACA;AAAA,IAAE,MAAS;AAAA,IACT,YAAY;AAAA,IACZ,aAAa;AAAA,MACX,QAAQ;AAAA,IACV;AAAA,IACA,cAAc,WAAW;AAAA,IACzB,UAAU,WAAW;AAAA,EACvB;AAAA,EACA;AAAA,IAAE,MAAS;AAAA,IACT,YAAY;AAAA,IACZ,aAAa;AAAA,MACX,QAAQ;AAAA,IACV;AAAA,IACA,cAAc,WAAW;AAAA,IACzB,UAAU,WAAW;AAAA,EACvB;AAAA,EACA;AAAA,IAAE,YAAY;AAAA,IACZ,SAAS,WAAW;AAAA;AAEtB;ACxCgB,oBAAW,OAAiB,OAAO,GAAG;AACpD,MAAI,SAAqB,CAAC;AACjB,eAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK,MAAM;AAClD,WAAO,KAAK,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC;AAAA;AAE/B;AACT;ACFA,IAAI,4BAAY,IAAI;AACpB,MAAM,oCAAoB,IAAI;AAE9B,wBAAyB,QAAgB;AACvC,SAAO,CAAC,cAAoC;AAC1C,UAAM,MAAM,aAAa,eAAM,eAAc;AACzC,cAAM,IAAI,GAAG,GAAG;AACX,mBAAM,IAAI,GAAG;AAAA;AAGtB,QAAI,SAAS,IAAI,IAAI,GAAG,EAAE,KAAK,CAAC,aAAa;AACvC,oBAAU,SAAS,QAAQ,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK;AACrD,UAAI,SACF,cAAc,IAAI,MAAM,IAAI,cAAc,IAAI,MAAM,IAAI,CAAC,GACzD,OAAO,oBAAoB,OAAO,CAAC;AACjC,mBAAS,WAAW,KAAK;AAC7B,UAAI,OAAO,OAAO,SAAS,CAAC,EAAE,SAAS,GAAG;AACxC,sBAAc,IAAI,QAAQ,OAAO,KAAK;AAAA,aACjC;AACL,sBAAc,OAAO,MAAM;AAAA;AAEtB;AAAA,KACR;AAEK,cAAI,KAAK,MAAM;AACd;AAAA,EACT;AACF;AC5BgB,uBAAc,EAAC,QAAAnd,WAAS;AACpC,SAAO,WAAW,MAAM;AACpB,UAAM,WAAW,eAAeA,QAAO,UAAU,KAAK;AACtD,aAAS,CAAC;AACH;AAAA,GACV;AACL;ACDO,SAAS,aAAa,SAAyB;AACpD,QAAM,QAAQ,KAAK,MAAM,UAAU,EAAE;AACrC,QAAM,mBAAmB,UAAU;AAC5B,YAAG,cAAK,MAAK,0BAAmB,KAAK,MAAM,IAAK,yBAAgB;AACzE;AAOA,SAAS,WAAW,YAA4B;AACxC,gBAAQ,WAAW,MAAM,GAAG;AAC3B,YAAG,aAAM,CAAC,GAAC,KAAI,aAAM,CAAC,GAAC,KAAI,aAAM,CAAC;AAC3C;AAOA,SAAS,SAAS,YAA4B;AACtC,gBAAQ,WAAW,MAAM,GAAG;AAClC,SAAO,MAAM,CAAC;AAChB;AAQgB,qBAAe,OAAY,UAAuB;AAC1D,yBAAiB,WAAW,MAAM;AACxC,MAAI,iBAAiB,GAAG;AACf,YAAC,GAAG,OAAO,GAAG,MAAM,cAAc,EAAE,KAAK,EAAE,CAAC;AAAA;AAE9C;AACT;AAOO,SAAS,mBAAmBA,SAAsC;AACvE,SAAO,IAAI,IAAI,IAAI,OAAAA,QAAO,MAAI,KAAI,OAAAA,QAAO,IAAE,mBAAkB,EAAE,KAAK,CAAC,EAAE,cAAc;AACnF,QAAI,QAAQ,QAAQ;AACX,yBAAY,oBAAoB,QAAQ,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;AAAA;AAEzD,eACJ,IAAI,aAAa,OAAAA,QAAO,MAAI,eAAc,EAC1C,KAAK,CAAC,EAAE,SAAAsd,SAAc,kBAAY,oBAAoBA,SAAQ,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAAA,GAClF;AACH;AAOO,SAAS,WAAWtd,SAAsC;AACxD,aACJ,IAAI,IAAI,OAAAA,QAAO,MAAI,KAAI,OAAAA,QAAO,IAAE,WAAU,EAC1C,KAAK,CAAC,EAAE,KAAK,MAAM,YAAY,oBAAoB,KAAK,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAC7E;AAOO,SAAS,QAAQA,SAAsC;AACxD,WACFA,QAAO,SAAS,UACZ;AAAA,IACE,QAAQ;AAAA,IACR,OAAO;AAAA,MAET,CAAC;AAEP,SAAO,IAAI,IAAI,IAAI,OAAAA,QAAO,MAAI,KAAI,OAAAA,QAAO,GAAI,EAAE,KAAK,CAAC,UAAU;AAAA,IAC7D,iBAAiB,YAAY,KAAK,eAAe,OAAO;AAAA,IACxD,aAAa;AAAA,MACX,OAAO,KAAK,SAAS,KAAK;AAAA,MAC1B,aAAa,KAAK;AAAA,MAClB,QAAQ,CAAC,MAAM,IAAI;AAAA,MACnB,aAAa,KAAK;AAAA,MAClB,WAAW,KAAK;AAAA,MAChB,UACEA,QAAO,SAAS,UACZ,GAAG,oBAAa,KAAK,OAAO,GAAC,OAAM,kBAAW,KAAK,YAAY,KAC/D,GAAG,gBAAS,KAAK,cAAc,GAAC,OAAM,gBAAS,KAAK,aAAa;AAAA,MACvE,SAAS;AAAA,IACX;AAAA,IACA,GAAG;AAAA,IACH;AACJ;AC/FO,SAAS,cAAc,EAAE,QAAAA,SAAQ,QAAAqE,WAA2C;AAC3E,SAAC,MAAM,IAAI,eAAe,OAAO,EAAE,GAAGrE,QAAA,IAAWud,OAAgB;AAEvE,MAAIlZ,YAAW,UAAW;AAEpB,SAAC,OAAO,IAAI;AAAA,IAChB,OAAO,EAAE,GAAGrE;IACZwd;AAAAA,EACF;AACM,SAAC,eAAe,IAAI;AAAA,IACxB,OAAO,EAAE,GAAGxd;IACZyd;AAAAA,EACF;AAEO,WAAE,QAAQ,SAAS,gBAAgB;AAC5C;ACDA,MAAMC,SAASC,KAAK,MAAM,2BAAO,sBAAgB,sBAAC;AAElD,MAAMC,YAAY,IAAI9R,gBAAgBtF,OAAOvC,SAAS8H,MAAM;AAC5D,IAAIvM,kBAAkB;AACtB,MAAMC,aAAame,UAAU1X,IAAI,iBAAiB;AAClD,MAAMiE,cAAayT,eAAU1X,IAAI,MAAM,MAApB0X,YAAyB;AAC5C,MAAMC,gBAAeD,eAAU1X,IAAI,MAAM,MAApB0X,YAAyB;AAE9C,IAAIne,YAAY;AACdD,oBAAkBse,SAASre,UAAU;AACvC;AAEA,MAAMM,0BAA0B;AAAA,EAC9B,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,MAAM;AAAA,EACNge,SAASvX,OAAOwX,cAAc;AAChC,EAAE7T,UAAU;AAGZ8T,OAAOC,QAAQ;AACfD,OAAOE,oBAAoB;AAC3BF,OAAOG,aAAa5H,aAAa;AACjCyH,OAAOG,aAAa5R,QAAQ;AAC5ByR,OAAOG,aAAa9P,WAAW;AAC/B2P,OAAOI,sBAAsB;AAE7BJ,OAAOK,kBAAkB;AAAA,EACvBC,mBAA4B;AAAA,EAC5BC,WAAWC;AAAAA,EACXjf;AAAAA,EACAO;AAAAA,EACA2e,0BAA0B;AAC5B;AAEA,IAAIb,iBAAiB,UAAU;AACtBS,yBAAgBK,cAAc,CAACC,kBAAkB;AACxDX,SAAOK,gBAAgBO,eAAeC;AACxC,OAAO;AACER,yBAAgBK,cAAc,CAACI,eAAe;AACrDd,SAAOK,gBAAgBO,eAAeG;AACxC;AAEA,MAAM;AAAA,EAAEhd;AAAO,IAAIH,eAAe;AAClCod,UAAU3e,KAAK;AACf0B,OAAO,MAAAuB,gBACJ0D,YAAU;AAAA,EAACtD,MAAOhB,WAAKY,gBAAM4P,KAAQxQ,KAAK;AAAA,EAAI,IAAAlC,WAAA;AAAA8C,4BAC5CyC,OAAK;AAAA,MAAC7D,MAAI;AAAA,MAAI8H,WAAWyR;AAAAA,MAAMtZ,SAAS8c;AAAAA,KAAQ3b,mBAChDyC,OAAK;AAAA,MAAC7D,MAAI;AAAA,MAAkB8H,WAAW+P;AAAAA,MAAQ5X,SAAS+c;AAAAA,KAAa5b,mBACrEyC,OAAK;AAAA,MAAC7D,MAAI;AAAA,MAAW8H,WAAWmV;AAAAA,MAAahd,SAASid;AAAAA,KAAW9b,mBACjEyC,OAAK;AAAA,MAAC7D,MAAI;AAAA,MAAoB8H,WAAWyT;AAAAA,MAAQtb,SAASkd;AAAAA,KAAa/b,mBACvEyC,OAAK;AAAA,MAAC7D,MAAI;AAAA,MAAQ8H,WAAWiT;AAAAA,KAAQ;AAAA;AAAA,EAEzC","names":["__vite_import_meta_env__","basePath","bytesToMb","key","effect","delay","_a","_b","_c","CoreNodeRenderState","UpdateType","renderer","TextureType","numImageWorkers","numWorkers","createShader","isArray","calcHeight","rootNode","fps","deviceLogicalPixelRatio","params","width","height","count","bufferMemory","i","fonts","node","parent","children","prevFocusPath","activeElement","setActiveElement","focusPath","useFocusManager","states","styles","value","error","memo","createComponent","mergeProps","sources","createElement","createTextNode","isTextNode","insertNode","insert","dispose","createRenderer","text","solidCreateRenderer","render","w","radii","path","preload","source","options","scroll","matches","createRouterComponent","router","props","base","routeDefs","branches","createMemo","createBranches","context","routerState","createRouterContext","singleFlight","transformUrl","create","_$createComponent","RouterContextObj","Provider","Root","root","rootPreload","rootLoad","_$memo","getOwner","Routes","location","data","untrack","setInPreloadFn","intent","getIntent","Show","when","keyed","fallback","disposers","routeStates","on","nextMatches","prevMatches","prev","equal","length","next","len","prevMatch","nextMatch","route","createRoot","createRouteContext","createOutlet","splice","forEach","child","RouteContextObj","outlet","Route","childRoutes","get","hashParser","str","to","replace","startsWith","window","hash","split","bindEvent","target","type","handler","addEventListener","removeEventListener","HashRouter","getSource","slice","beforeLeave","createBeforeLeave","createRouter","set","state","history","replaceState","keepDepth","pushState","init","notify","notifyIfNotBlocked","delta","confirm","utils","go","renderPath","parsePath","useFocusManagerCore","nestedSeriesResults","depth","LazyUp","p","others","splitProps","offset","setOffset","createSignal","createEffect","selected","items","each","upCount","isRow","direction","style","flexDirection","keyHandlers","updateOffset","Math","min","onRight","onDown","Dynamic","_$mergeProps","component","Index","screenSize","ColumnStyles","display","gap","transition","y","duration","easing","onUp","handleNavigation","withScrolling","Column","View","chainFunctions","forwardFocus","onGridFocus","onFocus","onSelectedChanged","handleOnSelect","onLayout","undefined","combineStyles","RowStyles","x","onLeft","Row","Background","URLSearchParams","search","disableBG","bg1","bg2","heroMask","active","alpha","animationSettings","bgStyles","color","onMount","src","colorLeft","colorRight","changeBackgrounds","img","currentBg","nextBg","animate","start","globalBackground","defer","zIndex","ref","r$","_ref$","_ref$2","_ref$3","hexColor","theme","materialBrand","import","icons","name","sprite","Icon","createSpriteMap","texture","NavButtonTextStyles","fontSize","$active","NavButton","forwardStates","scale","icon","Text","NavDrawer","backdrop","navigate","useNavigate","add","c","setFocus","onBlur","remove","handleNavigate","page","isOnPage","useMatch","focusPage","onEnter","skipFocus","Gradient","themeStyles","tones","modes","defaultTone","container","knob","fpsStyle","mountX","fpsLabel","textColor","fpsValue","setFps","avgFps","setAvgFps","minFps","setMinFps","maxFps","setMaxFps","criticalThresholdSignal","setCriticalThresholdSignal","targetThresholdSignal","setTargetThresholdSignal","renderableMemUsedSignal","setRenderableMemUsedSignal","memUsedSignal","setMemUsedSignal","renderableTexturesLoadedSignal","setRenderableTexturesLoadedSignal","loadedTexturesSignal","setLoadedTexturesSignal","totalFps","infoFontSize","bytes","toFixed","calcFps","max","round","updateMemoryInfo","stage","memInfo","txMemManager","getMemoryInfo","criticalThreshold","targetThreshold","renderableMemUsed","memUsed","renderableTexturesLoaded","loadedTextures","frameCount","setupFPS","fpsData","FPSCounter","toString","App","Announcer","Menu","Escape","Backspace","Left","Right","Up","Down","Enter","announcer","useAnnouncer","enabled","navDrawer","lastFocused","focusNavDrawer","has","showWidgets","setShowWidgets","useLocation","showOnPaths","currentPath","pathname","document","getElementById","matchesPartial","some","lastKey","setLastKey","lastError","setLastError","keyPressHandler","e","keyCode","displayError","message","onCleanup","pageContainer","APP","onAnnouncer","onLast","back","onMenu","onBackspace","hidden","contain","Button","Thumbnail","TileRow","item","buttonStyles","heroTransition","titleRowStyles","fontFamily","lineHeight","TitleRow","href","assertTruthy","marginTop","title","typeToComponent","row","posterStyles","$focus","Poster","onFail","posterTitleStyles","maxLines","PosterTitle","heroStyles","colorTop","colorBottom","heroTextStyles","Hero","hasFocus","setHasFocus","onFocusChanged","overview","content","blockWidth","ContentBlockStyle","flexBoundary","HeadlineStyles","typography","display2","fontWeight","Headline","DescriptionStyles","body1","BadgeStyle","marginLeft","marginRight","Description","Badge","borderRadius","border","MetaTextStyle","body2","Metadata","flexItem","clipping","voteAverage","voteCount","metaText","For","badges","ContentBlock","id","description","Browse","columnY","setcolumnY","usePreloadRoute","heroContent","setHeroContent","firstRun","provider","createInfiniteScroll","delayedBackgrounds","debounce","setGlobalBackground","delayedHero","elm","preloadData","onRowFocus","numPages","pages","indexOf","setPage","entity","find","itemsContainer","plinko","announce","autofocus","TMDB","contentBlock","appLogo","selectedIndex","column","values","values2","rows","centerScroll","Destroy","heroIndex","setHeroIndex","heroRow","heros","index","Image","crossOrigin","animateOut","waitUntilStopped","animateIn","rotation","PI","onDestroy","onCreate","NotFound","_el$","_$createElement","_$setProp","results","provider.getInfo","provider.getCredits","provider.getRecommendations","Entity","lazy","urlParams","rendererMode","parseInt","default","innerHeight","Config","debug","animationsEnabled","fontSettings","enableShaderCaching","rendererOptions","fpsUpdateInterval","inspector","Inspector","devicePhysicalPixelRatio","fontEngines","CanvasTextRenderer","renderEngine","CanvasCoreRenderer","SdfTextRenderer","WebGlCoreRenderer","loadFonts","tmdbData","browsePreload","DestroyPage","destroyData","entityPreload"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,126,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149],"sources":["../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/common/EventEmitter.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/Matrix3d.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/RenderCoords.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimation.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimationController.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/CoreNode.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/platform.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/animations/AnimationManager.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/Texture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/ImageWorker.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/ColorTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/textureCompression.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/textureSvg.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/ImageTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/NoiseTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/SubTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/textures/RenderTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/CoreTextureManager.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/TrFontManager.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/ShaderUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShaderBatched.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/ShaderEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DynamicShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/RoundedRectangle.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/SdfShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/EffectUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadiusEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/LinearGradientEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GrayscaleEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderRightEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderTopEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderBottomEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderLeftEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GlitchEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/FadeOutEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialGradientEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialProgressEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/HolePunchEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/shaders/UnsupportedShader.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/main-api/ShaderController.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/main-api/DynamicShaderController.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/CoreShaderManager.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/TextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/ContextSpy.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/TextureMemoryManager.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreContextTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/CoreTextNode.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/main-api/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/Stage.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/main-api/Renderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/TrFontFace.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/WebTrFontFace.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderOp.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderOp.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/RendererUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxSubTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/BufferCollection.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/WebGlUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/lib/WebGlContextWrapper.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxRenderTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/SpecialCodepoints.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/FontShaper.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/SdfFontShaper.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/SdfTrFontFace.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/lightningInit.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/config.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/nodeTypes.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/utils.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/states.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/flex.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/focusManager.js","../../node_modules/.pnpm/@lightningtv+core@2.5.9_@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningtv/core/dist/src/elementNode.js","../../node_modules/.pnpm/solid-js@1.9.3/node_modules/solid-js/dist/dev.js","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/activeElement.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/utils.ts","../../node_modules/.pnpm/solid-js@1.9.3/node_modules/solid-js/universal/dist/dev.js","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/solidOpts.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/render.ts","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/constants.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getStartConditions.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/PeekableGenerator.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getUnicodeCodepoints.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/measureText.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/layoutText.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/util.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/setRenderWindow.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/TextRenderingUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/SdfTextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/TextTextureRendererUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/LightningTextTextureRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/CanvasTextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/internal/ColorUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/CanvasCoreTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/internal/C2DShaderUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/CanvasCoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@2.9.0-beta1/node_modules/@lightningjs/renderer/dist/src/main-api/Inspector.js","../../node_modules/.pnpm/solid-js@1.9.3/node_modules/solid-js/web/dist/dev.js","../../node_modules/.pnpm/@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@solidjs/router/dist/lifecycle.js","../../node_modules/.pnpm/@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@solidjs/router/dist/utils.js","../../node_modules/.pnpm/@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@solidjs/router/dist/routing.js","../../node_modules/.pnpm/@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@solidjs/router/dist/routers/components.jsx","../../node_modules/.pnpm/@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@solidjs/router/dist/routers/createRouter.js","../../src/utils/router.tsx","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/useFocusManager.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/announcer/speech.ts","../../node_modules/.pnpm/@solid-primitives+scheduled@1.4.4_solid-js@1.9.3/node_modules/@solid-primitives/scheduled/dist/index.js","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/announcer/announcer.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/announcer/index.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/LazyUp.tsx","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/utils/handleNavigation.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/utils/withScrolling.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/utils/chainFunctions.ts","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/Column.tsx","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/Row.tsx","../../node_modules/.pnpm/@lightningtv+solid@2.5.5_@lightningjs+renderer@2.9.0-beta1_@solidjs+router@0.15.2_solid-js@1.9.3/node_modules/@lightningtv/solid/src/primitives/utils/createSpriteMap.ts","../../src/state.ts","../../node_modules/.pnpm/@lightningjs+l3-ui-theme-base@0.3.3/node_modules/@lightningjs/l3-ui-theme-base/theme.js","../../src/components/background.tsx","../../src/components/nav-drawer/styles.ts","../../src/components/icon.tsx","../../src/components/nav-drawer/drawer.tsx","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/utils/objectFromEntries.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/utils/getThemeStyles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/utils/getWidthByUpCount.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Artwork/Artwork.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Badge/Badge.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Button/Button.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Checkbox/Checkbox.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Icon/Icon.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Column/Column.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/FocusRing/FocusRing.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Input/Input.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Key/Key.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Row/Row.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Keyboard/Keyboard.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Label/Label.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/ProgressBar/ProgressBar.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Radio/Radio.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/Toggle/Toggle.styles.js","../../node_modules/.pnpm/@lightningtv+solid-ui@1.0.0_@lightningtv+core@2.5.9_@lightningtv+solid@2.5.5_solid-js@1.9.3/node_modules/@lightningtv/solid-ui/dist/components/FPSCounter/FPSCounter.jsx","../../src/pages/app.tsx","../../src/styles.ts","../../src/components/index.tsx","../../src/utils/pagination.ts","../../src/components/content-block.tsx","../../src/pages/browse.tsx","../../src/pages/tmdb.tsx","../../src/pages/destroy.tsx","../../src/api/constants/index.ts","../../src/api/index.ts","../../src/utils/string/truncate-string.ts","../../src/api/formatters/item-formatter.ts","../../src/api/tmdb-data.ts","../../src/pages/not-found.tsx","../../src/fonts.ts","../../src/utils/array/chunk-array.ts","../../src/api/providers/browse.ts","../../src/api/browse-preload.ts","../../src/api/providers/entity.ts","../../src/api/entity-preload.ts","../../src/index.tsx"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function createWebGLContext(canvas, forceWebGL2 = false, contextSpy) {\n    const config = {\n        alpha: true,\n        antialias: false,\n        depth: false,\n        stencil: true,\n        desynchronized: false,\n        // Disabled because it prevents Visual Regression Tests from working\n        // failIfMajorPerformanceCaveat: true,\n        powerPreference: 'high-performance',\n        premultipliedAlpha: true,\n        preserveDrawingBuffer: false,\n    };\n    const gl = \n    // TODO: Remove this assertion once this issue is fixed in TypeScript\n    // https://github.com/microsoft/TypeScript/issues/53614\n    (canvas.getContext(forceWebGL2 ? 'webgl2' : 'webgl', config) ||\n        canvas.getContext('experimental-webgl', config));\n    if (!gl) {\n        throw new Error('Unable to create WebGL context');\n    }\n    if (contextSpy) {\n        // Proxy the GL context to log all GL calls\n        return new Proxy(gl, {\n            get(target, prop) {\n                const value = target[prop];\n                if (typeof value === 'function') {\n                    contextSpy.increment(String(prop));\n                    return value.bind(target);\n                }\n                return value;\n            },\n        });\n    }\n    return gl;\n}\n/**\n * Asserts a condition is truthy, otherwise throws an error\n *\n * @remarks\n * Useful at the top of functions to ensure certain conditions, arguments and\n * properties are set/met before continuing. When using this function,\n * TypeScript will narrow away falsy types from the condition.\n *\n * @param condition\n * @param message\n * @returns\n */\nexport function assertTruthy(condition, message) {\n    if (isProductionEnvironment() === true)\n        return;\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n/**\n * Merges two colors based on a given progress value.\n *\n * This function takes two colors (c1 and c2) represented as 32-bit integers\n * in RGBA format and blends them based on the provided progress value (p).\n * The result is a new color that is a weighted combination of the input colors,\n * where the weight is determined by the progress value.\n *\n * @param {number} c1 - The first color in RGBA format (32-bit integer).\n * @param {number} c2 - The second color in RGBA format (32-bit integer).\n * @param {number} p - The progress value between 0 and 1.\n * @returns {number} The merged color as a 32-bit integer in RGBA format.\n */\nexport function mergeColorProgress(rgba1, rgba2, p) {\n    const r1 = Math.trunc(rgba1 >>> 24);\n    const g1 = Math.trunc((rgba1 >>> 16) & 0xff);\n    const b1 = Math.trunc((rgba1 >>> 8) & 0xff);\n    const a1 = Math.trunc(rgba1 & 0xff);\n    const r2 = Math.trunc(rgba2 >>> 24);\n    const g2 = Math.trunc((rgba2 >>> 16) & 0xff);\n    const b2 = Math.trunc((rgba2 >>> 8) & 0xff);\n    const a2 = Math.trunc(rgba2 & 0xff);\n    const r = Math.round(r2 * p + r1 * (1 - p));\n    const g = Math.round(g2 * p + g1 * (1 - p));\n    const b = Math.round(b2 * p + b1 * (1 - p));\n    const a = Math.round(a2 * p + a1 * (1 - p));\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter.\n *\n * @internalRemarks\n * This method does NOT premultiply the alpha into the color channels. If that\n * is required (for internal use only) use {@link mergeColorAlphaPremultiplied}\n * instead.\n *\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @returns\n */\nexport function mergeColorAlpha(rgba, alpha) {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = Math.trunc((rgba & 0xff) * alpha);\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\nlet premultiplyRGB = true;\n/**\n * RGB components should not be premultiplied when using Canvas renderer\n * @param mode  Renderer mode\n */\nexport function setPremultiplyMode(mode) {\n    premultiplyRGB = mode === 'webgl';\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter.\n *\n * For the webGl renderer, each color channel is premultiplied by the final alpha value.\n *\n * @remarks\n * If `flipEndianess` is set to true, the function will returned an ABGR encoded number\n * which is useful when the color value needs to be passed into a shader attribute.\n *\n * NOTE: Depending on the mode set by {@link setPremultiplyMode}, this method returns\n * a PREMULTIPLIED alpha color which is generally only useful in the context of the\n * internal rendering process. Use {@link mergeColorAlpha} if you need to blend an alpha\n * value into a color in the context of the Renderer's main API.\n *\n * @internalRemarks\n * Do not expose this method in the main API because Renderer users should instead use\n * {@link mergeColorAlpha} to manipulate the alpha value of a color.\n *\n * @internal\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @param flipEndianess Flip the endianess. RGBA becomes encoded as ABGR (for inserting colors into shader attributes)\n * @returns\n */\nexport function mergeColorAlphaPremultiplied(rgba, alpha, flipEndianess = false) {\n    const newAlpha = ((rgba & 0xff) / 255) * alpha;\n    const rgbAlpha = premultiplyRGB ? newAlpha : 1;\n    const r = Math.trunc((rgba >>> 24) * rgbAlpha);\n    const g = Math.trunc(((rgba >>> 16) & 0xff) * rgbAlpha);\n    const b = Math.trunc(((rgba >>> 8) & 0xff) * rgbAlpha);\n    const a = Math.trunc(newAlpha * 255);\n    if (flipEndianess) {\n        return ((a << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    }\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Returns true if the given object has the given \"own\" property.\n *\n * @param obj\n * @param prop\n * @returns\n */\nexport function hasOwn(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n/**\n * Converts degrees to radians\n *\n * @param degrees\n * @returns\n */\nexport function deg2Rad(degrees) {\n    return (degrees * Math.PI) / 180;\n}\n/**\n * Returns image aspect ratio\n *\n * @param width\n * @param height\n * @returns\n */\nexport function getImageAspectRatio(width, height) {\n    return width / height;\n}\n/**\n * Checks import.meta if env is production\n *\n * @returns\n */\nexport function isProductionEnvironment() {\n    return import.meta.env && import.meta.env.PROD;\n}\n/**\n * Returns a new unique ID\n */\nlet nextId = 1;\nexport function getNewId() {\n    return nextId++;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * EventEmitter base class\n */\nexport class EventEmitter {\n    eventListeners = {};\n    on(event, listener) {\n        let listeners = this.eventListeners[event];\n        if (!listeners) {\n            listeners = [];\n        }\n        listeners.push(listener);\n        this.eventListeners[event] = listeners;\n    }\n    off(event, listener) {\n        const listeners = this.eventListeners[event];\n        if (!listeners) {\n            return;\n        }\n        if (!listener) {\n            delete this.eventListeners[event];\n            return;\n        }\n        const index = listeners.indexOf(listener);\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n    }\n    once(event, listener) {\n        const onceListener = (target, data) => {\n            this.off(event, onceListener);\n            listener(target, data);\n        };\n        this.on(event, onceListener);\n    }\n    emit(event, data) {\n        const listeners = this.eventListeners[event];\n        if (!listeners) {\n            return;\n        }\n        [...listeners].forEach((listener) => {\n            listener(this, data);\n        });\n    }\n    removeAllListeners() {\n        this.eventListeners = {};\n    }\n}\n//# sourceMappingURL=EventEmitter.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const PROTOCOL_REGEX = /^(data|ftps?|https?):/;\nexport const getNormalizedRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r / 255, g / 255, b / 255, a / 255];\n};\nexport const getRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r, g, b, a];\n};\nexport const norm = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    const rgbaArr = [r / 255, g / 255, b / 255, a / 255];\n    rgbaArr[0] = Math.max(0, Math.min(255, rgbaArr[0]));\n    rgbaArr[1] = Math.max(0, Math.min(255, rgbaArr[1]));\n    rgbaArr[2] = Math.max(0, Math.min(255, rgbaArr[2]));\n    rgbaArr[3] = Math.max(0, Math.min(255, rgbaArr[3]));\n    let v = ((rgbaArr[3] | 0) << 24) +\n        ((rgbaArr[0] | 0) << 16) +\n        ((rgbaArr[1] | 0) << 8) +\n        (rgbaArr[2] | 0);\n    if (v < 0) {\n        v = 0xffffffff + v + 1;\n    }\n    return v;\n};\nexport function getNormalizedAlphaComponent(rgba) {\n    return (rgba & 0xff) / 255.0;\n}\n/**\n * Get a CSS color string from a RGBA color\n *\n * @param color\n * @returns\n */\nexport function getRgbaString(color) {\n    const r = Math.floor(color[0] * 255.0);\n    const g = Math.floor(color[1] * 255.0);\n    const b = Math.floor(color[2] * 255.0);\n    const a = Math.floor(color[3] * 255.0);\n    return `rgba(${r},${g},${b},${a.toFixed(4)})`;\n}\nexport function createBound(x1, y1, x2, y2, out) {\n    if (out) {\n        out.x1 = x1;\n        out.y1 = y1;\n        out.x2 = x2;\n        out.y2 = y2;\n        return out;\n    }\n    return {\n        x1,\n        y1,\n        x2,\n        y2,\n    };\n}\nexport function intersectBound(a, b, out) {\n    const intersection = createBound(Math.max(a.x1, b.x1), Math.max(a.y1, b.y1), Math.min(a.x2, b.x2), Math.min(a.y2, b.y2), out);\n    if (intersection.x1 < intersection.x2 && intersection.y1 < intersection.y2) {\n        return intersection;\n    }\n    return createBound(0, 0, 0, 0, intersection);\n}\nexport function boundsOverlap(a, b) {\n    return a.x1 < b.x2 && a.x2 > b.x1 && a.y1 < b.y2 && a.y2 > b.y1;\n}\nexport function convertBoundToRect(bound, out) {\n    if (out) {\n        out.x = bound.x1;\n        out.y = bound.y1;\n        out.width = bound.x2 - bound.x1;\n        out.height = bound.y2 - bound.y1;\n        return out;\n    }\n    return {\n        x: bound.x1,\n        y: bound.y1,\n        width: bound.x2 - bound.x1,\n        height: bound.y2 - bound.y1,\n    };\n}\nexport function intersectRect(a, b, out) {\n    const x = Math.max(a.x, b.x);\n    const y = Math.max(a.y, b.y);\n    const width = Math.min(a.x + a.width, b.x + b.width) - x;\n    const height = Math.min(a.y + a.height, b.y + b.height) - y;\n    if (width > 0 && height > 0) {\n        if (out) {\n            out.x = x;\n            out.y = y;\n            out.width = width;\n            out.height = height;\n            return out;\n        }\n        return {\n            x,\n            y,\n            width,\n            height,\n        };\n    }\n    if (out) {\n        out.x = 0;\n        out.y = 0;\n        out.width = 0;\n        out.height = 0;\n        return out;\n    }\n    return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n    };\n}\nexport function copyRect(a, out) {\n    if (out) {\n        out.x = a.x;\n        out.y = a.y;\n        out.width = a.width;\n        out.height = a.height;\n        return out;\n    }\n    return {\n        x: a.x,\n        y: a.y,\n        width: a.width,\n        height: a.height,\n    };\n}\nexport function compareRect(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a === null || b === null) {\n        return false;\n    }\n    return (a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height);\n}\nexport function boundInsideBound(bound1, bound2) {\n    return (bound1.x1 <= bound2.x2 &&\n        bound1.y1 <= bound2.y2 &&\n        bound1.x2 >= bound2.x1 &&\n        bound1.y2 >= bound2.y1);\n}\nexport function boundLargeThanBound(bound1, bound2) {\n    return (bound1.x1 < bound2.x1 &&\n        bound1.x2 > bound2.x2 &&\n        bound1.y1 < bound2.y1 &&\n        bound1.y2 > bound2.y2);\n}\nexport function isBoundPositive(bound) {\n    return bound.x1 < bound.x2 && bound.y1 < bound.y2;\n}\nexport function isRectPositive(rect) {\n    return rect.width > 0 && rect.height > 0;\n}\n/**\n * Create a preload bounds from a strict bound\n *\n * @param strictBound The strict boundary of the node\n * @param boundsMargin Boundary margin to apply to the strictBound\n * @returns\n */\nexport function createPreloadBounds(strictBound, boundsMargin) {\n    return createBound(strictBound.x1 - boundsMargin[3], strictBound.y1 - boundsMargin[0], strictBound.x2 + boundsMargin[1], strictBound.y2 + boundsMargin[2]);\n}\nexport function convertUrlToAbsolute(url) {\n    // handle local file imports if the url isn't remote resource or data blob\n    if (self.location.protocol === 'file:' && !PROTOCOL_REGEX.test(url)) {\n        const path = self.location.pathname.split('/');\n        path.pop();\n        const basePath = path.join('/');\n        const baseUrl = self.location.protocol + '//' + basePath;\n        // check if url has a leading dot\n        if (url.charAt(0) === '.') {\n            url = url.slice(1);\n        }\n        // check if url has a leading slash\n        if (url.charAt(0) === '/') {\n            url = url.slice(1);\n        }\n        return baseUrl + '/' + url;\n    }\n    const absoluteUrl = new URL(url, self.location.href);\n    return absoluteUrl.href;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A 3D matrix representing a 2D graphics transformation\n *\n * @remarks\n * For convenience, entries in the first two rows can be accessed by the following\n * properties:\n * | ta tb tx |\n * | tc td ty |\n * | 0  0  1  |\n *\n * This matrix is optimized for 2D transformations and hence the last row will\n * always be considered [0, 0 ,1].\n *\n * To access a column major array for WebGL, use the {@link getFloatArr} method.\n */\nexport class Matrix3d {\n    ta;\n    tb;\n    tx;\n    tc;\n    td;\n    ty;\n    _floatArr = null;\n    /**\n     * Potential Mutation Flag\n     *\n     * @remarks\n     * This flag is set to true whenever the matrix is potentially modified.\n     * We don't waste CPU trying to identify if each operation actually modifies\n     * the matrix. Instead, we set this flag to true whenever we think the matrix\n     * is modified. This signals that the `floatArr` should to be updated.\n     */\n    mutation;\n    /**\n     * Creates a new 3x3 matrix.\n     *\n     * @param entries Row-major 3x3 matrix\n     */\n    constructor() {\n        this.ta = 0;\n        this.tb = 0;\n        this.tx = 0;\n        this.tc = 0;\n        this.td = 0;\n        this.ty = 0;\n        this.mutation = true;\n    }\n    /**\n     * Returns a temporary matrix that can be used for calculations.\n     *\n     * @remarks\n     * This is useful for avoiding allocations in tight loops.\n     *\n     * The matrix is not guaranteed to be the same between calls.\n     *\n     * @returns\n     */\n    static get temp() {\n        return tempMatrix;\n    }\n    static multiply(a, b, out) {\n        const e0 = a.ta * b.ta + a.tb * b.tc;\n        const e1 = a.ta * b.tb + a.tb * b.td;\n        const e2 = a.ta * b.tx + a.tb * b.ty + a.tx;\n        const e3 = a.tc * b.ta + a.td * b.tc;\n        const e4 = a.tc * b.tb + a.td * b.td;\n        const e5 = a.tc * b.tx + a.td * b.ty + a.ty;\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.ta = e0;\n        out.tb = e1;\n        out.tx = e2;\n        out.tc = e3;\n        out.td = e4;\n        out.ty = e5;\n        out.mutation = true;\n        return out;\n    }\n    static identity(out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.ta = 1;\n        out.tb = 0;\n        out.tx = 0;\n        out.tc = 0;\n        out.td = 1;\n        out.ty = 0;\n        out.mutation = true;\n        return out;\n    }\n    static translate(x, y, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.ta = 1;\n        out.tb = 0;\n        out.tx = x;\n        out.tc = 0;\n        out.td = 1;\n        out.ty = y;\n        out.mutation = true;\n        return out;\n    }\n    static scale(sx, sy, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.ta = sx;\n        out.tb = 0;\n        out.tx = 0;\n        out.tc = 0;\n        out.td = sy;\n        out.ty = 0;\n        out.mutation = true;\n        return out;\n    }\n    static rotate(angle, out) {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.ta = cos;\n        out.tb = -sin;\n        out.tx = 0;\n        out.tc = sin;\n        out.td = cos;\n        out.ty = 0;\n        out.mutation = true;\n        return out;\n    }\n    static copy(src, dst) {\n        if (!dst) {\n            dst = new Matrix3d();\n        }\n        dst.ta = src.ta;\n        dst.tc = src.tc;\n        dst.tb = src.tb;\n        dst.td = src.td;\n        dst.tx = src.tx;\n        dst.ty = src.ty;\n        dst.mutation = true;\n        return dst;\n    }\n    translate(x, y) {\n        this.tx = this.ta * x + this.tb * y + this.tx;\n        this.ty = this.tc * x + this.td * y + this.ty;\n        this.mutation = true;\n        return this;\n    }\n    scale(sx, sy) {\n        this.ta = this.ta * sx;\n        this.tb = this.tb * sy;\n        this.tc = this.tc * sx;\n        this.td = this.td * sy;\n        this.mutation = true;\n        return this;\n    }\n    rotate(angle) {\n        if (angle === 0 || !((angle % Math.PI) * 2)) {\n            return this;\n        }\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        const e0 = this.ta * cos + this.tb * sin;\n        const e1 = this.tb * cos - this.ta * sin;\n        const e3 = this.tc * cos + this.td * sin;\n        const e4 = this.td * cos - this.tc * sin;\n        this.ta = e0;\n        this.tb = e1;\n        this.tc = e3;\n        this.td = e4;\n        this.mutation = true;\n        return this;\n    }\n    multiply(other) {\n        return Matrix3d.multiply(this, other, this);\n    }\n    /**\n     * Returns the matrix as a Float32Array in column-major order.\n     *\n     * @remarks\n     * This method is optimized to avoid unnecessary allocations. The same array\n     * is returned every time this method is called, and is updated in place.\n     *\n     * WARNING: Use the array only for passing directly to a WebGL shader uniform\n     * during a frame render. Do not modify or hold onto the array for longer than\n     * a frame.\n     */\n    getFloatArr() {\n        if (!this._floatArr) {\n            this._floatArr = new Float32Array(9);\n        }\n        if (this.mutation) {\n            this._floatArr[0] = this.ta;\n            this._floatArr[1] = this.tc;\n            this._floatArr[2] = 0;\n            this._floatArr[3] = this.tb;\n            this._floatArr[4] = this.td;\n            this._floatArr[5] = 0;\n            this._floatArr[6] = this.tx;\n            this._floatArr[7] = this.ty;\n            this._floatArr[8] = 1;\n            this.mutation = false;\n        }\n        return this._floatArr;\n    }\n}\nconst tempMatrix = new Matrix3d();\n//# sourceMappingURL=Matrix3d.js.map","const rx1 = 0;\nconst rx2 = 2;\nconst rx3 = 4;\nconst rx4 = 6;\nconst ry1 = 1;\nconst ry2 = 3;\nconst ry3 = 5;\nconst ry4 = 7;\nexport class RenderCoords {\n    data;\n    constructor(entries) {\n        this.data = new Float32Array(8);\n        if (entries) {\n            this.data[rx1] = entries[rx1];\n            this.data[rx2] = entries[rx2];\n            this.data[rx3] = entries[rx3];\n            this.data[rx4] = entries[rx4];\n            this.data[ry1] = entries[ry1];\n            this.data[ry2] = entries[ry2];\n            this.data[ry3] = entries[ry3];\n            this.data[ry4] = entries[ry4];\n        }\n    }\n    static translate(x1, y1, x2, y2, x3, y3, x4, y4, out) {\n        if (!out) {\n            out = new RenderCoords();\n        }\n        out.data[rx1] = x1;\n        out.data[rx2] = x2;\n        out.data[rx3] = x3;\n        out.data[rx4] = x4;\n        out.data[ry1] = y1;\n        out.data[ry2] = y2;\n        out.data[ry3] = y3;\n        out.data[ry4] = y4;\n        return out;\n    }\n    get x1() {\n        return this.data[rx1];\n    }\n    get x2() {\n        return this.data[rx2];\n    }\n    get x3() {\n        return this.data[rx3];\n    }\n    get x4() {\n        return this.data[rx4];\n    }\n    get y1() {\n        return this.data[ry1];\n    }\n    get y2() {\n        return this.data[ry2];\n    }\n    get y3() {\n        return this.data[ry3];\n    }\n    get y4() {\n        return this.data[ry4];\n    }\n}\n//# sourceMappingURL=RenderCoords.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Core Utility Functions\n *\n * @module\n */\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport const RANDOM = Math.random;\nexport const ANGLE_ORDER = 'zyx';\nconst degree = Math.PI / 180;\nexport const setMatrixArrayType = (type) => {\n    ARRAY_TYPE = type;\n};\nexport const toRadian = (a) => {\n    return a * degree;\n};\nexport const equals = (a, b) => {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n};\nexport const rand = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\nexport const isPowerOfTwo = (value) => {\n    return value && !(value & (value - 1));\n};\nconst getTimingBezier = (a, b, c, d) => {\n    const xc = 3.0 * a;\n    const xb = 3.0 * (c - a) - xc;\n    const xa = 1.0 - xc - xb;\n    const yc = 3.0 * b;\n    const yb = 3.0 * (d - b) - yc;\n    const ya = 1.0 - yc - yb;\n    return function (time) {\n        if (time >= 1.0) {\n            return 1;\n        }\n        if (time <= 0) {\n            return 0;\n        }\n        let t = 0.5, cbx, cbxd, dx;\n        for (let it = 0; it < 20; it++) {\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                return t * (t * (t * ya + yb) + yc);\n            }\n            // Cubic bezier derivative.\n            cbxd = t * (t * (3 * xa) + 2 * xb) + xc;\n            if (cbxd > 1e-10 && cbxd < 1e-10) {\n                // Problematic. Fall back to binary search method.\n                break;\n            }\n            t += dx / cbxd;\n        }\n        // Fallback: binary search method. This is more reliable when there are near-0 slopes.\n        let minT = 0;\n        let maxT = 1;\n        for (let it = 0; it < 20; it++) {\n            t = 0.5 * (minT + maxT);\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                // Solution found!\n                return t * (t * (t * ya + yb) + yc);\n            }\n            if (dx < 0) {\n                maxT = t;\n            }\n            else {\n                minT = t;\n            }\n        }\n    };\n};\nconst timingMapping = {};\nconst timingLookup = {\n    ease: [0.25, 0.1, 0.25, 1.0],\n    'ease-in': [0.42, 0, 1.0, 1.0],\n    'ease-out': [0, 0, 0.58, 1.0],\n    'ease-in-out': [0.42, 0, 0.58, 1.0],\n    'ease-in-sine': [0.12, 0, 0.39, 0],\n    'ease-out-sine': [0.12, 0, 0.39, 0],\n    'ease-in-out-sine': [0.37, 0, 0.63, 1],\n    'ease-in-cubic': [0.32, 0, 0.67, 0],\n    'ease-out-cubic': [0.33, 1, 0.68, 1],\n    'ease-in-out-cubic': [0.65, 0, 0.35, 1],\n    'ease-in-circ': [0.55, 0, 1, 0.45],\n    'ease-out-circ': [0, 0.55, 0.45, 1],\n    'ease-in-out-circ': [0.85, 0, 0.15, 1],\n    'ease-in-back': [0.36, 0, 0.66, -0.56],\n    'ease-out-back': [0.34, 1.56, 0.64, 1],\n    'ease-in-out-back': [0.68, -0.6, 0.32, 1.6],\n};\nconst defaultTiming = (t) => t;\nconst parseCubicBezier = (str) => {\n    //cubic-bezier(0.84, 0.52, 0.56, 0.6)\n    const regex = /-?\\d*\\.?\\d+/g;\n    const match = str.match(regex);\n    if (match) {\n        const [num1, num2, num3, num4] = match;\n        const a = parseFloat(num1 || '0.42');\n        const b = parseFloat(num2 || '0');\n        const c = parseFloat(num3 || '1');\n        const d = parseFloat(num4 || '1');\n        const timing = getTimingBezier(a, b, c, d);\n        timingMapping[str] = timing;\n        return timing;\n    }\n    // parse failed, return linear\n    console.warn('Unknown cubic-bezier timing: ' + str);\n    return defaultTiming;\n};\nexport const getTimingFunction = (str) => {\n    if (str === 'linear') {\n        return defaultTiming;\n    }\n    if (timingMapping[str] !== undefined) {\n        return timingMapping[str] || defaultTiming;\n    }\n    if (str === 'step-start') {\n        return () => {\n            return 1;\n        };\n    }\n    if (str === 'step-end') {\n        return (time) => {\n            return time === 1 ? 1 : 0;\n        };\n    }\n    const lookup = timingLookup[str];\n    if (lookup !== undefined) {\n        const [a, b, c, d] = lookup;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore - TS doesn't understand that we've checked for undefined\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        const timing = getTimingBezier(a, b, c, d);\n        timingMapping[str] = timing;\n        return timing;\n    }\n    if (str.startsWith('cubic-bezier')) {\n        return parseCubicBezier(str);\n    }\n    console.warn('Unknown timing function: ' + str);\n    return defaultTiming;\n};\n/**\n * Convert bytes to string of megabytes with 2 decimal points\n *\n * @param bytes\n * @returns\n */\nexport function bytesToMb(bytes) {\n    return (bytes / 1024 / 1024).toFixed(2);\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {} from '../CoreNode.js';\nimport { getTimingFunction } from '../utils.js';\nimport { mergeColorProgress } from '../../utils.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nexport class CoreAnimation extends EventEmitter {\n    node;\n    props;\n    settings;\n    progress = 0;\n    delayFor = 0;\n    delay = 0;\n    timingFunction;\n    propValuesMap = {};\n    dynPropValuesMap = undefined;\n    constructor(node, props, settings) {\n        super();\n        this.node = node;\n        this.props = props;\n        for (const key in props) {\n            if (key !== 'shaderProps') {\n                if (this.propValuesMap['props'] === undefined) {\n                    this.propValuesMap['props'] = {};\n                }\n                this.propValuesMap['props'][key] = {\n                    start: node[key] || 0,\n                    target: props[key],\n                };\n            }\n            else if (node.shader.type !== 'DynamicShader') {\n                this.propValuesMap['shaderProps'] = {};\n                for (const key in props.shaderProps) {\n                    this.propValuesMap['shaderProps'][key] = {\n                        start: node.shader.props[key],\n                        target: props.shaderProps[key],\n                    };\n                }\n            }\n            else {\n                const shaderPropKeys = Object.keys(props.shaderProps);\n                const spLength = shaderPropKeys.length;\n                this.dynPropValuesMap = {};\n                for (let j = 0; j < spLength; j++) {\n                    const effectName = shaderPropKeys[j];\n                    const effect = props.shaderProps[effectName];\n                    this.dynPropValuesMap[effectName] = {};\n                    const effectProps = Object.entries(effect);\n                    const eLength = effectProps.length;\n                    for (let k = 0; k < eLength; k++) {\n                        const [key, value] = effectProps[k];\n                        this.dynPropValuesMap[effectName][key] = {\n                            start: node.shader.props[effectName][key],\n                            target: value,\n                        };\n                    }\n                }\n            }\n        }\n        const easing = settings.easing || 'linear';\n        const delay = settings.delay ?? 0;\n        this.settings = {\n            duration: settings.duration ?? 0,\n            delay,\n            easing,\n            loop: settings.loop ?? false,\n            repeat: settings.repeat ?? 0,\n            repeatDelay: settings.repeatDelay ?? 0,\n            stopMethod: settings.stopMethod ?? false,\n        };\n        this.timingFunction = getTimingFunction(easing);\n        this.delayFor = delay;\n        this.delay = delay;\n    }\n    reset() {\n        this.progress = 0;\n        this.delayFor = this.settings.delay || 0;\n        this.update(0);\n    }\n    restoreValues(target, valueMap) {\n        const entries = Object.entries(valueMap);\n        const eLength = entries.length;\n        for (let i = 0; i < eLength; i++) {\n            const [key, value] = entries[i];\n            target[key] = value.start;\n        }\n    }\n    restore() {\n        this.reset();\n        if (this.propValuesMap['props'] !== undefined) {\n            this.restoreValues(this.node, this.propValuesMap['props']);\n        }\n        if (this.propValuesMap['shaderProps'] !== undefined) {\n            this.restoreValues(this.node.shader.props, this.propValuesMap['shaderProps']);\n        }\n        if (this.dynPropValuesMap !== undefined) {\n            const dynEntries = Object.keys(this.dynPropValuesMap);\n            const dynEntriesL = dynEntries.length;\n            if (dynEntriesL > 0) {\n                for (let i = 0; i < dynEntriesL; i++) {\n                    const key = dynEntries[i];\n                    this.restoreValues(this.node.shader.props[key], this.dynPropValuesMap[key]);\n                }\n            }\n        }\n    }\n    reverseValues(valueMap) {\n        const entries = Object.entries(valueMap);\n        const eLength = entries.length;\n        for (let i = 0; i < eLength; i++) {\n            const [key, value] = entries[i];\n            valueMap[key] = {\n                start: value.target,\n                target: value.start,\n            };\n        }\n    }\n    reverse() {\n        this.progress = 0;\n        if (this.propValuesMap['props'] !== undefined) {\n            this.reverseValues(this.propValuesMap['props']);\n        }\n        if (this.propValuesMap['shaderProps'] !== undefined) {\n            this.reverseValues(this.propValuesMap['shaderProps']);\n        }\n        if (this.dynPropValuesMap !== undefined) {\n            const dynEntries = Object.keys(this.dynPropValuesMap);\n            const dynEntriesL = dynEntries.length;\n            if (dynEntriesL > 0) {\n                for (let i = 0; i < dynEntriesL; i++) {\n                    const key = dynEntries[i];\n                    this.reverseValues(this.dynPropValuesMap[key]);\n                }\n            }\n        }\n        // restore stop method if we are not looping\n        if (!this.settings.loop) {\n            this.settings.stopMethod = false;\n        }\n    }\n    applyEasing(p, s, e) {\n        return (this.timingFunction(p) || p) * (e - s) + s;\n    }\n    updateValue(propName, propValue, startValue, easing) {\n        if (this.progress === 1) {\n            return propValue;\n        }\n        if (this.progress === 0) {\n            return startValue;\n        }\n        const endValue = propValue;\n        if (propName.indexOf('color') !== -1) {\n            if (startValue === endValue) {\n                return startValue;\n            }\n            if (easing) {\n                const easingProgressValue = this.timingFunction(this.progress) || this.progress;\n                return mergeColorProgress(startValue, endValue, easingProgressValue);\n            }\n            return mergeColorProgress(startValue, endValue, this.progress);\n        }\n        if (easing) {\n            return this.applyEasing(this.progress, startValue, endValue);\n        }\n        return startValue + (endValue - startValue) * this.progress;\n    }\n    updateValues(target, valueMap, easing) {\n        const entries = Object.entries(valueMap);\n        const eLength = entries.length;\n        for (let i = 0; i < eLength; i++) {\n            const [key, value] = entries[i];\n            target[key] = this.updateValue(key, value.target, value.start, easing);\n        }\n    }\n    update(dt) {\n        const { duration, loop, easing, stopMethod } = this.settings;\n        const { delayFor } = this;\n        if (duration === 0 && delayFor === 0) {\n            this.emit('finished', {});\n            return;\n        }\n        if (this.delayFor > 0) {\n            this.delayFor -= dt;\n            if (this.delayFor >= 0) {\n                // Either no or more delay left. Exit.\n                return;\n            }\n            else {\n                // We went beyond the delay time, add it back to dt so we can continue\n                // with the animation.\n                dt = -this.delayFor;\n                this.delayFor = 0;\n            }\n        }\n        if (duration === 0) {\n            // No duration, we are done.\n            this.emit('finished', {});\n            return;\n        }\n        if (this.progress === 0) {\n            // Progress is 0, we are starting the post-delay part of the animation.\n            this.emit('animating', {});\n        }\n        this.progress += dt / duration;\n        if (this.progress > 1) {\n            this.progress = loop ? 0 : 1;\n            this.delayFor = this.delay;\n            if (stopMethod) {\n                // If there's a stop method emit finished so the stop method can be applied.\n                // TODO: We should probably reevaluate how stopMethod is implemented as currently\n                // stop method 'reset' does not work when looping.\n                this.emit('finished', {});\n                return;\n            }\n        }\n        if (this.propValuesMap['props'] !== undefined) {\n            this.updateValues(this.node, this.propValuesMap['props'], easing);\n        }\n        if (this.propValuesMap['shaderProps'] !== undefined) {\n            this.updateValues(this.node.shader.props, this.propValuesMap['shaderProps'], easing);\n        }\n        if (this.dynPropValuesMap !== undefined) {\n            const dynEntries = Object.keys(this.dynPropValuesMap);\n            const dynEntriesL = dynEntries.length;\n            if (dynEntriesL > 0) {\n                for (let i = 0; i < dynEntriesL; i++) {\n                    const key = dynEntries[i];\n                    this.updateValues(this.node.shader.props[key], this.dynPropValuesMap[key], easing);\n                }\n            }\n        }\n        if (this.progress < 1) {\n            this.emit('tick', { progress: this.progress });\n        }\n        if (this.progress === 1) {\n            this.emit('finished', {});\n        }\n    }\n}\n//# sourceMappingURL=CoreAnimation.js.map","/* eslint-disable @typescript-eslint/unbound-method */\n/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nexport class CoreAnimationController extends EventEmitter {\n    manager;\n    animation;\n    stoppedPromise;\n    /**\n     * If this is null, then the animation is in a finished / stopped state.\n     */\n    stoppedResolve = null;\n    state;\n    constructor(manager, animation) {\n        super();\n        this.manager = manager;\n        this.animation = animation;\n        this.state = 'stopped';\n        // Initial stopped promise is resolved (since the animation is stopped)\n        this.stoppedPromise = Promise.resolve();\n        // Bind event handlers\n        this.onAnimating = this.onAnimating.bind(this);\n        this.onFinished = this.onFinished.bind(this);\n        this.onTick = this.onTick.bind(this);\n    }\n    start() {\n        if (this.state !== 'running' && this.state !== 'scheduled') {\n            this.makeStoppedPromise();\n            this.registerAnimation();\n            this.state = 'scheduled';\n        }\n        return this;\n    }\n    stop() {\n        this.unregisterAnimation();\n        if (this.stoppedResolve !== null) {\n            this.stoppedResolve();\n            this.stoppedResolve = null;\n            this.emit('stopped', this);\n        }\n        this.animation.reset();\n        this.state = 'stopped';\n        return this;\n    }\n    pause() {\n        this.unregisterAnimation();\n        this.state = 'paused';\n        return this;\n    }\n    restore() {\n        this.stoppedResolve = null;\n        this.animation.restore();\n        return this;\n    }\n    waitUntilStopped() {\n        return this.stoppedPromise;\n    }\n    registerAnimation() {\n        // Hook up event listeners\n        this.animation.once('finished', this.onFinished);\n        this.animation.on('animating', this.onAnimating);\n        this.animation.on('tick', this.onTick);\n        // Then register the animation\n        this.manager.registerAnimation(this.animation);\n    }\n    unregisterAnimation() {\n        // First unregister the animation\n        this.manager.unregisterAnimation(this.animation);\n        // Then unhook event listeners\n        this.animation.off('finished', this.onFinished);\n        this.animation.off('animating', this.onAnimating);\n        this.animation.off('tick', this.onTick);\n    }\n    makeStoppedPromise() {\n        if (this.stoppedResolve === null) {\n            this.stoppedPromise = new Promise((resolve) => {\n                this.stoppedResolve = resolve;\n            });\n        }\n    }\n    onFinished() {\n        assertTruthy(this.stoppedResolve);\n        // If the animation is looping, then we need to restart it.\n        const { loop, stopMethod } = this.animation.settings;\n        if (stopMethod === 'reverse') {\n            this.animation.once('finished', this.onFinished);\n            this.animation.reverse();\n            return;\n        }\n        if (loop) {\n            return;\n        }\n        // unregister animation\n        this.unregisterAnimation();\n        // resolve promise\n        this.stoppedResolve();\n        this.stoppedResolve = null;\n        this.emit('stopped', this);\n        this.state = 'stopped';\n    }\n    onAnimating() {\n        this.state = 'running';\n        this.emit('animating', this);\n    }\n    onTick(_animation, data) {\n        this.emit('tick', data);\n    }\n}\n//# sourceMappingURL=CoreAnimationController.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, getNewId, mergeColorAlphaPremultiplied, } from '../utils.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { copyRect, intersectRect, createBound, boundInsideBound, boundLargeThanBound, createPreloadBounds, } from './lib/utils.js';\nimport { Matrix3d } from './lib/Matrix3d.js';\nimport { RenderCoords } from './lib/RenderCoords.js';\nimport { CoreAnimation } from './animations/CoreAnimation.js';\nimport { CoreAnimationController } from './animations/CoreAnimationController.js';\nexport var CoreNodeRenderState;\n(function (CoreNodeRenderState) {\n    CoreNodeRenderState[CoreNodeRenderState[\"Init\"] = 0] = \"Init\";\n    CoreNodeRenderState[CoreNodeRenderState[\"OutOfBounds\"] = 2] = \"OutOfBounds\";\n    CoreNodeRenderState[CoreNodeRenderState[\"InBounds\"] = 4] = \"InBounds\";\n    CoreNodeRenderState[CoreNodeRenderState[\"InViewport\"] = 8] = \"InViewport\";\n})(CoreNodeRenderState || (CoreNodeRenderState = {}));\nconst CoreNodeRenderStateMap = new Map();\nCoreNodeRenderStateMap.set(CoreNodeRenderState.Init, 'init');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.OutOfBounds, 'outOfBounds');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.InBounds, 'inBounds');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.InViewport, 'inViewport');\nexport var UpdateType;\n(function (UpdateType) {\n    /**\n     * Child updates\n     */\n    UpdateType[UpdateType[\"Children\"] = 1] = \"Children\";\n    /**\n     * Scale/Rotate transform update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `scaleRotateTransform`\n     */\n    UpdateType[UpdateType[\"ScaleRotate\"] = 2] = \"ScaleRotate\";\n    /**\n     * Translate transform update (x/y/width/height/pivot/mount)\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `localTransform`\n     */\n    UpdateType[UpdateType[\"Local\"] = 4] = \"Local\";\n    /**\n     * Global Transform update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `globalTransform`\n     * - `renderCoords`\n     * - `renderBound`\n     */\n    UpdateType[UpdateType[\"Global\"] = 8] = \"Global\";\n    /**\n     * Clipping rect update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `clippingRect`\n     */\n    UpdateType[UpdateType[\"Clipping\"] = 16] = \"Clipping\";\n    /**\n     * Calculated ZIndex update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `calcZIndex`\n     */\n    UpdateType[UpdateType[\"CalculatedZIndex\"] = 32] = \"CalculatedZIndex\";\n    /**\n     * Z-Index Sorted Children update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `children` (sorts children by their `calcZIndex`)\n     */\n    UpdateType[UpdateType[\"ZIndexSortedChildren\"] = 64] = \"ZIndexSortedChildren\";\n    /**\n     * Premultiplied Colors update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `premultipliedColorTl`\n     * - `premultipliedColorTr`\n     * - `premultipliedColorBl`\n     * - `premultipliedColorBr`\n     */\n    UpdateType[UpdateType[\"PremultipliedColors\"] = 128] = \"PremultipliedColors\";\n    /**\n     * World Alpha update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `worldAlpha` = `parent.worldAlpha` * `alpha`\n     */\n    UpdateType[UpdateType[\"WorldAlpha\"] = 256] = \"WorldAlpha\";\n    /**\n     * Render State update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `renderState`\n     */\n    UpdateType[UpdateType[\"RenderState\"] = 512] = \"RenderState\";\n    /**\n     * Is Renderable update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `isRenderable`\n     */\n    UpdateType[UpdateType[\"IsRenderable\"] = 1024] = \"IsRenderable\";\n    /**\n     * Render Texture update\n     */\n    UpdateType[UpdateType[\"RenderTexture\"] = 2048] = \"RenderTexture\";\n    /**\n     * Track if parent has render texture\n     */\n    UpdateType[UpdateType[\"ParentRenderTexture\"] = 4096] = \"ParentRenderTexture\";\n    /**\n     * Render Bounds update\n     */\n    UpdateType[UpdateType[\"RenderBounds\"] = 8192] = \"RenderBounds\";\n    /**\n     * None\n     */\n    UpdateType[UpdateType[\"None\"] = 0] = \"None\";\n    /**\n     * All\n     */\n    UpdateType[UpdateType[\"All\"] = 14335] = \"All\";\n})(UpdateType || (UpdateType = {}));\n/**\n * A visual Node in the Renderer scene graph.\n *\n * @remarks\n * CoreNode is an internally used class that represents a Renderer Node in the\n * scene graph. See INode.ts for the public APIs exposed to Renderer users\n * that include generic types for Shaders.\n */\nexport class CoreNode extends EventEmitter {\n    stage;\n    children = [];\n    _id = getNewId();\n    props;\n    updateType = UpdateType.All;\n    childUpdateType = UpdateType.None;\n    globalTransform;\n    scaleRotateTransform;\n    localTransform;\n    renderCoords;\n    renderBound;\n    strictBound;\n    preloadBound;\n    clippingRect = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        valid: false,\n    };\n    isRenderable = false;\n    renderState = CoreNodeRenderState.Init;\n    worldAlpha = 1;\n    premultipliedColorTl = 0;\n    premultipliedColorTr = 0;\n    premultipliedColorBl = 0;\n    premultipliedColorBr = 0;\n    calcZIndex = 0;\n    hasRTTupdates = false;\n    parentHasRenderTexture = false;\n    rttParent = null;\n    constructor(stage, props) {\n        super();\n        this.stage = stage;\n        this.props = {\n            ...props,\n            parent: null,\n            texture: null,\n            src: null,\n            rtt: false,\n        };\n        // Assign props to instance\n        this.parent = props.parent;\n        this.texture = props.texture;\n        this.src = props.src;\n        this.rtt = props.rtt;\n        this.setUpdateType(UpdateType.ScaleRotate |\n            UpdateType.Local |\n            UpdateType.RenderBounds |\n            UpdateType.RenderState);\n    }\n    //#region Textures\n    loadTexture() {\n        const { texture } = this.props;\n        assertTruthy(texture);\n        // If texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            texture.preventCleanup = this.props.preventCleanup;\n            // Preload texture if required\n            if (this.textureOptions.preload) {\n                texture.ctxTexture.load();\n            }\n            texture.on('loaded', this.onTextureLoaded);\n            texture.on('failed', this.onTextureFailed);\n            texture.on('freed', this.onTextureFreed);\n            // If the parent is a render texture, the initial texture status\n            // will be set to freed until the texture is processed by the\n            // Render RTT nodes. So we only need to listen fo changes and\n            // no need to check the texture.state until we restructure how\n            // textures are being processed.\n            if (this.parentHasRenderTexture) {\n                this.notifyParentRTTOfUpdate();\n                return;\n            }\n            if (texture.state === 'loaded') {\n                assertTruthy(texture.dimensions);\n                this.onTextureLoaded(texture, texture.dimensions);\n            }\n            else if (texture.state === 'failed') {\n                assertTruthy(texture.error);\n                this.onTextureFailed(texture, texture.error);\n            }\n            else if (texture.state === 'freed') {\n                this.onTextureFreed(texture);\n            }\n        });\n    }\n    unloadTexture() {\n        if (this.texture !== null) {\n            this.texture.off('loaded', this.onTextureLoaded);\n            this.texture.off('failed', this.onTextureFailed);\n            this.texture.off('freed', this.onTextureFreed);\n            this.texture.setRenderableOwner(this, false);\n        }\n    }\n    autosizeNode(dimensions) {\n        if (this.autosize) {\n            this.width = dimensions.width;\n            this.height = dimensions.height;\n        }\n    }\n    onTextureLoaded = (_, dimensions) => {\n        this.autosizeNode(dimensions);\n        // Texture was loaded. In case the RAF loop has already stopped, we request\n        // a render to ensure the texture is rendered.\n        this.stage.requestRender();\n        // If parent has a render texture, flag that we need to update\n        if (this.parentHasRenderTexture) {\n            this.notifyParentRTTOfUpdate();\n        }\n        this.emit('loaded', {\n            type: 'texture',\n            dimensions,\n        });\n        // Trigger a local update if the texture is loaded and the resizeMode is 'contain'\n        if (this.props.textureOptions?.resizeMode?.type === 'contain') {\n            this.setUpdateType(UpdateType.Local);\n        }\n    };\n    onTextureFailed = (_, error) => {\n        // If parent has a render texture, flag that we need to update\n        if (this.parentHasRenderTexture) {\n            this.notifyParentRTTOfUpdate();\n        }\n        this.emit('failed', {\n            type: 'texture',\n            error,\n        });\n    };\n    onTextureFreed = () => {\n        // If parent has a render texture, flag that we need to update\n        if (this.parentHasRenderTexture) {\n            this.notifyParentRTTOfUpdate();\n        }\n        this.emit('freed', {\n            type: 'texture',\n        });\n    };\n    //#endregion Textures\n    /**\n     * Change types types is used to determine the scope of the changes being applied\n     *\n     * @remarks\n     * See {@link UpdateType} for more information on each type\n     *\n     * @param type\n     */\n    setUpdateType(type) {\n        this.updateType |= type;\n        const parent = this.props.parent;\n        if (!parent)\n            return;\n        if ((parent.updateType & UpdateType.Children) === 0) {\n            // Inform the parent if it doesn’t already have a child update\n            parent.setUpdateType(UpdateType.Children);\n        }\n    }\n    sortChildren() {\n        this.children.sort((a, b) => a.calcZIndex - b.calcZIndex);\n    }\n    updateScaleRotateTransform() {\n        const { rotation, scaleX, scaleY } = this.props;\n        // optimize simple translation cases\n        if (rotation === 0 && scaleX === 1 && scaleY === 1) {\n            this.scaleRotateTransform = undefined;\n            return;\n        }\n        this.scaleRotateTransform = Matrix3d.rotate(rotation, this.scaleRotateTransform).scale(scaleX, scaleY);\n    }\n    updateLocalTransform() {\n        const { x, y, width, height } = this.props;\n        const mountTranslateX = this.props.mountX * width;\n        const mountTranslateY = this.props.mountY * height;\n        if (this.scaleRotateTransform) {\n            const pivotTranslateX = this.props.pivotX * width;\n            const pivotTranslateY = this.props.pivotY * height;\n            this.localTransform = Matrix3d.translate(x - mountTranslateX + pivotTranslateX, y - mountTranslateY + pivotTranslateY, this.localTransform)\n                .multiply(this.scaleRotateTransform)\n                .translate(-pivotTranslateX, -pivotTranslateY);\n        }\n        else {\n            this.localTransform = Matrix3d.translate(x - mountTranslateX, y - mountTranslateY, this.localTransform);\n        }\n        // Handle 'contain' resize mode\n        const texture = this.props.texture;\n        if (texture &&\n            texture.dimensions &&\n            this.props.textureOptions?.resizeMode?.type === 'contain') {\n            let resizeModeScaleX = 1;\n            let resizeModeScaleY = 1;\n            let extraX = 0;\n            let extraY = 0;\n            const { width: tw, height: th } = texture.dimensions;\n            const txAspectRatio = tw / th;\n            const nodeAspectRatio = width / height;\n            if (txAspectRatio > nodeAspectRatio) {\n                // Texture is wider than node\n                // Center the node vertically (shift down by extraY)\n                // Scale the node vertically to maintain original aspect ratio\n                const scaleX = width / tw;\n                const scaledTxHeight = th * scaleX;\n                extraY = (height - scaledTxHeight) / 2;\n                resizeModeScaleY = scaledTxHeight / height;\n            }\n            else {\n                // Texture is taller than node (or equal)\n                // Center the node horizontally (shift right by extraX)\n                // Scale the node horizontally to maintain original aspect ratio\n                const scaleY = height / th;\n                const scaledTxWidth = tw * scaleY;\n                extraX = (width - scaledTxWidth) / 2;\n                resizeModeScaleX = scaledTxWidth / width;\n            }\n            // Apply the extra translation and scale to the local transform\n            this.localTransform\n                .translate(extraX, extraY)\n                .scale(resizeModeScaleX, resizeModeScaleY);\n        }\n        this.setUpdateType(UpdateType.Global);\n    }\n    /**\n     * @todo: test for correct calculation flag\n     * @param delta\n     */\n    update(delta, parentClippingRect) {\n        if (this.updateType & UpdateType.ScaleRotate) {\n            this.updateScaleRotateTransform();\n            this.setUpdateType(UpdateType.Local);\n        }\n        if (this.updateType & UpdateType.Local) {\n            this.updateLocalTransform();\n            this.setUpdateType(UpdateType.Global);\n        }\n        const parent = this.props.parent;\n        let renderState = null;\n        // Handle specific RTT updates at this node level\n        if (this.updateType & UpdateType.RenderTexture && this.rtt) {\n            // Only the RTT node itself triggers `renderToTexture`\n            this.hasRTTupdates = true;\n            this.stage.renderer?.renderToTexture(this);\n        }\n        if (this.updateType & UpdateType.Global) {\n            assertTruthy(this.localTransform);\n            this.globalTransform = Matrix3d.copy(parent?.globalTransform || this.localTransform, this.globalTransform);\n            if (this.parentHasRenderTexture && this.props.parent?.rtt) {\n                this.globalTransform = Matrix3d.identity();\n            }\n            if (parent) {\n                this.globalTransform.multiply(this.localTransform);\n            }\n            this.calculateRenderCoords();\n            this.updateBoundingRect();\n            this.setUpdateType(UpdateType.RenderState | UpdateType.Children);\n            this.childUpdateType |= UpdateType.Global;\n            if (this.clipping === true) {\n                this.setUpdateType(UpdateType.Clipping | UpdateType.RenderBounds);\n                this.childUpdateType |= UpdateType.RenderBounds;\n            }\n        }\n        if (this.updateType & UpdateType.RenderBounds) {\n            this.createRenderBounds();\n            this.setUpdateType(UpdateType.RenderState);\n            this.setUpdateType(UpdateType.Children);\n        }\n        if (this.updateType & UpdateType.RenderState) {\n            renderState = this.checkRenderBounds();\n            this.setUpdateType(UpdateType.IsRenderable);\n            // if we're not going out of bounds, update the render state\n            // this is done so the update loop can finish before we mark a node\n            // as out of bounds\n            if (renderState !== CoreNodeRenderState.OutOfBounds) {\n                this.updateRenderState(renderState);\n            }\n        }\n        if (this.updateType & UpdateType.WorldAlpha) {\n            if (parent) {\n                this.worldAlpha = parent.worldAlpha * this.props.alpha;\n            }\n            else {\n                this.worldAlpha = this.props.alpha;\n            }\n            this.setUpdateType(UpdateType.Children |\n                UpdateType.PremultipliedColors |\n                UpdateType.IsRenderable);\n            this.childUpdateType |= UpdateType.WorldAlpha;\n        }\n        if (this.updateType & UpdateType.IsRenderable) {\n            this.updateIsRenderable();\n        }\n        if (this.updateType & UpdateType.Clipping) {\n            this.calculateClippingRect(parentClippingRect);\n            this.setUpdateType(UpdateType.Children);\n            this.childUpdateType |= UpdateType.Clipping;\n            this.childUpdateType |= UpdateType.RenderBounds;\n        }\n        if (this.updateType & UpdateType.PremultipliedColors) {\n            this.premultipliedColorTl = mergeColorAlphaPremultiplied(this.props.colorTl, this.worldAlpha, true);\n            // If all the colors are the same just sent them all to the same value\n            if (this.props.colorTl === this.props.colorTr &&\n                this.props.colorBl === this.props.colorBr &&\n                this.props.colorTl === this.props.colorBl) {\n                this.premultipliedColorTr =\n                    this.premultipliedColorBl =\n                        this.premultipliedColorBr =\n                            this.premultipliedColorTl;\n            }\n            else {\n                this.premultipliedColorTr = mergeColorAlphaPremultiplied(this.props.colorTr, this.worldAlpha, true);\n                this.premultipliedColorBl = mergeColorAlphaPremultiplied(this.props.colorBl, this.worldAlpha, true);\n                this.premultipliedColorBr = mergeColorAlphaPremultiplied(this.props.colorBr, this.worldAlpha, true);\n            }\n        }\n        // No need to update zIndex if there is no parent\n        if (parent !== null && this.updateType & UpdateType.CalculatedZIndex) {\n            this.calculateZIndex();\n            // Tell parent to re-sort children\n            parent.setUpdateType(UpdateType.ZIndexSortedChildren);\n        }\n        if (this.props.strictBounds === true &&\n            this.renderState === CoreNodeRenderState.OutOfBounds) {\n            return;\n        }\n        if (this.updateType & UpdateType.Children && this.children.length > 0) {\n            for (let i = 0, length = this.children.length; i < length; i++) {\n                const child = this.children[i];\n                child.setUpdateType(this.childUpdateType);\n                if (child.updateType === 0) {\n                    continue;\n                }\n                let childClippingRect = this.clippingRect;\n                if (this.rtt === true) {\n                    childClippingRect = {\n                        x: 0,\n                        y: 0,\n                        width: 0,\n                        height: 0,\n                        valid: false,\n                    };\n                }\n                child.update(delta, childClippingRect);\n            }\n        }\n        // If the node has an RTT parent and requires a texture re-render, inform the RTT parent\n        // if (this.parentHasRenderTexture && this.updateType & UpdateType.RenderTexture) {\n        // @TODO have a more scoped down updateType for RTT updates\n        if (this.parentHasRenderTexture && this.updateType > 0) {\n            this.notifyParentRTTOfUpdate();\n        }\n        // Sorting children MUST happen after children have been updated so\n        // that they have the oppotunity to update their calculated zIndex.\n        if (this.updateType & UpdateType.ZIndexSortedChildren) {\n            // reorder z-index\n            this.sortChildren();\n        }\n        // If we're out of bounds, apply the render state now\n        // this is done so nodes can finish their entire update loop before\n        // being marked as out of bounds\n        if (renderState === CoreNodeRenderState.OutOfBounds) {\n            this.updateRenderState(renderState);\n            this.updateIsRenderable();\n        }\n        // reset update type\n        this.updateType = 0;\n        this.childUpdateType = 0;\n    }\n    findParentRTTNode() {\n        let rttNode = this.parent;\n        while (rttNode && !rttNode.rtt) {\n            rttNode = rttNode.parent;\n        }\n        return rttNode;\n    }\n    notifyParentRTTOfUpdate() {\n        if (this.parent === null) {\n            return;\n        }\n        const rttNode = this.rttParent || this.findParentRTTNode();\n        if (!rttNode) {\n            return;\n        }\n        // If an RTT node is found, mark it for re-rendering\n        rttNode.hasRTTupdates = true;\n        rttNode.setUpdateType(UpdateType.RenderTexture);\n        // if rttNode is nested, also make it update its RTT parent\n        if (rttNode.parentHasRenderTexture === true) {\n            rttNode.notifyParentRTTOfUpdate();\n        }\n    }\n    //check if CoreNode is renderable based on props\n    hasRenderableProperties() {\n        if (this.props.texture) {\n            return true;\n        }\n        if (!this.props.width || !this.props.height) {\n            return false;\n        }\n        if (this.props.shader !== this.stage.defShaderCtr) {\n            return true;\n        }\n        if (this.props.clipping) {\n            return true;\n        }\n        if (this.props.color !== 0) {\n            return true;\n        }\n        // Consider removing these checks and just using the color property check above.\n        // Maybe add a forceRender prop for nodes that should always render.\n        if (this.props.colorTop !== 0) {\n            return true;\n        }\n        if (this.props.colorBottom !== 0) {\n            return true;\n        }\n        if (this.props.colorLeft !== 0) {\n            return true;\n        }\n        if (this.props.colorRight !== 0) {\n            return true;\n        }\n        if (this.props.colorTl !== 0) {\n            return true;\n        }\n        if (this.props.colorTr !== 0) {\n            return true;\n        }\n        if (this.props.colorBl !== 0) {\n            return true;\n        }\n        if (this.props.colorBr !== 0) {\n            return true;\n        }\n        return false;\n    }\n    checkRenderBounds() {\n        assertTruthy(this.renderBound);\n        assertTruthy(this.strictBound);\n        assertTruthy(this.preloadBound);\n        if (boundInsideBound(this.renderBound, this.strictBound)) {\n            return CoreNodeRenderState.InViewport;\n        }\n        if (boundInsideBound(this.renderBound, this.preloadBound)) {\n            return CoreNodeRenderState.InBounds;\n        }\n        // check if we're larger then our parent, we're definitely in the viewport\n        if (boundLargeThanBound(this.renderBound, this.strictBound)) {\n            return CoreNodeRenderState.InViewport;\n        }\n        // if we are part of a parent render texture, we're always in bounds\n        if (this.parentHasRenderTexture === true) {\n            return CoreNodeRenderState.InBounds;\n        }\n        // check if we dont have dimensions, take our parent's render state\n        if (this.parent !== null &&\n            (this.props.width === 0 || this.props.height === 0)) {\n            return this.parent.renderState;\n        }\n        return CoreNodeRenderState.OutOfBounds;\n    }\n    updateBoundingRect() {\n        const { renderCoords, globalTransform: transform } = this;\n        assertTruthy(transform);\n        assertTruthy(renderCoords);\n        const { tb, tc } = transform;\n        const { x1, y1, x3, y3 } = renderCoords;\n        if (tb === 0 || tc === 0) {\n            this.renderBound = createBound(x1, y1, x3, y3, this.renderBound);\n        }\n        else {\n            const { x2, x4, y2, y4 } = renderCoords;\n            this.renderBound = createBound(Math.min(x1, x2, x3, x4), Math.min(y1, y2, y3, y4), Math.max(x1, x2, x3, x4), Math.max(y1, y2, y3, y4), this.renderBound);\n        }\n    }\n    createRenderBounds() {\n        assertTruthy(this.stage);\n        if (this.parent !== null && this.parent.strictBound !== undefined) {\n            // we have a parent with a valid bound, copy it\n            const parentBound = this.parent.strictBound;\n            this.strictBound = createBound(parentBound.x1, parentBound.y1, parentBound.x2, parentBound.y2);\n            this.preloadBound = createPreloadBounds(this.strictBound, this.stage.boundsMargin);\n        }\n        else {\n            // no parent or parent does not have a bound, take the stage boundaries\n            this.strictBound = this.stage.strictBound;\n            this.preloadBound = this.stage.preloadBound;\n        }\n        // if clipping is disabled, we're done\n        if (this.props.clipping === false) {\n            return;\n        }\n        // only create local clipping bounds if node itself is in bounds\n        // this can only be done if we have a render bound already\n        if (this.renderBound === undefined) {\n            return;\n        }\n        // if we're out of bounds, we're done\n        if (boundInsideBound(this.renderBound, this.strictBound) === false) {\n            return;\n        }\n        // clipping is enabled and we are in bounds create our own bounds\n        const { x, y, width, height } = this.props;\n        const { tx, ty } = this.globalTransform || {};\n        const _x = tx ?? x;\n        const _y = ty ?? y;\n        this.strictBound = createBound(_x, _y, _x + width, _y + height, this.strictBound);\n        this.preloadBound = createPreloadBounds(this.strictBound, this.stage.boundsMargin);\n    }\n    updateRenderState(renderState) {\n        if (renderState === this.renderState) {\n            return;\n        }\n        const previous = this.renderState;\n        this.renderState = renderState;\n        const event = CoreNodeRenderStateMap.get(renderState);\n        assertTruthy(event);\n        this.emit(event, {\n            previous,\n            current: renderState,\n        });\n    }\n    /**\n     * This function updates the `isRenderable` property based on certain conditions.\n     *\n     * @returns\n     */\n    updateIsRenderable() {\n        let newIsRenderable;\n        if (this.worldAlpha === 0 || !this.hasRenderableProperties()) {\n            newIsRenderable = false;\n        }\n        else {\n            newIsRenderable = this.renderState > CoreNodeRenderState.OutOfBounds;\n        }\n        if (this.isRenderable !== newIsRenderable) {\n            this.isRenderable = newIsRenderable;\n            this.onChangeIsRenderable(newIsRenderable);\n        }\n    }\n    onChangeIsRenderable(isRenderable) {\n        this.texture?.setRenderableOwner(this, isRenderable);\n    }\n    calculateRenderCoords() {\n        const { width, height, globalTransform: transform } = this;\n        assertTruthy(transform);\n        const { tx, ty, ta, tb, tc, td } = transform;\n        if (tb === 0 && tc === 0) {\n            const minX = tx;\n            const maxX = tx + width * ta;\n            const minY = ty;\n            const maxY = ty + height * td;\n            this.renderCoords = RenderCoords.translate(\n            //top-left\n            minX, minY, \n            //top-right\n            maxX, minY, \n            //bottom-right\n            maxX, maxY, \n            //bottom-left\n            minX, maxY, this.renderCoords);\n        }\n        else {\n            this.renderCoords = RenderCoords.translate(\n            //top-left\n            tx, ty, \n            //top-right\n            tx + width * ta, ty + width * tc, \n            //bottom-right\n            tx + width * ta + height * tb, ty + width * tc + height * td, \n            //bottom-left\n            tx + height * tb, ty + height * td, this.renderCoords);\n        }\n    }\n    /**\n     * This function calculates the clipping rectangle for a node.\n     *\n     * The function then checks if the node is rotated. If the node requires clipping and is not rotated, a new clipping rectangle is created based on the node's global transform and dimensions.\n     * If a parent clipping rectangle exists, it is intersected with the node's clipping rectangle (if it exists), or replaces the node's clipping rectangle.\n     *\n     * Finally, the node's parentClippingRect and clippingRect properties are updated.\n     */\n    calculateClippingRect(parentClippingRect) {\n        assertTruthy(this.globalTransform);\n        const { clippingRect, props, globalTransform: gt } = this;\n        const { clipping } = props;\n        const isRotated = gt.tb !== 0 || gt.tc !== 0;\n        if (clipping === true && isRotated === false) {\n            clippingRect.x = gt.tx;\n            clippingRect.y = gt.ty;\n            clippingRect.width = this.width * gt.ta;\n            clippingRect.height = this.height * gt.td;\n            clippingRect.valid = true;\n        }\n        else {\n            clippingRect.valid = false;\n        }\n        if (parentClippingRect.valid === true && clippingRect.valid === true) {\n            // Intersect parent clipping rect with node clipping rect\n            intersectRect(parentClippingRect, clippingRect, clippingRect);\n        }\n        else if (parentClippingRect.valid === true) {\n            // Copy parent clipping rect\n            copyRect(parentClippingRect, clippingRect);\n            clippingRect.valid = true;\n        }\n    }\n    calculateZIndex() {\n        const props = this.props;\n        const z = props.zIndex || 0;\n        const p = props.parent?.zIndex || 0;\n        let zIndex = z;\n        if (props.parent?.zIndexLocked) {\n            zIndex = z < p ? z : p;\n        }\n        this.calcZIndex = zIndex;\n    }\n    /**\n     * Destroy the node and cleanup all resources\n     */\n    destroy() {\n        this.unloadTexture();\n        this.clippingRect.valid = false;\n        this.isRenderable = false;\n        this.renderCoords = undefined;\n        this.renderBound = undefined;\n        this.strictBound = undefined;\n        this.preloadBound = undefined;\n        this.globalTransform = undefined;\n        this.scaleRotateTransform = undefined;\n        this.localTransform = undefined;\n        this.props.texture = null;\n        this.props.shader = this.stage.defShaderCtr;\n        while (this.children.length > 0) {\n            this.children[0]?.destroy();\n        }\n        // This very action will also remove the node from the parent's children array\n        this.parent = null;\n        if (this.rtt) {\n            this.stage.renderer.removeRTTNode(this);\n        }\n        this.removeAllListeners();\n    }\n    renderQuads(renderer) {\n        // Prevent quad rendering if parent has a render texture\n        // and renderer is not currently rendering to a texture\n        if (this.parentHasRenderTexture) {\n            if (!renderer.renderToTextureActive) {\n                return;\n            }\n            // Prevent quad rendering if parent render texture is not the active render texture\n            if (this.parentRenderTexture !== renderer.activeRttNode) {\n                return;\n            }\n        }\n        assertTruthy(this.globalTransform);\n        assertTruthy(this.renderCoords);\n        // add to list of renderables to be sorted before rendering\n        renderer.addQuad({\n            width: this.props.width,\n            height: this.props.height,\n            colorTl: this.premultipliedColorTl,\n            colorTr: this.premultipliedColorTr,\n            colorBl: this.premultipliedColorBl,\n            colorBr: this.premultipliedColorBr,\n            texture: this.texture,\n            textureOptions: this.textureOptions,\n            zIndex: this.zIndex,\n            shader: this.shader.shader,\n            shaderProps: this.shader.getResolvedProps(),\n            alpha: this.worldAlpha,\n            clippingRect: this.clippingRect,\n            tx: this.globalTransform.tx,\n            ty: this.globalTransform.ty,\n            ta: this.globalTransform.ta,\n            tb: this.globalTransform.tb,\n            tc: this.globalTransform.tc,\n            td: this.globalTransform.td,\n            renderCoords: this.renderCoords,\n            rtt: this.rtt,\n            parentHasRenderTexture: this.parentHasRenderTexture,\n            framebufferDimensions: this.framebufferDimensions,\n        });\n    }\n    //#region Properties\n    get id() {\n        return this._id;\n    }\n    get data() {\n        return this.props.data;\n    }\n    set data(d) {\n        this.props.data = d;\n    }\n    get x() {\n        return this.props.x;\n    }\n    set x(value) {\n        if (this.props.x !== value) {\n            this.props.x = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get absX() {\n        return (this.props.x +\n            -this.props.width * this.props.mountX +\n            (this.props.parent?.absX || this.props.parent?.globalTransform?.tx || 0));\n    }\n    get absY() {\n        return (this.props.y +\n            -this.props.height * this.props.mountY +\n            (this.props.parent?.absY ?? 0));\n    }\n    get y() {\n        return this.props.y;\n    }\n    set y(value) {\n        if (this.props.y !== value) {\n            this.props.y = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        if (this.props.width !== value) {\n            this.props.width = value;\n            this.setUpdateType(UpdateType.Local);\n            if (this.props.rtt) {\n                this.texture = this.stage.txManager.loadTexture('RenderTexture', {\n                    width: this.width,\n                    height: this.height,\n                });\n                this.textureOptions.preload = true;\n                this.setUpdateType(UpdateType.RenderTexture);\n            }\n        }\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        if (this.props.height !== value) {\n            this.props.height = value;\n            this.setUpdateType(UpdateType.Local);\n            if (this.props.rtt) {\n                this.texture = this.stage.txManager.loadTexture('RenderTexture', {\n                    width: this.width,\n                    height: this.height,\n                });\n                this.textureOptions.preload = true;\n                this.setUpdateType(UpdateType.RenderTexture);\n            }\n        }\n    }\n    get scale() {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        return this.scaleX;\n    }\n    set scale(value) {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        this.scaleX = value;\n        this.scaleY = value;\n    }\n    get scaleX() {\n        return this.props.scaleX;\n    }\n    set scaleX(value) {\n        if (this.props.scaleX !== value) {\n            this.props.scaleX = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get scaleY() {\n        return this.props.scaleY;\n    }\n    set scaleY(value) {\n        if (this.props.scaleY !== value) {\n            this.props.scaleY = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get mount() {\n        return this.props.mount;\n    }\n    set mount(value) {\n        if (this.props.mountX !== value || this.props.mountY !== value) {\n            this.props.mountX = value;\n            this.props.mountY = value;\n            this.props.mount = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountX() {\n        return this.props.mountX;\n    }\n    set mountX(value) {\n        if (this.props.mountX !== value) {\n            this.props.mountX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountY() {\n        return this.props.mountY;\n    }\n    set mountY(value) {\n        if (this.props.mountY !== value) {\n            this.props.mountY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivot() {\n        return this.props.pivot;\n    }\n    set pivot(value) {\n        if (this.props.pivotX !== value || this.props.pivotY !== value) {\n            this.props.pivotX = value;\n            this.props.pivotY = value;\n            this.props.pivot = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotX() {\n        return this.props.pivotX;\n    }\n    set pivotX(value) {\n        if (this.props.pivotX !== value) {\n            this.props.pivotX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotY() {\n        return this.props.pivotY;\n    }\n    set pivotY(value) {\n        if (this.props.pivotY !== value) {\n            this.props.pivotY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get rotation() {\n        return this.props.rotation;\n    }\n    set rotation(value) {\n        if (this.props.rotation !== value) {\n            this.props.rotation = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get alpha() {\n        return this.props.alpha;\n    }\n    set alpha(value) {\n        this.props.alpha = value;\n        this.setUpdateType(UpdateType.PremultipliedColors |\n            UpdateType.WorldAlpha |\n            UpdateType.Children |\n            UpdateType.IsRenderable);\n        this.childUpdateType |= UpdateType.WorldAlpha;\n    }\n    get autosize() {\n        return this.props.autosize;\n    }\n    set autosize(value) {\n        this.props.autosize = value;\n    }\n    get clipping() {\n        return this.props.clipping;\n    }\n    set clipping(value) {\n        this.props.clipping = value;\n        this.setUpdateType(UpdateType.Clipping | UpdateType.RenderBounds | UpdateType.Children);\n        this.childUpdateType |= UpdateType.Global | UpdateType.Clipping;\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(value) {\n        this.colorTop = value;\n        this.colorBottom = value;\n        this.colorLeft = value;\n        this.colorRight = value;\n        this.props.color = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTop() {\n        return this.props.colorTop;\n    }\n    set colorTop(value) {\n        if (this.props.colorTl !== value || this.props.colorTr !== value) {\n            this.colorTl = value;\n            this.colorTr = value;\n        }\n        this.props.colorTop = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBottom() {\n        return this.props.colorBottom;\n    }\n    set colorBottom(value) {\n        if (this.props.colorBl !== value || this.props.colorBr !== value) {\n            this.colorBl = value;\n            this.colorBr = value;\n        }\n        this.props.colorBottom = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorLeft() {\n        return this.props.colorLeft;\n    }\n    set colorLeft(value) {\n        if (this.props.colorTl !== value || this.props.colorBl !== value) {\n            this.colorTl = value;\n            this.colorBl = value;\n        }\n        this.props.colorLeft = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorRight() {\n        return this.props.colorRight;\n    }\n    set colorRight(value) {\n        if (this.props.colorTr !== value || this.props.colorBr !== value) {\n            this.colorTr = value;\n            this.colorBr = value;\n        }\n        this.props.colorRight = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTl() {\n        return this.props.colorTl;\n    }\n    set colorTl(value) {\n        this.props.colorTl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTr() {\n        return this.props.colorTr;\n    }\n    set colorTr(value) {\n        this.props.colorTr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBl() {\n        return this.props.colorBl;\n    }\n    set colorBl(value) {\n        this.props.colorBl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBr() {\n        return this.props.colorBr;\n    }\n    set colorBr(value) {\n        this.props.colorBr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    // we're only interested in parent zIndex to test\n    // if we should use node zIndex is higher then parent zIndex\n    get zIndexLocked() {\n        return this.props.zIndexLocked || 0;\n    }\n    set zIndexLocked(value) {\n        this.props.zIndexLocked = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        for (let i = 0, length = this.children.length; i < length; i++) {\n            this.children[i].setUpdateType(UpdateType.CalculatedZIndex);\n        }\n    }\n    get zIndex() {\n        return this.props.zIndex;\n    }\n    set zIndex(value) {\n        this.props.zIndex = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        for (let i = 0, length = this.children.length; i < length; i++) {\n            this.children[i].setUpdateType(UpdateType.CalculatedZIndex);\n        }\n    }\n    get parent() {\n        return this.props.parent;\n    }\n    set parent(newParent) {\n        const oldParent = this.props.parent;\n        if (oldParent === newParent) {\n            return;\n        }\n        this.props.parent = newParent;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"CoreNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n            oldParent.setUpdateType(UpdateType.Children | UpdateType.ZIndexSortedChildren);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n            // Since this node has a new parent, to be safe, have it do a full update.\n            this.setUpdateType(UpdateType.All);\n            // Tell parent that it's children need to be updated and sorted.\n            newParent.setUpdateType(UpdateType.Children | UpdateType.ZIndexSortedChildren);\n            // If the new parent has an RTT enabled, apply RTT inheritance\n            if (newParent.rtt || newParent.parentHasRenderTexture) {\n                this.applyRTTInheritance(newParent);\n            }\n        }\n        this.updateScaleRotateTransform();\n        // fetch render bounds from parent\n        this.setUpdateType(UpdateType.RenderBounds | UpdateType.Children);\n    }\n    get preventCleanup() {\n        return this.props.preventCleanup;\n    }\n    set preventCleanup(value) {\n        this.props.preventCleanup = value;\n    }\n    get rtt() {\n        return this.props.rtt;\n    }\n    set rtt(value) {\n        if (this.props.rtt === value) {\n            return;\n        }\n        this.props.rtt = value;\n        if (value === true) {\n            this.initRenderTexture();\n            this.markChildrenWithRTT();\n        }\n        else {\n            this.cleanupRenderTexture();\n        }\n        this.setUpdateType(UpdateType.RenderTexture);\n        if (this.parentHasRenderTexture === true) {\n            this.notifyParentRTTOfUpdate();\n        }\n    }\n    initRenderTexture() {\n        this.texture = this.stage.txManager.loadTexture('RenderTexture', {\n            width: this.width,\n            height: this.height,\n        });\n        this.textureOptions.preload = true;\n        this.stage.renderer?.renderToTexture(this); // Only this RTT node\n    }\n    cleanupRenderTexture() {\n        this.unloadTexture();\n        this.clearRTTInheritance();\n        this.stage.renderer?.removeRTTNode(this);\n        this.hasRTTupdates = false;\n        this.texture = null;\n    }\n    markChildrenWithRTT(node = null) {\n        const parent = node || this;\n        for (const child of parent.children) {\n            child.setUpdateType(UpdateType.All);\n            child.parentHasRenderTexture = true;\n            child.markChildrenWithRTT();\n        }\n    }\n    // Apply RTT inheritance when a node has an RTT-enabled parent\n    applyRTTInheritance(parent) {\n        if (parent.rtt) {\n            // Only the RTT node should be added to `renderToTexture`\n            parent.setUpdateType(UpdateType.RenderTexture);\n        }\n        // Propagate `parentHasRenderTexture` downwards\n        this.markChildrenWithRTT(parent);\n    }\n    // Clear RTT inheritance when detaching from an RTT chain\n    clearRTTInheritance() {\n        // if this node is RTT itself stop the propagation important for nested RTT nodes\n        // for the initial RTT node this is already handled in `set rtt`\n        if (this.rtt) {\n            return;\n        }\n        for (const child of this.children) {\n            // force child to update everything as the RTT inheritance has changed\n            child.parentHasRenderTexture = false;\n            child.rttParent = null;\n            child.setUpdateType(UpdateType.All);\n            child.clearRTTInheritance();\n        }\n    }\n    get shader() {\n        return this.props.shader;\n    }\n    set shader(value) {\n        if (this.props.shader === value) {\n            return;\n        }\n        this.props.shader = value;\n        this.setUpdateType(UpdateType.IsRenderable);\n    }\n    get src() {\n        return this.props.src;\n    }\n    set src(imageUrl) {\n        if (this.props.src === imageUrl) {\n            return;\n        }\n        this.props.src = imageUrl;\n        if (!imageUrl) {\n            this.texture = null;\n            return;\n        }\n        this.texture = this.stage.txManager.loadTexture('ImageTexture', {\n            src: imageUrl,\n            width: this.props.width,\n            height: this.props.height,\n            type: this.props.imageType,\n            sx: this.props.srcX,\n            sy: this.props.srcY,\n            sw: this.props.srcWidth,\n            sh: this.props.srcHeight,\n        });\n    }\n    set imageType(type) {\n        if (this.props.imageType === type) {\n            return;\n        }\n        this.props.imageType = type;\n    }\n    get imageType() {\n        return this.props.imageType || null;\n    }\n    get srcHeight() {\n        return this.props.srcHeight;\n    }\n    set srcHeight(value) {\n        this.props.srcHeight = value;\n    }\n    get srcWidth() {\n        return this.props.srcWidth;\n    }\n    set srcWidth(value) {\n        this.props.srcWidth = value;\n    }\n    get srcX() {\n        return this.props.srcX;\n    }\n    set srcX(value) {\n        this.props.srcX = value;\n    }\n    get srcY() {\n        return this.props.srcY;\n    }\n    set srcY(value) {\n        this.props.srcY = value;\n    }\n    /**\n     * Returns the framebuffer dimensions of the node.\n     * If the node has a render texture, the dimensions are the same as the node's dimensions.\n     * If the node does not have a render texture, the dimensions are inherited from the parent.\n     * If the node parent has a render texture and the node is a render texture, the nodes dimensions are used.\n     */\n    get framebufferDimensions() {\n        if (this.parentHasRenderTexture && !this.rtt && this.parent) {\n            return this.parent.framebufferDimensions;\n        }\n        return { width: this.width, height: this.height };\n    }\n    /**\n     * Returns the parent render texture node if it exists.\n     */\n    get parentRenderTexture() {\n        let parent = this.parent;\n        while (parent) {\n            if (parent.rtt) {\n                return parent;\n            }\n            parent = parent.parent;\n        }\n        return null;\n    }\n    get texture() {\n        return this.props.texture;\n    }\n    set texture(value) {\n        if (this.props.texture === value) {\n            return;\n        }\n        const oldTexture = this.props.texture;\n        if (oldTexture) {\n            oldTexture.setRenderableOwner(this, false);\n            this.unloadTexture();\n        }\n        this.props.texture = value;\n        if (value) {\n            value.setRenderableOwner(this, this.isRenderable);\n            this.loadTexture();\n        }\n        this.setUpdateType(UpdateType.IsRenderable);\n    }\n    set textureOptions(value) {\n        this.props.textureOptions = value;\n    }\n    get textureOptions() {\n        return this.props.textureOptions;\n    }\n    get strictBounds() {\n        return this.props.strictBounds;\n    }\n    set strictBounds(v) {\n        if (v === this.props.strictBounds) {\n            return;\n        }\n        this.props.strictBounds = v;\n        this.setUpdateType(UpdateType.RenderBounds | UpdateType.Children);\n        this.childUpdateType |= UpdateType.RenderBounds | UpdateType.Children;\n    }\n    animate(props, settings) {\n        const animation = new CoreAnimation(this, props, settings);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n        const controller = new CoreAnimationController(this.stage.animationManager, animation);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return controller;\n    }\n    flush() {\n        // no-op\n    }\n}\n//# sourceMappingURL=CoreNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Platform render loop initiator\n */\nexport const startLoop = (stage) => {\n    let isIdle = false;\n    const runLoop = () => {\n        stage.updateFrameTime();\n        stage.updateAnimations();\n        if (!stage.hasSceneUpdates()) {\n            // We still need to calculate the fps else it looks like the app is frozen\n            stage.calculateFps();\n            setTimeout(runLoop, 16.666666666666668);\n            if (!isIdle) {\n                if (stage.txMemManager.checkCleanup()) {\n                    stage.txMemManager.cleanup();\n                }\n                stage.eventBus.emit('idle');\n                isIdle = true;\n            }\n            stage.flushFrameEvents();\n            return;\n        }\n        isIdle = false;\n        stage.drawFrame();\n        stage.flushFrameEvents();\n        requestAnimationFrame(runLoop);\n    };\n    requestAnimationFrame(runLoop);\n};\n/**\n * Return unix timestamp\n * @return {number}\n */\nexport const getTimeStamp = () => {\n    return performance ? performance.now() : Date.now();\n};\n//# sourceMappingURL=platform.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreAnimation } from './CoreAnimation.js';\nexport class AnimationManager {\n    activeAnimations = new Set();\n    registerAnimation(animation) {\n        this.activeAnimations.add(animation);\n    }\n    unregisterAnimation(animation) {\n        this.activeAnimations.delete(animation);\n    }\n    update(dt) {\n        this.activeAnimations.forEach((animation) => {\n            animation.update(dt);\n        });\n    }\n}\n//# sourceMappingURL=AnimationManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../common/EventEmitter.js';\nexport var TextureType;\n(function (TextureType) {\n    TextureType[TextureType[\"generic\"] = 0] = \"generic\";\n    TextureType[TextureType[\"color\"] = 1] = \"color\";\n    TextureType[TextureType[\"image\"] = 2] = \"image\";\n    TextureType[TextureType[\"noise\"] = 3] = \"noise\";\n    TextureType[TextureType[\"renderToTexture\"] = 4] = \"renderToTexture\";\n    TextureType[TextureType[\"subTexture\"] = 5] = \"subTexture\";\n})(TextureType || (TextureType = {}));\n/**\n * Represents a source of texture data for a CoreContextTexture.\n *\n * @remarks\n * Texture sources are used to populate a CoreContextTexture when that texture\n * is loaded. Texture data retrieved by the CoreContextTexture by the\n * `getTextureData` method. It's the responsibility of the concerete `Texture`\n * subclass to implement this method appropriately.\n */\nexport class Texture extends EventEmitter {\n    txManager;\n    /**\n     * The dimensions of the texture\n     *\n     * @remarks\n     * Until the texture data is loaded for the first time the value will be\n     * `null`.\n     */\n    dimensions = null;\n    error = null;\n    state = 'freed';\n    renderableOwners = new Set();\n    renderable = false;\n    lastRenderableChangeTime = 0;\n    type = TextureType.generic;\n    preventCleanup = false;\n    constructor(txManager) {\n        super();\n        this.txManager = txManager;\n    }\n    /**\n     * Add/remove an owner to/from the Texture based on its renderability.\n     *\n     * @remarks\n     * Any object can own a texture, be it a CoreNode or even the state object\n     * from a Text Renderer.\n     *\n     * When the reference to the texture that an owner object holds is replaced\n     * or cleared it must call this with `renderable=false` to release the owner\n     * association.\n     *\n     * @param owner\n     * @param renderable\n     */\n    setRenderableOwner(owner, renderable) {\n        const oldSize = this.renderableOwners.size;\n        if (renderable) {\n            this.renderableOwners.add(owner);\n            const newSize = this.renderableOwners.size;\n            if (newSize > oldSize && newSize === 1) {\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n                this.renderable = true;\n                this.lastRenderableChangeTime = this.txManager.frameTime;\n                this.onChangeIsRenderable?.(true);\n            }\n        }\n        else {\n            this.renderableOwners.delete(owner);\n            const newSize = this.renderableOwners.size;\n            if (newSize < oldSize && newSize === 0) {\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n                this.renderable = false;\n                this.lastRenderableChangeTime = this.txManager.frameTime;\n                this.onChangeIsRenderable?.(false);\n            }\n        }\n    }\n    /**\n     * Get the CoreContextTexture for this Texture\n     *\n     * @remarks\n     * Each Texture has a corresponding CoreContextTexture that is used to\n     * manage the texture's native data depending on the renderer's mode\n     * (WebGL, Canvas, etc).\n     *\n     * The Texture and CoreContextTexture are always linked together in a 1:1\n     * relationship.\n     */\n    get ctxTexture() {\n        // The first time this is called, create the ctxTexture\n        const ctxTexture = this.txManager.renderer.createCtxTexture(this);\n        // And replace this getter with the value for future calls\n        Object.defineProperty(this, 'ctxTexture', { value: ctxTexture });\n        return ctxTexture;\n    }\n    /**\n     * Set the state of the texture\n     *\n     * @remark\n     * Intended for internal-use only but declared public so that it can be set\n     * by it's associated {@link CoreContextTexture}\n     *\n     * @param state\n     * @param args\n     */\n    setState(state, ...args) {\n        if (this.state !== state) {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.state = state;\n            if (state === 'loaded') {\n                const loadedArgs = args;\n                this.dimensions = loadedArgs[0];\n            }\n            else if (state === 'failed') {\n                const failedArgs = args;\n                this.error = failedArgs[0];\n            }\n            this.emit(state, ...args);\n        }\n    }\n    /**\n     * Make a cache key for this texture.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide an\n     * appropriate cache key for the texture type including the texture's\n     * properties that uniquely identify a copy of the texture. If the texture\n     * type does not support caching, then this method should return `false`.\n     *\n     * @param props\n     * @returns\n     * A cache key for this texture or `false` if the texture type does not\n     * support caching.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    /**\n     * Resolve the default values for the texture's properties.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide\n     * default values for the texture's optional properties.\n     *\n     * @param props\n     * @returns\n     * The default values for the texture's properties.\n     */\n    static resolveDefaults(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    props) {\n        return {};\n    }\n}\n//# sourceMappingURL=Texture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {} from '../textures/Texture.js';\n/**\n * Note that, within the createImageWorker function, we must only use ES5 code to keep it ES5-valid after babelifying, as\n *  the converted code of this section is converted to a blob and used as the js of the web worker thread.\n *\n * The createImageWorker function is a web worker that fetches an image from a URL and returns an ImageBitmap object.\n * The eslint @typescript rule is disabled for the entire function because the function is converted to a blob and used as the\n * js of the web worker thread, so the typescript syntax is not valid in this context.\n */\n/* eslint-disable */\nfunction createImageWorker() {\n    var supportsOptionsCreateImageBitmap = false;\n    var supportsFullCreateImageBitmap = false;\n    function hasAlphaChannel(mimeType) {\n        return mimeType.indexOf('image/png') !== -1;\n    }\n    function getImage(src, premultiplyAlpha, x, y, width, height) {\n        return new Promise(function (resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', src, true);\n            xhr.responseType = 'blob';\n            xhr.onload = function () {\n                if (xhr.status !== 200) {\n                    return reject(new Error('Failed to load image: ' + xhr.statusText));\n                }\n                var blob = xhr.response;\n                var withAlphaChannel = premultiplyAlpha !== undefined\n                    ? premultiplyAlpha\n                    : hasAlphaChannel(blob.type);\n                // createImageBitmap with crop and options\n                if (supportsFullCreateImageBitmap === true &&\n                    width !== null &&\n                    height !== null) {\n                    createImageBitmap(blob, x || 0, y || 0, width, height, {\n                        premultiplyAlpha: withAlphaChannel ? 'premultiply' : 'none',\n                        colorSpaceConversion: 'none',\n                        imageOrientation: 'none',\n                    })\n                        .then(function (data) {\n                        resolve({ data, premultiplyAlpha: premultiplyAlpha });\n                    })\n                        .catch(function (error) {\n                        reject(error);\n                    });\n                    return;\n                }\n                // createImageBitmap without crop but with options\n                if (supportsOptionsCreateImageBitmap === true) {\n                    createImageBitmap(blob, {\n                        premultiplyAlpha: withAlphaChannel ? 'premultiply' : 'none',\n                        colorSpaceConversion: 'none',\n                        imageOrientation: 'none',\n                    })\n                        .then(function (data) {\n                        resolve({ data, premultiplyAlpha: premultiplyAlpha });\n                    })\n                        .catch(function (error) {\n                        reject(error);\n                    });\n                    return;\n                }\n                // Fallback for browsers that do not support createImageBitmap with options\n                // this is supported for Chrome v50 to v52/54 that doesn't support options\n                createImageBitmap(blob)\n                    .then(function (data) {\n                    resolve({ data, premultiplyAlpha: premultiplyAlpha });\n                })\n                    .catch(function (error) {\n                    reject(error);\n                });\n            };\n            xhr.onerror = function () {\n                reject(new Error('Network error occurred while trying to fetch the image.'));\n            };\n            xhr.send();\n        });\n    }\n    self.onmessage = (event) => {\n        var src = event.data.src;\n        var id = event.data.id;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n        var x = event.data.sx;\n        var y = event.data.sy;\n        var width = event.data.sw;\n        var height = event.data.sh;\n        getImage(src, premultiplyAlpha, x, y, width, height)\n            .then(function (data) {\n            self.postMessage({ id: id, src: src, data: data });\n        })\n            .catch(function (error) {\n            self.postMessage({ id: id, src: src, error: error.message });\n        });\n    };\n}\n/* eslint-enable */\nexport class ImageWorkerManager {\n    imageWorkersEnabled = true;\n    messageManager = {};\n    workers = [];\n    workerIndex = 0;\n    nextId = 0;\n    constructor(numImageWorkers, createImageBitmapSupport) {\n        this.workers = this.createWorkers(numImageWorkers, createImageBitmapSupport);\n        this.workers.forEach((worker) => {\n            worker.onmessage = this.handleMessage.bind(this);\n        });\n    }\n    handleMessage(event) {\n        const { id, data, error } = event.data;\n        const msg = this.messageManager[id];\n        if (msg) {\n            const [resolve, reject] = msg;\n            delete this.messageManager[id];\n            if (error) {\n                reject(new Error(error));\n            }\n            else {\n                resolve(data);\n            }\n        }\n    }\n    createWorkers(numWorkers = 1, createImageBitmapSupport) {\n        let workerCode = `(${createImageWorker.toString()})()`;\n        // Replace placeholders with actual initialization values\n        const supportsOptions = createImageBitmapSupport.options ? 'true' : 'false';\n        const supportsFull = createImageBitmapSupport.full ? 'true' : 'false';\n        workerCode = workerCode.replace('var supportsOptionsCreateImageBitmap = false;', `var supportsOptionsCreateImageBitmap = ${supportsOptions};`);\n        workerCode = workerCode.replace('var supportsFullCreateImageBitmap = false;', `var supportsFullCreateImageBitmap = ${supportsFull};`);\n        const blob = new Blob([workerCode.replace('\"use strict\";', '')], {\n            type: 'application/javascript',\n        });\n        const blobURL = (self.URL ? URL : webkitURL).createObjectURL(blob);\n        const workers = [];\n        for (let i = 0; i < numWorkers; i++) {\n            const worker = new Worker(blobURL);\n            // Pass `createImageBitmap` support level during worker initialization\n            worker.postMessage({\n                type: 'init',\n                support: createImageBitmapSupport,\n            });\n            workers.push(worker);\n        }\n        return workers;\n    }\n    getNextWorker() {\n        const worker = this.workers[this.workerIndex];\n        this.workerIndex = (this.workerIndex + 1) % this.workers.length;\n        return worker;\n    }\n    getImage(src, premultiplyAlpha, sx, sy, sw, sh) {\n        return new Promise((resolve, reject) => {\n            try {\n                if (this.workers) {\n                    const id = this.nextId++;\n                    this.messageManager[id] = [resolve, reject];\n                    const nextWorker = this.getNextWorker();\n                    if (nextWorker) {\n                        nextWorker.postMessage({\n                            id,\n                            src: src,\n                            premultiplyAlpha,\n                            sx,\n                            sy,\n                            sw,\n                            sh,\n                        });\n                    }\n                }\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    }\n}\n//# sourceMappingURL=ImageWorker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, TextureType } from './Texture.js';\n/**\n * Texture consisting of only a 1x1 color pixel\n *\n * @remarks\n * The pixel color is set with the {@link ColorTextureProps.color} prop.\n *\n * This is the default texture used for a Node if it's\n * {@link INodeProps.texture} prop is set to `null` (the default)\n *\n * Generally the 1x1 color pixel is stretched to whatever the set dimensions of\n * a Node are.\n */\nexport class ColorTexture extends Texture {\n    type = TextureType.color;\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ColorTexture.resolveDefaults(props || {});\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(color) {\n        this.props.color = color;\n    }\n    async getTextureData() {\n        const pixelData = new Uint8Array(4);\n        if (this.color === 0xffffffff) {\n            pixelData[0] = 255;\n            pixelData[1] = 255;\n            pixelData[2] = 255;\n            pixelData[3] = 255;\n        }\n        else {\n            pixelData[0] = (this.color >> 16) & 0xff; // Red\n            pixelData[1] = (this.color >> 8) & 0xff; // Green\n            pixelData[2] = this.color & 0xff; // Blue\n            pixelData[3] = (this.color >>> 24) & 0xff; // Alpha\n        }\n        return {\n            data: pixelData,\n            premultiplyAlpha: true,\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = ColorTexture.resolveDefaults(props);\n        return `ColorTexture,${resolvedProps.color}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            color: props.color || 0xffffffff,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ColorTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {} from '../textures/Texture.js';\n/**\n * Tests if the given location is a compressed texture container\n * @param url\n * @remarks\n * This function is used to determine if the given image url is a compressed\n * and only supports the following extensions: .ktx and .pvr\n * @returns\n */\nexport function isCompressedTextureContainer(url) {\n    return /\\.(ktx|pvr)$/.test(url);\n}\n/**\n * Loads a compressed texture container\n * @param url\n * @returns\n */\nexport const loadCompressedTexture = async (url) => {\n    const response = await fetch(url);\n    const arrayBuffer = await response.arrayBuffer();\n    if (url.indexOf('.ktx') !== -1) {\n        return loadKTXData(arrayBuffer);\n    }\n    return loadPVRData(arrayBuffer);\n};\n/**\n * Loads a KTX texture container and returns the texture data\n * @param buffer\n * @returns\n */\nconst loadKTXData = async (buffer) => {\n    const view = new DataView(buffer);\n    const littleEndian = view.getUint32(12) === 16909060 ? true : false;\n    const mipmaps = [];\n    const data = {\n        glInternalFormat: view.getUint32(28, littleEndian),\n        pixelWidth: view.getUint32(36, littleEndian),\n        pixelHeight: view.getUint32(40, littleEndian),\n        numberOfMipmapLevels: view.getUint32(56, littleEndian),\n        bytesOfKeyValueData: view.getUint32(60, littleEndian),\n    };\n    let offset = 64;\n    // Key Value Pairs of data start at byte offset 64\n    // But the only known kvp is the API version, so skipping parsing.\n    offset += data.bytesOfKeyValueData;\n    for (let i = 0; i < data.numberOfMipmapLevels; i++) {\n        const imageSize = view.getUint32(offset);\n        offset += 4;\n        mipmaps.push(view.buffer.slice(offset, imageSize));\n        offset += imageSize;\n    }\n    return {\n        data: {\n            glInternalFormat: data.glInternalFormat,\n            mipmaps,\n            width: data.pixelWidth || 0,\n            height: data.pixelHeight || 0,\n            type: 'ktx',\n        },\n        premultiplyAlpha: false,\n    };\n};\n/**\n * Loads a PVR texture container and returns the texture data\n * @param buffer\n * @returns\n */\nconst loadPVRData = async (buffer) => {\n    // pvr header length in 32 bits\n    const pvrHeaderLength = 13;\n    // for now only we only support: COMPRESSED_RGB_ETC1_WEBGL\n    const pvrFormatEtc1 = 0x8d64;\n    const pvrWidth = 7;\n    const pvrHeight = 6;\n    const pvrMipmapCount = 11;\n    const pvrMetadata = 12;\n    const arrayBuffer = buffer;\n    const header = new Int32Array(arrayBuffer, 0, pvrHeaderLength);\n    // @ts-expect-error Object possibly undefined\n    // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    const dataOffset = header[pvrMetadata] + 52;\n    const pvrtcData = new Uint8Array(arrayBuffer, dataOffset);\n    const mipmaps = [];\n    const data = {\n        pixelWidth: header[pvrWidth],\n        pixelHeight: header[pvrHeight],\n        numberOfMipmapLevels: header[pvrMipmapCount] || 0,\n    };\n    let offset = 0;\n    let width = data.pixelWidth || 0;\n    let height = data.pixelHeight || 0;\n    for (let i = 0; i < data.numberOfMipmapLevels; i++) {\n        const level = ((width + 3) >> 2) * ((height + 3) >> 2) * 8;\n        const view = new Uint8Array(arrayBuffer, pvrtcData.byteOffset + offset, level);\n        mipmaps.push(view);\n        offset += level;\n        width = width >> 1;\n        height = height >> 1;\n    }\n    return {\n        data: {\n            glInternalFormat: pvrFormatEtc1,\n            mipmaps: mipmaps,\n            width: data.pixelWidth || 0,\n            height: data.pixelHeight || 0,\n            type: 'pvr',\n        },\n        premultiplyAlpha: false,\n    };\n};\n//# sourceMappingURL=textureCompression.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport {} from '../textures/Texture.js';\n/**\n * Tests if the given location is a SVG\n * @param url\n * @remarks\n * This function is used to determine if the given image url is a SVG\n * image\n * @returns\n */\nexport function isSvgImage(url) {\n    return /\\.(svg)$/.test(url);\n}\n/**\n * Loads a SVG image\n * @param url\n * @returns\n */\nexport const loadSvg = (url, width, height, sx, sy, sw, sh) => {\n    return new Promise((resolve, reject) => {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        assertTruthy(ctx);\n        ctx.imageSmoothingEnabled = true;\n        const img = new Image();\n        img.onload = () => {\n            const x = sx ?? 0;\n            const y = sy ?? 0;\n            const w = width || img.width;\n            const h = height || img.height;\n            canvas.width = w;\n            canvas.height = h;\n            ctx.drawImage(img, 0, 0, w, h);\n            resolve({\n                data: ctx.getImageData(x, y, sw ?? w, sh ?? h),\n                premultiplyAlpha: false,\n            });\n        };\n        img.onerror = (err) => {\n            reject(err);\n        };\n        img.src = url;\n    });\n};\n//# sourceMappingURL=textureSvg.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, TextureType } from './Texture.js';\nimport { isCompressedTextureContainer, loadCompressedTexture, } from '../lib/textureCompression.js';\nimport { convertUrlToAbsolute } from '../lib/utils.js';\nimport { isSvgImage, loadSvg } from '../lib/textureSvg.js';\n/**\n * Texture consisting of an image loaded from a URL\n *\n * @remarks\n * The ImageTexture's {@link ImageTextureProps.src} prop defines the image URL\n * to be downloaded.\n *\n * By default, the texture's alpha values will be premultiplied into its color\n * values which is generally the desired setting before they are sent to the\n * texture's associated {@link Shader}. However, in special cases you may want\n * the Shader to receive straight (non-premultiplied) values. In that case you\n * can disable the default behavior by setting the\n * {@link ImageTextureProps.premultiplyAlpha} prop to `false`.\n */\nexport class ImageTexture extends Texture {\n    props;\n    type = TextureType.image;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ImageTexture.resolveDefaults(props);\n    }\n    hasAlphaChannel(mimeType) {\n        return mimeType.indexOf('image/png') !== -1;\n    }\n    async loadImageFallback(src, hasAlpha) {\n        const img = new Image();\n        return new Promise((resolve) => {\n            img.onload = () => {\n                resolve({ data: img, premultiplyAlpha: hasAlpha });\n            };\n            img.onerror = () => {\n                console.warn('Image loading failed, returning fallback object.');\n                resolve({ data: img, premultiplyAlpha: hasAlpha });\n            };\n            img.src = src;\n        });\n    }\n    async createImageBitmap(blob, premultiplyAlpha, sx, sy, sw, sh) {\n        const hasAlphaChannel = premultiplyAlpha ?? blob.type.includes('image/png');\n        const imageBitmapSupported = this.txManager.imageBitmapSupported;\n        if (imageBitmapSupported.full === true &&\n            sx !== null &&\n            sy !== null &&\n            sw !== null &&\n            sh !== null) {\n            // createImageBitmap with crop\n            const bitmap = await createImageBitmap(blob, sx, sy, sw, sh, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none',\n            });\n            return { data: bitmap, premultiplyAlpha: hasAlphaChannel };\n        }\n        else if (imageBitmapSupported.options === true) {\n            // createImageBitmap without crop but with options\n            const bitmap = await createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none',\n            });\n            return { data: bitmap, premultiplyAlpha: hasAlphaChannel };\n        }\n        else {\n            // basic createImageBitmap without options or crop\n            // this is supported for Chrome v50 to v52/54 that doesn't support options\n            return {\n                data: await createImageBitmap(blob),\n                premultiplyAlpha: hasAlphaChannel,\n            };\n        }\n    }\n    async loadImage(src) {\n        const { premultiplyAlpha, sx, sy, sw, sh } = this.props;\n        if (this.txManager.hasCreateImageBitmap === true) {\n            if (this.txManager.hasWorker === true &&\n                this.txManager.imageWorkerManager !== null) {\n                return this.txManager.imageWorkerManager.getImage(src, premultiplyAlpha, sx, sy, sw, sh);\n            }\n            const blob = await fetch(src).then((response) => response.blob());\n            return this.createImageBitmap(blob, premultiplyAlpha, sx, sy, sw, sh);\n        }\n        return this.loadImageFallback(src, premultiplyAlpha ?? true);\n    }\n    async getTextureData() {\n        const { src, premultiplyAlpha, type } = this.props;\n        if (src === null) {\n            return {\n                data: null,\n            };\n        }\n        if (typeof src !== 'string') {\n            if (src instanceof ImageData) {\n                return {\n                    data: src,\n                    premultiplyAlpha,\n                };\n            }\n            return {\n                data: src(),\n                premultiplyAlpha,\n            };\n        }\n        const absoluteSrc = convertUrlToAbsolute(src);\n        if (type === 'regular') {\n            return this.loadImage(absoluteSrc);\n        }\n        if (type === 'svg') {\n            return loadSvg(absoluteSrc, this.props.width, this.props.height, this.props.sx, this.props.sy, this.props.sw, this.props.sh);\n        }\n        if (isSvgImage(src) === true) {\n            return loadSvg(absoluteSrc, this.props.width, this.props.height, this.props.sx, this.props.sy, this.props.sw, this.props.sh);\n        }\n        if (type === 'compressed') {\n            return loadCompressedTexture(absoluteSrc);\n        }\n        if (isCompressedTextureContainer(src) === true) {\n            return loadCompressedTexture(absoluteSrc);\n        }\n        // default\n        return this.loadImage(absoluteSrc);\n    }\n    /**\n     * Generates a cache key for the ImageTexture based on the provided props.\n     * @param props - The props used to generate the cache key.\n     * @returns The cache key as a string, or `false` if the key cannot be generated.\n     */\n    static makeCacheKey(props) {\n        const resolvedProps = ImageTexture.resolveDefaults(props);\n        // Only cache key-able textures; prioritise key\n        const key = resolvedProps.key || resolvedProps.src;\n        if (typeof key !== 'string') {\n            return false;\n        }\n        // if we have source dimensions, cache the texture separately\n        let dimensionProps = '';\n        if (resolvedProps.sh !== null && resolvedProps.sw !== null) {\n            dimensionProps += ',';\n            dimensionProps += resolvedProps.sx ?? '';\n            dimensionProps += resolvedProps.sy ?? '';\n            dimensionProps += resolvedProps.sw || '';\n            dimensionProps += resolvedProps.sh || '';\n        }\n        return `ImageTexture,${key},${resolvedProps.premultiplyAlpha ?? 'true'}${dimensionProps}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            src: props.src ?? '',\n            premultiplyAlpha: props.premultiplyAlpha ?? true, // null,\n            key: props.key ?? null,\n            type: props.type ?? null,\n            width: props.width ?? null,\n            height: props.height ?? null,\n            sx: props.sx ?? null,\n            sy: props.sy ?? null,\n            sw: props.sw ?? null,\n            sh: props.sh ?? null,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ImageTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, TextureType } from './Texture.js';\n/**\n * Texture consisting of a random grid of greyscale pixels\n *\n * @remarks\n * The width and height of the NoiseTexture are defined by it's\n * {@link NoiseTextureProps.width} and {@link NoiseTextureProps.height}\n * properties. The {@link NoiseTextureProps.cacheId} prop can be varied in order\n * to bypass cache and get newly randomized texture data.\n */\nexport class NoiseTexture extends Texture {\n    props;\n    type = TextureType.noise;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = NoiseTexture.resolveDefaults(props);\n    }\n    async getTextureData() {\n        const { width, height } = this.props;\n        const size = width * height * 4;\n        const pixelData8 = new Uint8ClampedArray(size);\n        for (let i = 0; i < size; i += 4) {\n            const v = Math.floor(Math.random() * 256);\n            pixelData8[i] = v;\n            pixelData8[i + 1] = v;\n            pixelData8[i + 2] = v;\n            pixelData8[i + 3] = 255;\n        }\n        return {\n            data: new ImageData(pixelData8, width, height),\n        };\n    }\n    static makeCacheKey(props) {\n        if (props.cacheId === undefined) {\n            return false;\n        }\n        const resolvedProps = NoiseTexture.resolveDefaults(props);\n        return `NoiseTexture,${resolvedProps.width},${resolvedProps.height},${resolvedProps.cacheId}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 128,\n            height: props.height ?? 128,\n            cacheId: props.cacheId ?? 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=NoiseTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, TextureType, } from './Texture.js';\n/**\n * A Texture that is a sub-region of another Texture.\n *\n * @remarks\n * The parent texture can be a Sprite Sheet/Texture Atlas and set using the\n * {@link SubTextureProps.texture} prop. The sub-region relative to the parent\n * texture is defined with the {@link SubTextureProps.x},\n * {@link SubTextureProps.y}, {@link SubTextureProps.width}, and\n * {@link SubTextureProps.height} pixel values.\n */\nexport class SubTexture extends Texture {\n    props;\n    parentTexture;\n    type = TextureType.subTexture;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = SubTexture.resolveDefaults(props || {});\n        this.parentTexture = this.props.texture;\n        // If parent texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            const parentTx = this.parentTexture;\n            if (parentTx.state === 'loaded') {\n                this.onParentTxLoaded(parentTx, parentTx.dimensions);\n            }\n            else if (parentTx.state === 'failed') {\n                this.onParentTxFailed(parentTx, parentTx.error);\n            }\n            parentTx.on('loaded', this.onParentTxLoaded);\n            parentTx.on('failed', this.onParentTxFailed);\n        });\n    }\n    onParentTxLoaded = () => {\n        // We ignore the parent's passed dimensions, and simply use the SubTexture's\n        // configured dimensions (because that's all that matters here)\n        this.setState('loaded', {\n            width: this.props.width,\n            height: this.props.height,\n        });\n    };\n    onParentTxFailed = (target, error) => {\n        this.setState('failed', error);\n    };\n    onChangeIsRenderable(isRenderable) {\n        // Propagate the renderable owner change to the parent texture\n        this.parentTexture.setRenderableOwner(this, isRenderable);\n    }\n    async getTextureData() {\n        return {\n            data: this.props,\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {\n            texture: props.texture,\n            x: props.x || 0,\n            y: props.y || 0,\n            width: props.width || 0,\n            height: props.height || 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=SubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, TextureType } from './Texture.js';\nexport class RenderTexture extends Texture {\n    props;\n    type = TextureType.renderToTexture;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = RenderTexture.resolveDefaults(props || {});\n    }\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        this.props.width = value;\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        this.props.height = value;\n    }\n    async getTextureData() {\n        return {\n            data: null,\n            premultiplyAlpha: null,\n        };\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width || 256,\n            height: props.height || 256,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=RenderTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ImageWorkerManager } from './lib/ImageWorker.js';\nimport { ColorTexture } from './textures/ColorTexture.js';\nimport { ImageTexture } from './textures/ImageTexture.js';\nimport { NoiseTexture } from './textures/NoiseTexture.js';\nimport { SubTexture } from './textures/SubTexture.js';\nimport { RenderTexture } from './textures/RenderTexture.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nexport class CoreTextureManager extends EventEmitter {\n    /**\n     * Map of textures by cache key\n     */\n    keyCache = new Map();\n    /**\n     * Map of cache keys by texture\n     */\n    inverseKeyCache = new WeakMap();\n    /**\n     * Map of texture constructors by their type name\n     */\n    txConstructors = {};\n    imageWorkerManager = null;\n    hasCreateImageBitmap = !!self.createImageBitmap;\n    imageBitmapSupported = {\n        basic: false,\n        options: false,\n        full: false,\n    };\n    hasWorker = !!self.Worker;\n    /**\n     * Renderer that this texture manager is associated with\n     *\n     * @remarks\n     * This MUST be set before the texture manager is used. Otherwise errors\n     * will occur when using the texture manager.\n     */\n    renderer;\n    /**\n     * The current frame time in milliseconds\n     *\n     * @remarks\n     * This is used to populate the `lastRenderableChangeTime` property of\n     * {@link Texture} instances when their renderable state changes.\n     *\n     * Set by stage via `updateFrameTime` method.\n     */\n    frameTime = 0;\n    constructor(numImageWorkers) {\n        super();\n        this.validateCreateImageBitmap()\n            .then((result) => {\n            this.hasCreateImageBitmap =\n                result.basic || result.options || result.full;\n            this.imageBitmapSupported = result;\n            if (!this.hasCreateImageBitmap) {\n                console.warn('[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.');\n            }\n            if (this.hasCreateImageBitmap &&\n                this.hasWorker &&\n                numImageWorkers > 0) {\n                this.imageWorkerManager = new ImageWorkerManager(numImageWorkers, result);\n            }\n            else {\n                console.warn('[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower.');\n            }\n            this.emit('initialized');\n        })\n            .catch((e) => {\n            console.warn('[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.');\n            // initialized without image worker manager and createImageBitmap\n            this.emit('initialized');\n        });\n        this.registerTextureType('ImageTexture', ImageTexture);\n        this.registerTextureType('ColorTexture', ColorTexture);\n        this.registerTextureType('NoiseTexture', NoiseTexture);\n        this.registerTextureType('SubTexture', SubTexture);\n        this.registerTextureType('RenderTexture', RenderTexture);\n    }\n    async validateCreateImageBitmap() {\n        // Test if createImageBitmap is supported using a simple 1x1 PNG image\n        // prettier-ignore (this is a binary PNG image)\n        const pngBinaryData = new Uint8Array([\n            0x89,\n            0x50,\n            0x4e,\n            0x47,\n            0x0d,\n            0x0a,\n            0x1a,\n            0x0a, // PNG signature\n            0x00,\n            0x00,\n            0x00,\n            0x0d, // IHDR chunk length\n            0x49,\n            0x48,\n            0x44,\n            0x52, // \"IHDR\" chunk type\n            0x00,\n            0x00,\n            0x00,\n            0x01, // Width: 1\n            0x00,\n            0x00,\n            0x00,\n            0x01, // Height: 1\n            0x01, // Bit depth: 1\n            0x03, // Color type: Indexed\n            0x00, // Compression method: Deflate\n            0x00, // Filter method: None\n            0x00, // Interlace method: None\n            0x25,\n            0xdb,\n            0x56,\n            0xca, // CRC for IHDR\n            0x00,\n            0x00,\n            0x00,\n            0x03, // PLTE chunk length\n            0x50,\n            0x4c,\n            0x54,\n            0x45, // \"PLTE\" chunk type\n            0x00,\n            0x00,\n            0x00, // Palette entry: Black\n            0xa7,\n            0x7a,\n            0x3d,\n            0xda, // CRC for PLTE\n            0x00,\n            0x00,\n            0x00,\n            0x01, // tRNS chunk length\n            0x74,\n            0x52,\n            0x4e,\n            0x53, // \"tRNS\" chunk type\n            0x00, // Transparency for black: Fully transparent\n            0x40,\n            0xe6,\n            0xd8,\n            0x66, // CRC for tRNS\n            0x00,\n            0x00,\n            0x00,\n            0x0a, // IDAT chunk length\n            0x49,\n            0x44,\n            0x41,\n            0x54, // \"IDAT\" chunk type\n            0x08,\n            0xd7, // Deflate header\n            0x63,\n            0x60,\n            0x00,\n            0x00,\n            0x00,\n            0x02,\n            0x00,\n            0x01, // Zlib-compressed data\n            0xe2,\n            0x21,\n            0xbc,\n            0x33, // CRC for IDAT\n            0x00,\n            0x00,\n            0x00,\n            0x00, // IEND chunk length\n            0x49,\n            0x45,\n            0x4e,\n            0x44, // \"IEND\" chunk type\n            0xae,\n            0x42,\n            0x60,\n            0x82, // CRC for IEND\n        ]);\n        const support = {\n            basic: false,\n            options: false,\n            full: false,\n        };\n        // Test basic createImageBitmap support\n        const blob = new Blob([pngBinaryData], { type: 'image/png' });\n        const bitmap = await createImageBitmap(blob);\n        bitmap.close?.();\n        support.basic = true;\n        // Test createImageBitmap with options support\n        try {\n            const options = { premultiplyAlpha: 'none' };\n            const bitmapWithOptions = await createImageBitmap(blob, options);\n            bitmapWithOptions.close?.();\n            support.options = true;\n        }\n        catch (e) {\n            /* ignore */\n        }\n        // Test createImageBitmap with full options support\n        try {\n            const bitmapWithFullOptions = await createImageBitmap(blob, 0, 0, 1, 1, {\n                premultiplyAlpha: 'none',\n            });\n            bitmapWithFullOptions.close?.();\n            support.full = true;\n        }\n        catch (e) {\n            /* ignore */\n        }\n        return support;\n    }\n    registerTextureType(textureType, textureClass) {\n        this.txConstructors[textureType] = textureClass;\n    }\n    loadTexture(textureType, props) {\n        let texture;\n        const TextureClass = this.txConstructors[textureType];\n        if (!TextureClass) {\n            throw new Error(`Texture type \"${textureType}\" is not registered`);\n        }\n        if (!texture) {\n            const cacheKey = TextureClass.makeCacheKey(props);\n            if (cacheKey && this.keyCache.has(cacheKey)) {\n                // console.log('Getting texture by cache key', cacheKey);\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                texture = this.keyCache.get(cacheKey);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n                texture = new TextureClass(this, props);\n                if (cacheKey) {\n                    this.initTextureToCache(texture, cacheKey);\n                }\n            }\n        }\n        return texture;\n    }\n    initTextureToCache(texture, cacheKey) {\n        const { keyCache, inverseKeyCache } = this;\n        keyCache.set(cacheKey, texture);\n        inverseKeyCache.set(texture, cacheKey);\n    }\n    /**\n     * Remove a texture from the cache\n     *\n     * @remarks\n     * Called by Texture Cleanup when a texture is freed.\n     *\n     * @param texture\n     */\n    removeTextureFromCache(texture) {\n        const { inverseKeyCache, keyCache } = this;\n        const cacheKey = inverseKeyCache.get(texture);\n        if (cacheKey) {\n            keyCache.delete(cacheKey);\n        }\n    }\n}\n//# sourceMappingURL=CoreTextureManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst weightConversions = {\n    normal: 400,\n    bold: 700,\n    bolder: 900,\n    lighter: 100,\n};\nconst fontWeightToNumber = (weight) => {\n    if (typeof weight === 'number') {\n        return weight;\n    }\n    return weightConversions[weight] || 400;\n};\nfunction resolveFontToUse(familyMapsByPriority, family, weightIn, style, stretch) {\n    let weight = fontWeightToNumber(weightIn);\n    for (const fontFamiles of familyMapsByPriority) {\n        const fontFaces = fontFamiles[family];\n        if (!fontFaces) {\n            continue;\n        }\n        if (fontFaces.size === 1) {\n            // No Exact match found, find nearest weight match\n            console.warn(`TrFontManager: Only one font face found for family: '${family}' - will be used for all weights and styles`);\n            return fontFaces.values().next().value;\n        }\n        const weightMap = new Map();\n        for (const fontFace of fontFaces) {\n            const fontFamilyWeight = fontWeightToNumber(fontFace.descriptors.weight);\n            if (fontFamilyWeight === weight &&\n                fontFace.descriptors.style === style &&\n                fontFace.descriptors.stretch === stretch) {\n                return fontFace;\n            }\n            weightMap.set(fontFamilyWeight, fontFace);\n        }\n        // No Exact match found, find nearest weight match\n        const msg = `TrFontManager: No exact match: '${family} Weight: ${weight} Style: ${style} Stretch: ${stretch}'`;\n        console.error(msg);\n        // Follow the CSS font-weight algorithm to find the nearest weight match\n        // https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#font-matching-algorithm\n        if (weight === 400 && weightMap.has(500)) {\n            return weightMap.get(500);\n        }\n        if (weight === 500 && weightMap.has(400)) {\n            return weightMap.get(400);\n        }\n        if (weight < 400) {\n            while (weight > 0) {\n                if (weightMap.has(weight)) {\n                    return weightMap.get(weight);\n                }\n                weight -= 100;\n            }\n            // reset back for the next loop\n            weight = 600;\n        }\n        while (weight < 1000) {\n            if (weightMap.has(weight)) {\n                return weightMap.get(weight);\n            }\n            weight += 100;\n        }\n        // finally check lower again\n        weight = 500;\n        while (weight > 0) {\n            if (weightMap.has(weight)) {\n                return weightMap.get(weight);\n            }\n            weight -= 100;\n        }\n    }\n    return;\n}\nexport class TrFontManager {\n    textRenderers;\n    fontCache = new Map();\n    constructor(textRenderers) {\n        this.textRenderers = textRenderers;\n        // Intentionally left blank\n    }\n    addFontFace(font) {\n        // All the font face to all of the text renderers that support it\n        for (const trId in this.textRenderers) {\n            const tr = this.textRenderers[trId];\n            if (tr && tr.isFontFaceSupported(font)) {\n                tr.addFontFace(font);\n            }\n        }\n    }\n    /**\n     * Utility method to resolve a single font face from a list of prioritized family maps based on\n     * a set of font properties.\n     *\n     * @remarks\n     * These are to be used by a text renderer to resolve a font face if needed.\n     *\n     * @param familyMapsByPriority\n     * @param props\n     * @returns\n     */\n    resolveFontFace(familyMapsByPriority, props, rendererType) {\n        const { fontFamily, fontWeight, fontStyle, fontStretch } = props;\n        const fontCacheString = `${rendererType}_${fontFamily}_${fontStyle}_${fontWeight}_${fontStretch}`;\n        if (this.fontCache.has(fontCacheString) === true) {\n            return this.fontCache.get(fontCacheString);\n        }\n        const resolvedFont = resolveFontToUse(familyMapsByPriority, fontFamily, fontWeight, fontStyle, fontStretch);\n        if (resolvedFont !== undefined) {\n            this.fontCache.set(fontCacheString, resolvedFont);\n        }\n        return resolvedFont;\n    }\n}\n//# sourceMappingURL=TrFontManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreShader {\n    // abstract draw(): void;\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n}\n//# sourceMappingURL=CoreShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n//#endregion Types\nexport function createShader(glw, type, source) {\n    const shader = glw.createShader(type);\n    if (!shader) {\n        const glError = glw.getError();\n        throw new Error(`Unable to create the shader: ${type === glw.VERTEX_SHADER ? 'VERTEX_SHADER' : 'FRAGMENT_SHADER'}.${glError ? ` WebGlContext Error: ${glError}` : ''}`);\n    }\n    glw.shaderSource(shader, source);\n    glw.compileShader(shader);\n    const success = !!glw.getShaderParameter(shader, glw.COMPILE_STATUS);\n    if (success) {\n        return shader;\n    }\n    console.error(glw.getShaderInfoLog(shader));\n    glw.deleteShader(shader);\n}\nexport function createProgram(glw, vertexShader, fragmentShader) {\n    const program = glw.createProgram();\n    if (!program) {\n        throw new Error('Unable to create program');\n    }\n    glw.attachShader(program, vertexShader);\n    glw.attachShader(program, fragmentShader);\n    glw.linkProgram(program);\n    const success = !!glw.getProgramParameter(program, glw.LINK_STATUS);\n    if (success) {\n        return program;\n    }\n    console.warn(glw.getProgramInfoLog(program));\n    glw.deleteProgram(program);\n    return undefined;\n}\n//# sourceMappingURL=ShaderUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, hasOwn } from '../../../utils.js';\nimport { CoreShader } from '../CoreShader.js';\nimport { createProgram, createShader, } from './internal/ShaderUtils.js';\nexport class WebGlCoreShader extends CoreShader {\n    boundBufferCollection = null;\n    buffersBound = false;\n    program;\n    /**\n     * Vertex Array Object\n     *\n     * @remarks\n     * Used by WebGL2 Only\n     */\n    vao;\n    renderer;\n    glw;\n    attributeBuffers;\n    attributeLocations;\n    attributeNames;\n    uniformLocations;\n    uniformTypes;\n    supportsIndexedTextures;\n    constructor(options) {\n        super();\n        const renderer = (this.renderer = options.renderer);\n        const glw = (this.glw = this.renderer.glw);\n        this.supportsIndexedTextures = options.supportsIndexedTextures || false;\n        // Check that extensions are supported\n        const webGl2 = glw.isWebGl2();\n        const requiredExtensions = (webGl2 && options.webgl2Extensions) ||\n            (!webGl2 && options.webgl1Extensions) ||\n            [];\n        const glVersion = webGl2 ? '2.0' : '1.0';\n        requiredExtensions.forEach((extensionName) => {\n            if (!glw.getExtension(extensionName)) {\n                throw new Error(`Shader \"${this.constructor.name}\" requires extension \"${extensionName}\" for WebGL ${glVersion} but wasn't found`);\n            }\n        });\n        // Gather shader sources\n        // - If WebGL 2 and special WebGL 2 sources are provided, we copy those sources and delete\n        // the extra copy of them to save memory.\n        // TODO: This could be further made optimal by just caching the compiled shaders and completely deleting\n        // the source code\n        const shaderSources = options.shaderSources ||\n            this.constructor.shaderSources;\n        if (!shaderSources) {\n            throw new Error(`Shader \"${this.constructor.name}\" is missing shaderSources.`);\n        }\n        else if (webGl2 && shaderSources?.webGl2) {\n            shaderSources.fragment = shaderSources.webGl2.fragment;\n            shaderSources.vertex = shaderSources.webGl2.vertex;\n            delete shaderSources.webGl2;\n        }\n        const textureUnits = renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        const vertexSource = shaderSources.vertex instanceof Function\n            ? shaderSources.vertex(textureUnits)\n            : shaderSources.vertex;\n        const fragmentSource = shaderSources.fragment instanceof Function\n            ? shaderSources.fragment(textureUnits)\n            : shaderSources.fragment;\n        const vertexShader = createShader(glw, glw.VERTEX_SHADER, vertexSource);\n        const fragmentShader = createShader(glw, glw.FRAGMENT_SHADER, fragmentSource);\n        if (!vertexShader || !fragmentShader) {\n            throw new Error(`Unable to create the following shader(s): ${[\n                !vertexShader && 'VERTEX_SHADER',\n                !fragmentShader && 'FRAGMENT_SHADER',\n            ]\n                .filter(Boolean)\n                .join(' and ')}`);\n        }\n        const program = createProgram(glw, vertexShader, fragmentShader);\n        if (!program) {\n            throw new Error('Unable to create program');\n        }\n        this.program = program;\n        this.attributeLocations = {};\n        this.attributeBuffers = {};\n        this.attributeNames = [];\n        [...options.attributes].forEach((attributeName) => {\n            const location = glw.getAttribLocation(this.program, attributeName);\n            if (location < 0) {\n                throw new Error(`${this.constructor.name}: Vertex shader must have an attribute \"${attributeName}\"!`);\n            }\n            const buffer = glw.createBuffer();\n            if (!buffer) {\n                throw new Error(`${this.constructor.name}: Could not create buffer for attribute \"${attributeName}\"`);\n            }\n            this.attributeLocations[attributeName] = location;\n            this.attributeBuffers[attributeName] = buffer;\n            this.attributeNames.push(attributeName);\n        });\n        this.uniformLocations = {};\n        this.uniformTypes = {};\n        options.uniforms.forEach((uniform) => {\n            const location = glw.getUniformLocation(this.program, uniform.name);\n            this.uniformTypes[uniform.name] = uniform.uniform;\n            if (!location) {\n                console.warn(`Shader \"${this.constructor.name}\" could not get uniform location for \"${uniform.name}\"`);\n                return;\n            }\n            this.uniformLocations[uniform.name] = location;\n        });\n    }\n    bindBufferAttribute(location, buffer, attribute) {\n        const { glw } = this;\n        glw.enableVertexAttribArray(location);\n        glw.vertexAttribPointer(buffer, location, attribute.size, attribute.type, attribute.normalized, attribute.stride, attribute.offset);\n    }\n    disableAttribute(location) {\n        this.glw.disableVertexAttribArray(location);\n    }\n    disableAttributes() {\n        for (const loc in this.attributeLocations) {\n            this.disableAttribute(this.attributeLocations[loc]);\n        }\n        this.boundBufferCollection = null;\n    }\n    /**\n     * Given two sets of Shader props destined for this Shader, determine if they can be batched together\n     * to reduce the number of draw calls.\n     *\n     * @remarks\n     * This is used by the {@link WebGlCoreRenderer} to determine if it can batch multiple consecutive draw\n     * calls into a single draw call.\n     *\n     * By default, this returns false (meaning no batching is allowed), but can be\n     * overridden by child classes to provide more efficient batching.\n     *\n     * @param propsA\n     * @param propsB\n     * @returns\n     */\n    canBatchShaderProps(propsA, propsB) {\n        return false;\n    }\n    bindRenderOp(renderOp, props) {\n        this.bindBufferCollection(renderOp.buffers);\n        if (renderOp.textures.length > 0) {\n            this.bindTextures(renderOp.textures);\n        }\n        const { glw, parentHasRenderTexture, renderToTexture } = renderOp;\n        // Skip if the parent and current operation both have render textures\n        if (renderToTexture && parentHasRenderTexture) {\n            return;\n        }\n        // Bind render texture framebuffer dimensions as resolution\n        // if the parent has a render texture\n        if (parentHasRenderTexture) {\n            const { width, height } = renderOp.framebufferDimensions || {};\n            // Force pixel ratio to 1.0 for render textures since they are always 1:1\n            // the final render texture will be rendered to the screen with the correct pixel ratio\n            glw.uniform1f(this.getUniformLocation('u_pixelRatio'), 1.0);\n            // Set resolution to the framebuffer dimensions\n            glw.uniform2f(this.getUniformLocation('u_resolution'), width ?? 0, height ?? 0);\n        }\n        else {\n            glw.uniform1f(this.getUniformLocation('u_pixelRatio'), renderOp.options.pixelRatio);\n            glw.uniform2f(this.getUniformLocation('u_resolution'), glw.canvas.width, glw.canvas.height);\n        }\n        if (props) {\n            // Bind optional automatic uniforms\n            // These are only bound if their keys are present in the props.\n            if (hasOwn(props, '$dimensions')) {\n                let dimensions = props.$dimensions;\n                if (!dimensions) {\n                    dimensions = renderOp.dimensions;\n                }\n                glw.uniform2f(this.getUniformLocation('u_dimensions'), dimensions.width, dimensions.height);\n            }\n            if (hasOwn(props, '$alpha')) {\n                let alpha = props.$alpha;\n                if (!alpha) {\n                    alpha = renderOp.alpha;\n                }\n                glw.uniform1f(this.getUniformLocation('u_alpha'), alpha);\n            }\n            this.bindProps(props);\n        }\n    }\n    getUniformLocation(name) {\n        return this.uniformLocations[name] || null;\n    }\n    bindBufferCollection(buffer) {\n        if (this.boundBufferCollection === buffer) {\n            return;\n        }\n        for (const attributeName in this.attributeLocations) {\n            const resolvedBuffer = buffer.getBuffer(attributeName);\n            const resolvedInfo = buffer.getAttributeInfo(attributeName);\n            assertTruthy(resolvedBuffer, `Buffer for \"${attributeName}\" not found`);\n            assertTruthy(resolvedInfo);\n            this.bindBufferAttribute(this.attributeLocations[attributeName], resolvedBuffer, resolvedInfo);\n        }\n        this.boundBufferCollection = buffer;\n    }\n    bindProps(props) {\n        // Implement in child class\n    }\n    bindTextures(textures) {\n        // no defaults\n    }\n    attach() {\n        this.glw.useProgram(this.program);\n        if (this.glw.isWebGl2() && this.vao) {\n            this.glw.bindVertexArray(this.vao);\n        }\n    }\n    detach() {\n        this.disableAttributes();\n    }\n    static shaderSources;\n}\n//# sourceMappingURL=WebGlCoreShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nexport class DefaultShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n            ],\n        });\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\n// import type { Texture } from '../textures/Texture';\nexport class DefaultShaderBatched extends WebGlCoreShader {\n    supportsIndexedTextures = true;\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: [\n                'a_position',\n                'a_textureCoordinate',\n                'a_color',\n                'a_textureIndex',\n            ],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_textures[0]', uniform: 'uniform1iv' },\n            ],\n        });\n    }\n    bindTextures(texture) {\n        const { renderer, glw } = this;\n        if (texture.length > renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS) {\n            throw new Error(`DefaultShaderBatched: Cannot bind more than ${renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);\n        }\n        texture.forEach((t, i) => {\n            glw.activeTexture(i);\n            glw.bindTexture(t.ctxTexture);\n        });\n        const samplers = Array.from(Array(texture.length).keys());\n        this.glw.uniform1iv(this.getUniformLocation('u_textures[0]'), samplers);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: (textureUnits) => `\n      #define txUnits ${textureUnits}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${textureUnits}], int idx, vec2 uv) {\n        ${Array.from(Array(textureUnits).keys())\n            .map((idx) => `\n          ${idx !== 0 ? 'else ' : ''}if (idx == ${idx}) {\n            return texture2D(textures[${idx}], uv);\n          }\n        `)\n            .join('')}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShaderBatched.js.map","export class ShaderEffect {\n    priority = 1;\n    name = '';\n    ref;\n    target;\n    passParameters = '';\n    declaredUniforms = '';\n    uniformInfo = {};\n    static uniforms = {};\n    static methods;\n    static onShaderMask;\n    static onColorize;\n    static onEffectMask;\n    static getEffectKey(props) {\n        return '';\n    }\n    static getMethodParameters(uniforms, props) {\n        const res = [];\n        for (const u in uniforms) {\n            const uni = uniforms[u];\n            let define = '';\n            if (uni.size) {\n                define = `[${uni.size(props)}]`;\n            }\n            res.push(`${uni.type} ${u}${define}`);\n        }\n        return res.join(',');\n    }\n    constructor(options) {\n        const { ref, target, props = {} } = options;\n        this.ref = ref;\n        this.target = target;\n        const uniformInfo = {};\n        const passParameters = [];\n        let declaredUniforms = '';\n        const uniforms = this.constructor.uniforms || {};\n        for (const u in uniforms) {\n            const unif = uniforms[u];\n            const uniType = unif.type;\n            //make unique uniform name\n            const uniformName = `${ref}_${u}`;\n            let define = '';\n            if (unif.size) {\n                define = `[${unif.size(props)}]`;\n            }\n            passParameters.push(uniformName);\n            declaredUniforms += `uniform ${uniType} ${uniformName}${define};`;\n            uniformInfo[u] = { name: uniformName, uniform: uniforms[u].method };\n        }\n        this.passParameters = passParameters.join(',');\n        this.declaredUniforms = declaredUniforms;\n        this.uniformInfo = uniformInfo;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n    static makeEffectKey(props) {\n        return false;\n    }\n}\n//# sourceMappingURL=ShaderEffect.js.map","import { WebGlCoreShader, } from '../WebGlCoreShader.js';\nimport {} from '../internal/ShaderUtils.js';\nimport { ShaderEffect, } from './effects/ShaderEffect.js';\nimport { assertTruthy } from '../../../../utils.js';\nconst effectCache = new Map();\nconst getResolvedEffect = (effects, effectContructors) => {\n    const key = JSON.stringify(effects);\n    if (effectCache.has(key)) {\n        return effectCache.get(key);\n    }\n    effects = effects ?? [];\n    const resolvedEffects = [];\n    const effectsLength = effects.length;\n    let i = 0;\n    for (; i < effectsLength; i++) {\n        const { name, type, props } = effects[i];\n        const resolvedEffect = {\n            name,\n            type,\n            props: {},\n        };\n        const effectConstructor = effectContructors[type];\n        const defaultPropValues = effectConstructor.resolveDefaults(props);\n        const uniforms = effectConstructor.uniforms;\n        const uniformKeys = Object.keys(uniforms);\n        const uniformsLength = uniformKeys.length;\n        let j = 0;\n        for (; j < uniformsLength; j++) {\n            const key = uniformKeys[j];\n            const uniform = uniforms[key];\n            const result = {\n                value: defaultPropValues[key],\n                programValue: undefined,\n                method: uniform.method,\n                updateOnBind: uniform.updateOnBind || false,\n                hasValidator: uniform.validator !== undefined,\n                hasProgramValueUpdater: uniform.updateProgramValue !== undefined,\n            };\n            const validatedValue = (result.hasValidator &&\n                uniform.validator(defaultPropValues[key], defaultPropValues)) ||\n                defaultPropValues[key];\n            if (defaultPropValues[key] !== validatedValue) {\n                result.validatedValue = validatedValue;\n            }\n            if (result.hasProgramValueUpdater) {\n                uniform.updateProgramValue(result);\n            }\n            if (result.programValue === undefined) {\n                result.programValue = result.value;\n            }\n            resolvedEffect.props[key] = result;\n        }\n        resolvedEffects.push(resolvedEffect);\n    }\n    effectCache.set(key, resolvedEffects);\n    return resolvedEffects;\n};\nexport class DynamicShader extends WebGlCoreShader {\n    effects = [];\n    constructor(renderer, props, effectContructors) {\n        const shader = DynamicShader.createShader(props, effectContructors);\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_alpha', uniform: 'uniform1f' },\n                ...shader.uniforms,\n            ],\n            shaderSources: {\n                vertex: shader.vertex,\n                fragment: shader.fragment,\n            },\n        });\n        this.effects = shader.effects;\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    bindUniformMethods(props) {\n        const glw = this.glw;\n        const effects = props.effects;\n        const effectsL = effects.length;\n        for (let i = 0; i < effectsL; i++) {\n            const uniformInfo = this.effects[i].uniformInfo;\n            const effect = effects[i];\n            const propKeys = Object.keys(effect.props);\n            const propsLength = propKeys.length;\n            for (let j = 0; j < propsLength; j++) {\n                const key = propKeys[j];\n                const method = effect.props[key].method;\n                const location = this.getUniformLocation(uniformInfo[key].name);\n                if (method === 'uniform2fv' ||\n                    method === 'uniform2iv' ||\n                    //uniform === 'uniform3fv\t' || <--- check why this isnt recognized\n                    method === 'uniform3iv' ||\n                    method === 'uniform4fv' ||\n                    method === 'uniform4iv' ||\n                    method === 'uniformMatrix2fv' ||\n                    method === 'uniformMatrix3fv' ||\n                    method === 'uniformMatrix4fv' ||\n                    method === 'uniform1f' ||\n                    method === 'uniform1fv' ||\n                    method === 'uniform1i' ||\n                    method === 'uniform1iv') {\n                    effect.props[key].setUniformValue = function () {\n                        glw[method](location, this.programValue);\n                    };\n                    continue;\n                }\n                if (method === 'uniform2f' || method === 'uniform2i') {\n                    effect.props[key].setUniformValue = function () {\n                        glw[method](location, this.programValue[0], this.programValue[1]);\n                    };\n                    continue;\n                }\n                if (method === 'uniform3f' || method === 'uniform3i') {\n                    effect.props[key].setUniformValue = function () {\n                        glw[method](location, this.programValue[0], this.programValue[1], this.programValue[2]);\n                    };\n                    continue;\n                }\n                if (method === 'uniform4f' || method === 'uniform4i') {\n                    effect.props[key].setUniformValue = function () {\n                        glw[method](location, this.programValue[0], this.programValue[1], this.programValue[2], this.programValue[3]);\n                    };\n                    continue;\n                }\n            }\n        }\n    }\n    bindProps(props) {\n        const effects = props.effects;\n        const effectsL = effects.length;\n        let i = 0;\n        for (; i < effectsL; i++) {\n            const effect = effects[i];\n            const propKeys = Object.keys(effect.props);\n            const propsLength = propKeys.length;\n            let j = 0;\n            for (; j < propsLength; j++) {\n                const key = propKeys[j];\n                const prop = effect.props[key];\n                if (prop.updateOnBind === true) {\n                    const uniform = this.renderer.shManager.getRegisteredEffects()[effect.type]?.uniforms[key];\n                    uniform?.updateProgramValue(effect.props[key], props);\n                }\n                prop.setUniformValue();\n            }\n        }\n    }\n    canBatchShaderProps(propsA, propsB) {\n        if (propsA.$alpha !== propsB.$alpha ||\n            propsA.$dimensions.width !== propsB.$dimensions.width ||\n            propsA.$dimensions.height !== propsB.$dimensions.height ||\n            propsA.effects.length !== propsB.effects.length) {\n            return false;\n        }\n        const propsEffectsLen = propsA.effects.length;\n        let i = 0;\n        for (; i < propsEffectsLen; i++) {\n            const effectA = propsA.effects[i];\n            const effectB = propsB.effects[i];\n            if (effectA.type !== effectB.type) {\n                return false;\n            }\n            for (const key in effectA.props) {\n                if ((effectB.props && !effectB.props[key]) ||\n                    effectA.props[key].value !==\n                        effectB.props[key].value) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    static createShader(props, effectContructors) {\n        //counts duplicate effects\n        const effectNameCount = {};\n        const methods = {};\n        let declareUniforms = '';\n        const uniforms = [];\n        const uFx = [];\n        const effects = props.effects.map((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            effectNameCount[key] = effectNameCount[key] ? ++effectNameCount[key] : 1;\n            const nr = effectNameCount[key];\n            if (nr === 1) {\n                uFx.push({ key, type: effect.type, props: effect.props });\n            }\n            //initialize new effect class;\n            const fxClass = new baseClass({\n                ref: `${key}${nr === 1 ? '' : nr}`,\n                target: key,\n                props: effect.props,\n            });\n            declareUniforms += fxClass.declaredUniforms;\n            uniforms.push(...Object.values(fxClass.uniformInfo));\n            return fxClass;\n        });\n        //build source\n        let effectMethods = '';\n        uFx?.forEach((fx) => {\n            const fxClass = effectContructors[fx.type];\n            const fxProps = fxClass.resolveDefaults((fx.props ?? {}));\n            const remap = [];\n            for (const m in fxClass.methods) {\n                let cm = m;\n                const fxMethod = fxClass.methods[m];\n                if (methods[m] && methods[m] !== fxMethod) {\n                    cm = DynamicShader.resolveMethodDuplicate(m, fxMethod, methods);\n                }\n                methods[cm] = fxMethod.replace('function', cm);\n                remap.push({ m, cm });\n            }\n            let onShaderMask = fxClass.onShaderMask instanceof Function\n                ? fxClass.onShaderMask(fxProps)\n                : fxClass.onShaderMask;\n            let onColorize = fxClass.onColorize instanceof Function\n                ? fxClass.onColorize(fxProps)\n                : fxClass.onColorize;\n            let onEffectMask = fxClass.onEffectMask instanceof Function\n                ? fxClass.onEffectMask(fxProps)\n                : fxClass.onEffectMask;\n            remap.forEach((r) => {\n                const { m, cm } = r;\n                const reg = new RegExp(`\\\\$${m}`, 'g');\n                if (onShaderMask) {\n                    onShaderMask = onShaderMask.replace(reg, cm);\n                }\n                if (onColorize) {\n                    onColorize = onColorize.replace(reg, cm);\n                }\n                if (onEffectMask) {\n                    onEffectMask = onEffectMask.replace(reg, cm);\n                }\n            });\n            const methodParameters = fxClass.getMethodParameters(fxClass.uniforms, fxProps);\n            const pm = methodParameters.length > 0 ? `, ${methodParameters}` : '';\n            if (onShaderMask) {\n                effectMethods += `\n        float fx_${fx.key}_onShaderMask(float shaderMask ${pm}) {\n          ${onShaderMask}\n        }\n        `;\n            }\n            if (onColorize) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onColorize}\n          }\n        `;\n            }\n            if (onEffectMask) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onEffectMask}\n          }\n        `;\n            }\n        });\n        let sharedMethods = '';\n        for (const m in methods) {\n            sharedMethods += methods[m];\n        }\n        //fill main functions\n        let currentMask = `mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))`;\n        let drawEffects = `\n\n    `;\n        for (let i = 0; i < effects.length; i++) {\n            const current = effects[i];\n            const pm = current.passParameters.length > 0 ? `, ${current.passParameters}` : '';\n            const currentClass = effectContructors[current.name];\n            if (currentClass.onShaderMask) {\n                drawEffects += `\n        shaderMask = fx_${current.target}_onShaderMask(shaderMask ${pm});\n        `;\n            }\n            if (currentClass.onColorize) {\n                drawEffects += `\n        maskColor = fx_${current.target}_onColorize(shaderMask, maskColor, shaderColor${pm});\n        `;\n            }\n            if (currentClass.onEffectMask) {\n                currentMask = `fx_${current.target}_onEffectMask(shaderMask, maskColor, shaderColor${pm})`;\n            }\n            const next = effects[i + 1];\n            if (next === undefined ||\n                effectContructors[next.name].onEffectMask) {\n                drawEffects += `\n          shaderColor = ${currentMask};\n        `;\n            }\n        }\n        return {\n            effects,\n            uniforms,\n            fragment: DynamicShader.fragment(declareUniforms, sharedMethods, effectMethods, drawEffects),\n            vertex: DynamicShader.vertex(),\n        };\n    }\n    static resolveMethodDuplicate(key, effectMethod, methodCollection, increment = 0) {\n        const m = key + (increment > 0 ? increment : '');\n        if (methodCollection[m] && methodCollection[m] !== effectMethod) {\n            return this.resolveMethodDuplicate(key, effectMethod, methodCollection, ++increment);\n        }\n        return m;\n    }\n    static resolveDefaults(props, effectContructors) {\n        assertTruthy(effectContructors);\n        return {\n            effects: getResolvedEffect(props.effects ?? [], effectContructors),\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n            $alpha: 0,\n        };\n    }\n    static makeCacheKey(props, effectContructors) {\n        let fx = '';\n        props.effects?.forEach((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            fx += `,${key}`;\n        });\n        return `DynamicShader${fx}`;\n    }\n    static z$__type__Props;\n    static vertex = () => `\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  `;\n    static fragment = (uniforms, methods, effectMethods, drawEffects) => `\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${uniforms}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${methods}\n\n    ${effectMethods}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${drawEffects}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `;\n}\n//# sourceMappingURL=DynamicShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader, } from '../WebGlCoreShader.js';\n/**\n * Similar to the {@link DefaultShader} but cuts out 4 rounded rectangle corners\n * as defined by the specified corner {@link RoundedRectangleProps.radius}\n */\nexport class RoundedRectangle extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_radius', uniform: 'uniform1f' },\n            ],\n        });\n    }\n    static z$__type__Props;\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius || 10,\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n        };\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        const radiusFactor = Math.min(props.$dimensions.width, props.$dimensions.height) /\n            (2.0 * props.radius);\n        this.glw.uniform1f(this.getUniformLocation('u_radius'), props.radius * Math.min(radiusFactor, 1));\n    }\n    canBatchShaderProps(propsA, propsB) {\n        return (propsA.radius === propsB.radius &&\n            propsA.$dimensions.width === propsB.$dimensions.width &&\n            propsA.$dimensions.height === propsB.$dimensions.height);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    `,\n    };\n}\n//# sourceMappingURL=RoundedRectangle.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../lib/utils.js';\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nconst IDENTITY_MATRIX_3x3 = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n/**\n * SdfShader supports multi-channel and single-channel signed distance field textures.\n *\n * @remarks\n * This Shader is used by the {@link SdfTextRenderer}. Do not use thie Shader\n * directly. Instead create a Text Node and assign a SDF font family to it.\n *\n * @internalRemarks\n * The only thing this shader does to support multi-channel SDFs is to\n * add a median function to the fragment shader. If this one function call\n * ends up being a performance bottleneck we can always look at ways to\n * remove it.\n */\nexport class SdfShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_transform', uniform: 'uniformMatrix3fv' },\n                { name: 'u_scrollY', uniform: 'uniform1f' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_color', uniform: 'uniform4fv' },\n                { name: 'u_size', uniform: 'uniform1f' },\n                { name: 'u_distanceRange', uniform: 'uniform1f' },\n                { name: 'u_debug', uniform: 'uniform1i' },\n            ],\n        });\n    }\n    static z$__type__Props;\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        const resolvedProps = SdfShader.resolveDefaults(props);\n        for (const key in resolvedProps) {\n            if (key === 'transform') {\n                this.glw.uniformMatrix3fv(this.getUniformLocation('u_transform'), resolvedProps[key]);\n            }\n            else if (key === 'scrollY') {\n                this.glw.uniform1f(this.getUniformLocation('u_scrollY'), resolvedProps[key]);\n            }\n            else if (key === 'color') {\n                const components = getNormalizedRgbaComponents(resolvedProps.color);\n                this.glw.uniform4fv(this.getUniformLocation('u_color'), components);\n            }\n            else if (key === 'size') {\n                this.glw.uniform1f(this.getUniformLocation('u_size'), resolvedProps[key]);\n            }\n            else if (key === 'distanceRange') {\n                this.glw.uniform1f(this.getUniformLocation('u_distanceRange'), resolvedProps[key]);\n            }\n            else if (key === 'debug') {\n                this.glw.uniform1i(this.getUniformLocation('u_debug'), resolvedProps[key] ? 1 : 0);\n            }\n        }\n    }\n    static resolveDefaults(props = {}) {\n        return {\n            transform: props.transform ?? IDENTITY_MATRIX_3x3,\n            scrollY: props.scrollY ?? 0,\n            color: props.color ?? 0xffffffff,\n            size: props.size ?? 16,\n            distanceRange: props.distanceRange ?? 1.0,\n            debug: props.debug ?? false,\n        };\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=SdfShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const colorToFloat32Array = (argb) => {\n    const col = getRgbaComponentsNormalized(argb);\n    /* eslint-disable @typescript-eslint/no-non-null-assertion -- getRgbaComponentsNormalized has a constant array size */\n    col[0] *= col[3];\n    col[1] *= col[3];\n    col[2] *= col[3];\n    /* eslint-enable */\n    return col;\n};\nconst getRgbaComponentsNormalized = (argb) => {\n    const r = ((argb / 65536) | 0) % 256;\n    const g = ((argb / 256) | 0) % 256;\n    const b = argb % 256;\n    const a = (argb / 16777216) | 0;\n    return [r / 255, g / 255, b / 255, a / 255];\n};\nexport const updateShaderEffectColor = (values) => {\n    if (values.programValue === undefined) {\n        values.programValue = new Float32Array(4);\n    }\n    const rgba = values.value;\n    const floatArray = values.programValue;\n    floatArray[0] = (rgba >>> 24) / 255;\n    floatArray[1] = ((rgba >>> 16) & 0xff) / 255;\n    floatArray[2] = ((rgba >>> 8) & 0xff) / 255;\n    floatArray[3] = (rgba & 0xff) / 255;\n};\nexport const updateFloat32ArrayLength2 = (values) => {\n    const validatedValue = (values.validatedValue || values.value);\n    if (values.programValue instanceof Float32Array) {\n        const floatArray = values.programValue;\n        floatArray[0] = validatedValue[0];\n        floatArray[1] = validatedValue[1];\n    }\n    else {\n        values.programValue = new Float32Array(validatedValue);\n    }\n};\nexport const updateFloat32ArrayLength4 = (values) => {\n    const validatedValue = (values.validatedValue || values.value);\n    if (values.programValue instanceof Float32Array) {\n        const floatArray = values.programValue;\n        floatArray[0] = validatedValue[0];\n        floatArray[1] = validatedValue[1];\n        floatArray[2] = validatedValue[1];\n        floatArray[3] = validatedValue[1];\n    }\n    else {\n        values.programValue = new Float32Array(validatedValue);\n    }\n};\nexport const updateFloat32ArrayLengthN = (values) => {\n    const validatedValue = (values.validatedValue || values.value);\n    if (values.programValue instanceof Float32Array) {\n        const len = validatedValue.length;\n        const programValue = values.programValue;\n        for (let i = 0; i < len; i++) {\n            programValue[i] = validatedValue[i];\n        }\n    }\n    else {\n        values.programValue = new Float32Array(validatedValue);\n    }\n};\nexport const validateArrayLength4 = (value) => {\n    const isArray = Array.isArray(value);\n    if (!isArray) {\n        return [value, value, value, value];\n    }\n    else if (isArray && value.length === 4) {\n        return value;\n    }\n    else if (isArray && value.length === 2) {\n        return [value[0], value[1], value[0], value[1]];\n    }\n    else if (isArray && value.length === 3) {\n        return [value[0], value[1], value[2], value[0]];\n    }\n    return [value[0], value[0], value[0], value[0]];\n};\nexport const updateWebSafeRadius = (values, shaderProps) => {\n    if (values.programValue === undefined) {\n        values.programValue = new Float32Array(4);\n    }\n    const programValue = values.programValue;\n    const validatedValue = (values.validatedValue || values.value);\n    if (shaderProps === undefined && values.$dimensions === undefined) {\n        programValue[0] = validatedValue[0];\n        programValue[1] = validatedValue[1];\n        programValue[2] = validatedValue[2];\n        programValue[3] = validatedValue[3];\n        return;\n    }\n    let storedDimensions = values.$dimensions;\n    if (shaderProps !== undefined) {\n        const { $dimensions } = shaderProps;\n        if (storedDimensions !== undefined &&\n            (storedDimensions.width === $dimensions.width ||\n                storedDimensions.height === $dimensions.height)) {\n            return;\n        }\n        if (storedDimensions === undefined) {\n            storedDimensions = {\n                width: $dimensions?.width,\n                height: $dimensions?.height,\n            };\n            values.$dimensions = storedDimensions;\n        }\n    }\n    const { width, height } = storedDimensions;\n    const [r0, r1, r2, r3] = validatedValue;\n    const factor = Math.min(Math.min(Math.min(width / Math.max(width, r0 + r1), width / Math.max(width, r2 + r3)), Math.min(height / Math.max(height, r0 + r2), height / Math.max(height, r1 + r3))), 1);\n    programValue[0] = r0 * factor;\n    programValue[1] = r1 * factor;\n    programValue[2] = r2 * factor;\n    programValue[3] = r3 * factor;\n};\n//# sourceMappingURL=EffectUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateWebSafeRadius, validateArrayLength4 } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Masks the current maskcolor with rounded corners similar to {@link RoundedRectangle}\n */\nexport class RadiusEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radius';\n    static getEffectKey() {\n        return `radius`;\n    }\n    static uniforms = {\n        radius: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            updateOnBind: true,\n            validator: validateArrayLength4,\n            updateProgramValue: updateWebSafeRadius,\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        boxDist: `\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    `,\n    };\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius ?? 10,\n        };\n    }\n    static onShaderMask = `\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  `;\n    static onEffectMask = `\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  `;\n}\n//# sourceMappingURL=RadiusEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderEffect renders a border along all edges of an element\n */\nexport class BorderEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'border';\n    static getEffectKey() {\n        return `border`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static onEffectMask = `\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { updateFloat32ArrayLengthN } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Linear Gradient effect over a effect mask\n */\nexport class LinearGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'linearGradient';\n    static getEffectKey(props) {\n        if (props.colors.value) {\n            return `linearGradient${props.colors.value\n                .length}`;\n        }\n        return `linearGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops || [];\n        if (stops.length === 0 || stops.length !== colors.length) {\n            const colorsL = colors.length;\n            let i = 0;\n            const tmp = stops;\n            for (; i < colorsL; i++) {\n                if (stops[i]) {\n                    tmp[i] = stops[i];\n                    if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                        tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                    }\n                }\n                else {\n                    tmp[i] = i * (1 / (colors.length - 1));\n                }\n            }\n            stops = tmp;\n        }\n        return {\n            colors,\n            stops,\n            angle: props.angle ?? 0,\n        };\n    }\n    static uniforms = {\n        angle: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                return rgbas.reduce((acc, val) => acc.concat(getNormalizedRgbaComponents(val)), []);\n            },\n            updateProgramValue: updateFloat32ArrayLengthN,\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static methods = {\n        fromLinear: `\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        toLinear: `\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        calcPoint: `\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    `,\n    };\n    static ColorLoop = (amount) => {\n        let loop = '';\n        for (let i = 2; i < amount; i++) {\n            loop += `colorOut = mix(colorOut, colors[${i}], clamp((dist - stops[${i - 1}]) / (stops[${i}] - stops[${i - 1}]), 0.0, 1.0));`;\n        }\n        return loop;\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${this.ColorLoop(colors)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=LinearGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Grayscale effect grayscales the color values of the current mask color\n */\nexport class GrayscaleEffect extends ShaderEffect {\n    name = 'grayscale';\n    static getEffectKey() {\n        return `grayscale`;\n    }\n    static resolveDefaults(props) {\n        return {\n            amount: props.amount ?? 1,\n        };\n    }\n    static uniforms = {\n        amount: {\n            value: 1,\n            method: 'uniform1f',\n            type: 'float',\n        },\n    };\n    static onColorize = `\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  `;\n}\n//# sourceMappingURL=GrayscaleEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the right side of an element\n */\nexport class BorderRightEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderRight';\n    static getEffectKey() {\n        return `borderRight`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderRightEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the top side of an element\n */\nexport class BorderTopEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderTop';\n    static getEffectKey() {\n        return `borderTop`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderTopEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the bottom side of an element\n */\nexport class BorderBottomEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderBottom';\n    static getEffectKey() {\n        return `borderBottom`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderBottomEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the left of an element\n */\nexport class BorderLeftEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderLeft';\n    static getEffectKey() {\n        return `borderLeft`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderLeftEffect.js.map","import { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Renders a Glitch effect using the incoming texture\n */\nexport class GlitchEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'glitch';\n    static getEffectKey(props) {\n        return `glitch`;\n    }\n    static resolveDefaults(props) {\n        return {\n            amplitude: props.amplitude ?? 0.2,\n            narrowness: props.narrowness ?? 4.0,\n            blockiness: props.blockiness ?? 2.0,\n            minimizer: props.minimizer ?? 8.0,\n            time: props.time ?? Date.now(),\n        };\n    }\n    static uniforms = {\n        amplitude: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        narrowness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        blockiness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        minimizer: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        time: {\n            value: 0,\n            method: 'uniform1f',\n            updateOnBind: true,\n            updateProgramValue: (values) => {\n                const value = (values.value =\n                    (Date.now() - values.value) % 1000);\n                values.programValue = value;\n            },\n            type: 'float',\n        },\n    };\n    static methods = {\n        rand: `\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    `,\n        noise: `\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    `,\n        fbm: `\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    `,\n    };\n    static onColorize = `\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  `;\n}\n//# sourceMappingURL=GlitchEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { updateFloat32ArrayLength4, validateArrayLength4, } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class FadeOutEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'fadeOut';\n    static getEffectKey() {\n        return `fadeOut`;\n    }\n    static uniforms = {\n        fade: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: validateArrayLength4,\n            updateProgramValue: updateFloat32ArrayLength4,\n        },\n    };\n    static resolveDefaults(props) {\n        return {\n            fade: props.fade ?? 10,\n        };\n    }\n    static onColorize = `\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  `;\n}\n//# sourceMappingURL=FadeOutEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { updateFloat32ArrayLength2, updateFloat32ArrayLengthN, } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class RadialGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialGradient';\n    static getEffectKey(props) {\n        if (props.colors.value) {\n            return `linearGradient${props.colors.value\n                .length}`;\n        }\n        return `linearGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops || [];\n        if (stops.length === 0 || stops.length !== colors.length) {\n            const colorsL = colors.length;\n            let i = 0;\n            const tmp = stops;\n            for (; i < colorsL; i++) {\n                if (stops[i]) {\n                    tmp[i] = stops[i];\n                    if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                        tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                    }\n                }\n                else {\n                    tmp[i] = i * (1 / (colors.length - 1));\n                }\n            }\n            stops = tmp;\n        }\n        return {\n            colors,\n            stops,\n            width: props.width ?? 0,\n            height: props.height ?? props.width ?? 0,\n            pivot: props.pivot ?? [0.5, 0.5],\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        height: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        pivot: {\n            value: [0.5, 0.5],\n            updateProgramValue: updateFloat32ArrayLength2,\n            method: 'uniform2fv',\n            type: 'vec2',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                return rgbas.reduce((acc, val) => acc.concat(getNormalizedRgbaComponents(val)), []);\n            },\n            updateProgramValue: updateFloat32ArrayLengthN,\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static ColorLoop = (amount) => {\n        let loop = '';\n        for (let i = 2; i < amount; i++) {\n            loop += `colorOut = mix(colorOut, colors[${i}], clamp((dist - stops[${i - 1}]) / (stops[${i}] - stops[${i - 1}]), 0.0, 1.0));`;\n        }\n        return loop;\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${this.ColorLoop(colors)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=RadialGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { updateShaderEffectColor } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The RadialProgressEffect renders a border along all edges of an element\n */\nexport class RadialProgressEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialProgress';\n    static getEffectKey() {\n        return `radialProgress`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            progress: props.progress ?? 0.5,\n            offset: props.offset ?? 0,\n            range: props.range ?? Math.PI * 2,\n            rounded: props.rounded ?? false,\n            radius: props.radius ?? 1,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        progress: {\n            value: 0.5,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        offset: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        range: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        rounded: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n            validator: (value) => {\n                return value ? 1 : 0;\n            },\n        },\n        radius: {\n            value: 1,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            updateProgramValue: updateShaderEffectColor,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        rotateUV: `\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    `,\n        drawDot: `\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    `,\n    };\n    static onEffectMask = `\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=RadialProgressEffect.js.map","import { updateWebSafeRadius, validateArrayLength4 } from './EffectUtils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Masks the current maskcolor a holepunch effect with rounded corners similar to {@link RoundedRectangle}\n */\nexport class HolePunchEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'holePunch';\n    static getEffectKey() {\n        return `holePunch`;\n    }\n    static uniforms = {\n        x: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        y: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        height: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        radius: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            updateOnBind: true,\n            validator: validateArrayLength4,\n            updateProgramValue: updateWebSafeRadius,\n        },\n    };\n    static resolveDefaults(props) {\n        return {\n            x: props.x || 0,\n            y: props.y || 0,\n            width: props.width || 50,\n            height: props.height || 50,\n            radius: props.radius ?? 0,\n        };\n    }\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        boxDist: `\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    `,\n    };\n    static onShaderMask = `\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  `;\n    static onEffectMask = `\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  `;\n}\n//# sourceMappingURL=HolePunchEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreShader } from '../../CoreShader.js';\nexport const ROUNDED_RECTANGLE_SHADER_TYPE = 'RoundedRectangle';\nexport class UnsupportedShader extends CoreShader {\n    shType;\n    constructor(shType) {\n        super();\n        this.shType = shType;\n        // if (shType !== ROUNDED_RECTANGLE_SHADER_TYPE) {\n        //   console.warn('Unsupported shader:', shType);\n        // }\n    }\n    bindRenderOp() {\n        // noop\n    }\n    bindProps() {\n        // noop\n    }\n    attach() {\n        // noop\n    }\n    detach() {\n        // noop\n    }\n}\n//# sourceMappingURL=UnsupportedShader.js.map","/**\n * Shader Controller Class\n *\n * @remarks\n * This class is used to control shader props.\n */\nexport class ShaderController {\n    type;\n    shader;\n    resolvedProps;\n    props;\n    constructor(type, shader, props, stage) {\n        this.type = type;\n        this.shader = shader;\n        this.resolvedProps = props;\n        const keys = Object.keys(props);\n        const l = keys.length;\n        const definedProps = {};\n        for (let i = 0; i < l; i++) {\n            const name = keys[i];\n            Object.defineProperty(definedProps, name, {\n                get: () => {\n                    return this.resolvedProps[name];\n                },\n                set: (value) => {\n                    this.resolvedProps[name] = value;\n                    stage.requestRender();\n                },\n            });\n        }\n        this.props = definedProps;\n    }\n    getResolvedProps() {\n        return this.resolvedProps;\n    }\n}\n//# sourceMappingURL=ShaderController.js.map","export class DynamicShaderController {\n    shader;\n    resolvedProps;\n    props;\n    type;\n    constructor(shader, props, shManager) {\n        this.shader = shader;\n        this.type = 'DynamicShader';\n        this.resolvedProps = props;\n        const effectConstructors = shManager.getRegisteredEffects();\n        const definedProps = {};\n        const effects = props.effects;\n        const effectsLength = effects.length;\n        for (let i = 0; i < effectsLength; i++) {\n            const { name: effectName, props: effectProps, type: effectType, } = effects[i];\n            if (effectName === undefined) {\n                continue;\n            }\n            const definedEffectProps = {};\n            const propEntries = Object.keys(effectProps);\n            const propEntriesLength = propEntries.length;\n            for (let j = 0; j < propEntriesLength; j++) {\n                const propName = propEntries[j];\n                Object.defineProperty(definedEffectProps, propName, {\n                    get: () => {\n                        return this.resolvedProps.effects[i].props[propName].value;\n                    },\n                    set: (value) => {\n                        const target = this.resolvedProps.effects[i].props[propName];\n                        target.value = value;\n                        if (target.hasValidator) {\n                            value = target.validatedValue = effectConstructors[effectType]\n                                .uniforms[propName]?.validator(value, effectProps);\n                        }\n                        if (target.hasProgramValueUpdater) {\n                            effectConstructors[effectType].uniforms[propName]\n                                ?.updateProgramValue(target);\n                        }\n                        else {\n                            target.programValue = value;\n                        }\n                        shManager.renderer.stage.requestRender();\n                    },\n                });\n            }\n            Object.defineProperty(definedProps, effectName, {\n                get: () => {\n                    return definedEffectProps;\n                },\n            });\n        }\n        this.props = definedProps;\n    }\n    getResolvedProps() {\n        return this.resolvedProps;\n    }\n}\n//# sourceMappingURL=DynamicShaderController.js.map","import { DefaultShader } from './renderers/webgl/shaders/DefaultShader.js';\nimport { DefaultShaderBatched } from './renderers/webgl/shaders/DefaultShaderBatched.js';\nimport { DynamicShader, } from './renderers/webgl/shaders/DynamicShader.js';\nimport { RoundedRectangle } from './renderers/webgl/shaders/RoundedRectangle.js';\nimport { SdfShader } from './renderers/webgl/shaders/SdfShader.js';\nimport { RadiusEffect } from './renderers/webgl/shaders/effects/RadiusEffect.js';\nimport { BorderEffect } from './renderers/webgl/shaders/effects/BorderEffect.js';\nimport { LinearGradientEffect, } from './renderers/webgl/shaders/effects/LinearGradientEffect.js';\nimport { GrayscaleEffect, } from './renderers/webgl/shaders/effects/GrayscaleEffect.js';\nimport { BorderRightEffect } from './renderers/webgl/shaders/effects/BorderRightEffect.js';\nimport { BorderTopEffect } from './renderers/webgl/shaders/effects/BorderTopEffect.js';\nimport { BorderBottomEffect } from './renderers/webgl/shaders/effects/BorderBottomEffect.js';\nimport { BorderLeftEffect } from './renderers/webgl/shaders/effects/BorderLeftEffect.js';\nimport { GlitchEffect, } from './renderers/webgl/shaders/effects/GlitchEffect.js';\nimport { FadeOutEffect, } from './renderers/webgl/shaders/effects/FadeOutEffect.js';\nimport { RadialGradientEffect, } from './renderers/webgl/shaders/effects/RadialGradientEffect.js';\nimport { RadialProgressEffect, } from './renderers/webgl/shaders/effects/RadialProgressEffect.js';\nimport { HolePunchEffect, } from './renderers/webgl/shaders/effects/HolePunchEffect.js';\nimport { WebGlCoreShader } from './renderers/webgl/WebGlCoreShader.js';\nimport { UnsupportedShader } from './renderers/canvas/shaders/UnsupportedShader.js';\nimport { ShaderController } from '../main-api/ShaderController.js';\nimport { DynamicShaderController, } from '../main-api/DynamicShaderController.js';\nexport class CoreShaderManager {\n    shCache = new Map();\n    shConstructors = {};\n    attachedShader = null;\n    effectConstructors = {};\n    renderer;\n    constructor() {\n        this.registerShaderType('DefaultShader', DefaultShader);\n        this.registerShaderType('DefaultShaderBatched', DefaultShaderBatched);\n        this.registerShaderType('RoundedRectangle', RoundedRectangle);\n        this.registerShaderType('DynamicShader', DynamicShader);\n        this.registerShaderType('SdfShader', SdfShader);\n        this.registerEffectType('border', BorderEffect);\n        this.registerEffectType('borderBottom', BorderBottomEffect);\n        this.registerEffectType('borderLeft', BorderLeftEffect);\n        this.registerEffectType('borderRight', BorderRightEffect);\n        this.registerEffectType('borderTop', BorderTopEffect);\n        this.registerEffectType('fadeOut', FadeOutEffect);\n        this.registerEffectType('linearGradient', LinearGradientEffect);\n        this.registerEffectType('radialGradient', RadialGradientEffect);\n        this.registerEffectType('grayscale', GrayscaleEffect);\n        this.registerEffectType('glitch', GlitchEffect);\n        this.registerEffectType('radius', RadiusEffect);\n        this.registerEffectType('radialProgress', RadialProgressEffect);\n        this.registerEffectType('holePunch', HolePunchEffect);\n    }\n    registerShaderType(shType, shClass) {\n        this.shConstructors[shType] = shClass;\n    }\n    registerEffectType(effectType, effectClass) {\n        this.effectConstructors[effectType] = effectClass;\n    }\n    getRegisteredEffects() {\n        return this.effectConstructors;\n    }\n    getRegisteredShaders() {\n        return this.shConstructors;\n    }\n    /**\n     * Loads a shader (if not already loaded) and returns a controller for it.\n     *\n     * @param shType\n     * @param props\n     * @returns\n     */\n    loadShader(shType, props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const ShaderClass = this.shConstructors[shType];\n        if (!ShaderClass) {\n            throw new Error(`Shader type \"${shType}\" is not registered`);\n        }\n        if (this.renderer.mode === 'canvas' &&\n            ShaderClass.prototype instanceof WebGlCoreShader) {\n            return this._createShaderCtr(shType, new UnsupportedShader(shType), props);\n        }\n        if (shType === 'DynamicShader') {\n            return this.loadDynamicShader(props);\n        }\n        const resolvedProps = ShaderClass.resolveDefaults(props);\n        const cacheKey = ShaderClass.makeCacheKey(resolvedProps) || ShaderClass.name;\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return this._createShaderCtr(shType, this.shCache.get(cacheKey), resolvedProps);\n        }\n        // @ts-expect-error ShaderClass WILL accept a Renderer\n        const shader = new ShaderClass(this.renderer, props);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return this._createShaderCtr(shType, shader, resolvedProps);\n    }\n    loadDynamicShader(props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const resolvedProps = DynamicShader.resolveDefaults(props, this.effectConstructors);\n        const cacheKey = DynamicShader.makeCacheKey(resolvedProps, this.effectConstructors);\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return this._createDynShaderCtr(this.shCache.get(cacheKey), resolvedProps);\n        }\n        const shader = new DynamicShader(this.renderer, props, this.effectConstructors);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return this._createDynShaderCtr(shader, resolvedProps);\n    }\n    _createShaderCtr(type, shader, props) {\n        return new ShaderController(type, shader, props, this.renderer.stage);\n    }\n    _createDynShaderCtr(shader, props) {\n        shader.bindUniformMethods(props);\n        return new DynamicShaderController(shader, props, this);\n    }\n    useShader(shader) {\n        if (this.attachedShader === shader) {\n            return;\n        }\n        if (this.attachedShader) {\n            this.attachedShader.detach();\n        }\n        shader.attach();\n        this.attachedShader = shader;\n    }\n}\n//# sourceMappingURL=CoreShaderManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst trPropSetterDefaults = {\n    x: (state, value) => {\n        state.props.x = value;\n    },\n    y: (state, value) => {\n        state.props.y = value;\n    },\n    width: (state, value) => {\n        state.props.width = value;\n    },\n    height: (state, value) => {\n        state.props.height = value;\n    },\n    color: (state, value) => {\n        state.props.color = value;\n    },\n    zIndex: (state, value) => {\n        state.props.zIndex = value;\n    },\n    fontFamily: (state, value) => {\n        state.props.fontFamily = value;\n    },\n    fontWeight: (state, value) => {\n        state.props.fontWeight = value;\n    },\n    fontStyle: (state, value) => {\n        state.props.fontStyle = value;\n    },\n    fontStretch: (state, value) => {\n        state.props.fontStretch = value;\n    },\n    fontSize: (state, value) => {\n        state.props.fontSize = value;\n    },\n    text: (state, value) => {\n        state.props.text = value;\n    },\n    textAlign: (state, value) => {\n        state.props.textAlign = value;\n    },\n    contain: (state, value) => {\n        state.props.contain = value;\n    },\n    offsetY: (state, value) => {\n        state.props.offsetY = value;\n    },\n    scrollable: (state, value) => {\n        state.props.scrollable = value;\n    },\n    scrollY: (state, value) => {\n        state.props.scrollY = value;\n    },\n    letterSpacing: (state, value) => {\n        state.props.letterSpacing = value;\n    },\n    lineHeight: (state, value) => {\n        state.props.lineHeight = value;\n    },\n    maxLines: (state, value) => {\n        state.props.maxLines = value;\n    },\n    textBaseline: (state, value) => {\n        state.props.textBaseline = value;\n    },\n    verticalAlign: (state, value) => {\n        state.props.verticalAlign = value;\n    },\n    overflowSuffix: (state, value) => {\n        state.props.overflowSuffix = value;\n    },\n    debug: (state, value) => {\n        state.props.debug = value;\n    },\n};\nexport class TextRenderer {\n    stage;\n    set;\n    constructor(stage) {\n        this.stage = stage;\n        const propSetters = {\n            ...trPropSetterDefaults,\n            ...this.getPropertySetters(),\n        };\n        // For each prop setter add a wrapper method that checks if the prop is\n        // different before calling the setter\n        const propSet = {};\n        Object.keys(propSetters).forEach((key) => {\n            Object.defineProperty(propSet, key, {\n                value: (state, value) => {\n                    // Check if the current prop value is different before calling the setter\n                    if (state.props[key] !== value) {\n                        propSetters[key](state, value);\n                        // Assume any prop change will require a render\n                        // This ensures that renders are triggered appropriately even with RAF paused\n                        this.stage.requestRender();\n                    }\n                },\n                writable: false, // Prevents property from being changed\n                configurable: false, // Prevents property from being deleted\n            });\n        });\n        this.set = propSet;\n    }\n    setStatus(state, status, error) {\n        // Don't emit the same status twice\n        if (state.status === status) {\n            return;\n        }\n        state.status = status;\n        state.emitter.emit(status, error);\n    }\n    /**\n     * Allows the CoreTextNode to communicate changes to the isRenderable state of\n     * the itself.\n     *\n     * @param state\n     * @param renderable\n     */\n    setIsRenderable(state, renderable) {\n        state.isRenderable = renderable;\n    }\n    /**\n     * Destroy/Clean up the state object\n     *\n     * @remarks\n     * Opposite of createState(). Frees any event listeners / resources held by\n     * the state that may not reliably get garbage collected.\n     *\n     * @param state\n     */\n    destroyState(state) {\n        this.setStatus(state, 'destroyed');\n        state.emitter.removeAllListeners();\n    }\n    /**\n     * Schedule a state update via queueMicrotask\n     *\n     * @remarks\n     * This method is used to schedule a state update via queueMicrotask. This\n     * method should be called whenever a state update is needed, and it will\n     * ensure that the state is only updated once per microtask.\n     * @param state\n     * @returns\n     */\n    scheduleUpdateState(state) {\n        if (state.updateScheduled) {\n            return;\n        }\n        state.updateScheduled = true;\n        queueMicrotask(() => {\n            // If the state has been destroyed, don't update it\n            if (state.status === 'destroyed') {\n                return;\n            }\n            state.updateScheduled = false;\n            this.updateState(state);\n        });\n    }\n}\n//# sourceMappingURL=TextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Class that keeps track of the invocations of Context methods when\n * the `enableContextSpy` renderer option is enabled.\n */\nexport class ContextSpy {\n    data = {};\n    reset() {\n        this.data = {};\n    }\n    increment(name) {\n        if (!this.data[name]) {\n            this.data[name] = 0;\n        }\n        this.data[name]++;\n    }\n    getData() {\n        return { ...this.data };\n    }\n}\n//# sourceMappingURL=ContextSpy.js.map","import { bytesToMb } from './utils.js';\n/**\n * LRU (Least Recently Used) style memory manager for textures\n *\n * @remarks\n * This class is responsible for managing the memory usage of textures\n * in the Renderer. It keeps track of the memory used by each texture\n * and triggers a cleanup when the memory usage exceeds a critical\n * threshold (`criticalThreshold`).\n *\n * The cleanup process will free up non-renderable textures until the\n * memory usage is below a target threshold (`targetThresholdLevel`).\n *\n * The memory manager's clean up process will also be triggered when the\n * scene is idle for a certain amount of time (`cleanupInterval`).\n */\nexport class TextureMemoryManager {\n    stage;\n    memUsed = 0;\n    loadedTextures = new Map();\n    criticalThreshold;\n    targetThreshold;\n    cleanupInterval;\n    debugLogging;\n    lastCleanupTime = 0;\n    criticalCleanupRequested = false;\n    /**\n     * The current frame time in milliseconds\n     *\n     * @remarks\n     * This is used to determine when to perform Idle Texture Cleanups.\n     *\n     * Set by stage via `updateFrameTime` method.\n     */\n    frameTime = 0;\n    constructor(stage, settings) {\n        this.stage = stage;\n        const { criticalThreshold } = settings;\n        this.criticalThreshold = Math.round(criticalThreshold);\n        const targetFraction = Math.max(0, Math.min(1, settings.targetThresholdLevel));\n        this.targetThreshold = Math.round(criticalThreshold * targetFraction);\n        this.cleanupInterval = settings.cleanupInterval;\n        this.debugLogging = settings.debugLogging;\n        if (settings.debugLogging) {\n            let lastMemUse = 0;\n            setInterval(() => {\n                if (lastMemUse !== this.memUsed) {\n                    lastMemUse = this.memUsed;\n                    console.log(`[TextureMemoryManager] Memory used: ${bytesToMb(this.memUsed)} mb / ${bytesToMb(this.criticalThreshold)} mb (${((this.memUsed / this.criticalThreshold) *\n                        100).toFixed(1)}%)`);\n                }\n            }, 1000);\n        }\n        // If the threshold is 0, we disable the memory manager by replacing the\n        // setTextureMemUse method with a no-op function.\n        if (criticalThreshold === 0) {\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            this.setTextureMemUse = () => { };\n        }\n    }\n    setTextureMemUse(texture, byteSize) {\n        if (this.loadedTextures.has(texture)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.memUsed -= this.loadedTextures.get(texture);\n        }\n        if (byteSize === 0) {\n            this.loadedTextures.delete(texture);\n            return;\n        }\n        else {\n            this.memUsed += byteSize;\n            this.loadedTextures.set(texture, byteSize);\n        }\n        if (this.memUsed > this.criticalThreshold) {\n            this.criticalCleanupRequested = true;\n        }\n    }\n    checkCleanup() {\n        return (this.criticalCleanupRequested ||\n            (this.memUsed > this.targetThreshold &&\n                this.frameTime - this.lastCleanupTime >= this.cleanupInterval));\n    }\n    cleanup() {\n        const critical = this.criticalCleanupRequested;\n        this.lastCleanupTime = this.frameTime;\n        this.criticalCleanupRequested = false;\n        if (critical) {\n            this.stage.queueFrameEvent('criticalCleanup', {\n                memUsed: this.memUsed,\n                criticalThreshold: this.criticalThreshold,\n            });\n        }\n        if (this.debugLogging) {\n            console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${critical}`);\n        }\n        /**\n         * Sort the loaded textures by renderability, then by last touch time.\n         *\n         * This will ensure that the array is ordered by the following:\n         * - Non-renderable textures, starting at the least recently rendered\n         * - Renderable textures, starting at the least recently rendered\n         */\n        const textures = [...this.loadedTextures.keys()].sort((textureA, textureB) => {\n            const txARenderable = textureA.renderable;\n            const txBRenderable = textureB.renderable;\n            if (txARenderable === txBRenderable) {\n                return (textureA.lastRenderableChangeTime -\n                    textureB.lastRenderableChangeTime);\n            }\n            else if (txARenderable) {\n                return 1;\n            }\n            else if (txBRenderable) {\n                return -1;\n            }\n            return 0;\n        });\n        // Free non-renderable textures until we reach the target threshold\n        const memTarget = this.targetThreshold;\n        const txManager = this.stage.txManager;\n        for (const texture of textures) {\n            if (texture.renderable) {\n                // Stop at the first renderable texture (The rest are renderable because of the sort above)\n                // We don't want to free renderable textures because they will just likely be reloaded in the next frame\n                break;\n            }\n            if (texture.preventCleanup === false) {\n                texture.ctxTexture.free();\n                txManager.removeTextureFromCache(texture);\n            }\n            if (this.memUsed <= memTarget) {\n                // Stop once we've freed enough textures to reach under the target threshold\n                break;\n            }\n        }\n        if (this.memUsed >= this.criticalThreshold) {\n            this.stage.queueFrameEvent('criticalCleanupFailed', {\n                memUsed: this.memUsed,\n                criticalThreshold: this.criticalThreshold,\n            });\n            console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`);\n        }\n    }\n    /**\n     * Get the current texture memory usage information\n     *\n     * @remarks\n     * This method is for debugging purposes and returns information about the\n     * current memory usage of the textures in the Renderer.\n     */\n    getMemoryInfo() {\n        let renderableTexturesLoaded = 0;\n        const renderableMemUsed = [...this.loadedTextures.keys()].reduce(\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        (acc, texture) => {\n            renderableTexturesLoaded += texture.renderable ? 1 : 0;\n            return (acc + (texture.renderable ? this.loadedTextures.get(texture) : 0));\n        }, 0);\n        return {\n            criticalThreshold: this.criticalThreshold,\n            targetThreshold: this.targetThreshold,\n            renderableMemUsed,\n            memUsed: this.memUsed,\n            renderableTexturesLoaded,\n            loadedTextures: this.loadedTextures.size,\n        };\n    }\n}\n//# sourceMappingURL=TextureMemoryManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreContextTexture {\n    textureSource;\n    memManager;\n    constructor(memManager, textureSource) {\n        this.memManager = memManager;\n        this.textureSource = textureSource;\n    }\n    setTextureMemUse(byteSize) {\n        this.memManager.setTextureMemUse(this.textureSource, byteSize);\n    }\n    get renderable() {\n        return this.textureSource.renderable;\n    }\n}\n//# sourceMappingURL=CoreContextTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreContextTexture } from './CoreContextTexture.js';\nexport class CoreRenderer {\n    options;\n    mode;\n    stage;\n    //// Core Managers\n    txManager;\n    txMemManager;\n    shManager;\n    rttNodes = [];\n    constructor(options) {\n        this.options = options;\n        this.stage = options.stage;\n        this.txManager = options.txManager;\n        this.txMemManager = options.txMemManager;\n        this.shManager = options.shManager;\n    }\n}\n//# sourceMappingURL=CoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreNode, UpdateType } from './CoreNode.js';\nimport { assertTruthy } from '../utils.js';\nimport { Matrix3d } from './lib/Matrix3d.js';\n/**\n * An CoreNode in the Renderer scene graph that renders text.\n *\n * @remarks\n * A Text Node is the second graphical building block of the Renderer scene\n * graph. It renders text using a specific text renderer that is automatically\n * chosen based on the font requested and what type of fonts are installed\n * into an app.\n *\n * The text renderer can be overridden by setting the `textRendererOverride`\n *\n * The `texture` and `shader` properties are managed by loaded text renderer and\n * should not be set directly.\n *\n * For non-text rendering, see {@link CoreNode}.\n */\nexport class CoreTextNode extends CoreNode {\n    textRenderer;\n    trState;\n    _textRendererOverride = null;\n    constructor(stage, props, textRenderer) {\n        super(stage, props);\n        this._textRendererOverride = props.textRendererOverride;\n        this.textRenderer = textRenderer;\n        const textRendererState = this.createState({\n            x: this.absX,\n            y: this.absY,\n            width: props.width,\n            height: props.height,\n            textAlign: props.textAlign,\n            color: props.color,\n            zIndex: props.zIndex,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            letterSpacing: props.letterSpacing,\n            debug: props.debug,\n            fontFamily: props.fontFamily,\n            fontSize: props.fontSize,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            fontWeight: props.fontWeight,\n            text: props.text,\n            lineHeight: props.lineHeight,\n            maxLines: props.maxLines,\n            textBaseline: props.textBaseline,\n            verticalAlign: props.verticalAlign,\n            overflowSuffix: props.overflowSuffix,\n        });\n        this.trState = textRendererState;\n    }\n    onTextLoaded = () => {\n        const { contain } = this;\n        const setWidth = this.trState.props.width;\n        const setHeight = this.trState.props.height;\n        const calcWidth = this.trState.textW || 0;\n        const calcHeight = this.trState.textH || 0;\n        if (contain === 'both') {\n            this.props.width = setWidth;\n            this.props.height = setHeight;\n        }\n        else if (contain === 'width') {\n            this.props.width = setWidth;\n            this.props.height = calcHeight;\n        }\n        else if (contain === 'none') {\n            this.props.width = calcWidth;\n            this.props.height = calcHeight;\n        }\n        this.updateLocalTransform();\n        // Incase the RAF loop has been stopped already before text was loaded,\n        // we request a render so it can be drawn.\n        this.stage.requestRender();\n        this.emit('loaded', {\n            type: 'text',\n            dimensions: {\n                width: this.trState.textW || 0,\n                height: this.trState.textH || 0,\n            },\n        });\n    };\n    onTextFailed = (target, error) => {\n        this.emit('failed', {\n            type: 'text',\n            error,\n        });\n    };\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        this.props.width = value;\n        this.textRenderer.set.width(this.trState, value);\n        // If not containing, we must update the local transform to account for the\n        // new width\n        if (this.contain === 'none') {\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        this.props.height = value;\n        this.textRenderer.set.height(this.trState, value);\n        // If not containing in the horizontal direction, we must update the local\n        // transform to account for the new height\n        if (this.contain !== 'both') {\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get color() {\n        return this.trState.props.color;\n    }\n    set color(value) {\n        this.textRenderer.set.color(this.trState, value);\n    }\n    get text() {\n        return this.trState.props.text;\n    }\n    set text(value) {\n        this.textRenderer.set.text(this.trState, value);\n    }\n    get textRendererOverride() {\n        return this._textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this._textRendererOverride = value;\n        this.textRenderer.destroyState(this.trState);\n        const textRenderer = this.stage.resolveTextRenderer(this.trState.props, this._textRendererOverride);\n        if (!textRenderer) {\n            console.warn('Text Renderer not found for font', this.trState.props.fontFamily);\n            return;\n        }\n        this.textRenderer = textRenderer;\n        this.trState = this.createState(this.trState.props);\n    }\n    get fontSize() {\n        return this.trState.props.fontSize;\n    }\n    set fontSize(value) {\n        this.textRenderer.set.fontSize(this.trState, value);\n    }\n    get fontFamily() {\n        return this.trState.props.fontFamily;\n    }\n    set fontFamily(value) {\n        this.textRenderer.set.fontFamily(this.trState, value);\n    }\n    get fontStretch() {\n        return this.trState.props.fontStretch;\n    }\n    set fontStretch(value) {\n        this.textRenderer.set.fontStretch(this.trState, value);\n    }\n    get fontStyle() {\n        return this.trState.props.fontStyle;\n    }\n    set fontStyle(value) {\n        this.textRenderer.set.fontStyle(this.trState, value);\n    }\n    get fontWeight() {\n        return this.trState.props.fontWeight;\n    }\n    set fontWeight(value) {\n        this.textRenderer.set.fontWeight(this.trState, value);\n    }\n    get textAlign() {\n        return this.trState.props.textAlign;\n    }\n    set textAlign(value) {\n        this.textRenderer.set.textAlign(this.trState, value);\n    }\n    get contain() {\n        return this.trState.props.contain;\n    }\n    set contain(value) {\n        this.textRenderer.set.contain(this.trState, value);\n    }\n    get scrollable() {\n        return this.trState.props.scrollable;\n    }\n    set scrollable(value) {\n        this.textRenderer.set.scrollable(this.trState, value);\n    }\n    get scrollY() {\n        return this.trState.props.scrollY;\n    }\n    set scrollY(value) {\n        this.textRenderer.set.scrollY(this.trState, value);\n    }\n    get offsetY() {\n        return this.trState.props.offsetY;\n    }\n    set offsetY(value) {\n        this.textRenderer.set.offsetY(this.trState, value);\n    }\n    get letterSpacing() {\n        return this.trState.props.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.textRenderer.set.letterSpacing(this.trState, value);\n    }\n    get lineHeight() {\n        return this.trState.props.lineHeight;\n    }\n    set lineHeight(value) {\n        this.textRenderer.set.lineHeight(this.trState, value);\n    }\n    get maxLines() {\n        return this.trState.props.maxLines;\n    }\n    set maxLines(value) {\n        this.textRenderer.set.maxLines(this.trState, value);\n    }\n    get textBaseline() {\n        return this.trState.props.textBaseline;\n    }\n    set textBaseline(value) {\n        this.textRenderer.set.textBaseline(this.trState, value);\n    }\n    get verticalAlign() {\n        return this.trState.props.verticalAlign;\n    }\n    set verticalAlign(value) {\n        this.textRenderer.set.verticalAlign(this.trState, value);\n    }\n    get overflowSuffix() {\n        return this.trState.props.overflowSuffix;\n    }\n    set overflowSuffix(value) {\n        this.textRenderer.set.overflowSuffix(this.trState, value);\n    }\n    get debug() {\n        return this.trState.props.debug;\n    }\n    set debug(value) {\n        this.textRenderer.set.debug(this.trState, value);\n    }\n    update(delta, parentClippingRect) {\n        super.update(delta, parentClippingRect);\n        assertTruthy(this.globalTransform);\n        // globalTransform is updated in super.update(delta)\n        this.textRenderer.set.x(this.trState, this.globalTransform.tx);\n        this.textRenderer.set.y(this.trState, this.globalTransform.ty);\n    }\n    hasRenderableProperties() {\n        if (this.trState && this.trState.props.text !== '') {\n            return true;\n        }\n        return super.hasRenderableProperties();\n    }\n    onChangeIsRenderable(isRenderable) {\n        super.onChangeIsRenderable(isRenderable);\n        this.textRenderer.setIsRenderable(this.trState, isRenderable);\n    }\n    renderQuads(renderer) {\n        assertTruthy(this.globalTransform);\n        // If the text renderer does not support rendering quads, fallback to the\n        // default renderQuads method\n        if (!this.textRenderer.renderQuads) {\n            super.renderQuads(renderer);\n            return;\n        }\n        // If the text renderer does support rendering quads, use it...\n        // Prevent quad rendering if parent has a render texture\n        // and this node is not the render texture\n        if (this.parentHasRenderTexture) {\n            if (!renderer.renderToTextureActive) {\n                return;\n            }\n            // Prevent quad rendering if parent render texture is not the active render texture\n            if (this.parentRenderTexture !== renderer.activeRttNode) {\n                return;\n            }\n        }\n        if (this.parentHasRenderTexture && this.props.parent?.rtt) {\n            this.globalTransform = Matrix3d.identity();\n            if (this.localTransform) {\n                this.globalTransform.multiply(this.localTransform);\n            }\n        }\n        assertTruthy(this.globalTransform);\n        this.textRenderer.renderQuads(this.trState, this.globalTransform, this.clippingRect, this.worldAlpha, this.parentHasRenderTexture, this.framebufferDimensions);\n    }\n    /**\n     * Destroy the node and cleanup all resources\n     */\n    destroy() {\n        super.destroy();\n        this.textRenderer.destroyState(this.trState);\n    }\n    /**\n     * Resolve a text renderer and a new state based on the current text renderer props provided\n     * @param props\n     * @returns\n     */\n    createState(props) {\n        const textRendererState = this.textRenderer.createState(props, this);\n        textRendererState.emitter.on('loaded', this.onTextLoaded);\n        textRendererState.emitter.on('failed', this.onTextFailed);\n        this.textRenderer.scheduleUpdateState(textRendererState);\n        return textRendererState;\n    }\n}\n//# sourceMappingURL=CoreTextNode.js.map","export function santizeCustomDataMap(d) {\n    const validTypes = {\n        boolean: true,\n        string: true,\n        number: true,\n        undefined: true,\n    };\n    const keys = Object.keys(d);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (!key) {\n            continue;\n        }\n        const value = d[key];\n        const valueType = typeof value;\n        // Typescript doesn't understand the above const valueType ¯\\_(ツ)_/¯\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore-next-line\n        if (valueType === 'string' && value.length > 2048) {\n            console.warn(`Custom Data value for ${key} is too long, it will be truncated to 2048 characters`);\n            // same here, see above comment, this can only be a string at this point\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore-next-line\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n            d[key] = value.substring(0, 2048);\n        }\n        if (!validTypes[valueType]) {\n            console.warn(`Custom Data value for ${key} is not a boolean, string, or number, it will be ignored`);\n            delete d[key];\n        }\n    }\n    return d;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { startLoop, getTimeStamp } from './platform.js';\nimport { assertTruthy, setPremultiplyMode } from '../utils.js';\nimport { AnimationManager } from './animations/AnimationManager.js';\nimport { CoreNode, CoreNodeRenderState, } from './CoreNode.js';\nimport { CoreTextureManager } from './CoreTextureManager.js';\nimport { TrFontManager } from './text-rendering/TrFontManager.js';\nimport { CoreShaderManager } from './CoreShaderManager.js';\nimport { TextRenderer, } from './text-rendering/renderers/TextRenderer.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { ContextSpy } from './lib/ContextSpy.js';\nimport { TextureMemoryManager, } from './TextureMemoryManager.js';\nimport { CoreRenderer } from './renderers/CoreRenderer.js';\nimport { CoreTextNode } from './CoreTextNode.js';\nimport { santizeCustomDataMap } from '../main-api/utils.js';\nimport { createBound, createPreloadBounds } from './lib/utils.js';\nconst bufferMemory = 2e6;\nconst autoStart = true;\nexport class Stage {\n    options;\n    /// Module Instances\n    animationManager;\n    txManager;\n    txMemManager;\n    fontManager;\n    textRenderers;\n    shManager;\n    renderer;\n    root;\n    boundsMargin;\n    defShaderCtr;\n    strictBound;\n    preloadBound;\n    strictBounds;\n    /**\n     * Renderer Event Bus for the Stage to emit events onto\n     *\n     * @remarks\n     * In reality this is just the RendererMain instance, which is an EventEmitter.\n     * this allows us to directly emit events from the Stage to RendererMain\n     * without having to set up forwarding handlers.\n     */\n    eventBus;\n    /// State\n    deltaTime = 0;\n    lastFrameTime = 0;\n    currentFrameTime = 0;\n    fpsNumFrames = 0;\n    fpsElapsedTime = 0;\n    renderRequested = false;\n    frameEventQueue = [];\n    fontResolveMap = {};\n    /// Debug data\n    contextSpy = null;\n    /**\n     * Stage constructor\n     */\n    constructor(options) {\n        this.options = options;\n        const { canvas, clearColor, appWidth, appHeight, boundsMargin, enableContextSpy, forceWebGL2, numImageWorkers, textureMemory, renderEngine, fontEngines, } = options;\n        this.eventBus = options.eventBus;\n        this.txManager = new CoreTextureManager(numImageWorkers);\n        this.txMemManager = new TextureMemoryManager(this, textureMemory);\n        this.shManager = new CoreShaderManager();\n        this.animationManager = new AnimationManager();\n        this.contextSpy = enableContextSpy ? new ContextSpy() : null;\n        this.strictBounds = options.strictBounds;\n        let bm = [0, 0, 0, 0];\n        if (boundsMargin) {\n            bm = Array.isArray(boundsMargin)\n                ? boundsMargin\n                : [boundsMargin, boundsMargin, boundsMargin, boundsMargin];\n        }\n        this.boundsMargin = bm;\n        // precalculate our viewport bounds\n        this.strictBound = createBound(0, 0, appWidth, appHeight);\n        this.preloadBound = createPreloadBounds(this.strictBound, bm);\n        const rendererOptions = {\n            stage: this,\n            canvas,\n            pixelRatio: options.devicePhysicalPixelRatio * options.deviceLogicalPixelRatio,\n            clearColor: clearColor ?? 0xff000000,\n            bufferMemory,\n            txManager: this.txManager,\n            txMemManager: this.txMemManager,\n            shManager: this.shManager,\n            contextSpy: this.contextSpy,\n            forceWebGL2,\n        };\n        this.renderer = new renderEngine(rendererOptions);\n        const renderMode = this.renderer.mode || 'webgl';\n        this.defShaderCtr = this.renderer.getDefShaderCtr();\n        setPremultiplyMode(renderMode);\n        // Must do this after renderer is created\n        this.txManager.renderer = this.renderer;\n        // Create text renderers\n        this.textRenderers = {};\n        fontEngines.forEach((fontEngineConstructor) => {\n            const fontEngineInstance = new fontEngineConstructor(this);\n            const className = fontEngineInstance.type;\n            if (className === 'sdf' && renderMode === 'canvas') {\n                console.warn('SdfTextRenderer is not compatible with Canvas renderer. Skipping...');\n                return;\n            }\n            if (fontEngineInstance instanceof TextRenderer) {\n                if (className === 'canvas') {\n                    this.textRenderers['canvas'] =\n                        fontEngineInstance;\n                }\n                else if (className === 'sdf') {\n                    this.textRenderers['sdf'] = fontEngineInstance;\n                }\n            }\n        });\n        if (Object.keys(this.textRenderers).length === 0) {\n            console.warn('No text renderers available. Your text will not render.');\n        }\n        this.fontManager = new TrFontManager(this.textRenderers);\n        // create root node\n        const rootNode = new CoreNode(this, {\n            x: 0,\n            y: 0,\n            width: appWidth,\n            height: appHeight,\n            alpha: 1,\n            autosize: false,\n            clipping: false,\n            color: 0x00000000,\n            colorTop: 0x00000000,\n            colorBottom: 0x00000000,\n            colorLeft: 0x00000000,\n            colorRight: 0x00000000,\n            colorTl: 0x00000000,\n            colorTr: 0x00000000,\n            colorBl: 0x00000000,\n            colorBr: 0x00000000,\n            zIndex: 0,\n            zIndexLocked: 0,\n            scaleX: 1,\n            scaleY: 1,\n            mountX: 0,\n            mountY: 0,\n            mount: 0,\n            pivot: 0.5,\n            pivotX: 0.5,\n            pivotY: 0.5,\n            rotation: 0,\n            parent: null,\n            texture: null,\n            textureOptions: {},\n            shader: this.defShaderCtr,\n            rtt: false,\n            src: null,\n            scale: 1,\n            preventCleanup: false,\n            strictBounds: this.strictBounds,\n        });\n        this.root = rootNode;\n        // execute platform start loop\n        if (autoStart) {\n            startLoop(this);\n        }\n    }\n    setClearColor(color) {\n        this.renderer.updateClearColor(color);\n        this.renderRequested = true;\n    }\n    updateFrameTime() {\n        const newFrameTime = getTimeStamp();\n        this.lastFrameTime = this.currentFrameTime;\n        this.currentFrameTime = newFrameTime;\n        this.deltaTime = !this.lastFrameTime\n            ? 100 / 6\n            : newFrameTime - this.lastFrameTime;\n        this.txManager.frameTime = newFrameTime;\n        this.txMemManager.frameTime = newFrameTime;\n        // This event is emitted at the beginning of the frame (before any updates\n        // or rendering), so no need to to use `stage.queueFrameEvent` here.\n        this.eventBus.emit('frameTick', {\n            time: this.currentFrameTime,\n            delta: this.deltaTime,\n        });\n    }\n    /**\n     * Update animations\n     */\n    updateAnimations() {\n        const { animationManager } = this;\n        if (!this.root) {\n            return;\n        }\n        // step animation\n        animationManager.update(this.deltaTime);\n    }\n    /**\n     * Check if the scene has updates\n     */\n    hasSceneUpdates() {\n        return !!this.root.updateType || this.renderRequested;\n    }\n    /**\n     * Start a new frame draw\n     */\n    drawFrame() {\n        const { renderer, renderRequested } = this;\n        assertTruthy(renderer);\n        // Update tree if needed\n        if (this.root.updateType !== 0) {\n            this.root.update(this.deltaTime, this.root.clippingRect);\n        }\n        // Reset render operations and clear the canvas\n        renderer.reset();\n        // Check if we need to cleanup textures\n        if (this.txMemManager.criticalCleanupRequested) {\n            this.txMemManager.cleanup();\n        }\n        // If we have RTT nodes draw them first\n        // So we can use them as textures in the main scene\n        if (renderer.rttNodes.length > 0) {\n            renderer.renderRTTNodes();\n        }\n        // Fill quads buffer\n        this.addQuads(this.root);\n        // Perform render pass\n        renderer?.render();\n        this.calculateFps();\n        // Reset renderRequested flag if it was set\n        if (renderRequested) {\n            this.renderRequested = false;\n        }\n    }\n    /**\n     * Queue an event to be emitted after the current/next frame is rendered\n     *\n     * @remarks\n     * When we are operating in the context of the render loop, we may want to\n     * emit events that are related to the current frame. However, we generally do\n     * NOT want to emit events directly in the middle of the render loop, since\n     * this could enable event handlers to modify the scene graph and cause\n     * unexpected behavior. Instead, we queue up events to be emitted and then\n     * flush the queue after the frame has been rendered.\n     *\n     * @param name\n     * @param data\n     */\n    queueFrameEvent(name, data) {\n        this.frameEventQueue.push([name, data]);\n    }\n    /**\n     * Emit all queued frame events\n     *\n     * @remarks\n     * This method should be called after the frame has been rendered to emit\n     * all events that were queued during the frame.\n     *\n     * See {@link queueFrameEvent} for more information.\n     */\n    flushFrameEvents() {\n        for (const [name, data] of this.frameEventQueue) {\n            this.eventBus.emit(name, data);\n        }\n        this.frameEventQueue = [];\n    }\n    calculateFps() {\n        // If there's an FPS update interval, emit the FPS update event\n        // when the specified interval has elapsed.\n        const { fpsUpdateInterval } = this.options;\n        if (fpsUpdateInterval) {\n            this.fpsNumFrames++;\n            this.fpsElapsedTime += this.deltaTime;\n            if (this.fpsElapsedTime >= fpsUpdateInterval) {\n                const fps = Math.round((this.fpsNumFrames * 1000) / this.fpsElapsedTime);\n                this.fpsNumFrames = 0;\n                this.fpsElapsedTime = 0;\n                this.queueFrameEvent('fpsUpdate', {\n                    fps,\n                    contextSpyData: this.contextSpy?.getData() ?? null,\n                });\n                this.contextSpy?.reset();\n            }\n        }\n    }\n    addQuads(node) {\n        assertTruthy(this.renderer);\n        if (node.isRenderable === true) {\n            node.renderQuads(this.renderer);\n        }\n        for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i];\n            if (child === undefined) {\n                continue;\n            }\n            if (child.worldAlpha === 0 ||\n                (child.strictBounds === true &&\n                    child.renderState === CoreNodeRenderState.OutOfBounds)) {\n                continue;\n            }\n            this.addQuads(child);\n        }\n    }\n    /**\n     * Request a render pass without forcing an update\n     */\n    requestRender() {\n        this.renderRequested = true;\n    }\n    /**\n     * Given a font name, and possible renderer override, return the best compatible text renderer.\n     *\n     * @remarks\n     * Will try to return a canvas renderer if no other suitable renderer can be resolved.\n     *\n     * @param fontFamily\n     * @param textRendererOverride\n     * @returns\n     */\n    resolveTextRenderer(trProps, textRendererOverride = null) {\n        const fontCacheString = `${trProps.fontFamily}${trProps.fontStyle}${trProps.fontWeight}${trProps.fontStretch}${textRendererOverride ? textRendererOverride : ''}`;\n        // check our resolve cache first\n        if (this.fontResolveMap[fontCacheString] !== undefined) {\n            return this.fontResolveMap[fontCacheString];\n        }\n        // Resolve the text renderer\n        let rendererId = textRendererOverride;\n        let overrideFallback = false;\n        // Check if the override is valid (if one is provided)\n        if (rendererId) {\n            const possibleRenderer = this.textRenderers[rendererId];\n            if (!possibleRenderer) {\n                console.warn(`Text renderer override '${rendererId}' not found.`);\n                rendererId = null;\n                overrideFallback = true;\n            }\n            else if (!possibleRenderer.canRenderFont(trProps)) {\n                console.warn(`Cannot use override text renderer '${rendererId}' for font`, trProps);\n                rendererId = null;\n                overrideFallback = true;\n            }\n        }\n        if (!rendererId) {\n            // Iterate through the text renderers and find the first one that can render the font\n            for (const [trId, tr] of Object.entries(this.textRenderers)) {\n                if (tr.canRenderFont(trProps)) {\n                    rendererId = trId;\n                    break;\n                }\n            }\n            if (!rendererId && this.textRenderers.canvas !== undefined) {\n                // If no renderer can be found, use the canvas renderer\n                rendererId = 'canvas';\n            }\n        }\n        if (overrideFallback) {\n            console.warn(`Falling back to text renderer ${String(rendererId)}`);\n        }\n        if (!rendererId) {\n            // silently fail if no renderer can be found, the error is already created\n            // at the constructor level\n            return null;\n        }\n        // By now we are guaranteed to have a valid rendererId (at least Canvas);\n        const resolvedTextRenderer = this.textRenderers[rendererId];\n        assertTruthy(resolvedTextRenderer, 'resolvedTextRenderer undefined');\n        // cache the resolved renderer for future use with these trProps\n        this.fontResolveMap[fontCacheString] = resolvedTextRenderer;\n        // Need to explicitly cast to TextRenderer because TS doesn't like\n        // the covariant state argument in the setter method map\n        return resolvedTextRenderer;\n    }\n    /**\n     * Create a shader controller instance\n     *\n     * @param type\n     * @param props\n     * @returns\n     */\n    createShaderCtr(type, props) {\n        return this.shManager.loadShader(type, props);\n    }\n    createNode(props) {\n        const resolvedProps = this.resolveNodeDefaults(props);\n        return new CoreNode(this, resolvedProps);\n    }\n    createTextNode(props) {\n        const fontSize = props.fontSize ?? 16;\n        const resolvedProps = {\n            ...this.resolveNodeDefaults(props),\n            text: props.text ?? '',\n            textRendererOverride: props.textRendererOverride ?? null,\n            fontSize,\n            fontFamily: props.fontFamily ?? 'sans-serif',\n            fontStyle: props.fontStyle ?? 'normal',\n            fontWeight: props.fontWeight ?? 'normal',\n            fontStretch: props.fontStretch ?? 'normal',\n            textAlign: props.textAlign ?? 'left',\n            contain: props.contain ?? 'none',\n            scrollable: props.scrollable ?? false,\n            scrollY: props.scrollY ?? 0,\n            offsetY: props.offsetY ?? 0,\n            letterSpacing: props.letterSpacing ?? 0,\n            lineHeight: props.lineHeight, // `undefined` is a valid value\n            maxLines: props.maxLines ?? 0,\n            textBaseline: props.textBaseline ?? 'alphabetic',\n            verticalAlign: props.verticalAlign ?? 'middle',\n            overflowSuffix: props.overflowSuffix ?? '...',\n            debug: props.debug ?? {},\n            shaderProps: null,\n        };\n        const resolvedTextRenderer = this.resolveTextRenderer(resolvedProps, props.textRendererOverride);\n        if (!resolvedTextRenderer) {\n            throw new Error(`No compatible text renderer found for ${resolvedProps.fontFamily}`);\n        }\n        return new CoreTextNode(this, resolvedProps, resolvedTextRenderer);\n    }\n    /**\n     * Resolves the default property values for a Node\n     *\n     * @remarks\n     * This method is used internally by the RendererMain to resolve the default\n     * property values for a Node. It is exposed publicly so that it can be used\n     * by Core Driver implementations.\n     *\n     * @param props\n     * @returns\n     */\n    resolveNodeDefaults(props) {\n        const color = props.color ?? 0xffffffff;\n        const colorTl = props.colorTl ?? props.colorTop ?? props.colorLeft ?? color;\n        const colorTr = props.colorTr ?? props.colorTop ?? props.colorRight ?? color;\n        const colorBl = props.colorBl ?? props.colorBottom ?? props.colorLeft ?? color;\n        const colorBr = props.colorBr ?? props.colorBottom ?? props.colorRight ?? color;\n        let data = {};\n        if (this.options.inspector === true) {\n            data = santizeCustomDataMap(props.data ?? {});\n        }\n        return {\n            x: props.x ?? 0,\n            y: props.y ?? 0,\n            width: props.width ?? 0,\n            height: props.height ?? 0,\n            alpha: props.alpha ?? 1,\n            autosize: props.autosize ?? false,\n            clipping: props.clipping ?? false,\n            color,\n            colorTop: props.colorTop ?? color,\n            colorBottom: props.colorBottom ?? color,\n            colorLeft: props.colorLeft ?? color,\n            colorRight: props.colorRight ?? color,\n            colorBl,\n            colorBr,\n            colorTl,\n            colorTr,\n            zIndex: props.zIndex ?? 0,\n            zIndexLocked: props.zIndexLocked ?? 0,\n            parent: props.parent ?? null,\n            texture: props.texture ?? null,\n            textureOptions: props.textureOptions ?? {},\n            shader: props.shader ?? this.defShaderCtr,\n            // Since setting the `src` will trigger a texture load, we need to set it after\n            // we set the texture. Otherwise, problems happen.\n            src: props.src ?? null,\n            srcHeight: props.srcHeight,\n            srcWidth: props.srcWidth,\n            srcX: props.srcX,\n            srcY: props.srcY,\n            scale: props.scale ?? null,\n            scaleX: props.scaleX ?? props.scale ?? 1,\n            scaleY: props.scaleY ?? props.scale ?? 1,\n            mount: props.mount ?? 0,\n            mountX: props.mountX ?? props.mount ?? 0,\n            mountY: props.mountY ?? props.mount ?? 0,\n            pivot: props.pivot ?? 0.5,\n            pivotX: props.pivotX ?? props.pivot ?? 0.5,\n            pivotY: props.pivotY ?? props.pivot ?? 0.5,\n            rotation: props.rotation ?? 0,\n            rtt: props.rtt ?? false,\n            data: data,\n            preventCleanup: props.preventCleanup ?? false,\n            imageType: props.imageType,\n            strictBounds: props.strictBounds ?? this.strictBounds,\n        };\n    }\n}\n//# sourceMappingURL=Stage.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { assertTruthy, isProductionEnvironment } from '../utils.js';\nimport { Stage } from '../core/Stage.js';\nimport { CoreNode } from '../core/CoreNode.js';\nimport {} from '../core/CoreTextNode.js';\n/**\n * The Renderer Main API\n *\n * @remarks\n * This is the primary class used to configure and operate the Renderer.\n *\n * It is used to create and destroy Nodes, as well as Texture and Shader\n * references.\n *\n * Example:\n * ```ts\n * import { RendererMain, MainCoreDriver } from '@lightningjs/renderer';\n *\n * // Initialize the Renderer\n * const renderer = new RendererMain(\n *   {\n *     appWidth: 1920,\n *     appHeight: 1080\n *   },\n *   'app',\n *   new MainCoreDriver(),\n * );\n * ```\n *\n * ## Events\n * - `fpsUpdate`\n *   - Emitted every `fpsUpdateInterval` milliseconds with the current FPS\n * - `frameTick`\n *   - Emitted every frame tick\n * - `idle`\n *   - Emitted when the renderer is idle (no changes to the scene\n *     graph/animations running)\n * - `criticalCleanup`\n *  - Emitted when the Texture Memory Manager Cleanup process is triggered\n *  - Payload: { memUsed: number, criticalThreshold: number }\n *    - `memUsed` - The amount of memory (in bytes) used by textures before the\n *       cleanup process\n *    - `criticalThreshold` - The critical threshold (in bytes)\n * - `criticalCleanupFailed`\n *   - Emitted when the Texture Memory Manager Cleanup process is unable to free\n *     up enough texture memory to reach below the critical threshold.\n *     This can happen when there is not enough non-renderable textures to\n *     free up.\n *   - Payload (object with keys):\n *     - `memUsed` - The amount of memory (in bytes) used by textures after\n *       the cleanup process\n *     - `criticalThreshold` - The critical threshold (in bytes)\n */\nexport class RendererMain extends EventEmitter {\n    root;\n    canvas;\n    settings;\n    stage;\n    inspector = null;\n    /**\n     * Constructs a new Renderer instance\n     *\n     * @param settings Renderer settings\n     * @param target Element ID or HTMLElement to insert the canvas into\n     * @param driver Core Driver to use\n     */\n    constructor(settings, target) {\n        super();\n        const resolvedTxSettings = {\n            criticalThreshold: settings.textureMemory?.criticalThreshold || 124e6,\n            targetThresholdLevel: settings.textureMemory?.targetThresholdLevel || 0.5,\n            cleanupInterval: settings.textureMemory?.cleanupInterval || 30000,\n            debugLogging: settings.textureMemory?.debugLogging || false,\n        };\n        const resolvedSettings = {\n            appWidth: settings.appWidth || 1920,\n            appHeight: settings.appHeight || 1080,\n            textureMemory: resolvedTxSettings,\n            boundsMargin: settings.boundsMargin || 0,\n            deviceLogicalPixelRatio: settings.deviceLogicalPixelRatio || 1,\n            devicePhysicalPixelRatio: settings.devicePhysicalPixelRatio || window.devicePixelRatio,\n            clearColor: settings.clearColor ?? 0x00000000,\n            fpsUpdateInterval: settings.fpsUpdateInterval || 0,\n            numImageWorkers: settings.numImageWorkers !== undefined ? settings.numImageWorkers : 2,\n            enableContextSpy: settings.enableContextSpy ?? false,\n            forceWebGL2: settings.forceWebGL2 ?? false,\n            inspector: settings.inspector ?? false,\n            renderEngine: settings.renderEngine,\n            quadBufferSize: settings.quadBufferSize ?? 4 * 1024 * 1024,\n            fontEngines: settings.fontEngines,\n            strictBounds: settings.strictBounds ?? true,\n        };\n        this.settings = resolvedSettings;\n        const { appWidth, appHeight, deviceLogicalPixelRatio, devicePhysicalPixelRatio, inspector, } = resolvedSettings;\n        const deviceLogicalWidth = appWidth * deviceLogicalPixelRatio;\n        const deviceLogicalHeight = appHeight * deviceLogicalPixelRatio;\n        const canvas = document.createElement('canvas');\n        this.canvas = canvas;\n        canvas.width = deviceLogicalWidth * devicePhysicalPixelRatio;\n        canvas.height = deviceLogicalHeight * devicePhysicalPixelRatio;\n        canvas.style.width = `${deviceLogicalWidth}px`;\n        canvas.style.height = `${deviceLogicalHeight}px`;\n        // Initialize the stage\n        this.stage = new Stage({\n            appWidth: this.settings.appWidth,\n            appHeight: this.settings.appHeight,\n            boundsMargin: this.settings.boundsMargin,\n            clearColor: this.settings.clearColor,\n            canvas: this.canvas,\n            deviceLogicalPixelRatio: this.settings.deviceLogicalPixelRatio,\n            devicePhysicalPixelRatio: this.settings.devicePhysicalPixelRatio,\n            enableContextSpy: this.settings.enableContextSpy,\n            forceWebGL2: this.settings.forceWebGL2,\n            fpsUpdateInterval: this.settings.fpsUpdateInterval,\n            numImageWorkers: this.settings.numImageWorkers,\n            renderEngine: this.settings.renderEngine,\n            textureMemory: resolvedTxSettings,\n            eventBus: this,\n            quadBufferSize: this.settings.quadBufferSize,\n            fontEngines: this.settings.fontEngines,\n            inspector: this.settings.inspector !== null,\n            strictBounds: this.settings.strictBounds,\n        });\n        // Extract the root node\n        this.root = this.stage.root;\n        // Get the target element and attach the canvas to it\n        let targetEl;\n        if (typeof target === 'string') {\n            targetEl = document.getElementById(target);\n        }\n        else {\n            targetEl = target;\n        }\n        if (!targetEl) {\n            throw new Error('Could not find target element');\n        }\n        targetEl.appendChild(canvas);\n        // Initialize inspector (if enabled)\n        if (inspector && !isProductionEnvironment()) {\n            this.inspector = new inspector(canvas, resolvedSettings);\n        }\n    }\n    /**\n     * Create a new scene graph node\n     *\n     * @remarks\n     * A node is the main graphical building block of the Renderer scene graph. It\n     * can be a container for other nodes, or it can be a leaf node that renders a\n     * solid color, gradient, image, or specific texture, using a specific shader.\n     *\n     * To create a text node, see {@link createTextNode}.\n     *\n     * See {@link CoreNode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createNode(props) {\n        const node = this.stage.createNode(props);\n        if (this.inspector) {\n            return this.inspector.createNode(node);\n        }\n        // FIXME onDestroy event? node.once('beforeDestroy'\n        // FIXME onCreate event?\n        return node;\n    }\n    /**\n     * Create a new scene graph text node\n     *\n     * @remarks\n     * A text node is the second graphical building block of the Renderer scene\n     * graph. It renders text using a specific text renderer that is automatically\n     * chosen based on the font requested and what type of fonts are installed\n     * into an app.\n     *\n     * See {@link ITextNode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createTextNode(props) {\n        const textNode = this.stage.createTextNode(props);\n        if (this.inspector) {\n            return this.inspector.createTextNode(textNode);\n        }\n        return textNode;\n    }\n    /**\n     * Destroy a node\n     *\n     * @remarks\n     * This method destroys a node\n     *\n     * @param node\n     * @returns\n     */\n    destroyNode(node) {\n        if (this.inspector) {\n            this.inspector.destroyNode(node.id);\n        }\n        return node.destroy();\n    }\n    /**\n     * Create a new texture reference\n     *\n     * @remarks\n     * This method creates a new reference to a texture. The texture is not\n     * loaded until it is used on a node.\n     *\n     * It can be assigned to a node's `texture` property, or it can be used\n     * when creating a SubTexture.\n     *\n     * @param textureType\n     * @param props\n     * @param options\n     * @returns\n     */\n    createTexture(textureType, props) {\n        return this.stage.txManager.loadTexture(textureType, props);\n    }\n    /**\n     * Create a new shader controller for a shader type\n     *\n     * @remarks\n     * This method creates a new Shader Controller for a specific shader type.\n     *\n     * If the shader has not been loaded yet, it will be loaded. Otherwise, the\n     * existing shader will be reused.\n     *\n     * It can be assigned to a Node's `shader` property.\n     *\n     * @param shaderType\n     * @param props\n     * @returns\n     */\n    createShader(shaderType, props) {\n        return this.stage.shManager.loadShader(shaderType, props);\n    }\n    /**\n     * Create a new Dynamic Shader controller\n     *\n     * @remarks\n     * A Dynamic Shader is a shader that can be composed of an array of mulitple\n     * effects. Each effect can be animated or changed after creation (provided\n     * the effect is given a name).\n     *\n     * Example:\n     * ```ts\n     * renderer.createNode({\n     *   shader: renderer.createDynamicShader([\n     *     renderer.createEffect('radius', {\n     *       radius: 0\n     *     }, 'effect1'),\n     *     renderer.createEffect('border', {\n     *       color: 0xff00ffff,\n     *       width: 10,\n     *     }, 'effect2'),\n     *   ]),\n     * });\n     * ```\n     *\n     * @param effects\n     * @returns\n     */\n    createDynamicShader(effects) {\n        return this.stage.shManager.loadDynamicShader({\n            effects: effects,\n        });\n    }\n    /**\n     * Create an effect to be used in a Dynamic Shader\n     *\n     * @remark\n     * The {name} parameter is optional but required if you want to animate the effect\n     * or change the effect's properties after creation.\n     *\n     * See {@link createDynamicShader} for an example.\n     *\n     * @param type\n     * @param props\n     * @param name\n     * @returns\n     */\n    createEffect(type, props, name) {\n        return {\n            name,\n            type,\n            props,\n        };\n    }\n    /**\n     * Get a Node by its ID\n     *\n     * @param id\n     * @returns\n     */\n    getNodeById(id) {\n        const root = this.stage?.root;\n        if (!root) {\n            return null;\n        }\n        const findNode = (node) => {\n            if (node.id === id) {\n                return node;\n            }\n            for (const child of node.children) {\n                const found = findNode(child);\n                if (found) {\n                    return found;\n                }\n            }\n            return null;\n        };\n        return findNode(root);\n    }\n    toggleFreeze() {\n        throw new Error('Not implemented');\n    }\n    advanceFrame() {\n        throw new Error('Not implemented');\n    }\n    getBufferInfo() {\n        return this.stage.renderer.getBufferInfo();\n    }\n    /**\n     * Re-render the current frame without advancing any running animations.\n     *\n     * @remarks\n     * Any state changes will be reflected in the re-rendered frame. Useful for\n     * debugging.\n     *\n     * May not do anything if the render loop is running on a separate worker.\n     */\n    rerender() {\n        throw new Error('Not implemented');\n    }\n    /**\n     * Sets the clear color for the stage.\n     *\n     * @param color - The color to set as the clear color.\n     */\n    setClearColor(color) {\n        this.stage.setClearColor(color);\n    }\n}\n//# sourceMappingURL=Renderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../../common/EventEmitter.js';\nexport class TrFontFace extends EventEmitter {\n    fontFamily;\n    descriptors;\n    loaded = false;\n    metrics = null;\n    constructor(options) {\n        super();\n        const { fontFamily, descriptors, metrics } = options;\n        if (metrics) {\n            // Normalize metrics to be in the range of 0 to 1\n            this.metrics = {\n                ascender: metrics.ascender / metrics.unitsPerEm,\n                descender: metrics.descender / metrics.unitsPerEm,\n                lineGap: metrics.lineGap / metrics.unitsPerEm,\n            };\n        }\n        this.fontFamily = fontFamily;\n        this.descriptors = {\n            style: 'normal',\n            weight: 'normal',\n            stretch: 'normal',\n            ...descriptors,\n        };\n    }\n    /**\n     * Convert a TrFontFaceDescriptors to a FontFaceDescriptors which differ slightly\n     *\n     * @param descriptors\n     * @returns\n     */\n    static convertToCssFontFaceDescriptors(descriptors) {\n        return {\n            style: descriptors.style,\n            weight: typeof descriptors.weight === 'number'\n                ? `${descriptors.weight}`\n                : descriptors.weight,\n            stretch: descriptors.stretch,\n            unicodeRange: descriptors.unicodeRange,\n            featureSettings: descriptors.featureSettings,\n            display: descriptors.display,\n        };\n    }\n}\n//# sourceMappingURL=TrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TrFontFace, } from './TrFontFace.js';\nexport class WebTrFontFace extends TrFontFace {\n    fontFace;\n    fontUrl;\n    constructor(options) {\n        super(options);\n        const { fontFamily, fontUrl } = options;\n        // Filter out parentheses from fontUrl\n        const fontUrlWithoutParentheses = fontUrl.replace(/\\(|\\)/g, '');\n        // Defaults for descriptors resolved in the super constructor\n        const determinedDescriptors = this.descriptors;\n        // Convert TrFontFaceDescriptors to CSS FontFaceDescriptors\n        const cssDescriptors = {\n            style: determinedDescriptors.style,\n            weight: typeof determinedDescriptors.weight === 'number'\n                ? `${determinedDescriptors.weight}`\n                : determinedDescriptors.weight,\n            stretch: determinedDescriptors.stretch,\n            unicodeRange: determinedDescriptors.unicodeRange,\n            featureSettings: determinedDescriptors.featureSettings,\n            display: determinedDescriptors.display,\n        };\n        const fontFace = new FontFace(fontFamily, `url(${fontUrlWithoutParentheses})`, cssDescriptors);\n        if (fontUrlWithoutParentheses.length > 0) {\n            fontFace\n                .load()\n                .then(() => {\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n                this.loaded = true;\n                this.emit('loaded');\n            })\n                .catch(console.error);\n        }\n        else {\n            // Default font\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.loaded = true;\n            this.emit('loaded');\n        }\n        this.fontFace = fontFace;\n        this.fontUrl = fontUrl;\n    }\n}\n//# sourceMappingURL=WebTrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreRenderOp {\n}\n//# sourceMappingURL=CoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreRenderOp } from '../CoreRenderOp.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\n/**\n * Can render multiple quads with multiple textures (up to vertex shader texture limit)\n *\n */\nexport class WebGlCoreRenderOp extends CoreRenderOp {\n    glw;\n    options;\n    buffers;\n    shader;\n    shaderProps;\n    alpha;\n    clippingRect;\n    dimensions;\n    bufferIdx;\n    zIndex;\n    renderToTexture;\n    parentHasRenderTexture;\n    framebufferDimensions;\n    length = 0;\n    numQuads = 0;\n    textures = [];\n    maxTextures;\n    constructor(glw, options, buffers, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, zIndex, renderToTexture, parentHasRenderTexture, framebufferDimensions) {\n        super();\n        this.glw = glw;\n        this.options = options;\n        this.buffers = buffers;\n        this.shader = shader;\n        this.shaderProps = shaderProps;\n        this.alpha = alpha;\n        this.clippingRect = clippingRect;\n        this.dimensions = dimensions;\n        this.bufferIdx = bufferIdx;\n        this.zIndex = zIndex;\n        this.renderToTexture = renderToTexture;\n        this.parentHasRenderTexture = parentHasRenderTexture;\n        this.framebufferDimensions = framebufferDimensions;\n        this.maxTextures = shader.supportsIndexedTextures\n            ? glw.getParameter(glw.MAX_VERTEX_TEXTURE_IMAGE_UNITS)\n            : 1;\n    }\n    addTexture(texture) {\n        const { textures, maxTextures } = this;\n        let existingIdx = -1;\n        const texturesLength = textures.length;\n        for (let i = 0; i < texturesLength; i++) {\n            const t = textures[i];\n            if (t === texture) {\n                existingIdx = i;\n                break;\n            }\n        }\n        if (existingIdx !== -1) {\n            return existingIdx;\n        }\n        if (texturesLength >= maxTextures) {\n            return 0xffffffff;\n        }\n        this.textures.push(texture);\n        return texturesLength;\n    }\n    draw() {\n        const { glw, shader, shaderProps, options } = this;\n        const { shManager } = options;\n        shManager.useShader(shader);\n        shader.bindRenderOp(this, shaderProps);\n        // TODO: Reduce calculations required\n        const quadIdx = (this.bufferIdx / 24) * 6 * 2;\n        // Clipping\n        if (this.clippingRect.valid) {\n            const { x, y, width, height } = this.clippingRect;\n            const pixelRatio = this.parentHasRenderTexture ? 1 : options.pixelRatio;\n            const canvasHeight = options.canvas.height;\n            const clipX = Math.round(x * pixelRatio);\n            const clipWidth = Math.round(width * pixelRatio);\n            const clipHeight = Math.round(height * pixelRatio);\n            let clipY = Math.round(canvasHeight - clipHeight - y * pixelRatio);\n            // if parent has render texture, we need to adjust the scissor rect\n            // to be relative to the parent's framebuffer\n            if (this.parentHasRenderTexture) {\n                clipY = this.framebufferDimensions\n                    ? this.framebufferDimensions.height - this.dimensions.height\n                    : 0;\n            }\n            glw.setScissorTest(true);\n            glw.scissor(clipX, clipY, clipWidth, clipHeight);\n        }\n        else {\n            glw.setScissorTest(false);\n        }\n        glw.drawElements(glw.TRIANGLES, 6 * this.numQuads, glw.UNSIGNED_SHORT, quadIdx);\n    }\n}\n//# sourceMappingURL=WebGlCoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Get device specific webgl parameters\n * @param glw\n */\nexport function getWebGlParameters(glw) {\n    const params = {\n        MAX_RENDERBUFFER_SIZE: 0,\n        MAX_TEXTURE_SIZE: 0,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-explicit-any\n        MAX_VIEWPORT_DIMS: 0, // Code below will replace this with an Int32Array\n        MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,\n        MAX_VERTEX_ATTRIBS: 0,\n        MAX_VARYING_VECTORS: 0,\n        MAX_VERTEX_UNIFORM_VECTORS: 0,\n        MAX_FRAGMENT_UNIFORM_VECTORS: 0,\n    };\n    // Map over all parameters and get them\n    const keys = Object.keys(params);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        params[key] = glw.getParameter(glw[key]);\n    });\n    return params;\n}\n/**\n * Get device webgl extensions\n * @param glw\n */\nexport function getWebGlExtensions(glw) {\n    const extensions = {\n        ANGLE_instanced_arrays: null,\n        WEBGL_compressed_texture_s3tc: null,\n        WEBGL_compressed_texture_astc: null,\n        WEBGL_compressed_texture_etc: null,\n        WEBGL_compressed_texture_etc1: null,\n        WEBGL_compressed_texture_pvrtc: null,\n        WEBKIT_WEBGL_compressed_texture_pvrtc: null,\n        WEBGL_compressed_texture_s3tc_srgb: null,\n        OES_vertex_array_object: null,\n    };\n    // Map over all extensions and get them\n    const keys = Object.keys(extensions);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        extensions[key] = glw.getExtension(key);\n    });\n    return extensions;\n}\n/**\n * Allocate big memory chunk that we\n * can re-use to draw quads\n *\n * @param glw\n * @param size\n */\nexport function createIndexBuffer(glw, size) {\n    const maxQuads = ~~(size / 80);\n    const indices = new Uint16Array(maxQuads * 6);\n    for (let i = 0, j = 0; i < maxQuads; i += 6, j += 4) {\n        indices[i] = j;\n        indices[i + 1] = j + 1;\n        indices[i + 2] = j + 2;\n        indices[i + 3] = j + 2;\n        indices[i + 4] = j + 1;\n        indices[i + 5] = j + 3;\n    }\n    const buffer = glw.createBuffer();\n    glw.elementArrayBufferData(buffer, indices, glw.STATIC_DRAW);\n}\n/**\n * Checks if an object is of type HTMLImageElement.\n * This is used because we cant check for HTMLImageElement directly when the\n * renderer is running in a seperate web worker context.\n *\n * @param obj\n * @returns\n */\nexport function isHTMLImageElement(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        obj.constructor &&\n        obj.constructor.name === 'HTMLImageElement');\n}\n//# sourceMappingURL=RendererUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../utils.js';\nimport { isPowerOfTwo } from '../../utils.js';\nimport { CoreContextTexture } from '../CoreContextTexture.js';\nimport { isHTMLImageElement } from './internal/RendererUtils.js';\nconst TRANSPARENT_TEXTURE_DATA = new Uint8Array([0, 0, 0, 0]);\n/**\n * A wrapper around a WebGLTexture that handles loading the texture data\n * from a Texture source and uploading it to the GPU as well as freeing\n * the uploaded texture.\n *\n * @remarks\n * When accessing the ctxTexture property, the texture will be loaded if\n * it hasn't been already. ctxTexture will always return a valid WebGLTexture\n * and trigger the loading/uploading of the texture's data if it hasn't been\n * loaded yet.\n */\nexport class WebGlCoreCtxTexture extends CoreContextTexture {\n    glw;\n    _nativeCtxTexture = null;\n    _state = 'freed';\n    _w = 0;\n    _h = 0;\n    constructor(glw, memManager, textureSource) {\n        super(memManager, textureSource);\n        this.glw = glw;\n    }\n    get ctxTexture() {\n        if (this._state === 'freed') {\n            this.load();\n        }\n        assertTruthy(this._nativeCtxTexture);\n        return this._nativeCtxTexture;\n    }\n    get w() {\n        return this._w;\n    }\n    get h() {\n        return this._h;\n    }\n    /**\n     * Load the texture data from the Texture source and upload it to the GPU\n     *\n     * @remarks\n     * This method is called automatically when accessing the ctxTexture property\n     * if the texture hasn't been loaded yet. But it can also be called manually\n     * to force the texture to be pre-loaded prior to accessing the ctxTexture\n     * property.\n     */\n    load() {\n        // If the texture is already loading or loaded, don't load it again.\n        if (this._state === 'loading' || this._state === 'loaded') {\n            return;\n        }\n        this._state = 'loading';\n        this.textureSource.setState('loading');\n        this._nativeCtxTexture = this.createNativeCtxTexture();\n        if (this._nativeCtxTexture === null) {\n            this._state = 'failed';\n            this.textureSource.setState('failed', new Error('Could not create WebGL Texture'));\n            console.error('Could not create WebGL Texture');\n            return;\n        }\n        this.onLoadRequest()\n            .then(({ width, height }) => {\n            // If the texture has been freed while loading, return early.\n            if (this._state === 'freed') {\n                return;\n            }\n            this._state = 'loaded';\n            this._w = width;\n            this._h = height;\n            // Update the texture source's width and height so that it can be used\n            // for rendering.\n            this.textureSource.setState('loaded', { width, height });\n        })\n            .catch((err) => {\n            // If the texture has been freed while loading, return early.\n            if (this._state === 'freed') {\n                return;\n            }\n            this._state = 'failed';\n            this.textureSource.setState('failed', err);\n            console.error(err);\n        });\n    }\n    /**\n     * Called when the texture data needs to be loaded and uploaded to a texture\n     */\n    async onLoadRequest() {\n        const { glw } = this;\n        // Set to a 1x1 transparent texture\n        glw.texImage2D(0, glw.RGBA, 1, 1, 0, glw.RGBA, glw.UNSIGNED_BYTE, null);\n        this.setTextureMemUse(TRANSPARENT_TEXTURE_DATA.byteLength);\n        const textureData = await this.textureSource?.getTextureData();\n        // If the texture has been freed while loading, return early.\n        if (!this._nativeCtxTexture) {\n            assertTruthy(this._state === 'freed');\n            return { width: 0, height: 0 };\n        }\n        let width = 0;\n        let height = 0;\n        assertTruthy(this._nativeCtxTexture);\n        glw.activeTexture(0);\n        // If textureData is null, the texture is empty (0, 0) and we don't need to\n        // upload any data to the GPU.\n        if ((typeof ImageBitmap !== 'undefined' &&\n            textureData.data instanceof ImageBitmap) ||\n            textureData.data instanceof ImageData ||\n            // not using typeof HTMLImageElement due to web worker\n            isHTMLImageElement(textureData.data)) {\n            const data = textureData.data;\n            width = data.width;\n            height = data.height;\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.pixelStorei(glw.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!textureData.premultiplyAlpha);\n            glw.texImage2D(0, glw.RGBA, glw.RGBA, glw.UNSIGNED_BYTE, data);\n            this.setTextureMemUse(width * height * 4);\n            // generate mipmaps for power-of-2 textures or in WebGL2RenderingContext\n            if (glw.isWebGl2() || (isPowerOfTwo(width) && isPowerOfTwo(height))) {\n                glw.generateMipmap();\n            }\n        }\n        else if (textureData.data === null) {\n            width = 0;\n            height = 0;\n            // Reset to a 1x1 transparent texture\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.texImage2D(0, glw.RGBA, 1, 1, 0, glw.RGBA, glw.UNSIGNED_BYTE, TRANSPARENT_TEXTURE_DATA);\n            this.setTextureMemUse(TRANSPARENT_TEXTURE_DATA.byteLength);\n        }\n        else if ('mipmaps' in textureData.data && textureData.data.mipmaps) {\n            const { mipmaps, width = 0, height = 0, type, glInternalFormat, } = textureData.data;\n            const view = type === 'ktx'\n                ? new DataView(mipmaps[0] ?? new ArrayBuffer(0))\n                : mipmaps[0];\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.compressedTexImage2D(0, glInternalFormat, width, height, 0, view);\n            glw.texParameteri(glw.TEXTURE_WRAP_S, glw.CLAMP_TO_EDGE);\n            glw.texParameteri(glw.TEXTURE_WRAP_T, glw.CLAMP_TO_EDGE);\n            glw.texParameteri(glw.TEXTURE_MAG_FILTER, glw.LINEAR);\n            glw.texParameteri(glw.TEXTURE_MIN_FILTER, glw.LINEAR);\n            this.setTextureMemUse(view.byteLength);\n        }\n        else if (textureData.data && textureData.data instanceof Uint8Array) {\n            // Color Texture\n            width = 1;\n            height = 1;\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.pixelStorei(glw.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!textureData.premultiplyAlpha);\n            glw.texImage2D(0, glw.RGBA, width, height, 0, glw.RGBA, glw.UNSIGNED_BYTE, textureData.data);\n            this.setTextureMemUse(width * height * 4);\n        }\n        else {\n            console.error(`WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned`, textureData);\n        }\n        return {\n            width,\n            height,\n        };\n    }\n    /**\n     * Free the WebGLTexture from the GPU\n     *\n     * @returns\n     */\n    free() {\n        if (this._state === 'freed') {\n            return;\n        }\n        this._state = 'freed';\n        this.textureSource.setState('freed');\n        this._w = 0;\n        this._h = 0;\n        if (!this._nativeCtxTexture) {\n            return;\n        }\n        const { glw } = this;\n        glw.deleteTexture(this._nativeCtxTexture);\n        this.setTextureMemUse(0);\n        this._nativeCtxTexture = null;\n    }\n    /**\n     * Create native context texture\n     *\n     * @remarks\n     * When this method returns the returned texture will be bound to the GL context state.\n     *\n     * @param width\n     * @param height\n     * @returns\n     */\n    createNativeCtxTexture() {\n        const { glw } = this;\n        const nativeTexture = glw.createTexture();\n        if (!nativeTexture) {\n            return null;\n        }\n        // On initial load request, create a 1x1 transparent texture to use until\n        // the texture data is finally loaded.\n        glw.activeTexture(0);\n        glw.bindTexture(nativeTexture);\n        // linear texture filtering\n        glw.texParameteri(glw.TEXTURE_MAG_FILTER, glw.LINEAR);\n        glw.texParameteri(glw.TEXTURE_MIN_FILTER, glw.LINEAR);\n        // texture wrapping method\n        glw.texParameteri(glw.TEXTURE_WRAP_S, glw.CLAMP_TO_EDGE);\n        glw.texParameteri(glw.TEXTURE_WRAP_T, glw.CLAMP_TO_EDGE);\n        return nativeTexture;\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nexport class WebGlCoreCtxSubTexture extends WebGlCoreCtxTexture {\n    constructor(glw, memManager, textureSource) {\n        super(glw, memManager, textureSource);\n    }\n    async onLoadRequest() {\n        const props = await this.textureSource.getTextureData();\n        if (props.data instanceof Uint8Array) {\n            // its a 1x1 Color Texture\n            return { width: 1, height: 1 };\n        }\n        return {\n            width: props.data?.width || 0,\n            height: props.data?.height || 0,\n        };\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxSubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Represents a collection of WebGL Buffers along with their associated\n * vertex attribute formats.\n */\nexport class BufferCollection {\n    config;\n    constructor(config) {\n        this.config = config;\n    }\n    /**\n     * Get the WebGLBuffer associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getBuffer(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])?.buffer;\n    }\n    /**\n     * Get the AttributeInfo associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getAttributeInfo(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])\n            ?.attributes[attributeName];\n    }\n}\n//# sourceMappingURL=BufferCollection.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Generic WebGL Utility Functions\n *\n * @remarks\n * Nothing here should be coupled to Renderer logic / types.\n *\n * @param gl\n * @returns\n */\nexport function isWebGl2(gl) {\n    return (self.WebGL2RenderingContext && gl instanceof self.WebGL2RenderingContext);\n}\n//# sourceMappingURL=WebGlUtils.js.map","/* eslint-disable @typescript-eslint/no-unsafe-return */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unsafe-argument */\nimport { assertTruthy } from '../../utils.js';\nimport { isWebGl2 } from '../renderers/webgl/internal/WebGlUtils.js';\n/**\n * Optimized WebGL Context Wrapper\n *\n * @remarks\n * This class contains the subset of the WebGLRenderingContext & WebGL2RenderingContext\n * API that is used by the renderer. Select high volume WebGL methods include\n * caching optimizations to avoid making WebGL calls if the state is already set\n * to the desired value.\n *\n * While most methods contained are direct passthroughs to the WebGL context,\n * some methods combine multiple WebGL calls into one for convenience, modify\n * arguments to be more convenient, or are replaced by more specific methods.\n *\n * Not all methods are optimized. Only methods that are called frequently\n * and/or have a high cost are optimized.\n *\n * A subset of GLenum constants are also exposed as properties on this class\n * for convenience.\n */\nexport class WebGlContextWrapper {\n    gl;\n    //#region Cached WebGL State\n    activeTextureUnit = 0;\n    texture2dUnits;\n    texture2dParams = new WeakMap();\n    scissorEnabled;\n    scissorX;\n    scissorY;\n    scissorWidth;\n    scissorHeight;\n    blendEnabled;\n    blendSrcRgb;\n    blendDstRgb;\n    blendSrcAlpha;\n    blendDstAlpha;\n    boundArrayBuffer;\n    boundElementArrayBuffer;\n    curProgram;\n    //#endregion Cached WebGL State\n    //#region Canvas\n    canvas;\n    //#endregion Canvas\n    //#region WebGL Enums\n    MAX_RENDERBUFFER_SIZE;\n    MAX_TEXTURE_SIZE;\n    MAX_VIEWPORT_DIMS;\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n    MAX_TEXTURE_IMAGE_UNITS;\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS;\n    MAX_VERTEX_ATTRIBS;\n    MAX_VARYING_VECTORS;\n    MAX_VERTEX_UNIFORM_VECTORS;\n    MAX_FRAGMENT_UNIFORM_VECTORS;\n    TEXTURE_MAG_FILTER;\n    TEXTURE_MIN_FILTER;\n    TEXTURE_WRAP_S;\n    TEXTURE_WRAP_T;\n    LINEAR;\n    CLAMP_TO_EDGE;\n    RGBA;\n    UNSIGNED_BYTE;\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL;\n    UNPACK_FLIP_Y_WEBGL;\n    FLOAT;\n    TRIANGLES;\n    UNSIGNED_SHORT;\n    ONE;\n    ONE_MINUS_SRC_ALPHA;\n    VERTEX_SHADER;\n    FRAGMENT_SHADER;\n    STATIC_DRAW;\n    COMPILE_STATUS;\n    LINK_STATUS;\n    DYNAMIC_DRAW;\n    COLOR_ATTACHMENT0;\n    INVALID_ENUM;\n    INVALID_OPERATION;\n    //#endregion WebGL Enums\n    constructor(gl) {\n        this.gl = gl;\n        // The following code extracts the current state of the WebGL context\n        // to our local JavaScript cached version of it. This is so we can\n        // avoid making WebGL calls if we don't need to.\n        // We could assume that the WebGL context is in a default state, but\n        // in the future we may want to support restoring a broken WebGL context\n        // and this will help with that.\n        this.activeTextureUnit =\n            gl.getParameter(gl.ACTIVE_TEXTURE) - gl.TEXTURE0;\n        const maxTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        // save current texture units\n        this.texture2dUnits = new Array(maxTextureUnits)\n            .fill(undefined)\n            .map((_, i) => {\n            this.activeTexture(i);\n            return gl.getParameter(gl.TEXTURE_BINDING_2D);\n        });\n        // restore active texture unit\n        this.activeTexture(this.activeTextureUnit);\n        this.scissorEnabled = gl.isEnabled(gl.SCISSOR_TEST);\n        const scissorBox = gl.getParameter(gl.SCISSOR_BOX);\n        this.scissorX = scissorBox[0];\n        this.scissorY = scissorBox[1];\n        this.scissorWidth = scissorBox[2];\n        this.scissorHeight = scissorBox[3];\n        this.blendEnabled = gl.isEnabled(gl.BLEND);\n        this.blendSrcRgb = gl.getParameter(gl.BLEND_SRC_RGB);\n        this.blendDstRgb = gl.getParameter(gl.BLEND_DST_RGB);\n        this.blendSrcAlpha = gl.getParameter(gl.BLEND_SRC_ALPHA);\n        this.blendDstAlpha = gl.getParameter(gl.BLEND_DST_ALPHA);\n        this.boundArrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);\n        this.boundElementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);\n        this.curProgram = gl.getParameter(gl.CURRENT_PROGRAM);\n        this.canvas = gl.canvas;\n        // Extract GLenums\n        this.MAX_RENDERBUFFER_SIZE = gl.MAX_RENDERBUFFER_SIZE;\n        this.MAX_TEXTURE_SIZE = gl.MAX_TEXTURE_SIZE;\n        this.MAX_VIEWPORT_DIMS = gl.MAX_VIEWPORT_DIMS;\n        this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        this.MAX_TEXTURE_IMAGE_UNITS = gl.MAX_TEXTURE_IMAGE_UNITS;\n        this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS;\n        this.MAX_VERTEX_ATTRIBS = gl.MAX_VERTEX_ATTRIBS;\n        this.MAX_VARYING_VECTORS = gl.MAX_VARYING_VECTORS;\n        this.MAX_VERTEX_UNIFORM_VECTORS = gl.MAX_VERTEX_UNIFORM_VECTORS;\n        this.MAX_FRAGMENT_UNIFORM_VECTORS = gl.MAX_FRAGMENT_UNIFORM_VECTORS;\n        this.TEXTURE_MAG_FILTER = gl.TEXTURE_MAG_FILTER;\n        this.TEXTURE_MIN_FILTER = gl.TEXTURE_MIN_FILTER;\n        this.TEXTURE_WRAP_S = gl.TEXTURE_WRAP_S;\n        this.TEXTURE_WRAP_T = gl.TEXTURE_WRAP_T;\n        this.LINEAR = gl.LINEAR;\n        this.CLAMP_TO_EDGE = gl.CLAMP_TO_EDGE;\n        this.RGBA = gl.RGBA;\n        this.UNSIGNED_BYTE = gl.UNSIGNED_BYTE;\n        this.UNPACK_PREMULTIPLY_ALPHA_WEBGL = gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL;\n        this.UNPACK_FLIP_Y_WEBGL = gl.UNPACK_FLIP_Y_WEBGL;\n        this.FLOAT = gl.FLOAT;\n        this.TRIANGLES = gl.TRIANGLES;\n        this.UNSIGNED_SHORT = gl.UNSIGNED_SHORT;\n        this.ONE = gl.ONE;\n        this.ONE_MINUS_SRC_ALPHA = gl.ONE_MINUS_SRC_ALPHA;\n        this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        this.TRIANGLES = gl.TRIANGLES;\n        this.UNSIGNED_SHORT = gl.UNSIGNED_SHORT;\n        this.VERTEX_SHADER = gl.VERTEX_SHADER;\n        this.FRAGMENT_SHADER = gl.FRAGMENT_SHADER;\n        this.STATIC_DRAW = gl.STATIC_DRAW;\n        this.COMPILE_STATUS = gl.COMPILE_STATUS;\n        this.LINK_STATUS = gl.LINK_STATUS;\n        this.DYNAMIC_DRAW = gl.DYNAMIC_DRAW;\n        this.COLOR_ATTACHMENT0 = gl.COLOR_ATTACHMENT0;\n        this.INVALID_ENUM = gl.INVALID_ENUM;\n        this.INVALID_OPERATION = gl.INVALID_OPERATION;\n    }\n    /**\n     * Returns true if the WebGL context is WebGL2\n     *\n     * @returns\n     */\n    isWebGl2() {\n        return isWebGl2(this.gl);\n    }\n    /**\n     * ```\n     * gl.activeTexture(textureUnit + gl.TEXTURE0);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: `textureUnit` is based from 0, not `gl.TEXTURE0`.\n     *\n     * @param textureUnit\n     */\n    activeTexture(textureUnit) {\n        const { gl } = this;\n        if (this.activeTextureUnit !== textureUnit) {\n            gl.activeTexture(textureUnit + gl.TEXTURE0);\n            this.activeTextureUnit = textureUnit;\n        }\n    }\n    /**\n     * ```\n     * gl.bindTexture(gl.TEXTURE_2D, texture);\n     * ```\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     *\n     * @param texture\n     */\n    bindTexture(texture) {\n        const { gl, activeTextureUnit, texture2dUnits } = this;\n        if (texture2dUnits[activeTextureUnit] === texture) {\n            return;\n        }\n        texture2dUnits[activeTextureUnit] = texture;\n        gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    }\n    _getActiveTexture() {\n        const { activeTextureUnit, texture2dUnits } = this;\n        return texture2dUnits[activeTextureUnit];\n    }\n    /**\n     * ```\n     * gl.texParameteri(gl.TEXTURE_2D, pname, param);\n     * ```\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     *\n     * @param pname\n     * @param param\n     * @returns\n     */\n    texParameteri(pname, param) {\n        const { gl, texture2dParams } = this;\n        const activeTexture = this._getActiveTexture();\n        if (!activeTexture) {\n            throw new Error('No active texture');\n        }\n        let textureParams = texture2dParams.get(activeTexture);\n        if (!textureParams) {\n            textureParams = {};\n            texture2dParams.set(activeTexture, textureParams);\n        }\n        if (textureParams[pname] === param) {\n            return;\n        }\n        textureParams[pname] = param;\n        gl.texParameteri(gl.TEXTURE_2D, pname, param);\n    }\n    texImage2D(level, internalFormat, widthOrFormat, heightOrType, borderOrSource, format, type, pixels) {\n        const { gl } = this;\n        if (format) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, widthOrFormat, heightOrType, borderOrSource, format, type, pixels);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, widthOrFormat, heightOrType, borderOrSource);\n        }\n    }\n    /**\n     * ```\n     * gl.compressedTexImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, data);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     */\n    compressedTexImage2D(level, internalformat, width, height, border, data) {\n        const { gl } = this;\n        gl.compressedTexImage2D(gl.TEXTURE_2D, level, internalformat, width, height, border, data);\n    }\n    /**\n     * ```\n     * gl.pixelStorei(pname, param);\n     * ```\n     *\n     * @param pname\n     * @param param\n     */\n    pixelStorei(pname, param) {\n        const { gl } = this;\n        gl.pixelStorei(pname, param);\n    }\n    /**\n     * ```\n     * gl.generateMipmap(gl.TEXTURE_2D);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     */\n    generateMipmap() {\n        const { gl } = this;\n        gl.generateMipmap(gl.TEXTURE_2D);\n    }\n    /**\n     * ```\n     * gl.createTexture();\n     * ```\n     *\n     * @returns\n     */\n    createTexture() {\n        const { gl } = this;\n        return gl.createTexture();\n    }\n    /**\n     * ```\n     * gl.deleteTexture(texture);\n     * ```\n     *\n     * @param texture\n     */\n    deleteTexture(texture) {\n        const { gl } = this;\n        if (texture) {\n            this.texture2dParams.delete(texture);\n        }\n        gl.deleteTexture(texture);\n    }\n    /**\n     * ```\n     * gl.viewport(x, y, width, height);\n     * ```\n     */\n    viewport(x, y, width, height) {\n        const { gl } = this;\n        gl.viewport(x, y, width, height);\n    }\n    /**\n     * ```\n     * gl.clearColor(red, green, blue, alpha);\n     * ```\n     *\n     * @param red\n     * @param green\n     * @param blue\n     * @param alpha\n     */\n    clearColor(red, green, blue, alpha) {\n        const { gl } = this;\n        gl.clearColor(red, green, blue, alpha);\n    }\n    /**\n     * ```\n     * gl[\"enable\"|\"disable\"](gl.SCISSOR_TEST);\n     * ```\n     * @param enable\n     */\n    setScissorTest(enable) {\n        const { gl, scissorEnabled } = this;\n        if (enable === scissorEnabled) {\n            return;\n        }\n        if (enable) {\n            gl.enable(gl.SCISSOR_TEST);\n        }\n        else {\n            gl.disable(gl.SCISSOR_TEST);\n        }\n        this.scissorEnabled = enable;\n    }\n    /**\n     * ```\n     * gl.scissor(x, y, width, height);\n     * ```\n     *\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    scissor(x, y, width, height) {\n        const { gl, scissorX, scissorY, scissorWidth, scissorHeight } = this;\n        if (x !== scissorX ||\n            y !== scissorY ||\n            width !== scissorWidth ||\n            height !== scissorHeight) {\n            gl.scissor(x, y, width, height);\n            this.scissorX = x;\n            this.scissorY = y;\n            this.scissorWidth = width;\n            this.scissorHeight = height;\n        }\n    }\n    /**\n     * ```\n     * gl[\"enable\"|\"disable\"](gl.BLEND);\n     * ```\n     *\n     * @param blend\n     * @returns\n     */\n    setBlend(blend) {\n        const { gl, blendEnabled } = this;\n        if (blend === blendEnabled) {\n            return;\n        }\n        if (blend) {\n            gl.enable(gl.BLEND);\n        }\n        else {\n            gl.disable(gl.BLEND);\n        }\n        this.blendEnabled = blend;\n    }\n    /**\n     * ```\n     * gl.blendFunc(src, dst);\n     * ```\n     *\n     * @param src\n     * @param dst\n     */\n    blendFunc(src, dst) {\n        const { gl, blendSrcRgb, blendDstRgb, blendSrcAlpha, blendDstAlpha } = this;\n        if (src !== blendSrcRgb ||\n            dst !== blendDstRgb ||\n            src !== blendSrcAlpha ||\n            dst !== blendDstAlpha) {\n            gl.blendFunc(src, dst);\n            this.blendSrcRgb = src;\n            this.blendDstRgb = dst;\n            this.blendSrcAlpha = src;\n            this.blendDstAlpha = dst;\n        }\n    }\n    /**\n     * ```\n     * gl.createBuffer();\n     * ```\n     *\n     * @returns\n     */\n    createBuffer() {\n        const { gl } = this;\n        return gl.createBuffer();\n    }\n    /**\n     * ```\n     * gl.createFramebuffer();\n     * ```\n     * @returns\n     */\n    createFramebuffer() {\n        const { gl } = this;\n        return gl.createFramebuffer();\n    }\n    /**\n     * ```\n     * gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n     * ```\n     *\n     * @param framebuffer\n     */\n    bindFramebuffer(framebuffer) {\n        const { gl } = this;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    }\n    /**\n     * ```\n     * gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n     * ```\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.FRAMEBUFFER` and textarget is always `gl.TEXTURE_2D`\n     */\n    framebufferTexture2D(attachment, texture, level) {\n        const { gl } = this;\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, texture, level);\n    }\n    /**\n     * ```\n     * gl.clear(gl.COLOR_BUFFER_BIT);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Clear mask is always `gl.COLOR_BUFFER_BIT`\n     */\n    clear() {\n        const { gl } = this;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n     * gl.bufferData(gl.ARRAY_BUFFER, data, usage);\n     * ```\n     *\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.bufferData` are combined into one function.\n     *\n     * @param buffer\n     * @param data\n     * @param usage\n     */\n    arrayBufferData(buffer, data, usage) {\n        const { gl, boundArrayBuffer } = this;\n        if (boundArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            this.boundArrayBuffer = buffer;\n        }\n        gl.bufferData(gl.ARRAY_BUFFER, data, usage);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n     * gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, usage);\n     * ```\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.bufferData` are combined into one function.\n     *\n     * @param buffer\n     * @param data\n     * @param usage\n     */\n    elementArrayBufferData(buffer, data, usage) {\n        const { gl, boundElementArrayBuffer } = this;\n        if (boundElementArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n            this.boundElementArrayBuffer = buffer;\n        }\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, usage);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n     * gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n     * ```\n     *\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.vertexAttribPointer` are combined into one function.\n     *\n     * @param buffer\n     * @param index\n     * @param size\n     * @param type\n     * @param normalized\n     * @param stride\n     * @param offset\n     */\n    vertexAttribPointer(buffer, index, size, type, normalized, stride, offset) {\n        const { gl, boundArrayBuffer } = this;\n        if (boundArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            this.boundArrayBuffer = buffer;\n        }\n        gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n    }\n    /**\n     * ```\n     * gl.useProgram(program);\n     * ```\n     *\n     * @param program\n     * @returns\n     */\n    useProgram(program) {\n        const { gl, curProgram } = this;\n        if (curProgram === program) {\n            return;\n        }\n        gl.useProgram(program);\n        this.curProgram = program;\n    }\n    /**\n     * Sets the value of a single float uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The value to set.\n     */\n    uniform1f(location, v0) {\n        const { gl } = this;\n        gl.uniform1f(location, v0);\n    }\n    /**\n     * Sets the value of a float array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of values to set.\n     */\n    uniform1fv(location, value) {\n        const { gl } = this;\n        gl.uniform1fv(location, value);\n    }\n    /**\n     * Sets the value of a single integer uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The value to set.\n     */\n    uniform1i(location, v0) {\n        const { gl } = this;\n        gl.uniform1i(location, v0);\n    }\n    /**\n     * Sets the value of an integer array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of values to set.\n     */\n    uniform1iv(location, value) {\n        const { gl } = this;\n        gl.uniform1iv(location, value);\n    }\n    /**\n     * Sets the value of a vec2 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     */\n    uniform2f(location, v0, v1) {\n        const { gl } = this;\n        gl.uniform2f(location, v0, v1);\n    }\n    /**\n     * Sets the value of a vec2 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of vec2 values to set.\n     */\n    uniform2fv(location, value) {\n        const { gl } = this;\n        gl.uniform2fv(location, value);\n    }\n    /**\n     * Sets the value of a ivec2 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     */\n    uniform2i(location, v0, v1) {\n        const { gl } = this;\n        gl.uniform2i(location, v0, v1);\n    }\n    /**\n     * Sets the value of an ivec2 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of ivec2 values to set.\n     */\n    uniform2iv(location, value) {\n        const { gl } = this;\n        gl.uniform2iv(location, value);\n    }\n    /**\n     * Sets the value of a vec3 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     * @param v2 - The third component of the vector.\n     */\n    uniform3f(location, v0, v1, v2) {\n        const { gl } = this;\n        gl.uniform3f(location, v0, v1, v2);\n    }\n    /**\n     * Sets the value of a vec3 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of vec3 values to set.\n     */\n    uniform3fv(location, value) {\n        const { gl } = this;\n        gl.uniform3fv(location, value);\n    }\n    /**\n     * Sets the value of a ivec3 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     * @param v2 - The third component of the vector.\n     */\n    uniform3i(location, v0, v1, v2) {\n        const { gl } = this;\n        gl.uniform3i(location, v0, v1, v2);\n    }\n    /**\n     * Sets the value of an ivec3 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of ivec3 values to set.\n     */\n    uniform3iv(location, value) {\n        const { gl } = this;\n        gl.uniform3iv(location, value);\n    }\n    /**\n     * Sets the value of a vec4 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     * @param v2 - The third component of the vector.\n     * @param v3 - The fourth component of the vector.\n     */\n    uniform4f(location, v0, v1, v2, v3) {\n        const { gl } = this;\n        gl.uniform4f(location, v0, v1, v2, v3);\n    }\n    /**\n     * Sets the value of a vec4 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of vec4 values to set.\n     */\n    uniform4fv(location, value) {\n        const { gl } = this;\n        gl.uniform4fv(location, value);\n    }\n    /**\n     * Sets the value of a ivec4 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param v0 - The first component of the vector.\n     * @param v1 - The second component of the vector.\n     * @param v2 - The third component of the vector.\n     * @param v3 - The fourth component of the vector.\n     */\n    uniform4i(location, v0, v1, v2, v3) {\n        const { gl } = this;\n        gl.uniform4i(location, v0, v1, v2, v3);\n    }\n    /**\n     * Sets the value of an ivec4 array uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param value - The array of ivec4 values to set.\n     */\n    uniform4iv(location, value) {\n        const { gl } = this;\n        gl.uniform4iv(location, value);\n    }\n    /**\n     * Sets the value of a mat2 uniform variable.\n     *\n     * @param location - The location of the uniform variable.\n     * @param transpose - Whether to transpose the matrix.\n     * @param value - The array of mat2 values to set.\n     */\n    uniformMatrix2fv(location, value) {\n        const { gl } = this;\n        gl.uniformMatrix2fv(location, false, value);\n    }\n    /**\n     * Sets the value of a mat2 uniform variable.\n     * @param location - The location of the uniform variable.\n     * @param value - The array of mat2 values to set.\n     */\n    uniformMatrix3fv(location, value) {\n        const { gl } = this;\n        gl.uniformMatrix3fv(location, false, value);\n    }\n    /**\n     * Sets the value of a mat4 uniform variable.\n     * @param location - The location of the uniform variable.\n     * @param value - The array of mat4 values to set.\n     */\n    uniformMatrix4fv(location, value) {\n        const { gl } = this;\n        gl.uniformMatrix4fv(location, false, value);\n    }\n    /**\n     * ```\n     * gl.getParameter(pname);\n     * ```\n     *\n     * @param pname\n     * @returns\n     */\n    getParameter(pname) {\n        const { gl } = this;\n        return gl.getParameter(pname);\n    }\n    /**\n     * ```\n     * gl.drawElements(mode, count, type, offset);\n     * ```\n     *\n     * @param mode\n     * @param count\n     * @param type\n     * @param offset\n     */\n    drawElements(mode, count, type, offset) {\n        const { gl } = this;\n        gl.drawElements(mode, count, type, offset);\n    }\n    /**\n     * ```\n     * gl.drawArrays(mode, first, count);\n     * ```\n     *\n     * @param name\n     * @returns\n     */\n    getExtension(name) {\n        const { gl } = this;\n        return gl.getExtension(name);\n    }\n    /**\n     * ```\n     * gl.getError(type);\n     * ```\n     *\n     * @returns\n     */\n    getError() {\n        const { gl } = this;\n        return gl.getError();\n    }\n    /**\n     * ```\n     * gl.createVertexArray();\n     * ```\n     *\n     * @returns\n     */\n    createVertexArray() {\n        const { gl } = this;\n        assertTruthy(gl instanceof WebGL2RenderingContext);\n        return gl.createVertexArray();\n    }\n    /**\n     * ```\n     * gl.bindVertexArray(vertexArray);\n     * ```\n     *\n     * @param vertexArray\n     */\n    bindVertexArray(vertexArray) {\n        const { gl } = this;\n        assertTruthy(gl instanceof WebGL2RenderingContext);\n        gl.bindVertexArray(vertexArray);\n    }\n    /**\n     * ```\n     * gl.getAttribLocation(program, name);\n     * ```\n     *\n     * @param program\n     * @param name\n     * @returns\n     */\n    getAttribLocation(program, name) {\n        const { gl } = this;\n        return gl.getAttribLocation(program, name);\n    }\n    /**\n     * ```\n     * gl.getUniformLocation(program, name);\n     * ```\n     *\n     * @param program\n     * @param name\n     * @returns\n     */\n    getUniformLocation(program, name) {\n        const { gl } = this;\n        return gl.getUniformLocation(program, name);\n    }\n    /**\n     * ```\n     * gl.enableVertexAttribArray(index);\n     * ```\n     *\n     * @param index\n     */\n    enableVertexAttribArray(index) {\n        const { gl } = this;\n        gl.enableVertexAttribArray(index);\n    }\n    /**\n     * ```\n     * gl.disableVertexAttribArray(index);\n     * ```\n     *\n     * @param index\n     */\n    disableVertexAttribArray(index) {\n        const { gl } = this;\n        gl.disableVertexAttribArray(index);\n    }\n    /**\n     * ```\n     * gl.createShader(type);\n     * ```\n     *\n     * @param type\n     * @returns\n     */\n    createShader(type) {\n        const { gl } = this;\n        return gl.createShader(type);\n    }\n    /**\n     * ```\n     * gl.compileShader(shader);\n     * ```\n     *\n     * @param shader\n     * @returns\n     */\n    compileShader(shader) {\n        const { gl } = this;\n        gl.compileShader(shader);\n    }\n    /**\n     * ```\n     * gl.attachShader(program, shader);\n     * ```\n     *\n     * @param program\n     * @param shader\n     */\n    attachShader(program, shader) {\n        const { gl } = this;\n        gl.attachShader(program, shader);\n    }\n    /**\n     * ```\n     * gl.linkProgram(program);\n     * ```\n     *\n     * @param program\n     */\n    linkProgram(program) {\n        const { gl } = this;\n        gl.linkProgram(program);\n    }\n    /**\n     * ```\n     * gl.deleteProgram(shader);\n     * ```\n     *\n     * @param shader\n     */\n    deleteProgram(shader) {\n        const { gl } = this;\n        gl.deleteProgram(shader);\n    }\n    /**\n     * ```\n     * gl.getShaderParameter(shader, pname);\n     * ```\n     *\n     * @param shader\n     * @param pname\n     */\n    getShaderParameter(shader, pname) {\n        const { gl } = this;\n        return gl.getShaderParameter(shader, pname);\n    }\n    /**\n     * ```\n     * gl.getShaderInfoLog(shader);\n     * ```\n     *\n     * @param shader\n     */\n    getShaderInfoLog(shader) {\n        const { gl } = this;\n        return gl.getShaderInfoLog(shader);\n    }\n    /**\n     * ```\n     * gl.createProgram();\n     * ```\n     *\n     * @returns\n     */\n    createProgram() {\n        const { gl } = this;\n        return gl.createProgram();\n    }\n    /**\n     * ```\n     * gl.getProgramParameter(program, pname);\n     * ```\n     *\n     * @param program\n     * @param pname\n     * @returns\n     */\n    getProgramParameter(program, pname) {\n        const { gl } = this;\n        return gl.getProgramParameter(program, pname);\n    }\n    /**\n     * ```\n     * gl.getProgramInfoLog(program);\n     * ```\n     *\n     * @param program\n     * @returns\n     */\n    getProgramInfoLog(program) {\n        const { gl } = this;\n        return gl.getProgramInfoLog(program);\n    }\n    /**\n     * ```\n     * gl.shaderSource(shader, source);\n     * ```\n     *\n     * @param shader\n     * @param source\n     */\n    shaderSource(shader, source) {\n        const { gl } = this;\n        gl.shaderSource(shader, source);\n    }\n    /**\n     * ```\n     * gl.deleteShader(shader);\n     * ```\n     *\n     * @param shader\n     */\n    deleteShader(shader) {\n        const { gl } = this;\n        gl.deleteShader(shader);\n    }\n}\n/**\n * Compare two arrays for equality.\n *\n * @remarks\n * This function will not try to compare nested arrays or Float32Arrays and\n * instead will always return false when they are encountered.\n *\n * @param a\n * @param b\n * @returns\n */\nexport function compareArrays(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    let result = false;\n    for (let i = 0; i < a.length; i++) {\n        if (Array.isArray(a[i]) || a[i] instanceof Float32Array) {\n            result = false;\n            break;\n        }\n        if (a[i] !== b[i]) {\n            result = false;\n            break;\n        }\n        result = true;\n    }\n    return result;\n}\n//# sourceMappingURL=WebGlContextWrapper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2024 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../utils.js';\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nexport class WebGlCoreCtxRenderTexture extends WebGlCoreCtxTexture {\n    framebuffer;\n    constructor(glw, memManager, textureSource) {\n        super(glw, memManager, textureSource);\n        // Create Framebuffer object\n        const framebuffer = glw.createFramebuffer();\n        assertTruthy(framebuffer, 'Unable to create framebuffer');\n        this.framebuffer = framebuffer;\n    }\n    async onLoadRequest() {\n        const { glw } = this;\n        const nativeTexture = (this._nativeCtxTexture =\n            this.createNativeCtxTexture());\n        const { width, height } = this.textureSource;\n        // Set the dimensions of the render texture\n        glw.texImage2D(0, glw.RGBA, width, height, 0, glw.RGBA, glw.UNSIGNED_BYTE, null);\n        // Update the texture memory manager\n        this.setTextureMemUse(width * height * 4);\n        // Bind the framebuffer\n        glw.bindFramebuffer(this.framebuffer);\n        // Attach the texture to the framebuffer\n        glw.framebufferTexture2D(glw.COLOR_ATTACHMENT0, nativeTexture, 0);\n        // Unbind the framebuffer\n        glw.bindFramebuffer(null);\n        return {\n            width,\n            height,\n        };\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxRenderTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, createWebGLContext, hasOwn } from '../../../utils.js';\nimport { CoreRenderer, } from '../CoreRenderer.js';\nimport { WebGlCoreRenderOp } from './WebGlCoreRenderOp.js';\nimport { createIndexBuffer, getWebGlParameters, getWebGlExtensions, } from './internal/RendererUtils.js';\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nimport { Texture, TextureType } from '../../textures/Texture.js';\nimport { ColorTexture } from '../../textures/ColorTexture.js';\nimport { SubTexture } from '../../textures/SubTexture.js';\nimport { WebGlCoreCtxSubTexture } from './WebGlCoreCtxSubTexture.js';\nimport { CoreShaderManager } from '../../CoreShaderManager.js';\nimport { BufferCollection } from './internal/BufferCollection.js';\nimport { compareRect, getNormalizedRgbaComponents, } from '../../lib/utils.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\nimport { WebGlContextWrapper } from '../../lib/WebGlContextWrapper.js';\nimport { RenderTexture } from '../../textures/RenderTexture.js';\nimport { WebGlCoreCtxRenderTexture } from './WebGlCoreCtxRenderTexture.js';\nimport { ImageTexture } from '../../textures/ImageTexture.js';\nconst WORDS_PER_QUAD = 24;\nexport class WebGlCoreRenderer extends CoreRenderer {\n    //// WebGL Native Context and Data\n    glw;\n    system;\n    //// Persistent data\n    quadBuffer;\n    fQuadBuffer;\n    uiQuadBuffer;\n    renderOps = [];\n    //// Render Op / Buffer Filling State\n    curBufferIdx = 0;\n    curRenderOp = null;\n    rttNodes = [];\n    activeRttNode = null;\n    //// Default Shader\n    defShaderCtrl;\n    defaultShader;\n    quadBufferCollection;\n    clearColor = {\n        raw: 0x00000000,\n        normalized: [0, 0, 0, 0],\n    };\n    /**\n     * White pixel texture used by default when no texture is specified.\n     */\n    defaultTexture;\n    quadBufferUsage = 0;\n    /**\n     * Whether the renderer is currently rendering to a texture.\n     */\n    renderToTextureActive = false;\n    constructor(options) {\n        super(options);\n        this.quadBuffer = new ArrayBuffer(this.stage.options.quadBufferSize);\n        this.fQuadBuffer = new Float32Array(this.quadBuffer);\n        this.uiQuadBuffer = new Uint32Array(this.quadBuffer);\n        this.mode = 'webgl';\n        const { canvas, clearColor, bufferMemory } = options;\n        this.defaultTexture = new ColorTexture(this.txManager);\n        // Mark the default texture as ALWAYS renderable\n        // This prevents it from ever being cleaned up.\n        // Fixes https://github.com/lightning-js/renderer/issues/262\n        this.defaultTexture.setRenderableOwner(this, true);\n        // When the default texture is loaded, request a render in case the\n        // RAF is paused. Fixes: https://github.com/lightning-js/renderer/issues/123\n        this.defaultTexture.once('loaded', () => {\n            this.stage.requestRender();\n        });\n        const gl = createWebGLContext(canvas, options.forceWebGL2, options.contextSpy);\n        const glw = (this.glw = new WebGlContextWrapper(gl));\n        glw.viewport(0, 0, canvas.width, canvas.height);\n        this.updateClearColor(clearColor);\n        glw.setBlend(true);\n        glw.blendFunc(glw.ONE, glw.ONE_MINUS_SRC_ALPHA);\n        createIndexBuffer(glw, bufferMemory);\n        this.system = {\n            parameters: getWebGlParameters(this.glw),\n            extensions: getWebGlExtensions(this.glw),\n        };\n        this.shManager.renderer = this;\n        this.defShaderCtrl = this.shManager.loadShader('DefaultShader');\n        this.defaultShader = this.defShaderCtrl.shader;\n        const quadBuffer = glw.createBuffer();\n        assertTruthy(quadBuffer);\n        const stride = 6 * Float32Array.BYTES_PER_ELEMENT;\n        this.quadBufferCollection = new BufferCollection([\n            {\n                buffer: quadBuffer,\n                attributes: {\n                    a_position: {\n                        name: 'a_position',\n                        size: 2, // 2 components per iteration\n                        type: glw.FLOAT, // the data is 32bit floats\n                        normalized: false, // don't normalize the data\n                        stride, // 0 = move forward size * sizeof(type) each iteration to get the next position\n                        offset: 0, // start at the beginning of the buffer\n                    },\n                    a_textureCoordinate: {\n                        name: 'a_textureCoordinate',\n                        size: 2,\n                        type: glw.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_color: {\n                        name: 'a_color',\n                        size: 4,\n                        type: glw.UNSIGNED_BYTE,\n                        normalized: true,\n                        stride,\n                        offset: 4 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_textureIndex: {\n                        name: 'a_textureIndex',\n                        size: 1,\n                        type: glw.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 5 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                },\n            },\n        ]);\n    }\n    reset() {\n        const { glw } = this;\n        this.curBufferIdx = 0;\n        this.curRenderOp = null;\n        this.renderOps.length = 0;\n        glw.setScissorTest(false);\n        glw.clear();\n    }\n    getShaderManager() {\n        return this.shManager;\n    }\n    createCtxTexture(textureSource) {\n        if (textureSource instanceof SubTexture) {\n            return new WebGlCoreCtxSubTexture(this.glw, this.txMemManager, textureSource);\n        }\n        else if (textureSource instanceof RenderTexture) {\n            return new WebGlCoreCtxRenderTexture(this.glw, this.txMemManager, textureSource);\n        }\n        return new WebGlCoreCtxTexture(this.glw, this.txMemManager, textureSource);\n    }\n    /**\n     * This function adds a quad (a rectangle composed of two triangles) to the WebGL rendering pipeline.\n     *\n     * It takes a set of options that define the quad's properties, such as its dimensions, colors, texture, shader, and transformation matrix.\n     * The function first updates the shader properties with the current dimensions if necessary, then sets the default texture if none is provided.\n     * It then checks if a new render operation is needed, based on the current shader and clipping rectangle.\n     * If a new render operation is needed, it creates one and updates the current render operation.\n     * The function then adjusts the texture coordinates based on the texture options and adds the texture to the texture manager.\n     *\n     * Finally, it calculates the vertices for the quad, taking into account any transformations, and adds them to the quad buffer.\n     * The function updates the length and number of quads in the current render operation, and updates the current buffer index.\n     */\n    addQuad(params) {\n        const { fQuadBuffer, uiQuadBuffer } = this;\n        let texture = params.texture || this.defaultTexture;\n        /**\n         * If the shader props contain any automatic properties, update it with the\n         * current dimensions and or alpha that will be used to render the quad.\n         */\n        if (params.shaderProps !== null) {\n            if (hasOwn(params.shaderProps, '$dimensions') == true) {\n                const dimensions = params.shaderProps.$dimensions;\n                dimensions.width = params.width;\n                dimensions.height = params.height;\n            }\n            if (hasOwn(params.shaderProps, '$alpha') === true) {\n                params.shaderProps.$alpha = params.alpha;\n            }\n        }\n        assertTruthy(texture.ctxTexture !== undefined, 'Invalid texture type');\n        let { curBufferIdx: bufferIdx, curRenderOp } = this;\n        const targetDims = { width: -1, height: -1 };\n        targetDims.width = params.width;\n        targetDims.height = params.height;\n        const targetShader = params.shader || this.defaultShader;\n        assertTruthy(targetShader.getUniformLocation !== undefined, 'Invalid WebGL shader');\n        if (this.reuseRenderOp(params) === false) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this.newRenderOp(targetShader, params.shaderProps, params.alpha, targetDims, params.clippingRect, bufferIdx, params.rtt, params.parentHasRenderTexture, params.framebufferDimensions);\n            curRenderOp = this.curRenderOp;\n            assertTruthy(curRenderOp);\n        }\n        let texCoordX1 = 0;\n        let texCoordY1 = 0;\n        let texCoordX2 = 1;\n        let texCoordY2 = 1;\n        if (texture.type === TextureType.subTexture) {\n            const { x: tx, y: ty, width: tw, height: th, } = texture.props;\n            const { width: parentW = 0, height: parentH = 0 } = texture.parentTexture.dimensions || { width: 0, height: 0 };\n            texCoordX1 = tx / parentW;\n            texCoordX2 = texCoordX1 + tw / parentW;\n            texCoordY1 = ty / parentH;\n            texCoordY2 = texCoordY1 + th / parentH;\n            texture = texture.parentTexture;\n        }\n        if (texture.type === TextureType.image &&\n            params.textureOptions !== null &&\n            params.textureOptions.resizeMode !== undefined &&\n            texture.dimensions !== null) {\n            const resizeMode = params.textureOptions.resizeMode;\n            const { width: tw, height: th } = texture.dimensions;\n            if (resizeMode.type === 'cover') {\n                const scaleX = params.width / tw;\n                const scaleY = params.height / th;\n                const scale = Math.max(scaleX, scaleY);\n                const precision = 1 / scale;\n                // Determine based on width\n                if (scale && scaleX && scaleX < scale) {\n                    const desiredSize = precision * params.width;\n                    texCoordX1 = (1 - desiredSize / tw) * (resizeMode.clipX ?? 0.5);\n                    texCoordX2 = texCoordX1 + desiredSize / tw;\n                }\n                // Determine based on height\n                if (scale && scaleY && scaleY < scale) {\n                    const desiredSize = precision * params.height;\n                    texCoordY1 = (1 - desiredSize / th) * (resizeMode.clipY ?? 0.5);\n                    texCoordY2 = texCoordY1 + desiredSize / th;\n                }\n            }\n        }\n        // Flip texture coordinates if dictated by texture options\n        let flipY = 0;\n        if (params.textureOptions !== null) {\n            if (params.textureOptions.flipX === true) {\n                [texCoordX1, texCoordX2] = [texCoordX2, texCoordX1];\n            }\n            // convert to integer for bitwise operation below\n            flipY = +(params.textureOptions.flipY || false);\n        }\n        // Eitherone should be true\n        if (flipY ^ +(texture.type === TextureType.renderToTexture)) {\n            [texCoordY1, texCoordY2] = [texCoordY2, texCoordY1];\n        }\n        const ctxTexture = texture.ctxTexture;\n        assertTruthy(ctxTexture.ctxTexture !== undefined);\n        const textureIdx = this.addTexture(ctxTexture, bufferIdx);\n        assertTruthy(this.curRenderOp !== null);\n        if (params.renderCoords) {\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = params.renderCoords.x1; // vertexX\n            fQuadBuffer[bufferIdx++] = params.renderCoords.y1; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = params.colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = params.renderCoords.x2;\n            fQuadBuffer[bufferIdx++] = params.renderCoords.y2;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = params.colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = params.renderCoords.x4;\n            fQuadBuffer[bufferIdx++] = params.renderCoords.y4;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = params.renderCoords.x3;\n            fQuadBuffer[bufferIdx++] = params.renderCoords.y3;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        else if (params.tb !== 0 || params.tc !== 0) {\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = params.tx; // vertexX\n            fQuadBuffer[bufferIdx++] = params.ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = params.colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = params.tx + params.width * params.ta;\n            fQuadBuffer[bufferIdx++] = params.ty + params.width * params.tc;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = params.colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = params.tx + params.height * params.tb;\n            fQuadBuffer[bufferIdx++] = params.ty + params.height * params.td;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] =\n                params.tx + params.width * params.ta + params.height * params.tb;\n            fQuadBuffer[bufferIdx++] =\n                params.ty + params.width * params.tc + params.height * params.td;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        else {\n            // Calculate the right corner of the quad\n            // multiplied by the scale\n            const rightCornerX = params.tx + params.width * params.ta;\n            const rightCornerY = params.ty + params.height * params.td;\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = params.tx; // vertexX\n            fQuadBuffer[bufferIdx++] = params.ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = params.colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = params.ty;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = params.colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = params.tx;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = params.colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        // Update the length of the current render op\n        this.curRenderOp.length += WORDS_PER_QUAD;\n        this.curRenderOp.numQuads++;\n        this.curBufferIdx = bufferIdx;\n    }\n    /**\n     * Replace the existing RenderOp with a new one that uses the specified Shader\n     * and starts at the specified buffer index.\n     *\n     * @param shader\n     * @param bufferIdx\n     */\n    newRenderOp(shader, shaderProps, alpha, dimensions, clippingRect, bufferIdx, renderToTexture, parentHasRenderTexture, framebufferDimensions) {\n        const curRenderOp = new WebGlCoreRenderOp(this.glw, this.options, this.quadBufferCollection, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, 0, // Z-Index is only used for explictly added Render Ops\n        renderToTexture, parentHasRenderTexture, framebufferDimensions);\n        this.curRenderOp = curRenderOp;\n        this.renderOps.push(curRenderOp);\n    }\n    /**\n     * Add a texture to the current RenderOp. If the texture cannot be added to the\n     * current RenderOp, a new RenderOp will be created and the texture will be added\n     * to that one.\n     *\n     * If the texture cannot be added to the new RenderOp, an error will be thrown.\n     *\n     * @param texture\n     * @param bufferIdx\n     * @param recursive\n     * @returns Assigned Texture Index of the texture in the render op\n     */\n    addTexture(texture, bufferIdx, recursive) {\n        const { curRenderOp } = this;\n        assertTruthy(curRenderOp);\n        const textureIdx = curRenderOp.addTexture(texture);\n        // TODO: Refactor to be more DRY\n        if (textureIdx === 0xffffffff) {\n            if (recursive) {\n                throw new Error('Unable to add texture to render op');\n            }\n            this.newRenderOp(curRenderOp.shader, curRenderOp.shaderProps, curRenderOp.alpha, curRenderOp.dimensions, curRenderOp.clippingRect, bufferIdx);\n            return this.addTexture(texture, bufferIdx, true);\n        }\n        return textureIdx;\n    }\n    /**\n     * Test if the current Render operation can be reused for the specified parameters.\n     * @param params\n     * @returns\n     */\n    reuseRenderOp(params) {\n        const { shader, shaderProps, parentHasRenderTexture, rtt, clippingRect } = params;\n        const targetShader = shader || this.defaultShader;\n        // Switching shader program will require a new render operation\n        if (this.curRenderOp?.shader !== targetShader) {\n            return false;\n        }\n        // Switching clipping rect will require a new render operation\n        if (!compareRect(this.curRenderOp.clippingRect, clippingRect)) {\n            return false;\n        }\n        // Force new render operation if rendering to texture\n        // @todo: This needs to be improved, render operations could also be reused\n        // for rendering to texture\n        if (parentHasRenderTexture || rtt) {\n            return false;\n        }\n        // Check if the shader can batch the shader properties\n        if (this.curRenderOp.shader !== this.defaultShader &&\n            (!shaderProps ||\n                !this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps, shaderProps))) {\n            return false;\n        }\n        // Render operation can be reused\n        return true;\n    }\n    /**\n     * add RenderOp to the render pipeline\n     */\n    addRenderOp(renderable) {\n        this.renderOps.push(renderable);\n        this.curRenderOp = null;\n    }\n    /**\n     * Render the current set of RenderOps to render to the specified surface.\n     *\n     * TODO: 'screen' is the only supported surface at the moment.\n     *\n     * @param surface\n     */\n    render(surface = 'screen') {\n        const { glw, quadBuffer } = this;\n        const arr = new Float32Array(quadBuffer, 0, this.curBufferIdx);\n        const buffer = this.quadBufferCollection.getBuffer('a_position') ?? null;\n        glw.arrayBufferData(buffer, arr, glw.STATIC_DRAW);\n        const doLog = false; // idx++ % 100 === 0;\n        if (doLog) {\n            console.log('renderOps', this.renderOps.length);\n        }\n        for (let i = 0, length = this.renderOps.length; i < length; i++) {\n            const renderOp = this.renderOps[i];\n            if (doLog) {\n                console.log('Quads per operation', renderOp.numQuads);\n            }\n            renderOp.draw();\n        }\n        this.quadBufferUsage = this.curBufferIdx * arr.BYTES_PER_ELEMENT;\n    }\n    renderToTexture(node) {\n        for (let i = 0; i < this.rttNodes.length; i++) {\n            if (this.rttNodes[i] === node) {\n                return;\n            }\n        }\n        this.insertRTTNodeInOrder(node);\n    }\n    /**\n     * Inserts an RTT node into `this.rttNodes` while maintaining the correct rendering order based on hierarchy.\n     *\n     * Rendering order for RTT nodes is critical when nested RTT nodes exist in a parent-child relationship.\n     * Specifically:\n     *  - Child RTT nodes must be rendered before their RTT-enabled parents to ensure proper texture composition.\n     *  - If an RTT node is added and it has existing RTT children, it should be rendered after those children.\n     *\n     * This function addresses both cases by:\n     * 1. **Checking Upwards**: It traverses the node's hierarchy upwards to identify any RTT parent\n     *    already in `rttNodes`. If an RTT parent is found, the new node is placed before this parent.\n     * 2. **Checking Downwards**: It traverses the node’s children recursively to find any RTT-enabled\n     *    children that are already in `rttNodes`. If such children are found, the new node is inserted\n     *    after the last (highest index) RTT child node.\n     *\n     * The final calculated insertion index ensures the new node is positioned in `rttNodes` to respect\n     * both parent-before-child and child-before-parent rendering rules, preserving the correct order\n     * for the WebGL renderer.\n     *\n     * @param node - The RTT-enabled CoreNode to be added to `rttNodes` in the appropriate hierarchical position.\n     */\n    insertRTTNodeInOrder(node) {\n        let insertIndex = this.rttNodes.length; // Default to the end of the array\n        // 1. Traverse upwards to ensure the node is placed before its RTT parent (if any).\n        let currentNode = node;\n        while (currentNode) {\n            if (!currentNode.parent) {\n                break;\n            }\n            const parentIndex = this.rttNodes.indexOf(currentNode.parent);\n            if (parentIndex !== -1) {\n                // Found an RTT parent in the list; set insertIndex to place node before the parent\n                insertIndex = parentIndex;\n                break;\n            }\n            currentNode = currentNode.parent;\n        }\n        // 2. Traverse downwards to ensure the node is placed after any RTT children.\n        // Look through each child recursively to see if any are already in rttNodes.\n        const maxChildIndex = this.findMaxChildRTTIndex(node);\n        if (maxChildIndex !== -1) {\n            // Adjust insertIndex to be after the last child RTT node\n            insertIndex = Math.max(insertIndex, maxChildIndex + 1);\n        }\n        // 3. Insert the node at the calculated position\n        this.rttNodes.splice(insertIndex, 0, node);\n    }\n    // Helper function to find the highest index of any RTT children of a node within rttNodes\n    findMaxChildRTTIndex(node) {\n        let maxIndex = -1;\n        const traverseChildren = (currentNode) => {\n            const currentIndex = this.rttNodes.indexOf(currentNode);\n            if (currentIndex !== -1) {\n                maxIndex = Math.max(maxIndex, currentIndex);\n            }\n            // Recursively check all children of the current node\n            for (const child of currentNode.children) {\n                traverseChildren(child);\n            }\n        };\n        // Start traversal directly with the provided node\n        traverseChildren(node);\n        return maxIndex;\n    }\n    renderRTTNodes() {\n        const { glw } = this;\n        const { txManager } = this.stage;\n        // Render all associated RTT nodes to their textures\n        for (let i = 0; i < this.rttNodes.length; i++) {\n            const node = this.rttNodes[i];\n            // Skip nodes that don't have RTT updates\n            if (!node || !node.hasRTTupdates) {\n                continue;\n            }\n            // Set the active RTT node to the current node\n            // So we can prevent rendering children of nested RTT nodes\n            this.activeRttNode = node;\n            assertTruthy(node.texture, 'RTT node missing texture');\n            const ctxTexture = node.texture.ctxTexture;\n            assertTruthy(ctxTexture instanceof WebGlCoreCtxRenderTexture);\n            this.renderToTextureActive = true;\n            // Bind the the texture's framebuffer\n            glw.bindFramebuffer(ctxTexture.framebuffer);\n            glw.viewport(0, 0, ctxTexture.w, ctxTexture.h);\n            // Set the clear color to transparent\n            glw.clearColor(0, 0, 0, 0);\n            glw.clear();\n            // Render all associated quads to the texture\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (!child) {\n                    continue;\n                }\n                this.stage.addQuads(child);\n                child.hasRTTupdates = false;\n            }\n            // Render all associated quads to the texture\n            this.render();\n            // Reset render operations\n            this.renderOps.length = 0;\n            node.hasRTTupdates = false;\n        }\n        const clearColor = this.clearColor.normalized;\n        // Restore the default clear color\n        glw.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n        // Bind the default framebuffer\n        glw.bindFramebuffer(null);\n        glw.viewport(0, 0, this.glw.canvas.width, this.glw.canvas.height);\n        this.renderToTextureActive = false;\n    }\n    removeRTTNode(node) {\n        const index = this.rttNodes.indexOf(node);\n        if (index === -1) {\n            return;\n        }\n        this.rttNodes.splice(index, 1);\n    }\n    getBufferInfo() {\n        const bufferInfo = {\n            totalAvailable: this.stage.options.quadBufferSize,\n            totalUsed: this.quadBufferUsage,\n        };\n        return bufferInfo;\n    }\n    getDefShaderCtr() {\n        return this.defShaderCtrl;\n    }\n    /**\n     * Updates the WebGL context's clear color and clears the color buffer.\n     *\n     * @param color - The color to set as the clear color, represented as a 32-bit integer.\n     */\n    updateClearColor(color) {\n        if (this.clearColor.raw === color) {\n            return;\n        }\n        const glw = this.glw;\n        const normalizedColor = getNormalizedRgbaComponents(color);\n        glw.clearColor(normalizedColor[0], normalizedColor[1], normalizedColor[2], normalizedColor[3]);\n        this.clearColor = {\n            raw: color,\n            normalized: normalizedColor,\n        };\n        glw.clear();\n    }\n}\n//# sourceMappingURL=WebGlCoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const SpecialCodepoints = {\n    LINE_FEED: 0x0a,\n    CARRIAGE_RETURN: 0x0d,\n    SPACE: 0x20,\n    TAB: 0x09,\n    ZERO_WIDTH_SPACE: 0x200b,\n    ZERO_WIDTH_NON_JOINER: 0x200c,\n    ZERO_WIDTH_JOINER: 0x200d,\n    LEFT_TO_RIGHT_MARK: 0x200e,\n    RIGHT_TO_LEFT_MARK: 0x200f,\n    LEFT_TO_RIGHT_EMBEDDING: 0x202a,\n    RIGHT_TO_LEFT_EMBEDDING: 0x202b,\n    POP_DIRECTIONAL_FORMATTING: 0x202c,\n    LEFT_TO_RIGHT_OVERRIDE: 0x202d,\n    RIGHT_TO_LEFT_OVERRIDE: 0x202e,\n    LINE_SEPARATOR: 0x2028,\n    PARAGRAPH_SEPARATOR: 0x2029,\n    OBJECT_REPLACEMENT_CHARACTER: 0xfffc,\n    REPLACEMENT_CHARACTER: 0xfffd,\n    ZERO_WIDTH_NO_BREAK_SPACE: 0xfeff,\n    LEFT_TO_RIGHT_ISOLATE: 0x2066,\n    RIGHT_TO_LEFT_ISOLATE: 0x2067,\n    FIRST_STRONG_ISOLATE: 0x2068,\n    POP_DIRECTIONAL_ISOLATE: 0x2069,\n    INHIBIT_SYMMETRIC_SWAPPING: 0x206a,\n    ACTIVATE_SYMMETRIC_SWAPPING: 0x206b,\n    INHIBIT_ARABIC_FORM_SHAPING: 0x206c,\n    ACTIVATE_ARABIC_FORM_SHAPING: 0x206d,\n    NATIONAL_DIGIT_SHAPES: 0x206e,\n    NOMINAL_DIGIT_SHAPES: 0x206f,\n    LEFT_TO_RIGHT_BOUNDARY: 0x200e,\n    RIGHT_TO_LEFT_BOUNDARY: 0x200f,\n};\n//# sourceMappingURL=SpecialCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class FontShaper {\n}\n//# sourceMappingURL=FontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SpecialCodepoints } from '../../../renderers/SdfTextRenderer/internal/SpecialCodepoints.js';\nimport { FontShaper, } from './FontShaper.js';\nexport class SdfFontShaper extends FontShaper {\n    data;\n    glyphMap;\n    kernings;\n    constructor(data, glyphMap) {\n        super();\n        this.data = data;\n        this.glyphMap = glyphMap;\n        const kernings = (this.kernings = {});\n        data.kernings.forEach((kerning) => {\n            const second = kerning.second;\n            const firsts = (kernings[second] = kernings[second] || {});\n            firsts[kerning.first] = kerning.amount;\n        });\n        this.kernings = kernings;\n    }\n    *shapeText(props, codepoints) {\n        let codepointResult;\n        let lastGlyphId = undefined;\n        while ((codepointResult = codepoints.peek()) && !codepointResult.done) {\n            const codepoint = codepointResult.value;\n            const glyph = this.glyphMap.get(codepoint);\n            codepoints.next();\n            if (glyph !== undefined) {\n                // We found a glyph for this codepoint\n                // Yield the mapped glyph info\n                /**\n                 * Kerning includes any possible additional letter spacing\n                 */\n                const kerning = lastGlyphId !== undefined\n                    ? (this.kernings[glyph.id]?.[lastGlyphId] || 0) +\n                        props.letterSpacing\n                    : 0;\n                lastGlyphId = glyph.id;\n                yield {\n                    mapped: true,\n                    glyphId: glyph.id,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                    xAdvance: glyph.xadvance + kerning,\n                    yAdvance: 0,\n                    xOffset: glyph.xoffset + kerning,\n                    yOffset: glyph.yoffset,\n                    xBearing: 0,\n                    yBearing: 0,\n                    width: glyph.width,\n                    height: glyph.height,\n                };\n            }\n            else {\n                // We didn't find a glyph for this codepoint\n                // Yield the unmapped codepoint info\n                // If this codepoint is a linebreak, we should reset the last glyph id\n                // so that the next glyph will not be kerned with the last glyph of the\n                // previous line.\n                if (codepoint === SpecialCodepoints.LINE_FEED) {\n                    lastGlyphId = undefined;\n                }\n                yield {\n                    mapped: false,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                };\n            }\n        }\n    }\n}\n//# sourceMappingURL=SdfFontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// import type { Renderer } from '../../../Renderer';\nimport { assertTruthy } from '../../../../utils.js';\nimport { WebGlCoreRenderer } from '../../../renderers/webgl/WebGlCoreRenderer.js';\nimport { ImageTexture } from '../../../textures/ImageTexture.js';\nimport { TrFontFace, } from '../TrFontFace.js';\nimport { SdfFontShaper } from './internal/SdfFontShaper.js';\nexport class SdfTrFontFace extends TrFontFace {\n    type;\n    texture;\n    /**\n     * Height of the tallest character in the font including the whitespace above it\n     * in SDF/vertex units.\n     */\n    maxCharHeight = 0;\n    data;\n    shaper;\n    glyphMap = new Map();\n    constructor(type, options) {\n        super(options);\n        const { atlasUrl, atlasDataUrl, stage } = options;\n        this.type = type;\n        const renderer = stage.renderer;\n        assertTruthy(renderer instanceof WebGlCoreRenderer, 'SDF Font Faces can only be used with the WebGL Renderer');\n        // Load image\n        this.texture = stage.txManager.loadTexture('ImageTexture', {\n            src: atlasUrl,\n            // IMPORTANT: The SDF shader requires the alpha channel to NOT be\n            // premultiplied on the atlas texture. If it is premultiplied, the\n            // rendering of SDF glyphs (especially single-channel SDF fonts) will\n            // be very jagged.\n            premultiplyAlpha: false,\n        });\n        this.texture.on('loaded', () => {\n            this.checkLoaded();\n            // Make sure we mark the stage for a re-render (in case the font's texture was freed and reloaded)\n            stage.requestRender();\n        });\n        // Pre-load it\n        stage.txManager.once('initialized', () => {\n            this.texture.ctxTexture.load();\n        });\n        // Set this.data to the fetched data from dataUrl\n        fetch(atlasDataUrl)\n            .then(async (response) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            this.data = await response.json();\n            assertTruthy(this.data);\n            // Add all the glyphs to the glyph map\n            let maxCharHeight = 0;\n            this.data.chars.forEach((glyph) => {\n                this.glyphMap.set(glyph.id, glyph);\n                const charHeight = glyph.yoffset + glyph.height;\n                if (charHeight > maxCharHeight) {\n                    maxCharHeight = charHeight;\n                }\n            });\n            this.maxCharHeight = maxCharHeight;\n            // We know `data` is defined here, because we just set it\n            this.shaper = new SdfFontShaper(this.data, this.glyphMap);\n            // If the metrics aren't provided explicitly in the font face options,\n            // Gather them from the metrics added by the msdf-generator tool ()\n            // If they are missing then we throw an error.\n            if (!this.metrics) {\n                if (this.data?.lightningMetrics) {\n                    const { ascender, descender, lineGap, unitsPerEm } = this.data.lightningMetrics;\n                    this.metrics = {\n                        ascender: ascender / unitsPerEm,\n                        descender: descender / unitsPerEm,\n                        lineGap: lineGap / unitsPerEm,\n                    };\n                }\n                else {\n                    throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. ` +\n                        'Make sure you are using the latest version of the Lightning ' +\n                        '3 `msdf-generator` tool to generate your SDF fonts.');\n                }\n            }\n            this.checkLoaded();\n        })\n            .catch(console.error);\n    }\n    getAtlasEntry(glyphId) {\n        const glyph = this.glyphMap.get(glyphId);\n        if (glyph === undefined) {\n            throw new Error(`Glyph ${glyphId} not found in font ${this.fontFamily}`);\n        }\n        return {\n            x: glyph.x,\n            y: glyph.y,\n            width: glyph.width,\n            height: glyph.height,\n        };\n    }\n    checkLoaded() {\n        if (this.loaded)\n            return;\n        if (this.texture.state === 'loaded' && this.data) {\n            this.loaded = true;\n            this.emit('loaded');\n        }\n    }\n}\n//# sourceMappingURL=SdfTrFontFace.js.map","import { SdfTrFontFace, WebTrFontFace, RendererMain, } from '@lightningjs/renderer';\nexport let renderer;\nexport let createShader;\nexport const getRenderer = () => renderer;\nexport function startLightningRenderer(options, rootId = 'app') {\n    renderer = new RendererMain(options, rootId);\n    createShader = renderer.createShader.bind(renderer);\n    return renderer;\n}\nexport function loadFonts(fonts) {\n    const stage = renderer.stage;\n    for (const font of fonts) {\n        if ('type' in font && (font.type === 'msdf' || font.type === 'ssdf')) {\n            if (renderer.stage.renderer.mode === 'webgl') {\n                stage.fontManager.addFontFace(new SdfTrFontFace(font.type, {\n                    ...font,\n                    stage,\n                }));\n            }\n        }\n        else if ('fontUrl' in font) {\n            stage.fontManager.addFontFace(new WebTrFontFace(font));\n        }\n    }\n}\n//# sourceMappingURL=lightningInit.js.map","function isDevEnv() {\n    return !!(import.meta.env && import.meta.env.DEV);\n}\nexport const isDev = isDevEnv() || false;\nexport const Config = {\n    debug: false,\n    focusDebug: false,\n    animationsEnabled: true,\n    animationSettings: {\n        duration: 250,\n        easing: 'ease-in-out',\n    },\n    fontSettings: {\n        fontFamily: 'Ubuntu',\n        fontSize: 100,\n    },\n    enableShaderCaching: false,\n    setActiveElement: () => { },\n    focusStateKey: '$focus',\n};\n//# sourceMappingURL=config.js.map","export const NodeType = {\n    Element: 'element',\n    TextNode: 'textNode',\n    Text: 'text',\n};\n//# sourceMappingURL=nodeTypes.js.map","import { Config, isDev } from './config.js';\nimport { ElementNode } from './elementNode.js';\nimport { NodeType } from './nodeTypes.js';\nfunction hasDebug(node) {\n    return isObject(node) && node.debug;\n}\nexport function log(msg, node, ...args) {\n    if (isDev) {\n        if (Config.debug || hasDebug(node) || hasDebug(args[0])) {\n            console.log(msg, node, ...args);\n        }\n    }\n}\nexport const isFunc = (obj) => obj instanceof Function;\nexport const isFunction = (obj) => typeof obj === 'function';\nexport function isObject(item) {\n    return typeof item === 'object';\n}\nexport function isArray(item) {\n    return Array.isArray(item);\n}\nexport function isString(item) {\n    return typeof item === 'string';\n}\nexport function isNumber(item) {\n    return typeof item === 'number';\n}\nexport function isInteger(item) {\n    return Number.isInteger(item);\n}\nexport function isINode(node) {\n    return 'destroy' in node && typeof node.destroy === 'function';\n}\nexport function isElementNode(node) {\n    return node instanceof ElementNode;\n}\nexport function isElementText(node) {\n    return node._type === NodeType.TextNode;\n}\nexport function isTextNode(node) {\n    return node._type === NodeType.Text;\n}\nexport function keyExists(obj, keys) {\n    for (const key of keys) {\n        if (key in obj) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function flattenStyles(obj, result = {}) {\n    if (isArray(obj)) {\n        obj.forEach((item) => {\n            flattenStyles(item, result);\n        });\n    }\n    else if (obj) {\n        // handle the case where the object is not an array\n        for (const key in obj) {\n            // be careful of 0 values\n            if (result[key] === undefined) {\n                result[key] = obj[key];\n            }\n        }\n    }\n    return result;\n}\nexport function logRenderTree(node) {\n    const tree = [node];\n    let parent = node.parent;\n    while (parent) {\n        tree.push(parent);\n        parent = parent.parent;\n    }\n    tree.reverse();\n    let output = `\nfunction convertEffectsToShader(styleEffects) {\n  const effects = [];\n  let index = 0;\n\n  for (const [type, props] of Object.entries(styleEffects)) {\n    effects.push({ type, props });\n    index++;\n  }\n  return createShader('DynamicShader', { effects });\n}\n`;\n    tree.forEach((node, i) => {\n        if (!node._rendererProps) {\n            return;\n        }\n        node._rendererProps.parent = undefined;\n        node._rendererProps.shader = undefined;\n        const props = JSON.stringify(node._rendererProps, null, 2);\n        const effects = node._effects\n            ? `props${i}.shader = convertEffectsToShader(${JSON.stringify(node._effects, null, 2)});`\n            : '';\n        const parent = i === 0 ? 'rootNode' : `node${i - 1}`;\n        output += `\nconst props${i} = ${props};\nprops${i}.parent = ${parent};\n${effects}\nconst node${i} = renderer.createNode(props${i});\n`;\n    });\n    return output;\n}\n//# sourceMappingURL=utils.js.map","import { isArray, isString } from './utils.js';\nexport default class States extends Array {\n    onChange;\n    constructor(callback, initialState = {}) {\n        if (isArray(initialState)) {\n            super(...initialState);\n        }\n        else if (isString(initialState)) {\n            super(initialState); // Assert as DollarString\n        }\n        else {\n            super(...Object.entries(initialState)\n                .filter(([_key, value]) => value)\n                .map(([key]) => key));\n        }\n        this.onChange = callback;\n        return this;\n    }\n    has(state) {\n        // temporary check for $ prefix\n        return this.indexOf(state) >= 0 || this.indexOf(`$${state}`) >= 0;\n    }\n    is(state) {\n        return this.indexOf(state) >= 0;\n    }\n    add(state) {\n        if (this.has(state)) {\n            return;\n        }\n        this.push(state);\n        this.onChange();\n    }\n    toggle(state, force) {\n        if (force === true) {\n            this.add(state);\n        }\n        else if (force === false) {\n            this.remove(state);\n        }\n        else {\n            if (this.has(state)) {\n                this.remove(state);\n            }\n            else {\n                this.add(state);\n            }\n        }\n    }\n    merge(newStates) {\n        if (isArray(newStates)) {\n            this.length = 0; // Clear the current states\n            this.push(...newStates);\n        }\n        else if (isString(newStates)) {\n            this.length = 0; // Clear the current states\n            this.push(newStates); // Assert as DollarString\n        }\n        else {\n            for (const state in newStates) {\n                const value = newStates[state];\n                if (value) {\n                    if (!this.has(state)) {\n                        this.push(state);\n                    }\n                }\n                else {\n                    const stateIndexToRemove = this.indexOf(state);\n                    if (stateIndexToRemove >= 0) {\n                        this.splice(stateIndexToRemove, 1);\n                    }\n                }\n            }\n        }\n        return this;\n    }\n    remove(state) {\n        const stateIndexToRemove = this.indexOf(state);\n        if (stateIndexToRemove >= 0) {\n            this.splice(stateIndexToRemove, 1);\n            this.onChange();\n        }\n    }\n}\n//# sourceMappingURL=states.js.map","import { isTextNode, isElementText } from './utils.js';\nexport default function (node) {\n    const children = [];\n    let hasOrder = false;\n    let growSize = 0;\n    for (let i = 0; i < node.children.length; i++) {\n        const c = node.children[i];\n        if (isElementText(c) && c.text && !(c.width || c.height)) {\n            return false;\n        }\n        // Filter empty text nodes which are place holders for <Show> and elements missing dimensions\n        if (isTextNode(c) || c.flexItem === false) {\n            continue;\n        }\n        if (c.flexOrder !== undefined) {\n            hasOrder = true;\n        }\n        if (c.flexGrow !== undefined) {\n            growSize += c.flexGrow;\n        }\n        children.push(c);\n    }\n    if (hasOrder) {\n        children.sort((a, b) => (a.flexOrder || 0) - (b.flexOrder || 0));\n    }\n    const numChildren = children.length;\n    const direction = node.flexDirection || 'row';\n    const isRow = direction === 'row';\n    const dimension = isRow ? 'width' : 'height';\n    const crossDimension = isRow ? 'height' : 'width';\n    const marginOne = isRow ? 'marginLeft' : 'marginTop';\n    const crossMarginOne = isRow ? 'marginTop' : 'marginLeft';\n    const marginTwo = isRow ? 'marginRight' : 'marginBottom';\n    const crossMarginTwo = isRow ? 'marginBottom' : 'marginRight';\n    const prop = isRow ? 'x' : 'y';\n    const crossProp = isRow ? 'y' : 'x';\n    const containerSize = node[dimension] || 0;\n    const containerCrossSize = node[crossDimension] || 0;\n    const gap = node.gap || 0;\n    const justify = node.justifyContent || 'flexStart';\n    const align = node.alignItems;\n    let containerUpdated = false;\n    if (growSize) {\n        const flexBasis = children.reduce((prev, c) => prev +\n            (c.flexGrow ? 0 : c[dimension] || 0) +\n            (c[marginOne] || 0) +\n            (c[marginTwo] || 0), 0);\n        const growFactor = (containerSize - flexBasis - gap * (numChildren - 1)) / growSize;\n        for (let i = 0; i < children.length; i++) {\n            const c = children[i];\n            if (c.flexGrow !== undefined && c.flexGrow > 0) {\n                c[dimension] = c.flexGrow * growFactor;\n            }\n        }\n    }\n    let itemSize = 0;\n    if (['center', 'spaceBetween', 'spaceEvenly'].includes(justify)) {\n        itemSize = children.reduce((prev, c) => prev + (c[dimension] || 0) + (c[marginOne] || 0) + (c[marginTwo] || 0), 0);\n    }\n    // Only align children if container has a cross size\n    const crossAlignChild = containerCrossSize && align\n        ? (c) => {\n            if (align === 'flexStart') {\n                c[crossProp] = c[crossMarginOne] || 0;\n            }\n            else if (align === 'center') {\n                c[crossProp] =\n                    (containerCrossSize - (c[crossDimension] || 0)) / 2 +\n                        (c[crossMarginOne] || 0);\n            }\n            else if (align === 'flexEnd') {\n                c[crossProp] =\n                    containerCrossSize -\n                        (c[crossDimension] || 0) -\n                        (c[crossMarginTwo] || 0);\n            }\n        }\n        : (c) => c;\n    if (isRow && node._calcHeight && !node.flexCrossBoundary) {\n        // Assuming all the children have the same height\n        const newHeight = children[0]?.height || node.height;\n        if (newHeight !== node.height) {\n            containerUpdated = true;\n            node.height = newHeight;\n        }\n    }\n    if (justify === 'flexStart') {\n        let start = node.padding || 0;\n        for (let i = 0; i < children.length; i++) {\n            const c = children[i];\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n        // Update container size\n        if (node.flexBoundary !== 'fixed') {\n            const calculatedSize = start - gap + (node.padding || 0);\n            if (calculatedSize !== containerSize) {\n                // store the original size for Row & Column\n                node[`preFlex${dimension}`] = containerSize;\n                node[dimension] = calculatedSize;\n                return true;\n            }\n        }\n    }\n    else if (justify === 'flexEnd') {\n        let start = containerSize;\n        for (let i = numChildren - 1; i >= 0; i--) {\n            const c = children[i];\n            c[prop] = start - (c[dimension] || 0) - (c[marginTwo] || 0);\n            start -=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n    }\n    else if (justify === 'center') {\n        let start = (containerSize - (itemSize + gap * (numChildren - 1))) / 2;\n        for (let i = 0; i < children.length; i++) {\n            const c = children[i];\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n    }\n    else if (justify === 'spaceBetween') {\n        const toPad = (containerSize - itemSize) / (numChildren - 1);\n        let start = 0;\n        for (let i = 0; i < children.length; i++) {\n            const c = children[i];\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + toPad + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n    }\n    else if (justify === 'spaceEvenly') {\n        const toPad = (containerSize - itemSize) / (numChildren + 1);\n        let start = toPad;\n        for (let i = 0; i < children.length; i++) {\n            const c = children[i];\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + toPad + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n    }\n    // Container was not updated\n    return containerUpdated;\n}\n//# sourceMappingURL=flex.js.map","import { Config } from './config.js';\nimport { isFunction } from './utils.js';\nconst keyMapEntries = {\n    ArrowLeft: 'Left',\n    ArrowRight: 'Right',\n    ArrowUp: 'Up',\n    ArrowDown: 'Down',\n    Enter: 'Enter',\n    l: 'Last',\n    ' ': 'Space',\n    Backspace: 'Back',\n    Escape: 'Escape',\n};\nconst keyHoldMapEntries = {\n// Enter: 'EnterHold',\n};\nconst flattenKeyMap = (keyMap, targetMap) => {\n    for (const [key, value] of Object.entries(keyMap)) {\n        if (Array.isArray(value)) {\n            value.forEach((v) => {\n                targetMap[v] = key;\n            });\n        }\n        else if (value === null) {\n            delete targetMap[key];\n        }\n        else {\n            targetMap[value] = key;\n        }\n    }\n};\nlet needFocusDebugStyles = true;\nconst addFocusDebug = (prevFocusPath, newFocusPath) => {\n    if (needFocusDebugStyles) {\n        const style = document.createElement('style');\n        style.type = 'text/css';\n        style.innerHTML = `\n      [data-focus=\"3\"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus=\"2\"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus=\"1\"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    `;\n        document.head.appendChild(style);\n        needFocusDebugStyles = false;\n    }\n    prevFocusPath.forEach((elm) => {\n        elm.data = {\n            ...elm.data,\n            focus: undefined,\n        };\n    });\n    newFocusPath.forEach((elm, i) => {\n        elm.data = {\n            ...elm.data,\n            focus: i + 1,\n        };\n    });\n};\nlet activeElement;\nexport const setActiveElement = (elm) => {\n    updateFocusPath(elm, activeElement);\n    activeElement = elm;\n    // Callback for libraries to use signals / refs\n    Config.setActiveElement(elm);\n};\nlet focusPath = [];\nconst updateFocusPath = (currentFocusedElm, prevFocusedElm) => {\n    let current = currentFocusedElm;\n    const fp = [];\n    while (current) {\n        if (!current.states.has(Config.focusStateKey) ||\n            current === currentFocusedElm) {\n            current.states.add(Config.focusStateKey);\n            current.onFocus?.call(current, currentFocusedElm, prevFocusedElm);\n            current.onFocusChanged?.call(current, true, currentFocusedElm, prevFocusedElm);\n        }\n        fp.push(current);\n        current = current.parent;\n    }\n    focusPath.forEach((elm) => {\n        if (!fp.includes(elm)) {\n            elm.states.remove(Config.focusStateKey);\n            elm.onBlur?.call(elm, currentFocusedElm, prevFocusedElm);\n            elm.onFocusChanged?.call(elm, false, currentFocusedElm, prevFocusedElm);\n        }\n    });\n    if (Config.focusDebug) {\n        addFocusDebug(focusPath, fp);\n    }\n    focusPath = fp;\n    return fp;\n};\nconst propagateKeyDown = (e, mappedEvent, isHold) => {\n    let finalFocusElm = undefined;\n    for (const elm of focusPath) {\n        finalFocusElm = finalFocusElm || elm;\n        if (mappedEvent) {\n            const onKeyHandler = elm[`on${mappedEvent}`];\n            if (isFunction(onKeyHandler) &&\n                onKeyHandler.call(elm, e, elm, finalFocusElm) === true) {\n                break;\n            }\n        }\n        else {\n            console.log(`Unhandled key event: ${e.key || e.keyCode}`);\n        }\n        const fallbackFunction = isHold ? elm.onKeyHold : elm.onKeyPress;\n        if (isFunction(fallbackFunction) &&\n            fallbackFunction.call(elm, e, mappedEvent, elm, finalFocusElm) === true) {\n            break;\n        }\n    }\n    return false;\n};\nconst DEFAULT_KEY_HOLD_THRESHOLD = 200; // ms\nconst keyHoldTimeouts = {};\nconst keyHoldCallback = (e, mappedKeyHoldEvent) => {\n    delete keyHoldTimeouts[e.key || e.keyCode];\n    propagateKeyDown(e, mappedKeyHoldEvent, true);\n};\nconst handleKeyEvents = (delay, keypress, keyup) => {\n    if (keypress) {\n        const key = keypress.key || keypress.keyCode;\n        const mappedKeyHoldEvent = keyHoldMapEntries[keypress.key] || keyHoldMapEntries[keypress.keyCode];\n        const mappedKeyEvent = keyMapEntries[keypress.key] || keyMapEntries[keypress.keyCode];\n        if (!mappedKeyHoldEvent) {\n            propagateKeyDown(keypress, mappedKeyEvent, false);\n        }\n        else {\n            if (keyHoldTimeouts[key]) {\n                clearTimeout(keyHoldTimeouts[key]);\n            }\n            keyHoldTimeouts[key] = window.setTimeout(() => keyHoldCallback(keypress, mappedKeyHoldEvent), delay);\n        }\n    }\n    if (keyup) {\n        const key = keyup.key || keyup.keyCode;\n        const mappedKeyEvent = keyMapEntries[keyup.key] || keyMapEntries[keyup.keyCode];\n        if (keyHoldTimeouts[key]) {\n            clearTimeout(keyHoldTimeouts[key]);\n            delete keyHoldTimeouts[key];\n            propagateKeyDown(keyup, mappedKeyEvent, false);\n        }\n    }\n};\nexport const useFocusManager = ({ userKeyMap, keyHoldOptions, ownerContext = (cb) => {\n    cb();\n}, } = {}) => {\n    if (userKeyMap) {\n        flattenKeyMap(userKeyMap, keyMapEntries);\n    }\n    if (keyHoldOptions?.userKeyHoldMap) {\n        flattenKeyMap(keyHoldOptions.userKeyHoldMap, keyHoldMapEntries);\n    }\n    const delay = keyHoldOptions?.holdThreshold || DEFAULT_KEY_HOLD_THRESHOLD;\n    const runKeyEvent = handleKeyEvents.bind(null, delay);\n    // Owner context is for frameworks that need effects\n    const keyPressHandler = (event) => ownerContext(() => {\n        runKeyEvent(event, undefined);\n    });\n    const keyUpHandler = (event) => ownerContext(() => {\n        runKeyEvent(undefined, event);\n    });\n    document.addEventListener('keyup', keyUpHandler);\n    document.addEventListener('keydown', keyPressHandler);\n    return {\n        cleanup: () => {\n            document.removeEventListener('keydown', keyPressHandler);\n            document.removeEventListener('keyup', keyUpHandler);\n            for (const [_, timeout] of Object.entries(keyHoldTimeouts)) {\n                if (timeout)\n                    clearTimeout(timeout);\n            }\n        },\n        focusPath: () => focusPath,\n    };\n};\n//# sourceMappingURL=focusManager.js.map","import { renderer, createShader } from './lightningInit.js';\nimport States from './states.js';\nimport calculateFlex from './flex.js';\nimport { log, isArray, isNumber, isFunc, keyExists, isINode, isElementNode, isElementText, isTextNode, logRenderTree, } from './utils.js';\nimport { Config, isDev } from './config.js';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nimport { NodeType } from './nodeTypes.js';\nimport { setActiveElement } from './focusManager.js';\nconst layoutQueue = new Set();\nlet flushQueued = false;\nfunction runLayout() {\n    const queue = [...layoutQueue];\n    layoutQueue.clear();\n    for (let i = queue.length - 1; i >= 0; i--) {\n        const node = queue[i];\n        node.updateLayout();\n    }\n}\nfunction flushLayout() {\n    if (flushQueued)\n        return;\n    flushQueued = true;\n    // Use setTimeout to allow renderers microtasks to finish\n    setTimeout(() => {\n        flushQueued = false;\n        runLayout();\n    }, 0);\n}\nconst shaderCache = new Map();\nfunction convertEffectsToShader(node, styleEffects) {\n    let cacheKey;\n    if (Config.enableShaderCaching) {\n        const roundedAlpha = Math.round((node.alpha || 0) * 10) / 10; // Round to the first decimal\n        cacheKey =\n            `${node.width},${node.height},${roundedAlpha}` +\n                JSON.stringify(styleEffects);\n        if (shaderCache.has(cacheKey)) {\n            return shaderCache.get(cacheKey);\n        }\n    }\n    const effects = [];\n    for (const [type, props] of Object.entries(styleEffects)) {\n        effects.push({ type, props });\n    }\n    const shader = createShader('DynamicShader', { effects });\n    if (Config.enableShaderCaching && cacheKey) {\n        shaderCache.set(cacheKey, shader);\n    }\n    return shader;\n}\nfunction borderAccessor(direction = '') {\n    return {\n        set(value) {\n            // Format: width || { width, color }\n            if (isNumber(value)) {\n                value = { width: value, color: 0x000000ff };\n            }\n            this.effects = this.effects\n                ? {\n                    ...(this.effects || {}),\n                    ...{ [`border${direction}`]: value },\n                }\n                : { [`border${direction}`]: value };\n        },\n        get() {\n            return this.effects?.[`border${direction}`];\n        },\n    };\n}\nconst LightningRendererNumberProps = [\n    'alpha',\n    'color',\n    'colorTop',\n    'colorRight',\n    'colorLeft',\n    'colorBottom',\n    'colorTl',\n    'colorTr',\n    'colorBl',\n    'colorBr',\n    'height',\n    'fontSize',\n    'lineHeight',\n    'mount',\n    'mountX',\n    'mountY',\n    'pivot',\n    'pivotX',\n    'pivotY',\n    'rotation',\n    'scale',\n    'scaleX',\n    'scaleY',\n    'width',\n    'worldX',\n    'worldY',\n    'x',\n    'y',\n    'zIndex',\n    'zIndexLocked',\n];\nconst LightningRendererNonAnimatingProps = [\n    'absX',\n    'absY',\n    'autosize',\n    'clipping',\n    'contain',\n    'data',\n    'fontFamily',\n    'fontStretch',\n    'fontStyle',\n    'fontWeight',\n    'imageType',\n    'letterSpacing',\n    'maxLines',\n    'offsetY',\n    'overflowSuffix',\n    'preventCleanup',\n    'rtt',\n    'scrollable',\n    'scrollY',\n    'srcHeight',\n    'srcWidth',\n    'srcX',\n    'srcY',\n    'strictBounds',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'textOverflow',\n    'texture',\n    'textureOptions',\n    'verticalAlign',\n    'wordWrap',\n];\nexport class ElementNode extends Object {\n    constructor(name) {\n        super();\n        this._type = name === 'text' ? NodeType.TextNode : NodeType.Element;\n        this.rendered = false;\n        this.lng = {};\n        this.children = [];\n    }\n    get effects() {\n        return this._effects;\n    }\n    set effects(v) {\n        this._effects = v;\n        if (this.rendered) {\n            this.shader = convertEffectsToShader(this, v);\n        }\n    }\n    set id(id) {\n        this._id = id;\n        if (Config.rendererOptions?.inspector) {\n            this.data = { ...this.data, testId: id };\n        }\n    }\n    get id() {\n        return this._id;\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(p) {\n        this._parent = p;\n        if (this.rendered) {\n            this.lng.parent = p?.lng ?? null;\n        }\n    }\n    insertChild(node, beforeNode) {\n        node.parent = this;\n        if (beforeNode) {\n            // SolidJS can move nodes around in the children array.\n            // We need to insert following DOM insertBefore which moves elements.\n            this.removeChild(node);\n            const index = this.children.indexOf(beforeNode);\n            if (index >= 0) {\n                this.children.splice(index, 0, node);\n                return;\n            }\n        }\n        this.children.push(node);\n    }\n    removeChild(node) {\n        const nodeIndexToRemove = this.children.indexOf(node);\n        if (nodeIndexToRemove >= 0) {\n            this.children.splice(nodeIndexToRemove, 1);\n        }\n    }\n    get selectedNode() {\n        const selectedIndex = this.selected || 0;\n        for (let i = selectedIndex; i < this.children.length; i++) {\n            const element = this.children[i];\n            if (isElementNode(element)) {\n                this.selected = i;\n                return element;\n            }\n        }\n        return undefined;\n    }\n    set shader(shaderProps) {\n        let shProps = shaderProps;\n        if (isArray(shaderProps)) {\n            shProps = createShader(...shaderProps);\n        }\n        this.lng.shader = shProps;\n    }\n    _sendToLightningAnimatable(name, value) {\n        if (this.transition &&\n            this.rendered &&\n            Config.animationsEnabled &&\n            (this.transition === true || this.transition[name])) {\n            const animationSettings = this.transition === true || this.transition[name] === true\n                ? undefined\n                : this.transition[name];\n            const animationController = this.animate({ [name]: value }, animationSettings);\n            if (this.onAnimation) {\n                const animationEvents = Object.keys(this.onAnimation);\n                for (const event of animationEvents) {\n                    const handler = this.onAnimation[event];\n                    animationController.on(event, (controller, props) => {\n                        handler.call(this, controller, name, value, props);\n                    });\n                }\n            }\n            return animationController.start();\n        }\n        this.lng[name] = value;\n    }\n    animate(props, animationSettings) {\n        assertTruthy(this.rendered, 'Node must be rendered before animating');\n        return this.lng.animate(props, animationSettings || this.animationSettings || {});\n    }\n    chain(props, animationSettings) {\n        if (this._animationRunning) {\n            this._animationQueue = [];\n            this._animationRunning = false;\n        }\n        if (animationSettings) {\n            this._animationQueueSettings = animationSettings;\n        }\n        else if (!this._animationQueueSettings) {\n            this._animationQueueSettings =\n                animationSettings || this.animationSettings;\n        }\n        animationSettings = animationSettings || this._animationQueueSettings;\n        this._animationQueue = this._animationQueue || [];\n        this._animationQueue.push({ props, animationSettings });\n        return this;\n    }\n    async start() {\n        let animation = this._animationQueue.shift();\n        while (animation) {\n            this._animationRunning = true;\n            await this.animate(animation.props, animation.animationSettings)\n                .start()\n                .waitUntilStopped();\n            animation = this._animationQueue.shift();\n        }\n        this._animationRunning = false;\n        this._animationQueueSettings = undefined;\n    }\n    setFocus() {\n        if (this.rendered) {\n            // can be 0\n            if (this.forwardFocus !== undefined) {\n                if (isFunc(this.forwardFocus)) {\n                    if (this.forwardFocus.call(this, this) !== false) {\n                        return;\n                    }\n                }\n                else {\n                    const focusedIndex = typeof this.forwardFocus === 'number' ? this.forwardFocus : null;\n                    const nodes = this.children;\n                    if (focusedIndex !== null && focusedIndex < nodes.length) {\n                        const child = nodes[focusedIndex];\n                        isElementNode(child) && child.setFocus();\n                        return;\n                    }\n                }\n            }\n            // Delay setting focus so children can render (useful for Row + Column)\n            queueMicrotask(() => setActiveElement(this));\n        }\n        else {\n            this._autofocus = true;\n        }\n    }\n    _layoutOnLoad() {\n        this.lng.on('loaded', () => {\n            // Re-add the node to the layout queue because somehow the queue fluses and there is a straggler\n            layoutQueue.add(this.parent);\n            flushLayout();\n        });\n    }\n    getText() {\n        let result = '';\n        for (let i = 0; i < this.children.length; i++) {\n            result += this.children[i].text;\n        }\n        return result;\n    }\n    destroy() {\n        if (this.onDestroy) {\n            const destroyPromise = this.onDestroy(this);\n            // If onDestroy returns a promise, wait for it to resolve before destroying\n            // Useful with animations waitUntilStopped method which returns promise\n            if (destroyPromise instanceof Promise) {\n                destroyPromise.then(() => this._destroy());\n            }\n            else {\n                this._destroy();\n            }\n        }\n        else {\n            this._destroy();\n        }\n    }\n    _destroy() {\n        if (this._queueDelete && isINode(this.lng)) {\n            this.lng.destroy();\n            if (this.parent?.requiresLayout()) {\n                this.parent.updateLayout();\n            }\n        }\n    }\n    set style(style) {\n        if (isDev && this._style) {\n            // Avoid processing style changes again\n            console.warn('Style already set: https://lightning-tv.github.io/solid/#/essentials/styling?id=style-patterns-to-avoid');\n        }\n        if (!style) {\n            return;\n        }\n        this._style = style;\n        // Keys set in JSX are more important\n        for (const key in this._style) {\n            // be careful of 0 values\n            if (this[key] === undefined) {\n                this[key] = this._style[key];\n            }\n        }\n    }\n    get style() {\n        return this._style;\n    }\n    get hasChildren() {\n        return this.children.length > 0;\n    }\n    set src(src) {\n        if (typeof src === 'string') {\n            this.lng.src = src;\n            if (!this.color && this.rendered) {\n                this.color = 0xffffffff;\n            }\n        }\n        else {\n            this.color = 0x00000000;\n        }\n    }\n    get src() {\n        return this.lng.src;\n    }\n    getChildById(id) {\n        return this.children.find((c) => c.id === id);\n    }\n    searchChildrenById(id) {\n        // traverse all the childrens children\n        for (let i = 0; i < this.children.length; i++) {\n            const child = this.children[i];\n            if (isElementNode(child)) {\n                if (child.id === id) {\n                    return child;\n                }\n                const found = child.searchChildrenById(id);\n                if (found) {\n                    return found;\n                }\n            }\n        }\n    }\n    set states(states) {\n        this._states = this._states\n            ? this._states.merge(states)\n            : new States(this._stateChanged.bind(this), states);\n        if (this.rendered) {\n            this._stateChanged();\n        }\n    }\n    get states() {\n        this._states = this._states || new States(this._stateChanged.bind(this));\n        return this._states;\n    }\n    get animationSettings() {\n        return this._animationSettings || Config.animationSettings;\n    }\n    set animationSettings(animationSettings) {\n        this._animationSettings = animationSettings;\n    }\n    set hidden(val) {\n        this.alpha = val ? 0 : 1;\n    }\n    get hidden() {\n        return this.alpha === 0;\n    }\n    /**\n     * Sets the autofocus state of the element.\n     * When set to a truthy value, the element will automatically gain focus.\n     * You can also set it to a signal to recalculate\n     *\n     * @param val - A value to determine if the element should autofocus.\n     *              A truthy value enables autofocus, otherwise disables it.\n     */\n    set autofocus(val) {\n        this._autofocus = val ? true : false;\n        this._autofocus && this.setFocus();\n    }\n    get autofocus() {\n        return this._autofocus;\n    }\n    requiresLayout() {\n        return this.display === 'flex' || this.onLayout;\n    }\n    set updateLayoutOn(v) {\n        this.updateLayout();\n    }\n    get updateLayoutOn() {\n        return null;\n    }\n    updateLayout() {\n        if (this.hasChildren) {\n            log('Layout: ', this);\n            if (this.display === 'flex') {\n                if (calculateFlex(this)) {\n                    this.parent?.updateLayout();\n                }\n            }\n            if (isFunc(this.onLayout) && this.onLayout.call(this, this)) {\n                this.parent?.updateLayout();\n            }\n        }\n    }\n    _stateChanged() {\n        log('State Changed: ', this, this.states);\n        if (this.forwardStates) {\n            // apply states to children first\n            const states = this.states.slice();\n            this.children.forEach((c) => {\n                c.states = states;\n            });\n        }\n        const states = this.states;\n        if (this._undoStyles || keyExists(this, states)) {\n            let stylesToUndo;\n            if (this._undoStyles && this._undoStyles.length) {\n                stylesToUndo = {};\n                this._undoStyles.forEach((styleKey) => {\n                    if (isDev) {\n                        if (this.style[styleKey] === undefined) {\n                            console.warn('fallback style key not found: ', styleKey);\n                        }\n                    }\n                    stylesToUndo[styleKey] = this.style[styleKey];\n                });\n            }\n            const numStates = states.length;\n            if (numStates === 0) {\n                Object.assign(this, stylesToUndo);\n                this._undoStyles = [];\n                return;\n            }\n            let newStyles;\n            if (numStates === 1) {\n                newStyles = this[states[0]];\n                newStyles = stylesToUndo\n                    ? { ...stylesToUndo, ...newStyles }\n                    : newStyles;\n            }\n            else {\n                newStyles = states.reduce((acc, state) => {\n                    const styles = this[state];\n                    return styles ? { ...acc, ...styles } : acc;\n                }, stylesToUndo || {});\n            }\n            if (newStyles) {\n                this._undoStyles = Object.keys(newStyles);\n                // Apply transition first\n                if (newStyles.transition !== undefined) {\n                    this.transition = newStyles.transition;\n                }\n                // Apply the styles\n                Object.assign(this, newStyles);\n            }\n            else {\n                this._undoStyles = [];\n            }\n        }\n    }\n    render(topNode) {\n        // Elements are inserted from the inside out, then rendered from the outside in.\n        // Render starts when an element is insertered with a parent that is already renderered.\n        const node = this;\n        const parent = this.parent;\n        if (!parent) {\n            console.warn('Parent not set - no node created for: ', this);\n            return;\n        }\n        if (!parent.rendered) {\n            console.warn('Parent not rendered yet: ', this);\n            return;\n        }\n        if (parent.requiresLayout()) {\n            layoutQueue.add(parent);\n        }\n        if (this.rendered) {\n            // This happens if Array of items is reordered to reuse elements.\n            // We return after layout is queued so the change can trigger layout updates.\n            return;\n        }\n        if (this._states) {\n            this._stateChanged();\n        }\n        const props = node.lng;\n        props.x = props.x || 0;\n        props.y = props.y || 0;\n        props.parent = parent.lng;\n        if (this.right || this.right === 0) {\n            props.x = (parent.width || 0) - this.right;\n            props.mountX = 1;\n        }\n        if (this.bottom || this.bottom === 0) {\n            props.y = (parent.height || 0) - this.bottom;\n            props.mountY = 1;\n        }\n        if (this.center) {\n            this.centerX = this.centerY = true;\n        }\n        if (this.centerX) {\n            props.x += (parent.width || 0) / 2;\n            props.mountX = 0.5;\n        }\n        if (this.centerY) {\n            props.y += (parent.height || 0) / 2;\n            props.mountY = 0.5;\n        }\n        if (isElementText(node)) {\n            const textProps = props;\n            if (Config.fontSettings) {\n                for (const key in Config.fontSettings) {\n                    if (textProps[key] === undefined) {\n                        textProps[key] = Config.fontSettings[key];\n                    }\n                }\n            }\n            textProps.text = textProps.text || node.getText();\n            if (textProps.textAlign && !textProps.contain) {\n                console.warn('Text align requires contain: ', node.getText());\n            }\n            // contain is either width or both\n            if (textProps.contain) {\n                if (!textProps.width) {\n                    textProps.width =\n                        (parent.width || 0) - textProps.x - (textProps.marginRight || 0);\n                }\n                if (textProps.contain === 'both' &&\n                    !textProps.height &&\n                    !textProps.maxLines) {\n                    textProps.height =\n                        (parent.height || 0) - textProps.y - (textProps.marginBottom || 0);\n                }\n                else if (textProps.maxLines === 1) {\n                    textProps.height = (textProps.height ||\n                        textProps.lineHeight ||\n                        textProps.fontSize);\n                }\n            }\n            if (node._effects) {\n                props.shader = convertEffectsToShader(node, node._effects);\n            }\n            log('Rendering: ', this, props);\n            node.lng = renderer.createTextNode(props);\n            if (parent.requiresLayout()) {\n                if (!props.width || !props.height) {\n                    node._layoutOnLoad();\n                }\n            }\n        }\n        else {\n            // If its not an image or texture apply some defaults\n            if (!props.texture) {\n                // Set width and height to parent less offset\n                if (isNaN(props.width)) {\n                    props.width = (parent.width || 0) - props.x;\n                    node._calcWidth = true;\n                }\n                if (isNaN(props.height)) {\n                    props.height = (parent.height || 0) - props.y;\n                    node._calcHeight = true;\n                }\n                if (props.rtt && !props.color) {\n                    props.color = 0xffffffff;\n                }\n                if (!props.color && !props.src) {\n                    // Default color to transparent - If you later set a src, you'll need\n                    // to set color '#ffffffff'\n                    props.color = 0x00000000;\n                }\n            }\n            if (node._effects) {\n                props.shader = convertEffectsToShader(node, node._effects);\n            }\n            log('Rendering: ', this, props);\n            node.lng = renderer.createNode(props);\n        }\n        node.rendered = true;\n        if (isDev) {\n            // Store props so we can recreate raw renderer code\n            node._rendererProps = props;\n        }\n        if (node.autosize && parent.requiresLayout()) {\n            node._layoutOnLoad();\n        }\n        isFunc(this.onCreate) && this.onCreate.call(this, node);\n        if (node.onEvent) {\n            for (const [name, handler] of Object.entries(node.onEvent)) {\n                node.lng.on(name, (_inode, data) => handler.call(node, node, data));\n            }\n        }\n        // L3 Inspector adds div to the lng object\n        //@ts-expect-error - div is not in the typings\n        if (node.lng?.div) {\n            //@ts-expect-error - div is not in the typings\n            node.lng.div.element = node;\n        }\n        if (node._type === NodeType.Element) {\n            // only element nodes will have children that need rendering\n            const numChildren = node.children.length;\n            for (let i = 0; i < numChildren; i++) {\n                const c = node.children[i];\n                assertTruthy(c, 'Child is undefined');\n                if (isElementNode(c)) {\n                    c.render();\n                }\n                else if (isTextNode(c)) {\n                    // Solid Show uses an empty text node as a placeholder\n                    // Vue uses comment nodes for v-if\n                    console.warn('TextNode outside of <Text>: ', c);\n                }\n            }\n        }\n        if (topNode) {\n            //Do one pass of layout, then another with Text completed\n            runLayout();\n        }\n        node._autofocus && node.setFocus();\n    }\n}\nfor (const key of LightningRendererNumberProps) {\n    Object.defineProperty(ElementNode.prototype, key, {\n        get() {\n            return this.lng[key];\n        },\n        set(v) {\n            this._sendToLightningAnimatable(key, v);\n        },\n    });\n}\nfor (const key of LightningRendererNonAnimatingProps) {\n    Object.defineProperty(ElementNode.prototype, key, {\n        get() {\n            return this.lng[key];\n        },\n        set(v) {\n            this.lng[key] = v;\n        },\n    });\n}\n// Add Border Helpers\nfunction createEffectAccessor(key) {\n    return {\n        set(value) {\n            this.effects = this.effects\n                ? {\n                    ...this.effects,\n                    [key]: value,\n                }\n                : { [key]: value };\n        },\n        get() {\n            return this.effects?.[key];\n        },\n    };\n}\nif (isDev) {\n    ElementNode.prototype.lngTree = function () {\n        return logRenderTree(this);\n    };\n}\nObject.defineProperties(ElementNode.prototype, {\n    border: borderAccessor(),\n    borderLeft: borderAccessor('Left'),\n    borderRight: borderAccessor('Right'),\n    borderTop: borderAccessor('Top'),\n    borderBottom: borderAccessor('Bottom'),\n    linearGradient: createEffectAccessor('linearGradient'),\n    radialGradient: createEffectAccessor('radialGradient'),\n    radialProgress: createEffectAccessor('radialProgressGradient'),\n    borderRadius: {\n        set(radius) {\n            this.effects = this.effects\n                ? {\n                    ...this.effects,\n                    radius: { radius },\n                }\n                : { radius: { radius } };\n        },\n        get() {\n            return this.effects?.radius?.radius;\n        },\n    },\n});\n//# sourceMappingURL=elementNode.js.map","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = (n + m) >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;\n      else if (cmp < 0) n = k - 1;\n      else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined,\n  effects: undefined,\n  done: false,\n  getContextId() {\n    return getContextId(this.context.count);\n  },\n  getNextContextId() {\n    return getContextId(this.context.count++);\n  }\n};\nfunction getContextId(count) {\n  const num = String(count),\n    len = num.length - 1;\n  return sharedConfig.context.id + (len ? String.fromCharCode(96 + len) : \"\") + num;\n}\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: sharedConfig.getNextContextId(),\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst SUPPORTS_PROXY = typeof Proxy === \"function\";\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceConfig = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst DevHooks = {\n  afterUpdate: null,\n  afterCreateOwner: null,\n  afterCreateSignal: null\n};\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned\n      ? {\n          owned: null,\n          cleanups: null,\n          context: null,\n          owner: null\n        }\n      : {\n          owned: null,\n          cleanups: null,\n          context: current ? current.context : null,\n          owner: current\n        },\n    updateFn = unowned\n      ? () =>\n          fn(() => {\n            throw new Error(\"Dispose method must be an explicit argument to createRoot function\");\n          })\n      : () => fn(() => untrack(() => cleanNode(root)));\n  DevHooks.afterCreateOwner && DevHooks.afterCreateOwner(root);\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  {\n    if (options.name) s.name = options.name;\n    if (DevHooks.afterCreateSignal) DevHooks.afterCreateSignal(s);\n    if (!options.internal) registerGraph(s);\n  }\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);\n      else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE, options);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE, options);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE, options),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(\n      () => {\n        fn ? fn() : untrack(onInvalidate);\n        fn = undefined;\n      },\n      undefined,\n      false,\n      0,\n      options\n    ),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0, options);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if ((arguments.length === 2 && typeof pFetcher === \"object\") || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = \"initialValue\" in options,\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = sharedConfig.getNextContextId();\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;\n    else if (sharedConfig.load && sharedConfig.has(id)) initP = sharedConfig.load(id);\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated)\n        queueMicrotask(() =>\n          options.onHydrated(key, {\n            value: v\n          })\n        );\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);\n          else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p =\n      initP !== NO_INIT\n        ? initP\n        : untrack(() =>\n            fetcher(lookup, {\n              value: value(),\n              refetching\n            })\n          );\n    if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"value\" in p) {\n      if (p.status === \"success\") loadEnd(pr, p.value, undefined, lookup);\n      else loadEnd(pr, undefined, castError(p.value), lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => (scheduled = false));\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(\n      v => loadEnd(p, v, undefined, lookup),\n      e => loadEnd(p, undefined, castError(e), lookup)\n    );\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));\n  else load(false);\n  return [\n    read,\n    {\n      refetch: load,\n      mutate: setValue\n    }\n  ];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(\n    () => {\n      if (!t || !t.fn)\n        t = requestCallback(\n          () => setDeferred(() => node.value),\n          timeout !== undefined\n            ? {\n                timeout\n              }\n            : undefined\n        );\n      return source();\n    },\n    undefined,\n    true\n  );\n  const [deferred, setDeferred] = createSignal(\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    options\n  );\n  updateComputation(node);\n  setDeferred(() =>\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n  );\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(\n    p => {\n      const v = source();\n      for (const [key, val] of subs.entries())\n        if (fn(key, v) !== fn(key, p)) {\n          for (const c of val.values()) {\n            c.state = STALE;\n            if (c.pure) Updates.push(c);\n            else Effects.push(c);\n          }\n        }\n      return v;\n    },\n    undefined,\n    true,\n    STALE,\n    options\n  );\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if ((l = subs.get(key))) l.add(listener);\n      else subs.set(key, (l = new Set([listener])));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(\n      key,\n      Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n    );\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (!ExternalSourceConfig && Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    if (ExternalSourceConfig) return ExternalSourceConfig.untrack(fn);\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return prevValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null)\n    console.warn(\"cleanups created outside a `createRoot` or `render` will never be run\");\n  else if (Owner.cleanups === null) Owner.cleanups = [fn];\n  else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t =\n        Transition ||\n        (Transition = {\n          sources: new Set(),\n          effects: [],\n          promises: new Set(),\n          disposed: new Set(),\n          queue: new Set(),\n          running: true\n        });\n      t.done || (t.done = new Promise(res => (t.resolve = res)));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nconst [transPending, setTransPending] = /*@__PURE__*/ createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction devComponent(Comp, props) {\n  const c = createComputation(\n    () =>\n      untrack(() => {\n        Object.assign(Comp, {\n          [$DEVCOMP]: true\n        });\n        return Comp(props);\n      }),\n    undefined,\n    true,\n    0\n  );\n  c.props = props;\n  c.observers = null;\n  c.observerSlots = null;\n  c.name = Comp.name;\n  c.component = Comp;\n  updateComputation(c);\n  return c.tValue !== undefined ? c.tValue : c.value;\n}\nfunction registerGraph(value) {\n  if (!Owner) return;\n  if (Owner.sourceMap) Owner.sourceMap.push(value);\n  else Owner.sourceMap = [value];\n  value.graph = Owner;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id, options),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let value;\n  return Owner && Owner.context && (value = Owner.context[context.id]) !== undefined\n    ? value\n    : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()), undefined, {\n    name: \"children\"\n  });\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory, untrack = fn => fn()) {\n  if (ExternalSourceConfig) {\n    const { factory: oldFactory, untrack: oldUntrack } = ExternalSourceConfig;\n    ExternalSourceConfig = {\n      factory: (fn, trigger) => {\n        const oldSource = oldFactory(fn, trigger);\n        const source = factory(x => oldSource.track(x), trigger);\n        return {\n          track: x => source.track(x),\n          dispose() {\n            source.dispose();\n            oldSource.dispose();\n          }\n        };\n      },\n      untrack: fn => oldUntrack(() => untrack(fn))\n    };\n  } else {\n    ExternalSourceConfig = {\n      factory,\n      untrack\n    };\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);\n    else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current =\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || (!isComp && Transition.sources.has(node))) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);\n            else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;\n          else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (true) throw new Error(\"Potential Infinite Loop Detected.\");\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(\n    node,\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    time\n  );\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner,\n    listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null)\n    console.warn(\"computations created outside a `createRoot` or `render` will never be disposed\");\n  else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];\n      else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];\n      else Owner.owned.push(c);\n    }\n  }\n  if (options && options.name) c.name = options.name;\n  if (ExternalSourceConfig && c.fn) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceConfig.factory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceConfig.factory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  DevHooks.afterCreateOwner && DevHooks.afterCreateOwner(c);\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;\n  else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);\n    else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  else DevHooks.afterUpdate && DevHooks.afterUpdate();\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);\n    else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    }\n    setHydrateContext();\n  }\n  if (sharedConfig.effects && (sharedConfig.done || !sharedConfig.count)) {\n    queue = [...sharedConfig.effects, ...queue];\n    userLength += sharedConfig.effects.length;\n    delete sharedConfig.effects;\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;\n  else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount))\n          runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;\n      else o.state = PENDING;\n      if (o.pure) Updates.push(o);\n      else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (node.tOwned) {\n    for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n    delete node.tOwned;\n  }\n  if (Transition && Transition.running && node.pure) {\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;\n  else node.state = 0;\n  delete node.sourceMap;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, (owner && owner.owner) || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects)\n    Effects.push({\n      fn() {\n        runErrors(error, fns, owner);\n      },\n      state: STALE\n    });\n  else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(\n      () =>\n        (res = untrack(() => {\n          Owner.context = {\n            ...Owner.context,\n            [id]: props.value\n          };\n          return children(() => props.children);\n        })),\n      undefined,\n      options\n    );\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null)\n    console.warn(\"error handlers created outside a `createRoot` or `render` will never be run\");\n  else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler =\n        typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => (\"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub()));\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      newLen = newItems.length,\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newIndices, newIndicesNext, temp, tempdisposers, tempIndexes, start, end, newEnd, item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      } else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (\n          start = 0, end = Math.min(len, newLen);\n          start < end && items[start] === newItems[start];\n          start++\n        );\n        for (\n          end = len - 1, newEnd = newLen - 1;\n          end >= start && newEnd >= start && items[end] === newItems[newEnd];\n          end--, newEnd--\n        ) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, (len = newLen));\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j, {\n          name: \"index\"\n        });\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [],\n      newLen = newItems.length;\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newLen; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newLen;\n      items = newItems.slice(0);\n      return (mapped = mapped.slice(0, len));\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i], {\n        name: \"value\"\n      });\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = devComponent(Comp, props || {});\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return devComponent(Comp, props || {});\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || (!!s && $PROXY in s);\n    sources[i] = typeof s === \"function\" ? ((proxy = true), createMemo(s)) : s;\n  }\n  if (SUPPORTS_PROXY && proxy) {\n    return new Proxy(\n      {\n        get(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            const v = resolveSource(sources[i])[property];\n            if (v !== undefined) return v;\n          }\n        },\n        has(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            if (property in resolveSource(sources[i])) return true;\n          }\n          return false;\n        },\n        keys() {\n          const keys = [];\n          for (let i = 0; i < sources.length; i++)\n            keys.push(...Object.keys(resolveSource(sources[i])));\n          return [...new Set(keys)];\n        }\n      },\n      propTraps\n    );\n  }\n  const sourcesMap = {};\n  const defined = Object.create(null);\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = sourceKeys.length - 1; i >= 0; i--) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined[key]) {\n        defined[key] = desc.get\n          ? {\n              enumerable: true,\n              configurable: true,\n              get: resolveSources.bind((sourcesMap[key] = [desc.get.bind(source)]))\n            }\n          : desc.value !== undefined\n          ? desc\n          : undefined;\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) sources.push(desc.get.bind(source));\n          else if (desc.value !== undefined) sources.push(() => desc.value);\n        }\n      }\n    }\n  }\n  const target = {};\n  const definedKeys = Object.keys(defined);\n  for (let i = definedKeys.length - 1; i >= 0; i--) {\n    const key = definedKeys[i],\n      desc = defined[key];\n    if (desc && desc.get) Object.defineProperty(target, key, desc);\n    else target[key] = desc ? desc.value : undefined;\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if (SUPPORTS_PROXY && $PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy(\n        {\n          get(property) {\n            return k.includes(property) ? props[property] : undefined;\n          },\n          has(property) {\n            return k.includes(property) && property in props;\n          },\n          keys() {\n            return k.filter(property => property in props);\n          }\n        },\n        propTraps\n      );\n    });\n    res.push(\n      new Proxy(\n        {\n          get(property) {\n            return blocked.has(property) ? undefined : props[property];\n          },\n          has(property) {\n            return blocked.has(property) ? false : property in props;\n          },\n          keys() {\n            return Object.keys(props).filter(k => !blocked.has(k));\n          }\n        },\n        propTraps\n      )\n    );\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc =\n      !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc\n          ? (objects[objectIndex][propName] = desc.value)\n          : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc\n        ? (otherObject[propName] = desc.value)\n        : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        !sharedConfig.done && setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() =>\n      (Comp = comp())\n        ? untrack(() => {\n            if (true)\n              Object.assign(Comp, {\n                [$DEVCOMP]: true\n              });\n            if (!ctx || sharedConfig.done) return Comp(props);\n            const c = sharedConfig.context;\n            setHydrateContext(ctx);\n            const r = Comp(props);\n            setHydrateContext(c);\n            return r;\n          })\n        : \"\"\n    );\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => (comp = () => mod.default)), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? sharedConfig.getNextContextId() : `cl-${counter++}`;\n}\n\nconst narrowedError = name =>\n  `Attempting to access a stale value from <${name}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(\n    mapArray(() => props.each, props.children, fallback || undefined),\n    undefined,\n    {\n      name: \"value\"\n    }\n  );\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(\n    indexArray(() => props.each, props.children, fallback || undefined),\n    undefined,\n    {\n      name: \"value\"\n    }\n  );\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => (keyed ? a === b : !a === !b),\n    name: \"condition\"\n  });\n  return createMemo(\n    () => {\n      const c = condition();\n      if (c) {\n        const child = props.children;\n        const fn = typeof child === \"function\" && child.length > 0;\n        return fn\n          ? untrack(() =>\n              child(\n                keyed\n                  ? c\n                  : () => {\n                      if (!untrack(condition)) throw narrowedError(\"Show\");\n                      return props.when;\n                    }\n              )\n            )\n          : child;\n      }\n      return props.fallback;\n    },\n    undefined,\n    {\n      name: \"value\"\n    }\n  );\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(\n      () => {\n        let conds = conditions();\n        if (!Array.isArray(conds)) conds = [conds];\n        for (let i = 0; i < conds.length; i++) {\n          const c = conds[i].when;\n          if (c) {\n            keyed = !!conds[i].keyed;\n            return [i, c, conds[i]];\n          }\n        }\n        return [-1];\n      },\n      undefined,\n      {\n        equals,\n        name: \"eval conditions\"\n      }\n    );\n  return createMemo(\n    () => {\n      const [index, when, cond] = evalConditions();\n      if (index < 0) return props.fallback;\n      const c = cond.children;\n      const fn = typeof c === \"function\" && c.length > 0;\n      return fn\n        ? untrack(() =>\n            c(\n              keyed\n                ? when\n                : () => {\n                    if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n                    return cond.when;\n                  }\n            )\n          )\n        : c;\n    },\n    undefined,\n    {\n      name: \"value\"\n    }\n  );\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load)\n    err = sharedConfig.load(sharedConfig.getContextId());\n  const [errored, setErrored] = createSignal(err, {\n    name: \"errored\"\n  });\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(\n    () => {\n      let e;\n      if ((e = errored())) {\n        const f = props.fallback;\n        if (typeof f !== \"function\" || f.length == 0) console.error(e);\n        return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n      }\n      return catchError(() => props.children, setErrored);\n    },\n    undefined,\n    {\n      name: \"value\"\n    }\n  );\n}\n\nconst suspenseListEquals = (a, b) =>\n  a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = /* #__PURE__ */ createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(\n    prev => {\n      const reveal = props.revealOrder,\n        tail = props.tail,\n        { showContent = true, showFallback = true } = show ? show() : {},\n        reg = registry(),\n        reverse = reveal === \"backwards\";\n      if (reveal === \"together\") {\n        const all = reg.every(inFallback => !inFallback());\n        const res = reg.map(() => ({\n          showContent: all && showContent,\n          showFallback\n        }));\n        res.inFallback = !all;\n        return res;\n      }\n      let stop = false;\n      let inFallback = prev.inFallback;\n      const res = [];\n      for (let i = 0, len = reg.length; i < len; i++) {\n        const n = reverse ? len - i - 1 : i,\n          s = reg[n]();\n        if (!stop && !s) {\n          res[n] = {\n            showContent,\n            showFallback\n          };\n        } else {\n          const next = !stop;\n          if (next) inFallback = true;\n          res[n] = {\n            showContent: next,\n            showFallback: !tail || (next && tail === \"collapsed\") ? showFallback : false\n          };\n          stop = true;\n        }\n      }\n      if (!stop) inFallback = false;\n      res.inFallback = inFallback;\n      return res;\n    },\n    {\n      inFallback: false\n    }\n  );\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.getContextId();\n    let ref = sharedConfig.load(key);\n    if (ref) {\n      if (typeof ref !== \"object\" || ref.status !== \"success\") p = ref;\n      else sharedConfig.gather(key);\n    }\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(\n        () => {\n          if (sharedConfig.done) return set();\n          sharedConfig.gather(key);\n          setHydrateContext(ctx);\n          set();\n          setHydrateContext();\n        },\n        err => {\n          error = err;\n          set();\n        }\n      );\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return (flicker = undefined);\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            { showContent = true, showFallback = true } = show ? show() : {};\n          if ((!inFallback || (p && p !== \"$$f\")) && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"F\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = {\n  hooks: DevHooks,\n  writeSignal,\n  registerGraph\n};\nif (globalThis) {\n  if (!globalThis.Solid$$) globalThis.Solid$$ = true;\n  else\n    console.warn(\n      \"You appear to have multiple instances of Solid. This can lead to unexpected behavior.\"\n    );\n}\n\nexport {\n  $DEVCOMP,\n  $PROXY,\n  $TRACK,\n  DEV,\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  batch,\n  cancelCallback,\n  catchError,\n  children,\n  createComponent,\n  createComputed,\n  createContext,\n  createDeferred,\n  createEffect,\n  createMemo,\n  createReaction,\n  createRenderEffect,\n  createResource,\n  createRoot,\n  createSelector,\n  createSignal,\n  createUniqueId,\n  enableExternalSource,\n  enableHydration,\n  enableScheduling,\n  equalFn,\n  from,\n  getListener,\n  getOwner,\n  indexArray,\n  lazy,\n  mapArray,\n  mergeProps,\n  observable,\n  on,\n  onCleanup,\n  onError,\n  onMount,\n  requestCallback,\n  resetErrorBoundaries,\n  runWithOwner,\n  sharedConfig,\n  splitProps,\n  startTransition,\n  untrack,\n  useContext,\n  useTransition\n};\n","import { createSignal } from 'solid-js';\nimport { type ElementNode } from '@lightningtv/core';\nexport const [activeElement, setActiveElement] = createSignal<\n  ElementNode | undefined\n>(undefined);\n","import { isInteger, type Styles } from '@lightningtv/core';\nimport { Accessor, createMemo } from 'solid-js';\n\n/**\n * Converts a color string to a color number value.\n */\nexport function hexColor(color: string | number = ''): number {\n  if (isInteger(color)) {\n    return color;\n  }\n\n  if (typeof color === 'string') {\n    // Renderer expects RGBA values\n    if (color.startsWith('#')) {\n      return Number(\n        color.replace('#', '0x') + (color.length === 7 ? 'ff' : ''),\n      );\n    }\n\n    if (color.startsWith('0x')) {\n      return Number(color);\n    }\n    return Number('0x' + (color.length === 6 ? color + 'ff' : color));\n  }\n\n  return 0x00000000;\n}\n\nexport function combineStyles<T extends Styles>(\n  style1: T | undefined,\n  style2: T | undefined,\n): T {\n  if (!style1) {\n    return style2!;\n  }\n\n  if (!style2) {\n    return style1;\n  }\n\n  return {\n    ...style2,\n    ...style1,\n  };\n}\n\nexport function combineStylesMemo<T extends Styles>(\n  style1: T | undefined,\n  style2: T | undefined,\n): Accessor<T> {\n  if (!style1) {\n    return () => style2!;\n  }\n\n  if (!style2) {\n    return () => style1;\n  }\n\n  return createMemo(() => ({\n    ...style2,\n    ...style1,\n  }));\n}\n","import {\n  createRoot,\n  createRenderEffect,\n  mergeProps,\n  createMemo,\n  createComponent,\n  untrack\n} from \"solid-js\";\n\nfunction createRenderer$1({\n  createElement,\n  createTextNode,\n  isTextNode,\n  replaceText,\n  insertNode,\n  removeNode,\n  setProperty,\n  getParentNode,\n  getFirstChild,\n  getNextSibling\n}) {\n  function insert(parent, accessor, marker, initial) {\n    if (marker !== undefined && !initial) initial = [];\n    if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n    createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n  }\n  function insertExpression(parent, value, current, marker, unwrapArray) {\n    while (typeof current === \"function\") current = current();\n    if (value === current) return current;\n    const t = typeof value,\n      multi = marker !== undefined;\n    if (t === \"string\" || t === \"number\") {\n      if (t === \"number\") value = value.toString();\n      if (multi) {\n        let node = current[0];\n        if (node && isTextNode(node)) {\n          replaceText(node, value);\n        } else node = createTextNode(value);\n        current = cleanChildren(parent, current, marker, node);\n      } else {\n        if (current !== \"\" && typeof current === \"string\") {\n          replaceText(getFirstChild(parent), (current = value));\n        } else {\n          cleanChildren(parent, current, marker, createTextNode(value));\n          current = value;\n        }\n      }\n    } else if (value == null || t === \"boolean\") {\n      current = cleanChildren(parent, current, marker);\n    } else if (t === \"function\") {\n      createRenderEffect(() => {\n        let v = value();\n        while (typeof v === \"function\") v = v();\n        current = insertExpression(parent, v, current, marker);\n      });\n      return () => current;\n    } else if (Array.isArray(value)) {\n      const array = [];\n      if (normalizeIncomingArray(array, value, unwrapArray)) {\n        createRenderEffect(\n          () => (current = insertExpression(parent, array, current, marker, true))\n        );\n        return () => current;\n      }\n      if (array.length === 0) {\n        const replacement = cleanChildren(parent, current, marker);\n        if (multi) return (current = replacement);\n      } else {\n        if (Array.isArray(current)) {\n          if (current.length === 0) {\n            appendNodes(parent, array, marker);\n          } else reconcileArrays(parent, current, array);\n        } else if (current == null || current === \"\") {\n          appendNodes(parent, array);\n        } else {\n          reconcileArrays(parent, (multi && current) || [getFirstChild(parent)], array);\n        }\n      }\n      current = array;\n    } else {\n      if (Array.isArray(current)) {\n        if (multi) return (current = cleanChildren(parent, current, marker, value));\n        cleanChildren(parent, current, null, value);\n      } else if (current == null || current === \"\" || !getFirstChild(parent)) {\n        insertNode(parent, value);\n      } else replaceNode(parent, value, getFirstChild(parent));\n      current = value;\n    }\n    return current;\n  }\n  function normalizeIncomingArray(normalized, array, unwrap) {\n    let dynamic = false;\n    for (let i = 0, len = array.length; i < len; i++) {\n      let item = array[i],\n        t;\n      if (item == null || item === true || item === false);\n      else if (Array.isArray(item)) {\n        dynamic = normalizeIncomingArray(normalized, item) || dynamic;\n      } else if ((t = typeof item) === \"string\" || t === \"number\") {\n        normalized.push(createTextNode(item));\n      } else if (t === \"function\") {\n        if (unwrap) {\n          while (typeof item === \"function\") item = item();\n          dynamic =\n            normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item]) || dynamic;\n        } else {\n          normalized.push(item);\n          dynamic = true;\n        }\n      } else normalized.push(item);\n    }\n    return dynamic;\n  }\n  function reconcileArrays(parentNode, a, b) {\n    let bLength = b.length,\n      aEnd = a.length,\n      bEnd = bLength,\n      aStart = 0,\n      bStart = 0,\n      after = getNextSibling(a[aEnd - 1]),\n      map = null;\n    while (aStart < aEnd || bStart < bEnd) {\n      if (a[aStart] === b[bStart]) {\n        aStart++;\n        bStart++;\n        continue;\n      }\n      while (a[aEnd - 1] === b[bEnd - 1]) {\n        aEnd--;\n        bEnd--;\n      }\n      if (aEnd === aStart) {\n        const node =\n          bEnd < bLength ? (bStart ? getNextSibling(b[bStart - 1]) : b[bEnd - bStart]) : after;\n        while (bStart < bEnd) insertNode(parentNode, b[bStart++], node);\n      } else if (bEnd === bStart) {\n        while (aStart < aEnd) {\n          if (!map || !map.has(a[aStart])) removeNode(parentNode, a[aStart]);\n          aStart++;\n        }\n      } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n        const node = getNextSibling(a[--aEnd]);\n        insertNode(parentNode, b[bStart++], getNextSibling(a[aStart++]));\n        insertNode(parentNode, b[--bEnd], node);\n        a[aEnd] = b[bEnd];\n      } else {\n        if (!map) {\n          map = new Map();\n          let i = bStart;\n          while (i < bEnd) map.set(b[i], i++);\n        }\n        const index = map.get(a[aStart]);\n        if (index != null) {\n          if (bStart < index && index < bEnd) {\n            let i = aStart,\n              sequence = 1,\n              t;\n            while (++i < aEnd && i < bEnd) {\n              if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n              sequence++;\n            }\n            if (sequence > index - bStart) {\n              const node = a[aStart];\n              while (bStart < index) insertNode(parentNode, b[bStart++], node);\n            } else replaceNode(parentNode, b[bStart++], a[aStart++]);\n          } else aStart++;\n        } else removeNode(parentNode, a[aStart++]);\n      }\n    }\n  }\n  function cleanChildren(parent, current, marker, replacement) {\n    if (marker === undefined) {\n      let removed;\n      while ((removed = getFirstChild(parent))) removeNode(parent, removed);\n      replacement && insertNode(parent, replacement);\n      return \"\";\n    }\n    const node = replacement || createTextNode(\"\");\n    if (current.length) {\n      let inserted = false;\n      for (let i = current.length - 1; i >= 0; i--) {\n        const el = current[i];\n        if (node !== el) {\n          const isParent = getParentNode(el) === parent;\n          if (!inserted && !i)\n            isParent ? replaceNode(parent, node, el) : insertNode(parent, node, marker);\n          else isParent && removeNode(parent, el);\n        } else inserted = true;\n      }\n    } else insertNode(parent, node, marker);\n    return [node];\n  }\n  function appendNodes(parent, array, marker) {\n    for (let i = 0, len = array.length; i < len; i++) insertNode(parent, array[i], marker);\n  }\n  function replaceNode(parent, newNode, oldNode) {\n    insertNode(parent, newNode, oldNode);\n    removeNode(parent, oldNode);\n  }\n  function spreadExpression(node, props, prevProps = {}, skipChildren) {\n    props || (props = {});\n    if (!skipChildren) {\n      createRenderEffect(\n        () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n      );\n    }\n    createRenderEffect(() => props.ref && props.ref(node));\n    createRenderEffect(() => {\n      for (const prop in props) {\n        if (prop === \"children\" || prop === \"ref\") continue;\n        const value = props[prop];\n        if (value === prevProps[prop]) continue;\n        setProperty(node, prop, value, prevProps[prop]);\n        prevProps[prop] = value;\n      }\n    });\n    return prevProps;\n  }\n  return {\n    render(code, element) {\n      let disposer;\n      createRoot(dispose => {\n        disposer = dispose;\n        insert(element, code());\n      });\n      return disposer;\n    },\n    insert,\n    spread(node, accessor, skipChildren) {\n      if (typeof accessor === \"function\") {\n        createRenderEffect(current => spreadExpression(node, accessor(), current, skipChildren));\n      } else spreadExpression(node, accessor, undefined, skipChildren);\n    },\n    createElement,\n    createTextNode,\n    insertNode,\n    setProp(node, name, value, prev) {\n      setProperty(node, name, value, prev);\n      return value;\n    },\n    mergeProps,\n    effect: createRenderEffect,\n    memo: createMemo,\n    createComponent,\n    use(fn, element, arg) {\n      return untrack(() => fn(element, arg));\n    }\n  };\n}\n\nfunction createRenderer(options) {\n  const renderer = createRenderer$1(options);\n  renderer.mergeProps = mergeProps;\n  return renderer;\n}\n\nexport { createRenderer };\n","import {\n  assertTruthy,\n  isElementText,\n  ElementNode,\n  NodeType,\n  log,\n  type ElementText,\n  type TextNode,\n} from '@lightningtv/core';\nimport type { SolidNode, SolidRendererOptions } from './types.js';\n\nexport default {\n  createElement(name: string): ElementNode {\n    return new ElementNode(name);\n  },\n  createTextNode(text: string): TextNode {\n    // A text node is just a string - not the <text> node\n    return { _type: NodeType.Text, text };\n  },\n  replaceText(node: TextNode, value: string): void {\n    log('Replace Text: ', node, value);\n    node.text = value;\n    const parent = node.parent;\n    assertTruthy(parent);\n    parent.text = parent.getText();\n  },\n  setProperty(node: ElementNode, name: string, value: any = true): void {\n    node[name] = value;\n  },\n  insertNode(parent: ElementNode, node: SolidNode, anchor: SolidNode): void {\n    log('INSERT: ', parent, node, anchor);\n\n    parent.insertChild(node, anchor);\n    node._queueDelete = false;\n\n    if (node instanceof ElementNode) {\n      parent.rendered && node.render(true);\n    } else if (isElementText(parent)) {\n      // TextNodes can be placed outside of <text> nodes when <Show> is used as placeholder\n      parent.text = parent.getText();\n    }\n  },\n  isTextNode(node: SolidNode): boolean {\n    return isElementText(node);\n  },\n  removeNode(parent: ElementNode, node: SolidNode): void {\n    log('REMOVE: ', parent, node);\n    parent.removeChild(node);\n    node._queueDelete = true;\n    if (node instanceof ElementNode) {\n      // Solid replacesNodes to move them (via insert and remove),\n      // so we need to wait for the next microtask to destroy the node\n      // in the event it gets a new parent.\n      queueMicrotask(() => node.destroy());\n    }\n  },\n  getParentNode(node: SolidNode): ElementNode | ElementText | undefined {\n    return node.parent;\n  },\n  getFirstChild(node: ElementNode): SolidNode | undefined {\n    return node.children[0] as SolidNode;\n  },\n  getNextSibling(node: SolidNode): SolidNode | undefined {\n    const children = node.parent!.children || [];\n    const index = children.indexOf(node as any) + 1;\n    if (index < children.length) {\n      return children[index] as SolidNode;\n    }\n    return undefined;\n  },\n} satisfies SolidRendererOptions;\n","import { createRenderer as solidCreateRenderer } from 'solid-js/universal';\nimport {\n  Config,\n  type NodeProps,\n  type TextProps,\n  startLightningRenderer,\n  type RendererMain,\n  type RendererMainSettings,\n} from '@lightningtv/core';\nimport nodeOpts from './solidOpts.js';\nimport {\n  splitProps,\n  createMemo,\n  untrack,\n  type JSXElement,\n  type ValidComponent,\n} from 'solid-js';\nimport type { SolidNode } from './types.js';\nimport { setActiveElement } from './activeElement.js';\n\nconst solidRenderer = solidCreateRenderer<SolidNode>(nodeOpts);\n\nlet renderer: RendererMain;\nexport const rootNode = nodeOpts.createElement('App');\n\nconst render = function (code: () => JSXElement) {\n  // @ts-expect-error - code is jsx element and not SolidElement yet\n  return solidRenderer.render(code, rootNode);\n};\n\nexport function createRenderer(\n  rendererOptions?: RendererMainSettings,\n  node?: HTMLElement | string,\n) {\n  const options =\n    rendererOptions || (Config.rendererOptions as RendererMainSettings);\n\n  renderer = startLightningRenderer(options, node || 'app');\n  //Prevent this from happening automatically\n  Config.setActiveElement = setActiveElement;\n  rootNode.lng = renderer.root!;\n  rootNode.rendered = true;\n  return {\n    renderer,\n    rootNode,\n    render,\n  };\n}\n\nexport const {\n  effect,\n  memo,\n  createComponent,\n  createElement,\n  createTextNode,\n  insertNode,\n  insert,\n  spread,\n  setProp,\n  mergeProps,\n  use,\n} = solidRenderer;\n\n/**\n * renders an arbitrary custom or native component and passes the other props\n * ```typescript\n * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />\n * ```\n * @description https://www.solidjs.com/docs/latest/api#dynamic\n */\nexport function Dynamic<T>(\n  props: T & {\n    component?: ValidComponent;\n  },\n): JSXElement {\n  const [p, others] = splitProps(props, ['component']);\n\n  const cached = createMemo(() => p.component);\n\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case 'function':\n        return untrack(() => component(others));\n\n      case 'string': {\n        const el = createElement(component);\n        spread(el, others);\n        return el;\n      }\n\n      default:\n        break;\n    }\n  }) as unknown as JSXElement;\n}\n\n// Dont use JSX as it creates circular dependencies and causes trouble with the playground.\nexport const View = (props: NodeProps) => {\n  const el = createElement('node');\n  spread(el, props, false);\n  return el as unknown as JSXElement;\n};\n\nexport const Text = (props: TextProps) => {\n  const el = createElement('text');\n  spread(el, props, false);\n  return el as unknown as JSXElement;\n};\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Number of floating point numbers that represent a single glyph in the SDF vertex buffer.\n *\n * @remarks\n * The vertex buffer contains:\n *  - 6 vertex positions\n *  - 6 texture coordinates\n *  - = 12 positions/coordinates per glyph\n *\n * Each vertex position and texture coordinate consist of 2 floating point numbers (x/y).\n * So there are 12 * 2 = 24 floating point numbers that make up a single glyph.\n */\nexport const FLOATS_PER_GLYPH = 24;\n//# sourceMappingURL=constants.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../../../utils.js';\n/**\n * Gets the start conditions for the layout loop.\n *\n * @remarks\n * Returns `undefined` if the layout loop should not be run.\n *\n * @param fontSize\n * @param fontSizeRatio\n * @param sdfLineHeight\n * @param renderWindow\n * @param lineCache\n * @param textH\n * @returns\n */\nexport function getStartConditions(sdfFontSize, sdfLineHeight, fontFace, verticalAlign, offsetY, fontSizeRatio, renderWindow, lineCache, textH) {\n    // State variables\n    const startLineIndex = Math.min(Math.max(renderWindow.firstLineIdx, 0), lineCache.length);\n    const sdfStartX = 0;\n    const { metrics } = fontFace;\n    assertTruthy(metrics, 'Font metrics not loaded');\n    assertTruthy(fontFace.data, 'Font data not loaded');\n    /**\n     * Bare line height is the distance between the ascender and descender of the font.\n     * without the line gap metric.\n     */\n    const sdfBareLineHeight = (metrics.ascender - metrics.descender) * sdfFontSize;\n    let sdfVerticalAlignYOffset = 0;\n    if (verticalAlign === 'middle') {\n        sdfVerticalAlignYOffset = (sdfLineHeight - sdfBareLineHeight) / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        sdfVerticalAlignYOffset = sdfLineHeight - sdfBareLineHeight;\n    }\n    const sdfOffsetY = offsetY / fontSizeRatio;\n    /**\n     * This is the position from the top of the text drawing line to where the\n     * baseline of the text will be according to the encoded positioning data for\n     * each glyph in the SDF data. This also happens to be the ascender value\n     * that is encoded into the font data.\n     */\n    const sdfEncodedAscender = fontFace.data.common.base;\n    /**\n     * This is the ascender that is configured and overridable in the font face.\n     */\n    const sdfConfiguredAscender = metrics.ascender * sdfFontSize;\n    /**\n     * If the configured ascender is different from the SDF data's encoded\n     * ascender, the offset of the text will be adjusted by the difference.\n     */\n    const sdfAscenderAdjOffset = sdfConfiguredAscender - sdfEncodedAscender;\n    const sdfStartY = sdfOffsetY +\n        sdfAscenderAdjOffset +\n        startLineIndex * sdfLineHeight +\n        sdfVerticalAlignYOffset; // TODO: Figure out what determines the initial y offset of text.\n    // Don't attempt to render anything if we know we're starting past the established end of the text\n    if (textH && sdfStartY >= textH / fontSizeRatio) {\n        return;\n    }\n    return {\n        sdfX: sdfStartX,\n        sdfY: sdfStartY,\n        lineIndex: startLineIndex,\n    };\n}\n//# sourceMappingURL=getStartConditions.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A wrapper Generator class that makes a generator peekable.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class PeekableIterator {\n    iterator;\n    peekBuffer = [];\n    _lastIndex;\n    constructor(iterator, indexBase = 0) {\n        this.iterator = iterator;\n        this.iterator = iterator;\n        this._lastIndex = indexBase - 1;\n        this.peekBuffer = [];\n    }\n    next() {\n        const nextResult = this.peekBuffer.length > 0\n            ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                this.peekBuffer.pop()\n            : this.iterator.next();\n        if (nextResult.done) {\n            this._lastIndex = -1;\n        }\n        else {\n            this._lastIndex++;\n        }\n        return nextResult;\n    }\n    peek() {\n        if (this.peekBuffer.length > 0) {\n            // We know that the buffer is not empty, so we can safely use the\n            // non-null assertion operator\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return this.peekBuffer[0];\n        }\n        const result = this.iterator.next();\n        this.peekBuffer.push(result);\n        return result;\n    }\n    get lastIndex() {\n        return this._lastIndex;\n    }\n}\n//# sourceMappingURL=PeekableGenerator.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Reversible Generator Wrapper Class\n/**\n * Generator function that yields each Unicode code point in the given string.\n */\nexport function* getUnicodeCodepoints(text, start = 0) {\n    let i = start;\n    while (i < text.length) {\n        const codePoint = text.codePointAt(i);\n        if (codePoint === undefined) {\n            throw new Error('Invalid Unicode code point');\n        }\n        yield codePoint;\n        i += codePoint <= 0xffff ? 1 : 2;\n    }\n}\n//# sourceMappingURL=getUnicodeCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\n/**\n * Measures a single-line of text width ignoring any unmapped glyphs including line breaks\n *\n * @param text\n * @param shaperProps\n * @param shaper\n * @returns\n */\nexport function measureText(text, shaperProps, shaper) {\n    const glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, 0), 0));\n    let width = 0;\n    for (const glyph of glyphs) {\n        if (glyph.mapped && glyph.codepoint !== 8203) {\n            // Skip ZWSP (\\u200B)\n            width += glyph.xAdvance;\n        }\n    }\n    return width;\n}\n//# sourceMappingURL=measureText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../../../utils.js';\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\nimport { measureText } from './measureText.js';\nexport function layoutText(curLineIndex, startX, startY, text, textAlign, width, height, fontSize, lineHeight, letterSpacing, \n/**\n * Mutated\n */\nvertexBuffer, contain, \n/**\n * Mutated\n */\nlineCache, rwSdf, trFontFace, forceFullLayoutCalc, scrollable, overflowSuffix, maxLines) {\n    assertTruthy(trFontFace, 'Font face must be loaded');\n    assertTruthy(trFontFace.loaded, 'Font face must be loaded');\n    assertTruthy(trFontFace.data, 'Font face must be loaded');\n    assertTruthy(trFontFace.shaper, 'Font face must be loaded');\n    // Regardless of fontSize (or other scaling properties), we layout the vertices of each glyph\n    // using the fixed coordinate space determined by font size used to produce the atlas.\n    // Scaling for display is handled by shader uniforms inexpensively.\n    // So we have:\n    //  - vertex space: the space in which the vertices of each glyph are laid out\n    //  - screen space: the screen pixel space\n    // Input properties such as x, y, w, fontSize, letterSpacing, etc. are all expressed in screen space.\n    // We convert these to the vertex space by dividing them the `fontSizeRatio` factor.\n    /**\n     * See above\n     */\n    const fontSizeRatio = fontSize / trFontFace.data.info.size;\n    /**\n     * `lineHeight` in vertex coordinates\n     */\n    const vertexLineHeight = lineHeight / fontSizeRatio;\n    /**\n     * `w` in vertex coordinates\n     */\n    const vertexW = width / fontSizeRatio;\n    /**\n     * `letterSpacing` in vertex coordinates\n     */\n    const vertexLSpacing = letterSpacing / fontSizeRatio;\n    const startingLineCacheEntry = lineCache[curLineIndex];\n    const startingCodepointIndex = startingLineCacheEntry?.codepointIndex || 0;\n    const startingMaxX = startingLineCacheEntry?.maxX || 0;\n    const startingMaxY = startingLineCacheEntry?.maxY || 0;\n    let maxX = startingMaxX;\n    let maxY = startingMaxY;\n    let curX = startX;\n    let curY = startY;\n    let bufferOffset = 0;\n    /**\n     * Buffer offset to last word boundry. This is -1 when we aren't in a word boundry.\n     */\n    const lastWord = {\n        codepointIndex: -1,\n        bufferOffset: -1,\n        xStart: -1,\n    };\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const shaper = trFontFace.shaper;\n    const shaperProps = {\n        letterSpacing: vertexLSpacing,\n    };\n    // Get glyphs\n    let glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, startingCodepointIndex), startingCodepointIndex));\n    let glyphResult;\n    let curLineBufferStart = -1;\n    const bufferLineInfos = [];\n    const vertexTruncateHeight = height / fontSizeRatio;\n    const overflowSuffVertexWidth = measureText(overflowSuffix, shaperProps, shaper);\n    // Line-by-line layout\n    let moreLines = true;\n    while (moreLines) {\n        const nextLineWillFit = (maxLines === 0 || curLineIndex + 1 < maxLines) &&\n            (contain !== 'both' ||\n                scrollable ||\n                curY + vertexLineHeight + trFontFace.maxCharHeight <=\n                    vertexTruncateHeight);\n        const lineVertexW = nextLineWillFit\n            ? vertexW\n            : vertexW - overflowSuffVertexWidth;\n        /**\n         * Vertex X position to the beginning of the last word boundary. This becomes -1 when we start traversing a word.\n         */\n        let xStartLastWordBoundary = 0;\n        const lineIsBelowWindowTop = curY + trFontFace.maxCharHeight >= rwSdf.y1;\n        const lineIsAboveWindowBottom = curY <= rwSdf.y2;\n        const lineIsWithinWindow = lineIsBelowWindowTop && lineIsAboveWindowBottom;\n        // Layout glyphs in this line\n        // Any break statements in this while loop will trigger a line break\n        while ((glyphResult = glyphs.next()) && !glyphResult.done) {\n            const glyph = glyphResult.value;\n            if (curLineIndex === lineCache.length) {\n                lineCache.push({\n                    codepointIndex: glyph.cluster,\n                    maxY,\n                    maxX,\n                });\n            }\n            else if (curLineIndex > lineCache.length) {\n                throw new Error('Unexpected lineCache length');\n            }\n            // If we encounter a word boundary (white space or newline) we invalidate\n            // the lastWord and set the xStartLastWordBoundary if we haven't already.\n            if (glyph.codepoint === 32 ||\n                glyph.codepoint === 10 ||\n                glyph.codepoint === 8203) {\n                if (lastWord.codepointIndex !== -1) {\n                    lastWord.codepointIndex = -1;\n                    xStartLastWordBoundary = curX;\n                }\n            }\n            else if (lastWord.codepointIndex === -1) {\n                lastWord.codepointIndex = glyph.cluster;\n                lastWord.bufferOffset = bufferOffset;\n                lastWord.xStart = xStartLastWordBoundary;\n            }\n            if (glyph.mapped) {\n                // Mapped glyph\n                const charEndX = curX + glyph.xOffset + glyph.width;\n                // Word wrap check\n                if (\n                // We are containing the text\n                contain !== 'none' &&\n                    // The current glyph reaches outside the contained width\n                    charEndX >= lineVertexW &&\n                    // There is a last word that we can break to the next line\n                    lastWord.codepointIndex !== -1 &&\n                    // Prevents infinite loop when a single word is longer than the width\n                    lastWord.xStart > 0) {\n                    // The current word is about to go off the edge of the container width\n                    // Reinitialize the iterator starting at the last word\n                    // and proceeding to the next line\n                    if (nextLineWillFit) {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, lastWord.codepointIndex), lastWord.codepointIndex));\n                        bufferOffset = lastWord.bufferOffset;\n                        break;\n                    }\n                    else {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(overflowSuffix, 0), 0));\n                        curX = lastWord.xStart;\n                        bufferOffset = lastWord.bufferOffset;\n                        // HACK: For the rest of the line when inserting the overflow suffix,\n                        // set contain = 'none' to prevent an infinite loop.\n                        contain = 'none';\n                    }\n                }\n                else {\n                    // This glyph fits, so we can add it to the buffer\n                    const quadX = curX + glyph.xOffset;\n                    const quadY = curY + glyph.yOffset;\n                    // Only add to buffer for rendering if the line is within the render window\n                    if (lineIsWithinWindow) {\n                        if (curLineBufferStart === -1) {\n                            curLineBufferStart = bufferOffset;\n                        }\n                        const atlasEntry = trFontFace.getAtlasEntry(glyph.glyphId);\n                        // Add texture coordinates\n                        const u = atlasEntry.x / trFontFace.data.common.scaleW;\n                        const v = atlasEntry.y / trFontFace.data.common.scaleH;\n                        const uvWidth = atlasEntry.width / trFontFace.data.common.scaleW;\n                        const uvHeight = atlasEntry.height / trFontFace.data.common.scaleH;\n                        // TODO: (Performance) We can optimize this by using ELEMENT_ARRAY_BUFFER\n                        // eliminating the need to duplicate vertices\n                        // Top-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Top-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Bottom-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                        // Bottom-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                    }\n                    maxY = Math.max(maxY, quadY + glyph.height);\n                    maxX = Math.max(maxX, quadX + glyph.width);\n                    curX += glyph.xAdvance;\n                }\n            }\n            else {\n                // Unmapped character\n                // Handle newlines\n                if (glyph.codepoint === 10) {\n                    if (nextLineWillFit) {\n                        // The whole line fit, so we can break to the next line\n                        break;\n                    }\n                    else {\n                        // The whole line won't fit, so we need to add the overflow suffix\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(overflowSuffix, 0), 0));\n                        // HACK: For the rest of the line when inserting the overflow suffix,\n                        // set contain = 'none' to prevent an infinite loop.\n                        contain = 'none';\n                    }\n                }\n            }\n        }\n        // Prepare for the next line...\n        if (curLineBufferStart !== -1) {\n            bufferLineInfos.push({\n                bufferStart: curLineBufferStart,\n                bufferEnd: bufferOffset,\n            });\n            curLineBufferStart = -1;\n        }\n        curX = 0;\n        curY += vertexLineHeight;\n        curLineIndex++;\n        lastWord.codepointIndex = -1;\n        xStartLastWordBoundary = 0;\n        // Figure out if there are any more lines to render...\n        if (!forceFullLayoutCalc && contain === 'both' && curY > rwSdf.y2) {\n            // Stop layout calculation early (for performance purposes) if:\n            // - We're not forcing a full layout calculation (for width/height calculation)\n            // - ...and we're containing the text vertically+horizontally (contain === 'both')\n            // - ...and we have a render window\n            // - ...and the next line is below the bottom of the render window\n            moreLines = false;\n        }\n        else if (glyphResult && glyphResult.done) {\n            // If we've reached the end of the text, we know we're done\n            moreLines = false;\n        }\n        else if (!nextLineWillFit) {\n            // If we're contained vertically+horizontally (contain === 'both')\n            // but not scrollable and the next line won't fit, we're done.\n            moreLines = false;\n        }\n    }\n    // Use textAlign to determine if we need to adjust the x position of the text\n    // in the buffer line by line\n    if (textAlign === 'center') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            // - 4 = the x position of a rightmost vertex\n            const lineWidth = \n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = (vertexTextW - lineWidth) / 2;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    else if (textAlign === 'right') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            const lineWidth = line.bufferEnd === line.bufferStart\n                ? 0\n                : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = vertexTextW - lineWidth;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    assertTruthy(glyphResult);\n    return {\n        bufferNumFloats: bufferOffset,\n        bufferNumQuads: bufferOffset / 16,\n        layoutNumCharacters: glyphResult.done\n            ? text.length - startingCodepointIndex\n            : glyphResult.value.cluster - startingCodepointIndex + 1,\n        fullyProcessed: !!glyphResult.done,\n        maxX,\n        maxY,\n        numLines: lineCache.length,\n    };\n}\n//# sourceMappingURL=layoutText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Round up to the nearest multiple of the given number.\n *\n * @param value\n * @param multiple\n * @returns\n */\nexport function roundUpToMultiple(value, multiple) {\n    return Math.ceil(value / multiple) * multiple;\n}\n/**\n * Round down to the nearest multiple of the given number.\n *\n * @param value\n * @param multiple\n * @returns\n */\nexport function roundDownToMultiple(value, multiple) {\n    return Math.floor(value / multiple) * multiple;\n}\n//# sourceMappingURL=util.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isBoundPositive } from '../../../../lib/utils.js';\nimport { roundDownToMultiple, roundUpToMultiple } from './util.js';\n/**\n * Create a render window from the given parameters.\n *\n * @remarks\n * The render window is a rectangle that defines the area of the text that\n * should be rendered. It is used to skip rendering parts of the text that\n * are outside of the render window. The render window is relative to the\n * text's top left corner of the overrall text.\n *\n * @param x The x coordinate of the text element's top left corner relative to the screen.\n * @param y The y coordinate of the text element's top left corner relative to the screen.\n * @param scrollY The amount of pixels to scroll the text vertically.\n * @param lineHeight The number of extra lines to render above and below the visible window.\n * @param visibleWindow The visible window of the text element relative to the screen\n * @returns\n */\nexport function setRenderWindow(outRenderWindow, x, y, scrollY, lineHeight, bufferMargin, visibleWindow, fontSizeRatio) {\n    const { screen, sdf } = outRenderWindow;\n    if (!isBoundPositive(visibleWindow)) {\n        screen.x1 = 0;\n        screen.y1 = 0;\n        screen.x2 = 0;\n        screen.y2 = 0;\n        sdf.x1 = 0;\n        sdf.y1 = 0;\n        sdf.x2 = 0;\n        sdf.y2 = 0;\n        outRenderWindow.numLines = 0;\n        outRenderWindow.firstLineIdx = 0;\n    }\n    else {\n        const x1 = visibleWindow.x1 - x;\n        const x2 = x1 + (visibleWindow.x2 - visibleWindow.x1);\n        const y1Base = visibleWindow.y1 - y + scrollY;\n        const y1 = roundDownToMultiple(y1Base - bufferMargin, lineHeight || 1);\n        const y2 = roundUpToMultiple(y1Base + (visibleWindow.y2 - visibleWindow.y1) + bufferMargin, lineHeight || 1);\n        screen.x1 = x1;\n        screen.y1 = y1;\n        screen.x2 = x2;\n        screen.y2 = y2;\n        sdf.x1 = x1 / fontSizeRatio;\n        sdf.y1 = y1 / fontSizeRatio;\n        sdf.x2 = x2 / fontSizeRatio;\n        sdf.y2 = y2 / fontSizeRatio;\n        outRenderWindow.numLines = Math.ceil((y2 - y1) / lineHeight);\n        outRenderWindow.firstLineIdx = lineHeight ? Math.floor(y1 / lineHeight) : 0;\n    }\n    outRenderWindow.valid = true;\n}\n//# sourceMappingURL=setRenderWindow.js.map","/**\n * Calculate the default line height given normalized font metrics\n *\n * @remarks\n * This method may be used for both the WebTrFontFace and SdfTrFontFace font types.\n *\n * @param metrics\n * @param fontSize\n * @returns\n */\nexport function calcDefaultLineHeight(metrics, fontSize) {\n    return fontSize * (metrics.ascender - metrics.descender + metrics.lineGap);\n}\n//# sourceMappingURL=TextRenderingUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createBound, intersectRect, copyRect, boundsOverlap, convertBoundToRect, } from '../../../lib/utils.js';\nimport { TextRenderer, } from '../TextRenderer.js';\nimport { SdfTrFontFace } from '../../font-face-types/SdfTrFontFace/SdfTrFontFace.js';\nimport { FLOATS_PER_GLYPH } from './internal/constants.js';\nimport { getStartConditions } from './internal/getStartConditions.js';\nimport { layoutText } from './internal/layoutText.js';\nimport { setRenderWindow, } from './internal/setRenderWindow.js';\nimport { TrFontManager } from '../../TrFontManager.js';\nimport { assertTruthy, mergeColorAlpha } from '../../../../utils.js';\nimport { WebGlCoreRenderOp } from '../../../renderers/webgl/WebGlCoreRenderOp.js';\nimport { BufferCollection } from '../../../renderers/webgl/internal/BufferCollection.js';\nimport { EventEmitter } from '../../../../common/EventEmitter.js';\nimport { WebGlCoreRenderer } from '../../../renderers/webgl/WebGlCoreRenderer.js';\nimport { calcDefaultLineHeight } from '../../TextRenderingUtils.js';\n/**\n * Ephemeral rect object used for calculations\n */\nconst tmpRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n};\n/**\n * Singleton class for rendering text using signed distance fields.\n *\n * @remarks\n * SdfTextRenderer supports both single-channel and multi-channel signed distance fields.\n */\nexport class SdfTextRenderer extends TextRenderer {\n    /**\n     * Map of font family names to a set of font faces.\n     */\n    ssdfFontFamilies = {};\n    msdfFontFamilies = {};\n    fontFamilyArray = [\n        this.ssdfFontFamilies,\n        this.msdfFontFamilies,\n    ];\n    sdfShader;\n    rendererBounds;\n    type = 'sdf';\n    constructor(stage) {\n        super(stage);\n        this.sdfShader = this.stage.shManager.loadShader('SdfShader', {\n            transform: new Float32Array(),\n            color: 0,\n            size: 0,\n            scrollY: 0,\n            distanceRange: 0,\n            debug: false,\n        }).shader;\n        this.rendererBounds = {\n            x1: 0,\n            y1: 0,\n            x2: this.stage.options.appWidth,\n            y2: this.stage.options.appHeight,\n        };\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n            },\n            x: (state, value) => {\n                state.props.x = value;\n                if (state.elementBounds.valid) {\n                    this.setElementBoundsX(state);\n                    // Only schedule an update if the text is not already rendered\n                    // (renderWindow is invalid) and the element possibly overlaps the screen\n                    // This is to avoid unnecessary updates when we know text is off-screen\n                    if (!state.renderWindow.valid &&\n                        boundsOverlap(state.elementBounds, this.rendererBounds)) {\n                        this.scheduleUpdateState(state);\n                    }\n                }\n            },\n            y: (state, value) => {\n                state.props.y = value;\n                if (state.elementBounds.valid) {\n                    this.setElementBoundsY(state);\n                    // See x() for explanation\n                    if (!state.renderWindow.valid &&\n                        boundsOverlap(state.elementBounds, this.rendererBounds)) {\n                        this.scheduleUpdateState(state);\n                    }\n                }\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                // Only invalidate layout cache if we're containing in the horizontal direction\n                if (state.props.contain !== 'none') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                // Only invalidate layout cache if we're containing in the vertical direction\n                if (state.props.contain === 'both') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollable: (state, value) => {\n                state.props.scrollable = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n                // Scrolling doesn't need to invalidate any caches, but it does need to\n                // schedule an update\n                this.scheduleUpdateState(state);\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            lineHeight: (state, value) => {\n                state.props.lineHeight = value;\n                state.resLineHeight = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            maxLines: (state, value) => {\n                state.props.maxLines = value;\n                this.invalidateLayoutCache(state);\n            },\n            textBaseline: (state, value) => {\n                state.props.textBaseline = value;\n                this.invalidateLayoutCache(state);\n            },\n            verticalAlign: (state, value) => {\n                state.props.verticalAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            overflowSuffix: (state, value) => {\n                state.props.overflowSuffix = value;\n                this.invalidateLayoutCache(state);\n            },\n            debug: (state, value) => {\n                state.props.debug = value;\n            },\n        };\n    }\n    canRenderFont(props) {\n        // TODO: Support matching on font stretch, weight and style (if/when needed)\n        // For now we just match on the font family name\n        // '$$SDF_FAILURE_TEST$$' is used to test the 'failure' event coming from text\n        const { fontFamily } = props;\n        return (fontFamily in this.ssdfFontFamilies ||\n            fontFamily in this.msdfFontFamilies ||\n            fontFamily === '$$SDF_FAILURE_TEST$$');\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof SdfTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an SDF font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof SdfTrFontFace);\n        const familyName = fontFace.fontFamily;\n        const fontFamiles = fontFace.type === 'ssdf'\n            ? this.ssdfFontFamilies\n            : fontFace.type === 'msdf'\n                ? this.msdfFontFamilies\n                : undefined;\n        if (!fontFamiles) {\n            console.warn(`Invalid font face type: ${fontFace.type}`);\n            return;\n        }\n        let faceSet = fontFamiles[familyName];\n        if (!faceSet) {\n            faceSet = new Set();\n            fontFamiles[familyName] = faceSet;\n        }\n        faceSet.add(fontFace);\n    }\n    createState(props) {\n        return {\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            lineCache: [],\n            forceFullLayoutCalc: false,\n            renderWindow: {\n                screen: {\n                    x1: 0,\n                    y1: 0,\n                    x2: 0,\n                    y2: 0,\n                },\n                sdf: {\n                    x1: 0,\n                    y1: 0,\n                    x2: 0,\n                    y2: 0,\n                },\n                firstLineIdx: 0,\n                numLines: 0,\n                valid: false,\n            },\n            elementBounds: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n                valid: false,\n            },\n            clippingRect: {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n                valid: false,\n            },\n            bufferNumFloats: 0,\n            bufferNumQuads: 0,\n            vertexBuffer: undefined,\n            webGlBuffers: null,\n            bufferUploaded: false,\n            textH: undefined,\n            textW: undefined,\n            distanceRange: 0,\n            trFontFace: undefined,\n            isRenderable: false,\n            resLineHeight: undefined,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                drawCount: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        let { trFontFace } = state;\n        const { textH, lineCache, debugData, forceFullLayoutCalc } = state;\n        debugData.updateCount++;\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n        }\n        // Resolve font face if we haven't yet\n        if (trFontFace === undefined) {\n            trFontFace = this.resolveFontFace(state.props);\n            state.trFontFace = trFontFace;\n            if (trFontFace === undefined) {\n                const msg = `SdfTextRenderer: Could not resolve font face for family: '${state.props.fontFamily}'`;\n                console.error(msg);\n                this.setStatus(state, 'failed', new Error(msg));\n                return;\n            }\n            trFontFace.texture.setRenderableOwner(state, true);\n        }\n        // If the font hasn't been loaded yet, stop here.\n        // Listen for the 'loaded' event and forward fontLoaded event\n        if (trFontFace.loaded === false) {\n            trFontFace.once('loaded', () => {\n                this.scheduleUpdateState(state);\n            });\n            return;\n        }\n        // If the font is loaded then so should the data\n        assertTruthy(trFontFace.data, 'Font face data should be loaded');\n        assertTruthy(trFontFace.metrics, 'Font face metrics should be loaded');\n        const { text, fontSize, x, y, contain, width, height, verticalAlign, scrollable, overflowSuffix, maxLines, } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        const { renderWindow } = state;\n        /**\n         * The font size of the SDF font face (the basis for SDF space units)\n         */\n        const sdfFontSize = trFontFace.data.info.size;\n        /**\n         * Divide screen space units by this to get the SDF space units\n         * Mulitple SDF space units by this to get screen space units\n         */\n        const fontSizeRatio = fontSize / sdfFontSize;\n        // If not already resolved, resolve the line height and store it in the state\n        let resLineHeight = state.resLineHeight;\n        if (resLineHeight === undefined) {\n            const lineHeight = state.props.lineHeight;\n            // If lineHeight is undefined, use the maxCharHeight from the font face\n            if (lineHeight === undefined) {\n                resLineHeight = calcDefaultLineHeight(trFontFace.metrics, fontSize);\n            }\n            else {\n                resLineHeight = lineHeight;\n            }\n            state.resLineHeight = resLineHeight;\n        }\n        // Needed in renderWindow calculation\n        const sdfLineHeight = resLineHeight / fontSizeRatio;\n        state.distanceRange =\n            fontSizeRatio * trFontFace.data.distanceField.distanceRange;\n        // Allocate buffers if needed\n        const neededLength = text.length * FLOATS_PER_GLYPH;\n        let vertexBuffer = state.vertexBuffer;\n        if (!vertexBuffer || vertexBuffer.length < neededLength) {\n            vertexBuffer = new Float32Array(neededLength * 2);\n        }\n        const elementBounds = state.elementBounds;\n        if (!elementBounds.valid) {\n            this.setElementBoundsX(state);\n            this.setElementBoundsY(state);\n            elementBounds.valid = true;\n        }\n        // Return early if we're still viewing inside the established render window\n        // No need to re-render what we've already rendered\n        // (Only if there's an established renderWindow and we're not suppressing early exit)\n        if (!forceFullLayoutCalc && renderWindow.valid) {\n            const rwScreen = renderWindow.screen;\n            if (x + rwScreen.x1 <= elementBounds.x1 &&\n                x + rwScreen.x2 >= elementBounds.x2 &&\n                y - scrollY + rwScreen.y1 <= elementBounds.y1 &&\n                y - scrollY + rwScreen.y2 >= elementBounds.y2) {\n                this.setStatus(state, 'loaded');\n                return;\n            }\n            // Otherwise invalidate the renderWindow so it can be redone\n            renderWindow.valid = false;\n            this.setStatus(state, 'loading');\n        }\n        const { offsetY, textAlign } = state.props;\n        // Create a new renderWindow if needed\n        if (!renderWindow.valid) {\n            const isPossiblyOnScreen = boundsOverlap(elementBounds, this.rendererBounds);\n            if (!isPossiblyOnScreen) {\n                // If the element is not possibly on screen, we can skip the layout and rendering completely\n                return;\n            }\n            setRenderWindow(renderWindow, x, y, scrollY, resLineHeight, contain === 'both' ? elementBounds.y2 - elementBounds.y1 : 0, elementBounds, fontSizeRatio);\n            // console.log('newRenderWindow', renderWindow);\n        }\n        const start = getStartConditions(sdfFontSize, sdfLineHeight, trFontFace, verticalAlign, offsetY, fontSizeRatio, renderWindow, lineCache, textH);\n        if (!start) {\n            // Nothing to render, return early, but still mark as loaded (since the text is just scrolled\n            // out of view)\n            this.setStatus(state, 'loaded');\n            return;\n        }\n        const { letterSpacing } = state.props;\n        const out2 = layoutText(start.lineIndex, start.sdfX, start.sdfY, text, textAlign, width, height, fontSize, resLineHeight, letterSpacing, vertexBuffer, contain, lineCache, renderWindow.sdf, trFontFace, forceFullLayoutCalc, scrollable, overflowSuffix, maxLines);\n        state.bufferUploaded = false;\n        state.bufferNumFloats = out2.bufferNumFloats;\n        state.bufferNumQuads = out2.bufferNumQuads;\n        state.vertexBuffer = vertexBuffer;\n        state.renderWindow = renderWindow;\n        debugData.lastLayoutNumCharacters = out2.layoutNumCharacters;\n        debugData.bufferSize = vertexBuffer.byteLength;\n        // If we didn't exit early, we know we have completely computed w/h\n        if (out2.fullyProcessed) {\n            state.textW = out2.maxX * fontSizeRatio;\n            state.textH = out2.numLines * sdfLineHeight * fontSizeRatio;\n        }\n        // if (state.props.debug.printLayoutTime) {\n        //   debugData.layoutSum += performance.now() - updateStartTime;\n        //   debugData.layoutCount++;\n        // }\n        this.setStatus(state, 'loaded');\n    }\n    renderQuads(state, transform, clippingRect, alpha, parentHasRenderTexture, framebufferDimensions) {\n        if (!state.vertexBuffer) {\n            // Nothing to draw\n            return;\n        }\n        const renderer = this.stage.renderer;\n        assertTruthy(renderer instanceof WebGlCoreRenderer);\n        const { fontSize, color, contain, scrollable, zIndex, debug } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        const { textW = 0, textH = 0, distanceRange, vertexBuffer, bufferUploaded, trFontFace, elementBounds, } = state;\n        let { webGlBuffers } = state;\n        if (!webGlBuffers) {\n            const glw = renderer.glw;\n            const stride = 4 * Float32Array.BYTES_PER_ELEMENT;\n            const webGlBuffer = glw.createBuffer();\n            assertTruthy(webGlBuffer);\n            state.webGlBuffers = new BufferCollection([\n                {\n                    buffer: webGlBuffer,\n                    attributes: {\n                        a_position: {\n                            name: 'a_position',\n                            size: 2, // 2 components per iteration\n                            type: glw.FLOAT, // the data is 32bit floats\n                            normalized: false, // don't normalize the data\n                            stride, // 0 = move forward size * sizeof(type) each iteration to get the next position\n                            offset: 0, // start at the beginning of the buffer\n                        },\n                        a_textureCoordinate: {\n                            name: 'a_textureCoordinate',\n                            size: 2,\n                            type: glw.FLOAT,\n                            normalized: false,\n                            stride,\n                            offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                        },\n                    },\n                },\n            ]);\n            state.bufferUploaded = false;\n            assertTruthy(state.webGlBuffers);\n            webGlBuffers = state.webGlBuffers;\n        }\n        if (!bufferUploaded) {\n            const glw = renderer.glw;\n            const buffer = webGlBuffers?.getBuffer('a_textureCoordinate') ?? null;\n            glw.arrayBufferData(buffer, vertexBuffer, glw.STATIC_DRAW);\n            state.bufferUploaded = true;\n        }\n        assertTruthy(trFontFace);\n        if (scrollable && contain === 'both') {\n            assertTruthy(elementBounds.valid);\n            const elementRect = convertBoundToRect(elementBounds, tmpRect);\n            if (clippingRect.valid) {\n                state.clippingRect.valid = true;\n                clippingRect = intersectRect(clippingRect, elementRect, state.clippingRect);\n            }\n            else {\n                state.clippingRect.valid = true;\n                clippingRect = copyRect(elementRect, state.clippingRect);\n            }\n        }\n        const renderOp = new WebGlCoreRenderOp(renderer.glw, renderer.options, webGlBuffers, this.sdfShader, {\n            transform: transform.getFloatArr(),\n            // IMPORTANT: The SDF Shader expects the color NOT to be premultiplied\n            // for the best blending results. Which is why we use `mergeColorAlpha`\n            // instead of `mergeColorAlphaPremultiplied` here.\n            color: mergeColorAlpha(color, alpha),\n            size: fontSize / (trFontFace.data?.info.size || 0),\n            scrollY,\n            distanceRange,\n            debug: debug.sdfShaderDebug,\n        }, alpha, clippingRect, { height: textH, width: textW }, 0, zIndex, false, parentHasRenderTexture, framebufferDimensions);\n        const texture = state.trFontFace?.texture;\n        assertTruthy(texture);\n        const ctxTexture = texture.ctxTexture;\n        renderOp.addTexture(ctxTexture);\n        renderOp.length = state.bufferNumFloats;\n        renderOp.numQuads = state.bufferNumQuads;\n        renderer.addRenderOp(renderOp);\n        // if (!debug.disableScissor) {\n        //   renderer.enableScissor(\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // Draw the arrays\n        // gl.drawArrays(\n        //   gl.TRIANGLES, // Primitive type\n        //   0,\n        //   bufferNumVertices, // Number of verticies\n        // );\n        // renderer.disableScissor();\n        // if (debug.showElementRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Blue,\n        //     elementRect.x,\n        //     elementRect.y,\n        //     elementRect.w,\n        //     elementRect.h,\n        //   );\n        // }\n        // if (debug.showVisibleRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Green,\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // if (debug.showRenderWindow && renderWindow) {\n        //   this.renderer.drawBorder(\n        //     Colors.Red,\n        //     x + renderWindow.x1,\n        //     y + renderWindow.y1 - scrollY,\n        //     x + renderWindow.x2 - (x + renderWindow.x1),\n        //     y + renderWindow.y2 - scrollY - (y + renderWindow.y1 - scrollY),\n        //   );\n        // }\n        // if (debug.printLayoutTime) {\n        //   debugData.drawSum += performance.now() - drawStartTime;\n        //   debugData.drawCount++;\n        // }\n    }\n    setIsRenderable(state, renderable) {\n        super.setIsRenderable(state, renderable);\n        state.trFontFace?.texture.setRenderableOwner(state, renderable);\n    }\n    destroyState(state) {\n        super.destroyState(state);\n        // If there's a Font Face assigned we must free the owner relation to its texture\n        state.trFontFace?.texture.setRenderableOwner(state, false);\n    }\n    //#endregion Overrides\n    resolveFontFace(props) {\n        return this.stage.fontManager.resolveFontFace(this.fontFamilyArray, props, 'sdf');\n    }\n    /**\n     * Release the loaded SDF font face\n     *\n     * @param state\n     */\n    releaseFontFace(state) {\n        state.resLineHeight = undefined;\n        if (state.trFontFace) {\n            state.trFontFace.texture.setRenderableOwner(state, false);\n            state.trFontFace = undefined;\n        }\n    }\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-layed out on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.renderWindow.valid = false;\n        state.elementBounds.valid = false;\n        state.textH = undefined;\n        state.textW = undefined;\n        state.lineCache = [];\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    setElementBoundsX(state) {\n        const { x, contain, width } = state.props;\n        const { elementBounds } = state;\n        elementBounds.x1 = x;\n        elementBounds.x2 = contain !== 'none' ? x + width : Infinity;\n    }\n    setElementBoundsY(state) {\n        const { y, contain, height } = state.props;\n        const { elementBounds } = state;\n        elementBounds.y1 = y;\n        elementBounds.y2 = contain === 'both' ? y + height : Infinity;\n    }\n}\n//# sourceMappingURL=SdfTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns CSS font setting string for use in canvas context.\n *\n * @param fontFace\n * @param fontStyle\n * @param fontSize\n * @param precision\n * @param defaultFontFace\n * @returns\n */\nexport function getFontSetting(fontFace, fontStyle, fontSize, precision, defaultFontFace) {\n    let ff = fontFace;\n    if (!Array.isArray(ff)) {\n        ff = [ff];\n    }\n    const ffs = [];\n    for (let i = 0, n = ff.length; i < n; i++) {\n        let curFf = ff[i];\n        // Replace the default font face `null` with the actual default font face set\n        // on the stage.\n        if (curFf === null || curFf === undefined) {\n            curFf = defaultFontFace;\n        }\n        if (curFf === 'serif' || curFf === 'sans-serif') {\n            ffs.push(curFf);\n        }\n        else {\n            ffs.push(`\"${curFf}\"`);\n        }\n    }\n    return `${fontStyle} ${fontSize * precision}px ${ffs.join(',')}`;\n}\n/**\n * Returns true if the given character is a zero-width space.\n *\n * @param space\n */\nexport function isZeroWidthSpace(space) {\n    return space === '' || space === '\\u200B';\n}\n/**\n * Returns true if the given character is a zero-width space or a regular space.\n *\n * @param space\n */\nexport function isSpace(space) {\n    return isZeroWidthSpace(space) || space === ' ';\n}\n/**\n * Converts a string into an array of tokens and the words between them.\n *\n * @param tokenRegex\n * @param text\n */\nexport function tokenizeString(tokenRegex, text) {\n    const delimeters = text.match(tokenRegex) || [];\n    const words = text.split(tokenRegex) || [];\n    const final = [];\n    for (let i = 0; i < words.length; i++) {\n        final.push(words[i], delimeters[i]);\n    }\n    final.pop();\n    return final.filter((word) => word != '');\n}\n/**\n * Measure the width of a string accounting for letter spacing.\n *\n * @param context\n * @param word\n * @param space\n */\nexport function measureText(context, word, space = 0) {\n    if (!space) {\n        return context.measureText(word).width;\n    }\n    return word.split('').reduce((acc, char) => {\n        // Zero-width spaces should not include letter spacing.\n        // And since we know the width of a zero-width space is 0, we can skip\n        // measuring it.\n        if (isZeroWidthSpace(char)) {\n            return acc;\n        }\n        return acc + context.measureText(char).width + space;\n    }, 0);\n}\n/**\n * Get the font metrics for a font face.\n *\n * @remarks\n * This function will attempt to grab the explicitly defined metrics from the\n * font face first. If the font face does not have metrics defined, it will\n * attempt to calculate the metrics using the browser's measureText method.\n *\n * If the browser does not support the font metrics API, it will use some\n * default values.\n *\n * @param context\n * @param fontFace\n * @param fontSize\n * @returns\n */\nexport function getWebFontMetrics(context, fontFace, fontSize) {\n    if (fontFace.metrics) {\n        return fontFace.metrics;\n    }\n    // If the font face doesn't have metrics defined, we fallback to using the\n    // browser's measureText method to calculate take a best guess at the font\n    // actual font's metrics.\n    // - fontBoundingBox[Ascent|Descent] is the best estimate but only supported\n    //   in Chrome 87+ (2020), Firefox 116+ (2023), and Safari 11.1+ (2018).\n    //   - It is an estimate as it can vary between browsers.\n    // - actualBoundingBox[Ascent|Descent] is less accurate and supported in\n    //   Chrome 77+ (2019), Firefox 74+ (2020), and Safari 11.1+ (2018).\n    // - If neither are supported, we'll use some default values which will\n    //   get text on the screen but likely not be great.\n    // NOTE: It's been decided not to rely on fontBoundingBox[Ascent|Descent]\n    // as it's browser support is limited and it also tends to produce higher than\n    // expected values. It is instead HIGHLY RECOMMENDED that developers provide\n    // explicit metrics in the font face definition.\n    const browserMetrics = context.measureText('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz');\n    console.warn(`Font metrics not provided for Canvas Web font ${fontFace.fontFamily}. ` +\n        'Using fallback values. It is HIGHLY recommended you use the latest ' +\n        'version of the Lightning 3 `msdf-generator` tool to extract the default ' +\n        'metrics for the font and provide them in the Canvas Web font definition.');\n    let metrics;\n    if (browserMetrics.actualBoundingBoxDescent &&\n        browserMetrics.actualBoundingBoxAscent) {\n        metrics = {\n            ascender: browserMetrics.actualBoundingBoxAscent / fontSize,\n            descender: -browserMetrics.actualBoundingBoxDescent / fontSize,\n            lineGap: 0.2,\n        };\n    }\n    else {\n        // If the browser doesn't support the font metrics API, we'll use some\n        // default values.\n        metrics = {\n            ascender: 0.8,\n            descender: -0.2,\n            lineGap: 0.2,\n        };\n    }\n    // Save the calculated metrics to the font face for future use.\n    fontFace.metrics = metrics;\n    return metrics;\n}\n/**\n * Applies newlines to a string to have it optimally fit into the horizontal\n * bounds set by the Text object's wordWrapWidth property.\n *\n * @param context\n * @param text\n * @param wordWrapWidth\n * @param letterSpacing\n * @param indent\n */\nexport function wrapText(context, text, wordWrapWidth, letterSpacing, indent) {\n    // Greedy wrapping algorithm that will wrap words as the line grows longer.\n    // than its horizontal bounds.\n    const spaceRegex = / |\\u200B/g;\n    const lines = text.split(/\\r?\\n/g);\n    let allLines = [];\n    const realNewlines = [];\n    for (let i = 0; i < lines.length; i++) {\n        const resultLines = [];\n        let result = '';\n        let spaceLeft = wordWrapWidth - indent;\n        const words = lines[i].split(spaceRegex);\n        const spaces = lines[i].match(spaceRegex) || [];\n        for (let j = 0; j < words.length; j++) {\n            const space = spaces[j - 1] || '';\n            const word = words[j];\n            const wordWidth = measureText(context, word, letterSpacing);\n            const wordWidthWithSpace = wordWidth + measureText(context, space, letterSpacing);\n            if (j === 0 || wordWidthWithSpace > spaceLeft) {\n                // Skip printing the newline if it's the first word of the line that is.\n                // greater than the word wrap width.\n                if (j > 0) {\n                    resultLines.push(result);\n                    result = '';\n                }\n                result += word;\n                spaceLeft = wordWrapWidth - wordWidth - (j === 0 ? indent : 0);\n            }\n            else {\n                spaceLeft -= wordWidthWithSpace;\n                result += space + word;\n            }\n        }\n        resultLines.push(result);\n        result = '';\n        allLines = allLines.concat(resultLines);\n        if (i < lines.length - 1) {\n            realNewlines.push(allLines.length);\n        }\n    }\n    return { l: allLines, n: realNewlines };\n}\n//# sourceMappingURL=TextTextureRendererUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { assertTruthy } from '../../../utils.js';\nimport { getRgbaString } from '../../lib/utils.js';\nimport { calcDefaultLineHeight } from '../TextRenderingUtils.js';\nimport { getWebFontMetrics, isZeroWidthSpace, } from '../TextTextureRendererUtils.js';\nconst MAX_TEXTURE_DIMENSION = 2048;\n/**\n * Calculate height for the canvas\n *\n * @param textBaseline\n * @param fontSize\n * @param lineHeight\n * @param numLines\n * @param offsetY\n * @returns\n */\nfunction calcHeight(textBaseline, fontSize, lineHeight, numLines, offsetY) {\n    const baselineOffset = textBaseline !== 'bottom' ? 0.5 * fontSize : 0;\n    return (lineHeight * (numLines - 1) +\n        baselineOffset +\n        Math.max(lineHeight, fontSize) +\n        (offsetY || 0));\n}\nexport class LightningTextTextureRenderer {\n    _canvas;\n    _context;\n    _settings;\n    constructor(canvas, context) {\n        this._canvas = canvas;\n        this._context = context;\n        this._settings = this.mergeDefaults({});\n    }\n    set settings(v) {\n        this._settings = this.mergeDefaults(v);\n    }\n    get settings() {\n        return this._settings;\n    }\n    getPrecision() {\n        return this._settings.precision;\n    }\n    setFontProperties() {\n        this._context.font = this._getFontSetting();\n        this._context.textBaseline = this._settings.textBaseline;\n    }\n    _getFontSetting() {\n        const ff = [this._settings.fontFamily];\n        const ffs = [];\n        for (let i = 0, n = ff.length; i < n; i++) {\n            if (ff[i] === 'serif' || ff[i] === 'sans-serif') {\n                ffs.push(ff[i]);\n            }\n            else {\n                ffs.push(`\"${ff[i]}\"`);\n            }\n        }\n        return `${this._settings.fontStyle} ${this._settings.fontSize * this.getPrecision()}px ${ffs.join(',')}`;\n    }\n    _load() {\n        if (true && document.fonts) {\n            const fontSetting = this._getFontSetting();\n            try {\n                if (!document.fonts.check(fontSetting, this._settings.text)) {\n                    // Use a promise that waits for loading.\n                    return document.fonts\n                        .load(fontSetting, this._settings.text)\n                        .catch((err) => {\n                        // Just load the fallback font.\n                        console.warn('[Lightning] Font load error', err, fontSetting);\n                    })\n                        .then(() => {\n                        if (!document.fonts.check(fontSetting, this._settings.text)) {\n                            console.warn('[Lightning] Font not found', fontSetting);\n                        }\n                    });\n                }\n            }\n            catch (e) {\n                console.warn(\"[Lightning] Can't check font loading for \" + fontSetting);\n            }\n        }\n    }\n    calculateRenderInfo() {\n        const renderInfo = {};\n        const precision = this.getPrecision();\n        const paddingLeft = this._settings.paddingLeft * precision;\n        const paddingRight = this._settings.paddingRight * precision;\n        const fontSize = this._settings.fontSize * precision;\n        let offsetY = this._settings.offsetY === null\n            ? null\n            : this._settings.offsetY * precision;\n        const w = this._settings.w * precision;\n        const h = this._settings.h * precision;\n        let wordWrapWidth = this._settings.wordWrapWidth * precision;\n        const cutSx = this._settings.cutSx * precision;\n        const cutEx = this._settings.cutEx * precision;\n        const cutSy = this._settings.cutSy * precision;\n        const cutEy = this._settings.cutEy * precision;\n        const letterSpacing = (this._settings.letterSpacing || 0) * precision;\n        const textIndent = this._settings.textIndent * precision;\n        const trFontFace = this._settings.trFontFace;\n        // Set font properties.\n        this.setFontProperties();\n        assertTruthy(trFontFace);\n        const metrics = getWebFontMetrics(this._context, trFontFace, fontSize);\n        const defLineHeight = calcDefaultLineHeight(metrics, fontSize) * precision;\n        const lineHeight = this._settings.lineHeight !== null\n            ? this._settings.lineHeight * precision\n            : defLineHeight;\n        const maxHeight = this._settings.maxHeight;\n        const containedMaxLines = maxHeight !== null && lineHeight > 0\n            ? Math.floor(maxHeight / lineHeight)\n            : 0;\n        const setMaxLines = this._settings.maxLines;\n        const calcMaxLines = containedMaxLines > 0 && setMaxLines > 0\n            ? Math.min(containedMaxLines, setMaxLines)\n            : Math.max(containedMaxLines, setMaxLines);\n        // Total width.\n        let width = w || 2048 / this.getPrecision();\n        // Inner width.\n        let innerWidth = width - paddingLeft;\n        if (innerWidth < 10) {\n            width += 10 - innerWidth;\n            innerWidth = 10;\n        }\n        if (!wordWrapWidth) {\n            wordWrapWidth = innerWidth;\n        }\n        // Text overflow\n        if (this._settings.textOverflow && !this._settings.wordWrap) {\n            let suffix;\n            switch (this._settings.textOverflow) {\n                case 'clip':\n                    suffix = '';\n                    break;\n                case 'ellipsis':\n                    suffix = this._settings.overflowSuffix;\n                    break;\n                default:\n                    suffix = this._settings.textOverflow;\n            }\n            this._settings.text = this.wrapWord(this._settings.text, wordWrapWidth - textIndent, suffix);\n        }\n        // word wrap\n        // preserve original text\n        let linesInfo;\n        if (this._settings.wordWrap) {\n            linesInfo = this.wrapText(this._settings.text, wordWrapWidth, letterSpacing, textIndent);\n        }\n        else {\n            linesInfo = { l: this._settings.text.split(/(?:\\r\\n|\\r|\\n)/), n: [] };\n            const n = linesInfo.l.length;\n            for (let i = 0; i < n - 1; i++) {\n                linesInfo.n.push(i);\n            }\n        }\n        let lines = linesInfo.l;\n        if (calcMaxLines && lines.length > calcMaxLines) {\n            const usedLines = lines.slice(0, calcMaxLines);\n            let otherLines = null;\n            if (this._settings.overflowSuffix) {\n                // Wrap again with max lines suffix enabled.\n                const w = this._settings.overflowSuffix\n                    ? this.measureText(this._settings.overflowSuffix)\n                    : 0;\n                const al = this.wrapText(usedLines[usedLines.length - 1], wordWrapWidth - w, letterSpacing, textIndent);\n                usedLines[usedLines.length - 1] = `${al.l[0]}${this._settings.overflowSuffix}`;\n                otherLines = [al.l.length > 1 ? al.l[1] : ''];\n            }\n            else {\n                otherLines = [''];\n            }\n            // Re-assemble the remaining text.\n            let i;\n            const n = lines.length;\n            let j = 0;\n            const m = linesInfo.n.length;\n            for (i = calcMaxLines; i < n; i++) {\n                otherLines[j] += `${otherLines[j] ? ' ' : ''}${lines[i]}`;\n                if (i + 1 < m && linesInfo.n[i + 1]) {\n                    j++;\n                }\n            }\n            renderInfo.remainingText = otherLines.join('\\n');\n            renderInfo.moreTextLines = true;\n            lines = usedLines;\n        }\n        else {\n            renderInfo.moreTextLines = false;\n            renderInfo.remainingText = '';\n        }\n        // calculate text width\n        let maxLineWidth = 0;\n        const lineWidths = [];\n        for (let i = 0; i < lines.length; i++) {\n            const lineWidth = this.measureText(lines[i], letterSpacing) + (i === 0 ? textIndent : 0);\n            lineWidths.push(lineWidth);\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n        renderInfo.lineWidths = lineWidths;\n        if (!w) {\n            // Auto-set width to max text length.\n            width = maxLineWidth + paddingLeft + paddingRight;\n            innerWidth = maxLineWidth;\n        }\n        let height;\n        if (h) {\n            height = h;\n        }\n        else {\n            height = calcHeight(this._settings.textBaseline, fontSize, lineHeight, lines.length, offsetY);\n        }\n        if (offsetY === null) {\n            offsetY = fontSize;\n        }\n        renderInfo.w = width;\n        renderInfo.h = height;\n        renderInfo.lines = lines;\n        renderInfo.precision = precision;\n        if (!width) {\n            // To prevent canvas errors.\n            width = 1;\n        }\n        if (!height) {\n            // To prevent canvas errors.\n            height = 1;\n        }\n        if (cutSx || cutEx) {\n            width = Math.min(width, cutEx - cutSx);\n        }\n        if (cutSy || cutEy) {\n            height = Math.min(height, cutEy - cutSy);\n        }\n        renderInfo.width = width;\n        renderInfo.innerWidth = innerWidth;\n        renderInfo.height = height;\n        renderInfo.fontSize = fontSize;\n        renderInfo.cutSx = cutSx;\n        renderInfo.cutSy = cutSy;\n        renderInfo.cutEx = cutEx;\n        renderInfo.cutEy = cutEy;\n        renderInfo.lineHeight = lineHeight;\n        renderInfo.defLineHeight = defLineHeight;\n        renderInfo.lineWidths = lineWidths;\n        renderInfo.offsetY = offsetY;\n        renderInfo.paddingLeft = paddingLeft;\n        renderInfo.paddingRight = paddingRight;\n        renderInfo.letterSpacing = letterSpacing;\n        renderInfo.textIndent = textIndent;\n        renderInfo.metrics = metrics;\n        return renderInfo;\n    }\n    draw(renderInfo, linesOverride) {\n        const precision = this.getPrecision();\n        // Allow lines to be overriden for partial rendering.\n        const lines = linesOverride?.lines || renderInfo.lines;\n        const lineWidths = linesOverride?.lineWidths || renderInfo.lineWidths;\n        const height = linesOverride\n            ? calcHeight(this._settings.textBaseline, renderInfo.fontSize, renderInfo.lineHeight, linesOverride.lines.length, this._settings.offsetY === null\n                ? null\n                : this._settings.offsetY * precision)\n            : renderInfo.height;\n        // Add extra margin to prevent issue with clipped text when scaling.\n        this._canvas.width = Math.min(Math.ceil(renderInfo.width + this._settings.textRenderIssueMargin), MAX_TEXTURE_DIMENSION);\n        this._canvas.height = Math.min(Math.ceil(height), MAX_TEXTURE_DIMENSION);\n        // Canvas context has been reset.\n        this.setFontProperties();\n        if (renderInfo.fontSize >= 128) {\n            // WpeWebKit bug: must force compositing because cairo-traps-compositor will not work with text first.\n            this._context.globalAlpha = 0.01;\n            this._context.fillRect(0, 0, 0.01, 0.01);\n            this._context.globalAlpha = 1.0;\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(-renderInfo.cutSx, -renderInfo.cutSy);\n        }\n        let linePositionX;\n        let linePositionY;\n        const drawLines = [];\n        const { metrics } = renderInfo;\n        /**\n         * Ascender (in pixels)\n         */\n        const ascenderPx = metrics\n            ? metrics.ascender * renderInfo.fontSize\n            : renderInfo.fontSize;\n        /**\n         * Bare line height is the distance between the ascender and descender of the font.\n         * without the line gap metric.\n         */\n        const bareLineHeightPx = (metrics.ascender - metrics.descender) * renderInfo.fontSize;\n        // Draw lines line by line.\n        for (let i = 0, n = lines.length; i < n; i++) {\n            linePositionX = i === 0 ? renderInfo.textIndent : 0;\n            // By default, text is aligned to top\n            linePositionY = i * renderInfo.lineHeight + ascenderPx;\n            if (this._settings.verticalAlign == 'middle') {\n                linePositionY += (renderInfo.lineHeight - bareLineHeightPx) / 2;\n            }\n            else if (this._settings.verticalAlign == 'bottom') {\n                linePositionY += renderInfo.lineHeight - bareLineHeightPx;\n            }\n            if (this._settings.textAlign === 'right') {\n                linePositionX += renderInfo.innerWidth - lineWidths[i];\n            }\n            else if (this._settings.textAlign === 'center') {\n                linePositionX += (renderInfo.innerWidth - lineWidths[i]) / 2;\n            }\n            linePositionX += renderInfo.paddingLeft;\n            drawLines.push({\n                text: lines[i],\n                x: linePositionX,\n                y: linePositionY,\n                w: lineWidths[i],\n            });\n        }\n        // Highlight.\n        if (this._settings.highlight) {\n            const color = this._settings.highlightColor;\n            const hlHeight = this._settings.highlightHeight * precision || renderInfo.fontSize * 1.5;\n            const offset = this._settings.highlightOffset * precision;\n            const hlPaddingLeft = this._settings.highlightPaddingLeft !== null\n                ? this._settings.highlightPaddingLeft * precision\n                : renderInfo.paddingLeft;\n            const hlPaddingRight = this._settings.highlightPaddingRight !== null\n                ? this._settings.highlightPaddingRight * precision\n                : renderInfo.paddingRight;\n            this._context.fillStyle = getRgbaString(color);\n            for (let i = 0; i < drawLines.length; i++) {\n                const drawLine = drawLines[i];\n                this._context.fillRect(drawLine.x - hlPaddingLeft, drawLine.y - renderInfo.offsetY + offset, drawLine.w + hlPaddingRight + hlPaddingLeft, hlHeight);\n            }\n        }\n        // Text shadow.\n        let prevShadowSettings = null;\n        if (this._settings.shadow) {\n            prevShadowSettings = [\n                this._context.shadowColor,\n                this._context.shadowOffsetX,\n                this._context.shadowOffsetY,\n                this._context.shadowBlur,\n            ];\n            this._context.shadowColor = getRgbaString(this._settings.shadowColor);\n            this._context.shadowOffsetX = this._settings.shadowOffsetX * precision;\n            this._context.shadowOffsetY = this._settings.shadowOffsetY * precision;\n            this._context.shadowBlur = this._settings.shadowBlur * precision;\n        }\n        this._context.fillStyle = getRgbaString(this._settings.textColor);\n        for (let i = 0, n = drawLines.length; i < n; i++) {\n            const drawLine = drawLines[i];\n            if (renderInfo.letterSpacing === 0) {\n                this._context.fillText(drawLine.text, drawLine.x, drawLine.y);\n            }\n            else {\n                const textSplit = drawLine.text.split('');\n                let x = drawLine.x;\n                for (let i = 0, j = textSplit.length; i < j; i++) {\n                    this._context.fillText(textSplit[i], x, drawLine.y);\n                    x += this.measureText(textSplit[i], renderInfo.letterSpacing);\n                }\n            }\n        }\n        if (prevShadowSettings) {\n            this._context.shadowColor = prevShadowSettings[0];\n            this._context.shadowOffsetX = prevShadowSettings[1];\n            this._context.shadowOffsetY = prevShadowSettings[2];\n            this._context.shadowBlur = prevShadowSettings[3];\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(renderInfo.cutSx, renderInfo.cutSy);\n        }\n    }\n    wrapWord(word, wordWrapWidth, suffix) {\n        const suffixWidth = this._context.measureText(suffix).width;\n        const wordLen = word.length;\n        const wordWidth = this._context.measureText(word).width;\n        /* If word fits wrapWidth, do nothing */\n        if (wordWidth <= wordWrapWidth) {\n            return word;\n        }\n        /* Make initial guess for text cuttoff */\n        let cutoffIndex = Math.floor((wordWrapWidth * wordLen) / wordWidth);\n        let truncWordWidth = this._context.measureText(word.substring(0, cutoffIndex)).width +\n            suffixWidth;\n        /* In case guess was overestimated, shrink it letter by letter. */\n        if (truncWordWidth > wordWrapWidth) {\n            while (cutoffIndex > 0) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth > wordWrapWidth) {\n                    cutoffIndex -= 1;\n                }\n                else {\n                    break;\n                }\n            }\n            /* In case guess was underestimated, extend it letter by letter. */\n        }\n        else {\n            while (cutoffIndex < wordLen) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth < wordWrapWidth) {\n                    cutoffIndex += 1;\n                }\n                else {\n                    // Finally, when bound is crossed, retract last letter.\n                    cutoffIndex -= 1;\n                    break;\n                }\n            }\n        }\n        /* If wrapWidth is too short to even contain suffix alone, return empty string */\n        return (word.substring(0, cutoffIndex) +\n            (wordWrapWidth >= suffixWidth ? suffix : ''));\n    }\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     */\n    wrapText(text, wordWrapWidth, letterSpacing, indent = 0) {\n        const spaceRegex = / |\\u200B/g; // ZWSP and spaces\n        const lines = text.split(/\\r?\\n/g);\n        let allLines = [];\n        const realNewlines = [];\n        for (let i = 0; i < lines.length; i++) {\n            const resultLines = [];\n            let result = '';\n            let spaceLeft = wordWrapWidth - indent;\n            // Split the line into words, considering ZWSP\n            const words = lines[i].split(spaceRegex);\n            const spaces = lines[i].match(spaceRegex) || [];\n            for (let j = 0; j < words.length; j++) {\n                const space = spaces[j - 1] || '';\n                const word = words[j];\n                const wordWidth = this.measureText(word, letterSpacing);\n                const wordWidthWithSpace = isZeroWidthSpace(space)\n                    ? wordWidth\n                    : wordWidth + this.measureText(space, letterSpacing);\n                if (j === 0 || wordWidthWithSpace > spaceLeft) {\n                    if (j > 0) {\n                        resultLines.push(result);\n                        result = '';\n                    }\n                    result += word;\n                    spaceLeft = wordWrapWidth - wordWidth - (j === 0 ? indent : 0);\n                }\n                else {\n                    spaceLeft -= wordWidthWithSpace;\n                    result += space + word;\n                }\n            }\n            resultLines.push(result);\n            result = '';\n            allLines = allLines.concat(resultLines);\n            if (i < lines.length - 1) {\n                realNewlines.push(allLines.length);\n            }\n        }\n        return { l: allLines, n: realNewlines };\n    }\n    measureText(word, space = 0) {\n        if (!space) {\n            return this._context.measureText(word).width;\n        }\n        // Split word into characters, but skip ZWSP in the width calculation\n        return word.split('').reduce((acc, char) => {\n            // Check if the character is a zero-width space and skip it\n            if (isZeroWidthSpace(char)) {\n                return acc;\n            }\n            return acc + this._context.measureText(char).width + space;\n        }, 0);\n    }\n    mergeDefaults(settings) {\n        return {\n            text: '',\n            w: 0,\n            h: 0,\n            fontStyle: 'normal',\n            fontSize: 40,\n            fontFamily: null,\n            trFontFace: null,\n            wordWrap: true,\n            wordWrapWidth: 0,\n            wordBreak: false,\n            textOverflow: '',\n            lineHeight: null,\n            textBaseline: 'alphabetic',\n            textAlign: 'left',\n            verticalAlign: 'top',\n            offsetY: null,\n            maxLines: 0,\n            maxHeight: null,\n            overflowSuffix: '...',\n            textColor: [1.0, 1.0, 1.0, 1.0],\n            paddingLeft: 0,\n            paddingRight: 0,\n            shadow: false,\n            shadowColor: [0.0, 0.0, 0.0, 1.0],\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowBlur: 5,\n            highlight: false,\n            highlightHeight: 0,\n            highlightColor: [0.0, 0.0, 0.0, 1.0],\n            highlightOffset: 0,\n            highlightPaddingLeft: 0,\n            highlightPaddingRight: 0,\n            letterSpacing: 0,\n            textIndent: 0,\n            cutSx: 0,\n            cutEx: 0,\n            cutSy: 0,\n            cutEy: 0,\n            advancedRenderer: false,\n            fontBaselineRatio: 0,\n            precision: 1,\n            textRenderIssueMargin: 0,\n            ...settings,\n        };\n    }\n}\n//# sourceMappingURL=LightningTextTextureRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../../common/EventEmitter.js';\nimport { assertTruthy } from '../../../utils.js';\nimport { getNormalizedRgbaComponents, getNormalizedAlphaComponent, } from '../../lib/utils.js';\nimport { TrFontManager } from '../TrFontManager.js';\nimport { WebTrFontFace } from '../font-face-types/WebTrFontFace.js';\nimport { LightningTextTextureRenderer, } from './LightningTextTextureRenderer.js';\nimport { TextRenderer, } from './TextRenderer.js';\nconst resolvedGlobal = typeof self === 'undefined' ? globalThis : self;\n/**\n * Global font set regardless of if run in the main thread or a web worker\n */\nconst globalFontSet = (resolvedGlobal.document?.fonts ||\n    resolvedGlobal.fonts);\nfunction getFontCssString(props) {\n    const { fontFamily, fontStyle, fontWeight, fontStretch, fontSize } = props;\n    return [fontStyle, fontWeight, fontStretch, `${fontSize}px`, fontFamily].join(' ');\n}\nexport class CanvasTextRenderer extends TextRenderer {\n    canvas;\n    context;\n    /**\n     * Font family map used to store web font faces that were added to the\n     * canvas text renderer.\n     */\n    fontFamilies = {};\n    fontFamilyArray = [this.fontFamilies];\n    type = 'canvas';\n    constructor(stage) {\n        super(stage);\n        if (typeof OffscreenCanvas !== 'undefined') {\n            this.canvas = new OffscreenCanvas(0, 0);\n        }\n        else {\n            this.canvas = document.createElement('canvas');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        let context = this.canvas.getContext('2d', {\n            willReadFrequently: true,\n        });\n        if (!context) {\n            // A browser may appear to support OffscreenCanvas but not actually support the Canvas '2d' context\n            // Here we try getting the context again after falling back to an HTMLCanvasElement.\n            // See: https://github.com/lightning-js/renderer/issues/26#issuecomment-1750438486\n            this.canvas = document.createElement('canvas');\n            context = this.canvas.getContext('2d', {\n                willReadFrequently: true,\n            });\n        }\n        assertTruthy(context);\n        this.context = context;\n        // Install the default 'san-serif' font face\n        this.addFontFace(new WebTrFontFace({\n            fontFamily: 'sans-serif',\n            descriptors: {},\n            fontUrl: '',\n        }));\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n                this.invalidateLayoutCache(state);\n            },\n            x: (state, value) => {\n                state.props.x = value;\n            },\n            y: (state, value) => {\n                state.props.y = value;\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                // Only invalidate layout cache if we're containing in the horizontal direction\n                if (state.props.contain !== 'none') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                // Only invalidate layout cache if we're containing in the vertical direction\n                if (state.props.contain === 'both') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            lineHeight: (state, value) => {\n                state.props.lineHeight = value;\n                this.invalidateLayoutCache(state);\n            },\n            maxLines: (state, value) => {\n                state.props.maxLines = value;\n                this.invalidateLayoutCache(state);\n            },\n            textBaseline: (state, value) => {\n                state.props.textBaseline = value;\n                this.invalidateLayoutCache(state);\n            },\n            verticalAlign: (state, value) => {\n                state.props.verticalAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            overflowSuffix: (state, value) => {\n                state.props.overflowSuffix = value;\n                this.invalidateLayoutCache(state);\n            },\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    canRenderFont(props) {\n        // The canvas renderer can render any font because it automatically\n        // falls back to system fonts. The CanvasTextRenderer should be\n        // checked last if other renderers are preferred.\n        return true;\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof WebTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an Canvas font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof WebTrFontFace);\n        const fontFamily = fontFace.fontFamily;\n        // Add the font face to the document\n        // Except for the 'sans-serif' font family, which the Renderer provides\n        // as a special default fallback.\n        if (fontFamily !== 'sans-serif') {\n            // @ts-expect-error `add()` method should be available from a FontFaceSet\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n            globalFontSet.add(fontFace.fontFace);\n        }\n        let faceSet = this.fontFamilies[fontFamily];\n        if (!faceSet) {\n            faceSet = new Set();\n            this.fontFamilies[fontFamily] = faceSet;\n        }\n        faceSet.add(fontFace);\n    }\n    createState(props, node) {\n        return {\n            node,\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            textureNode: undefined,\n            lightning2TextRenderer: new LightningTextTextureRenderer(this.canvas, this.context),\n            renderInfo: undefined,\n            forceFullLayoutCalc: false,\n            textW: 0,\n            textH: 0,\n            fontInfo: undefined,\n            isRenderable: false,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                drawCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n            // check if we're on screen\n            // if (this.isValidOnScreen(state) === true) {\n            //   this.setStatus(state, 'loading');\n            // }\n        }\n        if (state.status === 'loaded') {\n            // If we're loaded, we don't need to do anything\n            return;\n        }\n        // If fontInfo is invalid, we need to establish it\n        if (!state.fontInfo) {\n            return this.loadFont(state);\n        }\n        // If we're waiting for a font face to load, don't render anything\n        if (!state.fontInfo.loaded) {\n            return;\n        }\n        if (!state.renderInfo) {\n            state.renderInfo = this.calculateRenderInfo(state);\n            state.textH = state.renderInfo.lineHeight * state.renderInfo.lines.length;\n            state.textW = state.renderInfo.width;\n            this.renderSingleCanvasPage(state);\n        }\n        // handle scrollable text !!!\n        // if (state.isScrollable === true) {\n        //   return this.renderScrollableCanvasPages(state);\n        // }\n        // handle single page text\n    }\n    renderSingleCanvasPage(state) {\n        assertTruthy(state.renderInfo);\n        const node = state.node;\n        const texture = this.stage.txManager.loadTexture('ImageTexture', {\n            src: function (lightning2TextRenderer, renderInfo) {\n                // load the canvas texture\n                assertTruthy(renderInfo);\n                lightning2TextRenderer.draw(renderInfo, {\n                    lines: renderInfo.lines,\n                    lineWidths: renderInfo.lineWidths,\n                });\n                if (this.canvas.width === 0 || this.canvas.height === 0) {\n                    return null;\n                }\n                return this.context.getImageData(0, 0, this.canvas.width, this.canvas.height);\n            }.bind(this, state.lightning2TextRenderer, state.renderInfo),\n        });\n        if (state.textureNode) {\n            // Use the existing texture node\n            state.textureNode.texture = texture;\n            // Update the alpha\n            state.textureNode.alpha = getNormalizedAlphaComponent(state.props.color);\n        }\n        else {\n            // Create a new texture node\n            const textureNode = this.stage.createNode({\n                parent: node,\n                texture,\n                autosize: true,\n                // The alpha channel of the color is ignored when rasterizing the text\n                // texture so we need to pass it directly to the texture node.\n                alpha: getNormalizedAlphaComponent(state.props.color),\n            });\n            state.textureNode = textureNode;\n        }\n        this.setStatus(state, 'loaded');\n    }\n    loadFont = (state) => {\n        const cssString = getFontCssString(state.props);\n        const trFontFace = this.stage.fontManager.resolveFontFace(this.fontFamilyArray, state.props, 'canvas');\n        assertTruthy(trFontFace, `Could not resolve font face for ${cssString}`);\n        state.fontInfo = {\n            fontFace: trFontFace,\n            cssString: cssString,\n            // TODO: For efficiency we would use this here but it's not reliable on WPE -> document.fonts.check(cssString),\n            loaded: false,\n        };\n        // If font is not loaded, set up a handler to update the font info when the font loads\n        if (!state.fontInfo.loaded) {\n            globalFontSet\n                .load(cssString)\n                .then(this.onFontLoaded.bind(this, state, cssString))\n                .catch(this.onFontLoadError.bind(this, state, cssString));\n            return;\n        }\n    };\n    calculateRenderInfo(state) {\n        state.lightning2TextRenderer.settings = {\n            text: state.props.text,\n            textAlign: state.props.textAlign,\n            fontFamily: state.props.fontFamily,\n            trFontFace: state.fontInfo?.fontFace,\n            fontSize: state.props.fontSize,\n            fontStyle: [\n                state.props.fontStretch,\n                state.props.fontStyle,\n                state.props.fontWeight,\n            ].join(' '),\n            textColor: getNormalizedRgbaComponents(state.props.color),\n            offsetY: state.props.offsetY,\n            wordWrap: state.props.contain !== 'none',\n            wordWrapWidth: state.props.contain === 'none' ? undefined : state.props.width,\n            letterSpacing: state.props.letterSpacing,\n            lineHeight: state.props.lineHeight ?? null,\n            maxLines: state.props.maxLines,\n            maxHeight: state.props.contain === 'both'\n                ? state.props.height - state.props.offsetY\n                : null,\n            textBaseline: state.props.textBaseline,\n            verticalAlign: state.props.verticalAlign,\n            overflowSuffix: state.props.overflowSuffix,\n            w: state.props.contain !== 'none' ? state.props.width : undefined,\n        };\n        state.renderInfo = state.lightning2TextRenderer.calculateRenderInfo();\n        return state.renderInfo;\n    }\n    renderQuads() {\n        // Do nothing. The renderer will render the child node(s) that were created\n        // in the state update.\n        return;\n    }\n    destroyState(state) {\n        if (state.status === 'destroyed') {\n            return;\n        }\n        super.destroyState(state);\n        if (state.textureNode) {\n            state.textureNode.destroy();\n            delete state.textureNode;\n        }\n        delete state.renderInfo;\n    }\n    //#endregion Overrides\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-rendered on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.renderInfo = undefined;\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    onFontLoaded(state, cssString) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        state.fontInfo.loaded = true;\n        this.scheduleUpdateState(state);\n    }\n    onFontLoadError(state, cssString, error) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        // Font didn't actually load, but we'll log the error and mark it as loaded\n        // because the browser can still render with a fallback font.\n        state.fontInfo.loaded = true;\n        console.error(`CanvasTextRenderer: Error loading font '${state.fontInfo.cssString}'`, error);\n        this.scheduleUpdateState(state);\n    }\n}\n//# sourceMappingURL=CanvasTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst WHITE = {\n    isWhite: true,\n    a: 1,\n    r: 0xff,\n    g: 0xff,\n    b: 0xff,\n};\n/**\n * Extract color components\n */\nexport function parseColor(abgr) {\n    if (abgr === 0xffffffff) {\n        return WHITE;\n    }\n    const a = ((abgr >>> 24) & 0xff) / 255;\n    const b = (abgr >>> 16) & 0xff & 0xff;\n    const g = (abgr >>> 8) & 0xff & 0xff;\n    const r = abgr & 0xff & 0xff;\n    return { isWhite: false, a, r, g, b };\n}\n/**\n * Extract color components\n */\nexport function parseColorRgba(rgba) {\n    if (rgba === 0xffffffff) {\n        return WHITE;\n    }\n    const r = (rgba >>> 24) & 0xff;\n    const g = (rgba >>> 16) & 0xff & 0xff;\n    const b = (rgba >>> 8) & 0xff & 0xff;\n    const a = (rgba & 0xff & 0xff) / 255;\n    return { isWhite: false, r, g, b, a };\n}\n/**\n * Format a parsed color into a rgba CSS color\n */\nexport function formatRgba({ a, r, g, b }) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n//# sourceMappingURL=ColorUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../utils.js';\nimport { CoreContextTexture } from '../CoreContextTexture.js';\nimport { formatRgba } from './internal/ColorUtils.js';\nexport class CanvasCoreTexture extends CoreContextTexture {\n    image;\n    tintCache;\n    load() {\n        if (this.textureSource.state !== 'freed') {\n            return;\n        }\n        this.textureSource.setState('loading');\n        this.onLoadRequest()\n            .then((size) => {\n            this.textureSource.setState('loaded', size);\n            this.updateMemSize();\n        })\n            .catch((err) => {\n            this.textureSource.setState('failed', err);\n        });\n    }\n    free() {\n        this.image = undefined;\n        this.tintCache = undefined;\n        this.textureSource.setState('freed');\n        this.setTextureMemUse(0);\n    }\n    updateMemSize() {\n        // Counting memory usage for:\n        // - main image\n        // - tinted image\n        const mult = this.tintCache ? 8 : 4;\n        if (this.textureSource.dimensions) {\n            const { width, height } = this.textureSource.dimensions;\n            this.setTextureMemUse(width * height * mult);\n        }\n    }\n    hasImage() {\n        return this.image !== undefined;\n    }\n    getImage(color) {\n        const image = this.image;\n        assertTruthy(image, 'Attempt to get unloaded image texture');\n        if (color.isWhite) {\n            if (this.tintCache) {\n                this.tintCache = undefined;\n                this.updateMemSize();\n            }\n            return image;\n        }\n        const key = formatRgba(color);\n        if (this.tintCache?.key === key) {\n            return this.tintCache.image;\n        }\n        const tintedImage = this.tintTexture(image, key);\n        this.tintCache = {\n            key,\n            image: tintedImage,\n        };\n        this.updateMemSize();\n        return tintedImage;\n    }\n    tintTexture(source, color) {\n        const { width, height } = source;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n            // fill with target color\n            ctx.fillStyle = color;\n            ctx.globalCompositeOperation = 'copy';\n            ctx.fillRect(0, 0, width, height);\n            // multiply with image, resulting in non-transparent tinted image\n            ctx.globalCompositeOperation = 'multiply';\n            ctx.drawImage(source, 0, 0, width, height, 0, 0, width, height);\n            // apply original image alpha\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(source, 0, 0, width, height, 0, 0, width, height);\n        }\n        return canvas;\n    }\n    async onLoadRequest() {\n        const { data } = await this.textureSource.getTextureData();\n        // TODO: canvas from text renderer should be able to provide the canvas directly\n        // instead of having to re-draw it into a new canvas...\n        if (data instanceof ImageData) {\n            const canvas = document.createElement('canvas');\n            canvas.width = data.width;\n            canvas.height = data.height;\n            const ctx = canvas.getContext('2d');\n            if (ctx)\n                ctx.putImageData(data, 0, 0);\n            this.image = canvas;\n            return { width: data.width, height: data.height };\n        }\n        else if (typeof ImageBitmap !== 'undefined' &&\n            data instanceof ImageBitmap) {\n            this.image = data;\n            return { width: data.width, height: data.height };\n        }\n        return { width: 0, height: 0 };\n    }\n}\n//# sourceMappingURL=CanvasCoreTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ROUNDED_RECTANGLE_SHADER_TYPE, UnsupportedShader, } from '../shaders/UnsupportedShader.js';\nimport { formatRgba, parseColorRgba } from './ColorUtils.js';\n/**\n * Extract `RoundedRectangle` shader radius to apply as a clipping\n */\nexport function getRadius(quad) {\n    if (quad.shader instanceof UnsupportedShader) {\n        const shType = quad.shader.shType;\n        if (shType === ROUNDED_RECTANGLE_SHADER_TYPE) {\n            return quad.shaderProps?.radius ?? 0;\n        }\n        else if (shType === 'DynamicShader') {\n            const effects = quad.shaderProps?.effects;\n            if (effects) {\n                const effect = effects.find((effect) => {\n                    return effect.type === 'radius' && effect?.props?.radius;\n                });\n                return (effect && effect.type === 'radius' && effect.props.radius) || 0;\n            }\n        }\n    }\n    return 0;\n}\n/**\n * Extract `RoundedRectangle` shader radius to apply as a clipping */\nexport function getBorder(quad, direction = '') {\n    if (quad.shader instanceof UnsupportedShader) {\n        const shType = quad.shader.shType;\n        if (shType === 'DynamicShader') {\n            const effects = quad.shaderProps?.effects;\n            if (effects && effects.length) {\n                const effect = effects.find((effect) => {\n                    return (effect.type === `border${direction}` &&\n                        effect.props &&\n                        effect.props.width);\n                });\n                return effect && effect.props;\n            }\n        }\n    }\n    return undefined;\n}\nexport function roundRect(x, y, width, height, radius) {\n    const context = Object.getPrototypeOf(this);\n    if (!context.roundRect) {\n        const fixOverlappingCorners = (radii) => {\n            const maxRadius = Math.min(width / 2, height / 2);\n            const totalHorizontal = radii.topLeft + radii.topRight + radii.bottomRight + radii.bottomLeft;\n            if (totalHorizontal > width || totalHorizontal > height) {\n                const scale = maxRadius /\n                    Math.max(radii.topLeft, radii.topRight, radii.bottomRight, radii.bottomLeft);\n                radii.topLeft *= scale;\n                radii.topRight *= scale;\n                radii.bottomRight *= scale;\n                radii.bottomLeft *= scale;\n            }\n        };\n        const radii = typeof radius === 'number'\n            ? {\n                topLeft: radius,\n                topRight: radius,\n                bottomRight: radius,\n                bottomLeft: radius,\n            }\n            : { topLeft: 0, topRight: 0, bottomRight: 0, bottomLeft: 0, ...radius };\n        fixOverlappingCorners(radii);\n        this.moveTo(x + radii.topLeft, y);\n        this.lineTo(x + width - radii.topRight, y);\n        this.ellipse(x + width - radii.topRight, y + radii.topRight, radii.topRight, radii.topRight, 0, 1.5 * Math.PI, 2 * Math.PI);\n        this.lineTo(x + width, y + height - radii.bottomRight);\n        this.ellipse(x + width - radii.bottomRight, y + height - radii.bottomRight, radii.bottomRight, radii.bottomRight, 0, 0, 0.5 * Math.PI);\n        this.lineTo(x + radii.bottomLeft, y + height);\n        this.ellipse(x + radii.bottomLeft, y + height - radii.bottomLeft, radii.bottomLeft, radii.bottomLeft, 0, 0.5 * Math.PI, Math.PI);\n        this.lineTo(x, y + radii.topLeft);\n        this.ellipse(x + radii.topLeft, y + radii.topLeft, radii.topLeft, radii.topLeft, 0, Math.PI, 1.5 * Math.PI);\n    }\n    else {\n        this.roundRect(x, y, width, height, radius);\n    }\n}\nexport function strokeLine(ctx, x, y, width, height, lineWidth = 0, color, direction) {\n    if (!lineWidth) {\n        return;\n    }\n    let sx, sy = 0;\n    let ex, ey = 0;\n    switch (direction) {\n        case 'Top':\n            sx = x;\n            sy = y;\n            ex = width + x;\n            ey = y;\n            break;\n        case 'Right':\n            sx = x + width;\n            sy = y;\n            ex = x + width;\n            ey = y + height;\n            break;\n        case 'Bottom':\n            sx = x;\n            sy = y + height;\n            ex = x + width;\n            ey = y + height;\n            break;\n        case 'Left':\n            sx = x;\n            sy = y;\n            ex = x;\n            ey = y + height;\n            break;\n    }\n    ctx.beginPath();\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = formatRgba(parseColorRgba(color ?? 0));\n    ctx.moveTo(sx, sy);\n    ctx.lineTo(ex, ey);\n    ctx.stroke();\n}\n//# sourceMappingURL=C2DShaderUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getRgbaComponents } from '../../lib/utils.js';\nimport { SubTexture } from '../../textures/SubTexture.js';\nimport { CoreRenderer, } from '../CoreRenderer.js';\nimport { CanvasCoreTexture } from './CanvasCoreTexture.js';\nimport { getBorder, getRadius, roundRect, strokeLine, } from './internal/C2DShaderUtils.js';\nimport { formatRgba, parseColorRgba, parseColor, } from './internal/ColorUtils.js';\nimport { UnsupportedShader } from './shaders/UnsupportedShader.js';\nexport class CanvasCoreRenderer extends CoreRenderer {\n    context;\n    canvas;\n    pixelRatio;\n    clearColor;\n    renderToTextureActive = false;\n    activeRttNode = null;\n    defShaderCtr;\n    constructor(options) {\n        super(options);\n        this.mode = 'canvas';\n        this.shManager.renderer = this;\n        const { canvas, pixelRatio, clearColor } = options;\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d');\n        this.pixelRatio = pixelRatio;\n        this.clearColor = clearColor ? getRgbaComponents(clearColor) : undefined;\n        // Stub for default shader controller since the canvas renderer does not\n        // (really) support the concept of a shader (yet)\n        this.defShaderCtr = {\n            type: 'DefaultShader',\n            props: {},\n            shader: new UnsupportedShader('DefaultShader'),\n            getResolvedProps: () => () => {\n                return {};\n            },\n        };\n    }\n    reset() {\n        // eslint-disable-next-line no-self-assign\n        this.canvas.width = this.canvas.width; // quick reset canvas\n        const ctx = this.context;\n        if (this.clearColor) {\n            const [r, g, b, a] = this.clearColor;\n            ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a / 255})`;\n            ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n        ctx.scale(this.pixelRatio, this.pixelRatio);\n    }\n    render() {\n        // noop\n    }\n    addQuad(quad) {\n        const ctx = this.context;\n        const { tx, ty, width, height, alpha, colorTl, colorTr, colorBr, ta, tb, tc, td, clippingRect, } = quad;\n        let texture = quad.texture;\n        let ctxTexture = undefined;\n        let frame;\n        if (texture) {\n            if (texture instanceof SubTexture) {\n                frame = texture.props;\n                texture = texture.parentTexture;\n            }\n            ctxTexture = texture.ctxTexture;\n            if (texture.state === 'freed') {\n                ctxTexture.load();\n                return;\n            }\n            if (texture.state !== 'loaded' || !ctxTexture.hasImage()) {\n                return;\n            }\n        }\n        const color = parseColor(colorTl);\n        const hasTransform = ta !== 1;\n        const hasClipping = clippingRect.width !== 0 && clippingRect.height !== 0;\n        const hasGradient = colorTl !== colorTr || colorTl !== colorBr;\n        const hasQuadShader = Boolean(quad.shader);\n        const radius = hasQuadShader ? getRadius(quad) : 0;\n        const border = hasQuadShader ? getBorder(quad) : undefined;\n        if (hasTransform || hasClipping || radius) {\n            ctx.save();\n        }\n        if (hasClipping) {\n            const path = new Path2D();\n            const { x, y, width, height } = clippingRect;\n            path.rect(x, y, width, height);\n            ctx.clip(path);\n        }\n        if (hasTransform) {\n            // Quad transform:\n            // | ta tb tx |\n            // | tc td ty |\n            // | 0  0  1  |\n            // C2D transform:\n            // | a  c  e  |\n            // | b  d  f  |\n            // | 0  0  1  |\n            const scale = this.pixelRatio;\n            ctx.setTransform(ta, tc, tb, td, tx * scale, ty * scale);\n            ctx.scale(scale, scale);\n            ctx.translate(-tx, -ty);\n        }\n        if (radius) {\n            const path = new Path2D();\n            roundRect.call(path, tx, ty, width, height, radius);\n            ctx.clip(path);\n        }\n        if (ctxTexture) {\n            const image = ctxTexture.getImage(color);\n            ctx.globalAlpha = color.a ?? alpha;\n            if (frame) {\n                ctx.drawImage(image, frame.x, frame.y, frame.width, frame.height, tx, ty, width, height);\n            }\n            else {\n                ctx.drawImage(image, tx, ty, width, height);\n            }\n            ctx.globalAlpha = 1;\n        }\n        else if (hasGradient) {\n            let endX = tx;\n            let endY = ty;\n            let endColor;\n            if (colorTl === colorTr) {\n                // vertical\n                endX = tx;\n                endY = ty + height;\n                endColor = parseColor(colorBr);\n            }\n            else {\n                // horizontal\n                endX = tx + width;\n                endY = ty;\n                endColor = parseColor(colorTr);\n            }\n            const gradient = ctx.createLinearGradient(tx, ty, endX, endY);\n            gradient.addColorStop(0, formatRgba(color));\n            gradient.addColorStop(1, formatRgba(endColor));\n            ctx.fillStyle = gradient;\n            ctx.fillRect(tx, ty, width, height);\n        }\n        else {\n            ctx.fillStyle = formatRgba(color);\n            ctx.fillRect(tx, ty, width, height);\n        }\n        if (border && border.width) {\n            const borderWidth = border.width;\n            const borderInnerWidth = border.width / 2;\n            const borderColor = formatRgba(parseColorRgba(border.color ?? 0));\n            ctx.beginPath();\n            ctx.lineWidth = borderWidth;\n            ctx.strokeStyle = borderColor;\n            ctx.globalAlpha = alpha;\n            if (radius) {\n                roundRect.call(ctx, tx + borderInnerWidth, ty + borderInnerWidth, width - borderWidth, height - borderWidth, radius);\n                ctx.stroke();\n            }\n            else {\n                ctx.strokeRect(tx + borderInnerWidth, ty + borderInnerWidth, width - borderWidth, height - borderWidth);\n            }\n            ctx.globalAlpha = 1;\n        }\n        else if (hasQuadShader) {\n            const borderTop = getBorder(quad, 'Top');\n            const borderRight = getBorder(quad, 'Right');\n            const borderBottom = getBorder(quad, 'Bottom');\n            const borderLeft = getBorder(quad, 'Left');\n            if (borderTop) {\n                strokeLine(ctx, tx, ty, width, height, borderTop.width, borderTop.color, 'Top');\n            }\n            if (borderRight) {\n                strokeLine(ctx, tx, ty, width, height, borderRight.width, borderRight.color, 'Right');\n            }\n            if (borderBottom) {\n                strokeLine(ctx, tx, ty, width, height, borderBottom.width, borderBottom.color, 'Bottom');\n            }\n            if (borderLeft) {\n                strokeLine(ctx, tx, ty, width, height, borderLeft.width, borderLeft.color, 'Left');\n            }\n        }\n        if (hasTransform || hasClipping || radius) {\n            ctx.restore();\n        }\n    }\n    createCtxTexture(textureSource) {\n        return new CanvasCoreTexture(this.txMemManager, textureSource);\n    }\n    getShaderManager() {\n        return this.shManager;\n    }\n    getDefShaderCtr() {\n        return this.defShaderCtr;\n    }\n    renderRTTNodes() {\n        // noop\n    }\n    removeRTTNode(node) {\n        // noop\n    }\n    renderToTexture(node) {\n        // noop\n    }\n    getBufferInfo() {\n        return null;\n    }\n    /**\n     * Updates the clear color of the canvas renderer.\n     *\n     * @param color - The color to set as the clear color.\n     */\n    updateClearColor(color) {\n        this.clearColor = color ? getRgbaComponents(color) : undefined;\n    }\n}\n//# sourceMappingURL=CanvasCoreRenderer.js.map","import { CoreNode, } from '../core/CoreNode.js';\nimport {} from './Renderer.js';\nimport { isProductionEnvironment } from '../utils.js';\nconst stylePropertyMap = {\n    alpha: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'opacity', value: `${v}` };\n    },\n    x: (x) => {\n        return { prop: 'left', value: `${x}px` };\n    },\n    y: (y) => {\n        return { prop: 'top', value: `${y}px` };\n    },\n    width: (w) => {\n        if (w === 0) {\n            return null;\n        }\n        return { prop: 'width', value: `${w}px` };\n    },\n    height: (h) => {\n        if (h === 0) {\n            return null;\n        }\n        return { prop: 'height', value: `${h}px` };\n    },\n    zIndex: () => 'z-index',\n    fontFamily: () => 'font-family',\n    fontSize: () => 'font-size',\n    fontStyle: () => 'font-style',\n    fontWeight: () => 'font-weight',\n    fontStretch: () => 'font-stretch',\n    lineHeight: () => 'line-height',\n    letterSpacing: () => 'letter-spacing',\n    textAlign: () => 'text-align',\n    overflowSuffix: () => 'overflow-suffix',\n    maxLines: () => 'max-lines',\n    contain: () => 'contain',\n    verticalAlign: () => 'vertical-align',\n    clipping: (v) => {\n        if (v === false) {\n            return null;\n        }\n        return { prop: 'overflow', value: v ? 'hidden' : 'visible' };\n    },\n    rotation: (v) => {\n        if (v === 0) {\n            return null;\n        }\n        return { prop: 'transform', value: `rotate(${v}rad)` };\n    },\n    scale: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scale(${v})` };\n    },\n    scaleX: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scaleX(${v})` };\n    },\n    scaleY: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scaleY(${v})` };\n    },\n    color: (v) => {\n        if (v === 0) {\n            return null;\n        }\n        return { prop: 'color', value: convertColorToRgba(v) };\n    },\n};\nconst convertColorToRgba = (color) => {\n    const a = (color & 0xff) / 255;\n    const b = (color >> 8) & 0xff;\n    const g = (color >> 16) & 0xff;\n    const r = (color >> 24) & 0xff;\n    return `rgba(${r},${g},${b},${a})`;\n};\nconst domPropertyMap = {\n    id: 'test-id',\n};\nconst gradientColorPropertyMap = [\n    'colorTop',\n    'colorBottom',\n    'colorLeft',\n    'colorRight',\n    'colorTl',\n    'colorTr',\n    'colorBl',\n    'colorBr',\n];\nconst knownProperties = new Set([\n    ...Object.keys(stylePropertyMap),\n    ...Object.keys(domPropertyMap),\n    // ...gradientColorPropertyMap,\n    'src',\n    'parent',\n]);\nexport class Inspector {\n    root = null;\n    canvas = null;\n    height = 1080;\n    width = 1920;\n    scaleX = 1;\n    scaleY = 1;\n    constructor(canvas, settings) {\n        if (isProductionEnvironment())\n            return;\n        if (!settings) {\n            throw new Error('settings is required');\n        }\n        // calc dimensions based on the devicePixelRatio\n        this.height = Math.ceil(settings.appHeight ?? 1080 / (settings.deviceLogicalPixelRatio ?? 1));\n        this.width = Math.ceil(settings.appWidth ?? 1920 / (settings.deviceLogicalPixelRatio ?? 1));\n        this.scaleX = settings.deviceLogicalPixelRatio ?? 1;\n        this.scaleY = settings.deviceLogicalPixelRatio ?? 1;\n        this.canvas = canvas;\n        this.root = document.createElement('div');\n        this.setRootPosition();\n        document.body.appendChild(this.root);\n        //listen for changes on canvas\n        const mutationObserver = new MutationObserver(this.setRootPosition.bind(this));\n        mutationObserver.observe(canvas, {\n            attributes: true,\n            childList: false,\n            subtree: false,\n        });\n        // Create a ResizeObserver to watch for changes in the element's size\n        const resizeObserver = new ResizeObserver(this.setRootPosition.bind(this));\n        resizeObserver.observe(canvas);\n        //listen for changes on window\n        window.addEventListener('resize', this.setRootPosition.bind(this));\n        console.warn('Inspector is enabled, this will impact performance');\n    }\n    setRootPosition() {\n        if (this.root === null || this.canvas === null) {\n            return;\n        }\n        // get the world position of the canvas object, so we can match the inspector to it\n        const rect = this.canvas.getBoundingClientRect();\n        const top = document.documentElement.scrollTop + rect.top;\n        const left = document.documentElement.scrollLeft + rect.left;\n        this.root.id = 'root';\n        this.root.style.left = `${left}px`;\n        this.root.style.top = `${top}px`;\n        this.root.style.width = `${this.width}px`;\n        this.root.style.height = `${this.height}px`;\n        this.root.style.position = 'absolute';\n        this.root.style.transformOrigin = '0 0 0';\n        this.root.style.transform = `scale(${this.scaleX}, ${this.scaleY})`;\n        this.root.style.overflow = 'hidden';\n        this.root.style.zIndex = '65534';\n    }\n    createDiv(id, properties) {\n        const div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.id = id.toString();\n        // set initial properties\n        for (const key in properties) {\n            this.updateNodeProperty(div, \n            // really typescript? really?\n            key, properties[key], properties);\n        }\n        return div;\n    }\n    createNode(node) {\n        const div = this.createDiv(node.id, node.props);\n        div.node = node;\n        node.div = div;\n        node.on('inViewport', () => div.setAttribute('state', 'inViewport'));\n        node.on('inBounds', () => div.setAttribute('state', 'inBounds'));\n        node.on('outOfBounds', () => div.setAttribute('state', 'outOfBounds'));\n        // Monitor only relevant properties by trapping with selective assignment\n        return this.createProxy(node, div);\n    }\n    createTextNode(node) {\n        const div = this.createDiv(node.id, node.props);\n        div.node = node;\n        node.div = div;\n        return this.createProxy(node, div);\n    }\n    createProxy(node, div) {\n        // Define traps for each property in knownProperties\n        knownProperties.forEach((property) => {\n            let originalProp = Object.getOwnPropertyDescriptor(node, property);\n            if (originalProp === undefined) {\n                // Search the prototype chain for the property descriptor\n                const proto = Object.getPrototypeOf(node);\n                originalProp = Object.getOwnPropertyDescriptor(proto, property);\n            }\n            if (originalProp === undefined) {\n                return;\n            }\n            Object.defineProperty(node, property, {\n                get() {\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                    return originalProp?.get?.call(node);\n                },\n                set: (value) => {\n                    originalProp?.set?.call(node, value);\n                    this.updateNodeProperty(div, property, value, node.props);\n                },\n                configurable: true,\n                enumerable: true,\n            });\n        });\n        const originalDestroy = node.destroy;\n        Object.defineProperty(node, 'destroy', {\n            value: () => {\n                this.destroyNode(node.id);\n                originalDestroy.call(node);\n            },\n        });\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        const originalAnimate = node.animate;\n        Object.defineProperty(node, 'animate', {\n            value: (props, settings) => {\n                const animationController = originalAnimate.call(node, props, settings);\n                const originalStart = animationController.start.bind(animationController);\n                animationController.start = () => {\n                    this.animateNode(div, props, settings);\n                    return originalStart();\n                };\n                return animationController;\n            },\n        });\n        return node;\n    }\n    destroyNode(id) {\n        const div = document.getElementById(id.toString());\n        div?.remove();\n    }\n    updateNodeProperty(div, property, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value, props) {\n        if (this.root === null || value === undefined || value === null) {\n            return;\n        }\n        /**\n         * Special case for parent property\n         */\n        if (property === 'parent') {\n            const parentId = value.id;\n            // only way to detect if the parent is the root node\n            // if you are reading this and have a better way, please let me know\n            if (parentId === 1) {\n                this.root.appendChild(div);\n                return;\n            }\n            const parent = document.getElementById(parentId.toString());\n            parent?.appendChild(div);\n            return;\n        }\n        // special case for text\n        if (property === 'text') {\n            div.innerHTML = String(value);\n            // hide text because we can't render SDF fonts\n            // it would look weird and obstruct the WebGL rendering\n            div.style.visibility = 'hidden';\n            return;\n        }\n        // special case for images\n        // we're not setting any CSS properties to avoid images getting loaded twice\n        // as the renderer will handle the loading of the image. Setting it to `data-src`\n        if (property === 'src' && value) {\n            div.setAttribute(`data-src`, String(value));\n            return;\n        }\n        // special case for color gradients (normal colors are handled by the stylePropertyMap)\n        // FIXME the renderer seems to return the same number for all colors\n        // if (gradientColorPropertyMap.includes(property as string)) {\n        //   const color = convertColorToRgba(value as number);\n        //   div.setAttribute(`data-${property}`, color);\n        //   return;\n        // }\n        // CSS mappable attribute\n        if (stylePropertyMap[property]) {\n            const mappedStyleResponse = stylePropertyMap[property]?.(value);\n            if (mappedStyleResponse === null) {\n                return;\n            }\n            if (typeof mappedStyleResponse === 'string') {\n                div.style.setProperty(mappedStyleResponse, String(value));\n                return;\n            }\n            if (typeof mappedStyleResponse === 'object') {\n                let value = mappedStyleResponse.value;\n                if (property === 'x') {\n                    const mount = props.mountX;\n                    const width = props.width;\n                    if (mount) {\n                        value = `${parseInt(value) - width * mount}px`;\n                    }\n                }\n                else if (property === 'y') {\n                    const mount = props.mountY;\n                    const height = props.height;\n                    if (mount) {\n                        value = `${parseInt(value) - height * mount}px`;\n                    }\n                }\n                div.style.setProperty(mappedStyleResponse.prop, value);\n            }\n            return;\n        }\n        // DOM properties\n        if (domPropertyMap[property]) {\n            const domProperty = domPropertyMap[property];\n            if (!domProperty) {\n                return;\n            }\n            div.setAttribute(String(domProperty), String(value));\n            return;\n        }\n        // custom data properties\n        if (property === 'data') {\n            for (const key in value) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                const keyValue = value[key];\n                if (keyValue === undefined) {\n                    div.removeAttribute(`data-${key}`);\n                }\n                else {\n                    div.setAttribute(`data-${key}`, String(keyValue));\n                }\n            }\n            return;\n        }\n    }\n    // simple animation handler\n    animateNode(div, props, settings) {\n        const { duration = 1000, delay = 0,\n        // easing = 'linear',\n        // repeat = 0,\n        // loop = false,\n        // stopMethod = false,\n         } = settings;\n        const { x, y, width, height, alpha = 1, rotation = 0, scale = 1, color, mountX, mountY, } = props;\n        // ignoring loops and repeats for now, as that might be a bit too much for the inspector\n        function animate() {\n            setTimeout(() => {\n                div.style.top = `${y - height * mountY}px`;\n                div.style.left = `${x - width * mountX}px`;\n                div.style.width = `${width}px`;\n                div.style.height = `${height}px`;\n                div.style.opacity = `${alpha}`;\n                div.style.rotate = `${rotation}rad`;\n                div.style.scale = `${scale}`;\n                div.style.color = convertColorToRgba(color);\n            }, duration);\n        }\n        setTimeout(animate, delay);\n    }\n}\n//# sourceMappingURL=Inspector.js.map","import {\n  createRoot,\n  createRenderEffect,\n  untrack,\n  sharedConfig,\n  enableHydration,\n  getOwner,\n  createEffect,\n  runWithOwner,\n  createMemo,\n  createSignal,\n  onCleanup,\n  splitProps,\n  $DEVCOMP\n} from \"solid-js\";\nexport {\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  createComponent,\n  createRenderEffect as effect,\n  getOwner,\n  createMemo as memo,\n  mergeProps,\n  untrack\n} from \"solid-js\";\n\nconst booleans = [\n  \"allowfullscreen\",\n  \"async\",\n  \"autofocus\",\n  \"autoplay\",\n  \"checked\",\n  \"controls\",\n  \"default\",\n  \"disabled\",\n  \"formnovalidate\",\n  \"hidden\",\n  \"indeterminate\",\n  \"inert\",\n  \"ismap\",\n  \"loop\",\n  \"multiple\",\n  \"muted\",\n  \"nomodule\",\n  \"novalidate\",\n  \"open\",\n  \"playsinline\",\n  \"readonly\",\n  \"required\",\n  \"reversed\",\n  \"seamless\",\n  \"selected\"\n];\nconst Properties = /*#__PURE__*/ new Set([\n  \"className\",\n  \"value\",\n  \"readOnly\",\n  \"formNoValidate\",\n  \"isMap\",\n  \"noModule\",\n  \"playsInline\",\n  ...booleans\n]);\nconst ChildProperties = /*#__PURE__*/ new Set([\n  \"innerHTML\",\n  \"textContent\",\n  \"innerText\",\n  \"children\"\n]);\nconst Aliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? (a[tagName] ? a[\"$\"] : undefined) : a;\n}\nconst DelegatedEvents = /*#__PURE__*/ new Set([\n  \"beforeinput\",\n  \"click\",\n  \"dblclick\",\n  \"contextmenu\",\n  \"focusin\",\n  \"focusout\",\n  \"input\",\n  \"keydown\",\n  \"keyup\",\n  \"mousedown\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"pointerdown\",\n  \"pointermove\",\n  \"pointerout\",\n  \"pointerover\",\n  \"pointerup\",\n  \"touchend\",\n  \"touchmove\",\n  \"touchstart\"\n]);\nconst SVGElements = /*#__PURE__*/ new Set([\n  \"altGlyph\",\n  \"altGlyphDef\",\n  \"altGlyphItem\",\n  \"animate\",\n  \"animateColor\",\n  \"animateMotion\",\n  \"animateTransform\",\n  \"circle\",\n  \"clipPath\",\n  \"color-profile\",\n  \"cursor\",\n  \"defs\",\n  \"desc\",\n  \"ellipse\",\n  \"feBlend\",\n  \"feColorMatrix\",\n  \"feComponentTransfer\",\n  \"feComposite\",\n  \"feConvolveMatrix\",\n  \"feDiffuseLighting\",\n  \"feDisplacementMap\",\n  \"feDistantLight\",\n  \"feDropShadow\",\n  \"feFlood\",\n  \"feFuncA\",\n  \"feFuncB\",\n  \"feFuncG\",\n  \"feFuncR\",\n  \"feGaussianBlur\",\n  \"feImage\",\n  \"feMerge\",\n  \"feMergeNode\",\n  \"feMorphology\",\n  \"feOffset\",\n  \"fePointLight\",\n  \"feSpecularLighting\",\n  \"feSpotLight\",\n  \"feTile\",\n  \"feTurbulence\",\n  \"filter\",\n  \"font\",\n  \"font-face\",\n  \"font-face-format\",\n  \"font-face-name\",\n  \"font-face-src\",\n  \"font-face-uri\",\n  \"foreignObject\",\n  \"g\",\n  \"glyph\",\n  \"glyphRef\",\n  \"hkern\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"marker\",\n  \"mask\",\n  \"metadata\",\n  \"missing-glyph\",\n  \"mpath\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"set\",\n  \"stop\",\n  \"svg\",\n  \"switch\",\n  \"symbol\",\n  \"text\",\n  \"textPath\",\n  \"tref\",\n  \"tspan\",\n  \"use\",\n  \"view\",\n  \"vkern\"\n]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/ new Set([\n  \"html\",\n  \"base\",\n  \"head\",\n  \"link\",\n  \"meta\",\n  \"style\",\n  \"title\",\n  \"body\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"body\",\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"param\",\n  \"picture\",\n  \"portal\",\n  \"source\",\n  \"svg\",\n  \"math\",\n  \"canvas\",\n  \"noscript\",\n  \"script\",\n  \"del\",\n  \"ins\",\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  \"details\",\n  \"dialog\",\n  \"menu\",\n  \"summary\",\n  \"details\",\n  \"slot\",\n  \"template\",\n  \"acronym\",\n  \"applet\",\n  \"basefont\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"center\",\n  \"content\",\n  \"dir\",\n  \"font\",\n  \"frame\",\n  \"frameset\",\n  \"hgroup\",\n  \"image\",\n  \"keygen\",\n  \"marquee\",\n  \"menuitem\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"plaintext\",\n  \"rb\",\n  \"rtc\",\n  \"shadow\",\n  \"spacer\",\n  \"strike\",\n  \"tt\",\n  \"xmp\",\n  \"a\",\n  \"abbr\",\n  \"acronym\",\n  \"address\",\n  \"applet\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"basefont\",\n  \"bdi\",\n  \"bdo\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"center\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"content\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"dir\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"font\",\n  \"footer\",\n  \"form\",\n  \"frame\",\n  \"frameset\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"image\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"keygen\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"marquee\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"plaintext\",\n  \"portal\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"shadow\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"spacer\",\n  \"span\",\n  \"strike\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"tt\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\",\n  \"xmp\",\n  \"input\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\"\n]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? (bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart]) : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  if (!element) {\n    throw new Error(\n      \"The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.\"\n    );\n  }\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document\n      ? code()\n      : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isImportNode, isSVG) {\n  let node;\n  const create = () => {\n    if (isHydrating())\n      throw new Error(\n        \"Failed attempt to create new DOM elements during hydration. Check that the libraries you are using support hydration.\"\n      );\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isImportNode\n    ? () => untrack(() => document.importNode(node || (node = create()), true))\n    : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setProperty(node, name, value) {\n  if (isHydrating(node)) return;\n  node[name] = value;\n}\nfunction setAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(name);\n  else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttributeNS(namespace, name);\n  else node.setAttributeNS(namespace, name, value);\n}\nfunction setBoolAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  value ? node.setAttribute(name, \"\") : node.removeAttribute(name);\n}\nfunction className(node, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(\"class\");\n  else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, (handler[0] = e => handlerFn.call(node, handler[1], e)));\n  } else node.addEventListener(name, handler, typeof handler !== \"function\" && handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return (nodeStyle.cssText = value);\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(\n      () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n    );\n  }\n  createRenderEffect(() => typeof props.ref === \"function\" && use(props.ref, node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef, props);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef, props);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  if (globalThis._$HY.done) return render(code, element, [...element.childNodes], options);\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = id => globalThis._$HY.r[id];\n  sharedConfig.has = id => id in globalThis._$HY.r;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  try {\n    gatherHydratable(element, options.renderId);\n    return render(code, element, [...element.childNodes], options);\n  } finally {\n    sharedConfig.context = null;\n  }\n}\nfunction getNextElement(template) {\n  let node,\n    key,\n    hydrating = isHydrating();\n  if (!hydrating || !(node = sharedConfig.registry.get((key = getHydrationKey())))) {\n    if (hydrating) {\n      sharedConfig.done = true;\n      throw new Error(\n        `Hydration Mismatch. Unable to find DOM nodes for hydration key: ${key}\\n${\n          template ? template().outerHTML : \"\"\n        }`\n      );\n    }\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (isHydrating(start)) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"$\") count++;\n        else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const { completed, events } = sharedConfig;\n      if (!events) return;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        events.shift();\n        eventHandler(e);\n      }\n      if (sharedConfig.done) {\n        sharedConfig.events = _$HY.events = null;\n        sharedConfig.completed = _$HY.completed = null;\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction isHydrating(node) {\n  return !!sharedConfig.context && !sharedConfig.done && (!node || node.isConnected);\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++)\n    node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef, props) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev, typeof prev !== \"function\" && prev);\n    value && node.addEventListener(e, value, typeof value !== \"function\" && value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (prop.slice(0, 5) === \"bool:\") {\n    setBoolAttribute(node, prop.slice(5), value);\n  } else if (\n    (forceProp = prop.slice(0, 5) === \"prop:\") ||\n    (isChildProp = ChildProperties.has(prop)) ||\n    (!isSVG &&\n      ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop)))) ||\n    (isCE = node.nodeName.includes(\"-\") || \"is\" in props)\n  ) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (isHydrating(node)) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);\n    else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;\n    else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);\n    else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  if (sharedConfig.registry && sharedConfig.events) {\n    if (sharedConfig.events.find(([el, ev]) => ev === e)) return;\n  }\n  let node = e.target;\n  const key = `$$${e.type}`;\n  const oriTarget = e.target;\n  const oriCurrentTarget = e.currentTarget;\n  const retarget = value =>\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value\n    });\n  const handleNode = () => {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node.host &&\n      typeof node.host !== \"string\" &&\n      !node.host._$host &&\n      node.contains(e.target) &&\n      retarget(node.host);\n    return true;\n  };\n  const walkUpTree = () => {\n    while (handleNode() && (node = node._$host || node.parentNode || node.host));\n  };\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  if (e.composedPath) {\n    const path = e.composedPath();\n    retarget(path[0]);\n    for (let i = 0; i < path.length - 2; i++) {\n      node = path[i];\n      if (!handleNode()) break;\n      if (node._$host) {\n        node = node._$host;\n        walkUpTree();\n        break;\n      }\n      if (node.parentNode === oriCurrentTarget) {\n        break;\n      }\n    }\n  } else walkUpTree();\n  retarget(oriTarget);\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  const hydrating = isHydrating(parent);\n  if (hydrating) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();\n      else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = (multi && current[0] && current[0].parentNode) || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (hydrating) return current;\n    if (t === \"number\") {\n      value = value.toString();\n      if (value === current) return current;\n    }\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data !== value && (node.data = value);\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydrating) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => (current = insertExpression(parent, array, current, marker, true)));\n      return () => current;\n    }\n    if (hydrating) {\n      if (!array.length) return current;\n      if (marker === undefined) return (current = [...parent.childNodes]);\n      let node = array[0];\n      if (node.parentNode !== parent) return current;\n      const nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return (current = nodes);\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (hydrating && value.parentNode) return (current = multi ? [value] : value);\n    if (Array.isArray(current)) {\n      if (multi) return (current = cleanChildren(parent, current, marker, value));\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Unrecognized value. Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[normalized.length],\n      t;\n    if (item == null || item === true || item === false);\n    else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic =\n          normalizeIncomingArray(\n            normalized,\n            Array.isArray(item) ? item : [item],\n            Array.isArray(prev) ? prev : [prev]\n          ) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);\n      else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return (parent.textContent = \"\");\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i)\n          isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key))\n      sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  return sharedConfig.getNextContextId();\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nconst voidFn = () => undefined;\nconst RequestContext = Symbol();\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = true;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const { useShadow } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(\n    () => {\n      if (hydrating) getOwner().user = hydrating = false;\n      content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n      const el = mount();\n      if (el instanceof HTMLHeadElement) {\n        const [clean, setClean] = createSignal(false);\n        const cleanup = () => setClean(true);\n        createRoot(dispose => insert(el, () => (!clean() ? content() : dispose()), null));\n        onCleanup(cleanup);\n      } else {\n        const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n          renderRoot =\n            useShadow && container.attachShadow\n              ? container.attachShadow({\n                  mode: \"open\"\n                })\n              : container;\n        Object.defineProperty(container, \"_$host\", {\n          get() {\n            return marker.parentNode;\n          },\n          configurable: true\n        });\n        insert(renderRoot, content);\n        el.appendChild(container);\n        props.ref && props.ref(container);\n        onCleanup(() => el.removeChild(container));\n      }\n    },\n    undefined,\n    {\n      render: !hydrating\n    }\n  );\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        Object.assign(component, {\n          [$DEVCOMP]: true\n        });\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport {\n  Aliases,\n  voidFn as Assets,\n  ChildProperties,\n  DOMElements,\n  DelegatedEvents,\n  Dynamic,\n  Hydration,\n  voidFn as HydrationScript,\n  NoHydration,\n  Portal,\n  Properties,\n  RequestContext,\n  SVGElements,\n  SVGNamespace,\n  addEventListener,\n  assign,\n  classList,\n  className,\n  clearDelegatedEvents,\n  delegateEvents,\n  dynamicProperty,\n  escape,\n  voidFn as generateHydrationScript,\n  voidFn as getAssets,\n  getHydrationKey,\n  getNextElement,\n  getNextMarker,\n  getNextMatch,\n  getPropAlias,\n  voidFn as getRequestEvent,\n  hydrate,\n  innerHTML,\n  insert,\n  isDev,\n  isServer,\n  render,\n  renderToStream,\n  renderToString,\n  renderToStringAsync,\n  resolveSSRNode,\n  runHydrationEvents,\n  setAttribute,\n  setAttributeNS,\n  setBoolAttribute,\n  setProperty,\n  spread,\n  ssr,\n  ssrAttribute,\n  ssrClassList,\n  ssrElement,\n  ssrHydrationKey,\n  ssrSpread,\n  ssrStyle,\n  style,\n  template,\n  use,\n  voidFn as useAssets\n};\n","import { isServer } from \"solid-js/web\";\nexport function createBeforeLeave() {\n    let listeners = new Set();\n    function subscribe(listener) {\n        listeners.add(listener);\n        return () => listeners.delete(listener);\n    }\n    let ignore = false;\n    function confirm(to, options) {\n        if (ignore)\n            return !(ignore = false);\n        const e = {\n            to,\n            options,\n            defaultPrevented: false,\n            preventDefault: () => (e.defaultPrevented = true)\n        };\n        for (const l of listeners)\n            l.listener({\n                ...e,\n                from: l.location,\n                retry: (force) => {\n                    force && (ignore = true);\n                    l.navigate(to, { ...options, resolve: false });\n                }\n            });\n        return !e.defaultPrevented;\n    }\n    return {\n        subscribe,\n        confirm\n    };\n}\n// The following supports browser initiated blocking (eg back/forward)\nlet depth;\nexport function saveCurrentDepth() {\n    if (!window.history.state || window.history.state._depth == null) {\n        window.history.replaceState({ ...window.history.state, _depth: window.history.length - 1 }, \"\");\n    }\n    depth = window.history.state._depth;\n}\nif (!isServer) {\n    saveCurrentDepth();\n}\nexport function keepDepth(state) {\n    return {\n        ...state,\n        _depth: window.history.state && window.history.state._depth\n    };\n}\nexport function notifyIfNotBlocked(notify, block) {\n    let ignore = false;\n    return () => {\n        const prevDepth = depth;\n        saveCurrentDepth();\n        const delta = prevDepth == null ? null : depth - prevDepth;\n        if (ignore) {\n            ignore = false;\n            return;\n        }\n        if (delta && block(delta)) {\n            ignore = true;\n            window.history.go(-delta);\n        }\n        else {\n            notify();\n        }\n    };\n}\n","import { createMemo, getOwner, runWithOwner } from \"solid-js\";\nconst hasSchemeRegex = /^(?:[a-z0-9]+:)?\\/\\//i;\nconst trimPathRegex = /^\\/+|(\\/)\\/+$/g;\nexport const mockBase = \"http://sr\";\nexport function normalizePath(path, omitSlash = false) {\n    const s = path.replace(trimPathRegex, \"$1\");\n    return s ? (omitSlash || /^[?#]/.test(s) ? s : \"/\" + s) : \"\";\n}\nexport function resolvePath(base, path, from) {\n    if (hasSchemeRegex.test(path)) {\n        return undefined;\n    }\n    const basePath = normalizePath(base);\n    const fromPath = from && normalizePath(from);\n    let result = \"\";\n    if (!fromPath || path.startsWith(\"/\")) {\n        result = basePath;\n    }\n    else if (fromPath.toLowerCase().indexOf(basePath.toLowerCase()) !== 0) {\n        result = basePath + fromPath;\n    }\n    else {\n        result = fromPath;\n    }\n    return (result || \"/\") + normalizePath(path, !result);\n}\nexport function invariant(value, message) {\n    if (value == null) {\n        throw new Error(message);\n    }\n    return value;\n}\nexport function joinPaths(from, to) {\n    return normalizePath(from).replace(/\\/*(\\*.*)?$/g, \"\") + normalizePath(to);\n}\nexport function extractSearchParams(url) {\n    const params = {};\n    url.searchParams.forEach((value, key) => {\n        if (key in params) {\n            if (Array.isArray(params[key]))\n                params[key].push(value);\n            else\n                params[key] = [params[key], value];\n        }\n        else\n            params[key] = value;\n    });\n    return params;\n}\nexport function createMatcher(path, partial, matchFilters) {\n    const [pattern, splat] = path.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    const len = segments.length;\n    return (location) => {\n        const locSegments = location.split(\"/\").filter(Boolean);\n        const lenDiff = locSegments.length - len;\n        if (lenDiff < 0 || (lenDiff > 0 && splat === undefined && !partial)) {\n            return null;\n        }\n        const match = {\n            path: len ? \"\" : \"/\",\n            params: {}\n        };\n        const matchFilter = (s) => matchFilters === undefined ? undefined : matchFilters[s];\n        for (let i = 0; i < len; i++) {\n            const segment = segments[i];\n            const dynamic = segment[0] === \":\";\n            const locSegment = dynamic ? locSegments[i] : locSegments[i].toLowerCase();\n            const key = dynamic ? segment.slice(1) : segment.toLowerCase();\n            if (dynamic && matchSegment(locSegment, matchFilter(key))) {\n                match.params[key] = locSegment;\n            }\n            else if (dynamic || !matchSegment(locSegment, key)) {\n                return null;\n            }\n            match.path += `/${locSegment}`;\n        }\n        if (splat) {\n            const remainder = lenDiff ? locSegments.slice(-lenDiff).join(\"/\") : \"\";\n            if (matchSegment(remainder, matchFilter(splat))) {\n                match.params[splat] = remainder;\n            }\n            else {\n                return null;\n            }\n        }\n        return match;\n    };\n}\nfunction matchSegment(input, filter) {\n    const isEqual = (s) => s === input;\n    if (filter === undefined) {\n        return true;\n    }\n    else if (typeof filter === \"string\") {\n        return isEqual(filter);\n    }\n    else if (typeof filter === \"function\") {\n        return filter(input);\n    }\n    else if (Array.isArray(filter)) {\n        return filter.some(isEqual);\n    }\n    else if (filter instanceof RegExp) {\n        return filter.test(input);\n    }\n    return false;\n}\nexport function scoreRoute(route) {\n    const [pattern, splat] = route.pattern.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    return segments.reduce((score, segment) => score + (segment.startsWith(\":\") ? 2 : 3), segments.length - (splat === undefined ? 0 : 1));\n}\nexport function createMemoObject(fn) {\n    const map = new Map();\n    const owner = getOwner();\n    return new Proxy({}, {\n        get(_, property) {\n            if (!map.has(property)) {\n                runWithOwner(owner, () => map.set(property, createMemo(() => fn()[property])));\n            }\n            return map.get(property)();\n        },\n        getOwnPropertyDescriptor() {\n            return {\n                enumerable: true,\n                configurable: true\n            };\n        },\n        ownKeys() {\n            return Reflect.ownKeys(fn());\n        }\n    });\n}\nexport function mergeSearchString(search, params) {\n    const merged = new URLSearchParams(search);\n    Object.entries(params).forEach(([key, value]) => {\n        if (value == null || value === \"\" || (value instanceof Array && !value.length)) {\n            merged.delete(key);\n        }\n        else {\n            if (value instanceof Array) {\n                // Delete all instances of the key before appending\n                merged.delete(key);\n                value.forEach(v => {\n                    merged.append(key, String(v));\n                });\n            }\n            else {\n                merged.set(key, String(value));\n            }\n        }\n    });\n    const s = merged.toString();\n    return s ? `?${s}` : \"\";\n}\nexport function expandOptionals(pattern) {\n    let match = /(\\/?\\:[^\\/]+)\\?/.exec(pattern);\n    if (!match)\n        return [pattern];\n    let prefix = pattern.slice(0, match.index);\n    let suffix = pattern.slice(match.index + match[0].length);\n    const prefixes = [prefix, (prefix += match[1])];\n    // This section handles adjacent optional params. We don't actually want all permuations since\n    // that will lead to equivalent routes which have the same number of params. For example\n    // `/:a?/:b?/:c`? only has the unique expansion: `/`, `/:a`, `/:a/:b`, `/:a/:b/:c` and we can\n    // discard `/:b`, `/:c`, `/:b/:c` by building them up in order and not recursing. This also helps\n    // ensure predictability where earlier params have precidence.\n    while ((match = /^(\\/\\:[^\\/]+)\\?/.exec(suffix))) {\n        prefixes.push((prefix += match[1]));\n        suffix = suffix.slice(match[0].length);\n    }\n    return expandOptionals(suffix).reduce((results, expansion) => [...results, ...prefixes.map(p => p + expansion)], []);\n}\n","import { runWithOwner, batch } from \"solid-js\";\nimport { createComponent, createContext, createMemo, createRenderEffect, createSignal, on, onCleanup, untrack, useContext, startTransition, resetErrorBoundaries } from \"solid-js\";\nimport { isServer, getRequestEvent } from \"solid-js/web\";\nimport { createBeforeLeave } from \"./lifecycle.js\";\nimport { mockBase, createMemoObject, extractSearchParams, invariant, resolvePath, createMatcher, joinPaths, scoreRoute, mergeSearchString, expandOptionals } from \"./utils.js\";\nconst MAX_REDIRECTS = 100;\nexport const RouterContextObj = createContext();\nexport const RouteContextObj = createContext();\nexport const useRouter = () => invariant(useContext(RouterContextObj), \"<A> and 'use' router primitives can be only used inside a Route.\");\nlet TempRoute;\nexport const useRoute = () => TempRoute || useContext(RouteContextObj) || useRouter().base;\nexport const useResolvedPath = (path) => {\n    const route = useRoute();\n    return createMemo(() => route.resolvePath(path()));\n};\nexport const useHref = (to) => {\n    const router = useRouter();\n    return createMemo(() => {\n        const to_ = to();\n        return to_ !== undefined ? router.renderPath(to_) : to_;\n    });\n};\n/**\n * Retrieves method to do navigation. The method accepts a path to navigate to and an optional object with the following options:\n *\n * - resolve (*boolean*, default `true`): resolve the path against the current route\n * - replace (*boolean*, default `false`): replace the history entry\n * - scroll (*boolean*, default `true`): scroll to top after navigation\n * - state (*any*, default `undefined`): pass custom state to `location.state`\n *\n * **Note**: The state is serialized using the structured clone algorithm which does not support all object types.\n *\n * @example\n * ```js\n * const navigate = useNavigate();\n *\n * if (unauthorized) {\n *   navigate(\"/login\", { replace: true });\n * }\n * ```\n */\nexport const useNavigate = () => useRouter().navigatorFactory();\n/**\n * Retrieves reactive `location` object useful for getting things like `pathname`.\n *\n * @example\n * ```js\n * const location = useLocation();\n *\n * const pathname = createMemo(() => parsePath(location.pathname));\n * ```\n */\nexport const useLocation = () => useRouter().location;\n/**\n * Retrieves signal that indicates whether the route is currently in a *Transition*.\n * Useful for showing stale/pending state when the route resolution is *Suspended* during concurrent rendering.\n *\n * @example\n * ```js\n * const isRouting = useIsRouting();\n *\n * return (\n *   <div classList={{ \"grey-out\": isRouting() }}>\n *     <MyAwesomeContent />\n *   </div>\n * );\n * ```\n */\nexport const useIsRouting = () => useRouter().isRouting;\n/**\n * usePreloadRoute returns a function that can be used to preload a route manual.\n * This is what happens automatically with link hovering and similar focus based behavior, but it is available here as an API.\n *\n * @example\n * ```js\n * const preload = usePreloadRoute();\n *\n * preload(`/users/settings`, { preloadData: true });\n * ```\n */\nexport const usePreloadRoute = () => {\n    const pre = useRouter().preloadRoute;\n    return (url, options = {}) => pre(url instanceof URL ? url : new URL(url, mockBase), options.preloadData);\n};\n/**\n * `useMatch` takes an accessor that returns the path and creates a `Memo` that returns match information if the current path matches the provided path.\n * Useful for determining if a given path matches the current route.\n *\n * @example\n * ```js\n * const match = useMatch(() => props.href);\n *\n * return <div classList={{ active: Boolean(match()) }} />;\n * ```\n */\nexport const useMatch = (path, matchFilters) => {\n    const location = useLocation();\n    const matchers = createMemo(() => expandOptionals(path()).map(path => createMatcher(path, undefined, matchFilters)));\n    return createMemo(() => {\n        for (const matcher of matchers()) {\n            const match = matcher(location.pathname);\n            if (match)\n                return match;\n        }\n    });\n};\n/**\n * `useCurrentMatches` returns all the matches for the current matched route.\n * Useful for getting all the route information.\n *\n * @example\n * ```js\n * const matches = useCurrentMatches();\n *\n * const breadcrumbs = createMemo(() => matches().map(m => m.route.info.breadcrumb))\n * ```\n */\nexport const useCurrentMatches = () => useRouter().matches;\n/**\n * Retrieves a reactive, store-like object containing the current route path parameters as defined in the Route.\n *\n * @example\n * ```js\n * const params = useParams();\n *\n * // fetch user based on the id path parameter\n * const [user] = createResource(() => params.id, fetchUser);\n * ```\n */\nexport const useParams = () => useRouter().params;\n/**\n * Retrieves a tuple containing a reactive object to read the current location's query parameters and a method to update them.\n * The object is a proxy so you must access properties to subscribe to reactive updates.\n * **Note** that values will be strings and property names will retain their casing.\n *\n * The setter method accepts an object whose entries will be merged into the current query string.\n * Values `''`, `undefined` and `null` will remove the key from the resulting query string.\n * Updates will behave just like a navigation and the setter accepts the same optional second parameter as `navigate` and auto-scrolling is disabled by default.\n *\n * @examples\n * ```js\n * const [searchParams, setSearchParams] = useSearchParams();\n *\n * return (\n *   <div>\n *     <span>Page: {searchParams.page}</span>\n *     <button\n *       onClick={() =>\n *         setSearchParams({ page: (parseInt(searchParams.page) || 0) + 1 })\n *       }\n *     >\n *       Next Page\n *     </button>\n *   </div>\n * );\n * ```\n */\nexport const useSearchParams = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const setSearchParams = (params, options) => {\n        const searchString = untrack(() => mergeSearchString(location.search, params) + location.hash);\n        navigate(searchString, {\n            scroll: false,\n            resolve: false,\n            ...options\n        });\n    };\n    return [location.query, setSearchParams];\n};\n/**\n * useBeforeLeave takes a function that will be called prior to leaving a route.\n * The function will be called with:\n *\n * - from (*Location*): current location (before change).\n * - to (*string | number*): path passed to `navigate`.\n * - options (*NavigateOptions*): options passed to navigate.\n * - preventDefault (*function*): call to block the route change.\n * - defaultPrevented (*readonly boolean*): `true` if any previously called leave handlers called `preventDefault`.\n * - retry (*function*, force?: boolean ): call to retry the same navigation, perhaps after confirming with the user. Pass `true` to skip running the leave handlers again (i.e. force navigate without confirming).\n *\n * @example\n * ```js\n * useBeforeLeave((e: BeforeLeaveEventArgs) => {\n *   if (form.isDirty && !e.defaultPrevented) {\n *     // preventDefault to block immediately and prompt user async\n *     e.preventDefault();\n *     setTimeout(() => {\n *       if (window.confirm(\"Discard unsaved changes - are you sure?\")) {\n *         // user wants to proceed anyway so retry with force=true\n *         e.retry(true);\n *       }\n *     }, 100);\n *   }\n * });\n * ```\n */\nexport const useBeforeLeave = (listener) => {\n    const s = useRouter().beforeLeave.subscribe({\n        listener,\n        location: useLocation(),\n        navigate: useNavigate()\n    });\n    onCleanup(s);\n};\nexport function createRoutes(routeDef, base = \"\") {\n    const { component, preload, load, children, info } = routeDef;\n    const isLeaf = !children || (Array.isArray(children) && !children.length);\n    const shared = {\n        key: routeDef,\n        component,\n        preload: preload || load,\n        info\n    };\n    return asArray(routeDef.path).reduce((acc, originalPath) => {\n        for (const expandedPath of expandOptionals(originalPath)) {\n            const path = joinPaths(base, expandedPath);\n            let pattern = isLeaf ? path : path.split(\"/*\", 1)[0];\n            pattern = pattern\n                .split(\"/\")\n                .map((s) => {\n                return s.startsWith(\":\") || s.startsWith(\"*\") ? s : encodeURIComponent(s);\n            })\n                .join(\"/\");\n            acc.push({\n                ...shared,\n                originalPath,\n                pattern,\n                matcher: createMatcher(pattern, !isLeaf, routeDef.matchFilters)\n            });\n        }\n        return acc;\n    }, []);\n}\nexport function createBranch(routes, index = 0) {\n    return {\n        routes,\n        score: scoreRoute(routes[routes.length - 1]) * 10000 - index,\n        matcher(location) {\n            const matches = [];\n            for (let i = routes.length - 1; i >= 0; i--) {\n                const route = routes[i];\n                const match = route.matcher(location);\n                if (!match) {\n                    return null;\n                }\n                matches.unshift({\n                    ...match,\n                    route\n                });\n            }\n            return matches;\n        }\n    };\n}\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\nexport function createBranches(routeDef, base = \"\", stack = [], branches = []) {\n    const routeDefs = asArray(routeDef);\n    for (let i = 0, len = routeDefs.length; i < len; i++) {\n        const def = routeDefs[i];\n        if (def && typeof def === \"object\") {\n            if (!def.hasOwnProperty(\"path\"))\n                def.path = \"\";\n            const routes = createRoutes(def, base);\n            for (const route of routes) {\n                stack.push(route);\n                const isEmptyArray = Array.isArray(def.children) && def.children.length === 0;\n                if (def.children && !isEmptyArray) {\n                    createBranches(def.children, route.pattern, stack, branches);\n                }\n                else {\n                    const branch = createBranch([...stack], branches.length);\n                    branches.push(branch);\n                }\n                stack.pop();\n            }\n        }\n    }\n    // Stack will be empty on final return\n    return stack.length ? branches : branches.sort((a, b) => b.score - a.score);\n}\nexport function getRouteMatches(branches, location) {\n    for (let i = 0, len = branches.length; i < len; i++) {\n        const match = branches[i].matcher(location);\n        if (match) {\n            return match;\n        }\n    }\n    return [];\n}\nfunction createLocation(path, state, queryWrapper) {\n    const origin = new URL(mockBase);\n    const url = createMemo(prev => {\n        const path_ = path();\n        try {\n            return new URL(path_, origin);\n        }\n        catch (err) {\n            console.error(`Invalid path ${path_}`);\n            return prev;\n        }\n    }, origin, {\n        equals: (a, b) => a.href === b.href\n    });\n    const pathname = createMemo(() => url().pathname);\n    const search = createMemo(() => url().search, true);\n    const hash = createMemo(() => url().hash);\n    const key = () => \"\";\n    const queryFn = on(search, () => extractSearchParams(url()));\n    return {\n        get pathname() {\n            return pathname();\n        },\n        get search() {\n            return search();\n        },\n        get hash() {\n            return hash();\n        },\n        get state() {\n            return state();\n        },\n        get key() {\n            return key();\n        },\n        query: queryWrapper ? queryWrapper(queryFn) : createMemoObject(queryFn)\n    };\n}\nlet intent;\nexport function getIntent() {\n    return intent;\n}\nlet inPreloadFn = false;\nexport function getInPreloadFn() {\n    return inPreloadFn;\n}\nexport function setInPreloadFn(value) {\n    inPreloadFn = value;\n}\nexport function createRouterContext(integration, branches, getContext, options = {}) {\n    const { signal: [source, setSource], utils = {} } = integration;\n    const parsePath = utils.parsePath || (p => p);\n    const renderPath = utils.renderPath || (p => p);\n    const beforeLeave = utils.beforeLeave || createBeforeLeave();\n    const basePath = resolvePath(\"\", options.base || \"\");\n    if (basePath === undefined) {\n        throw new Error(`${basePath} is not a valid base path`);\n    }\n    else if (basePath && !source().value) {\n        setSource({ value: basePath, replace: true, scroll: false });\n    }\n    const [isRouting, setIsRouting] = createSignal(false);\n    // Keep track of last target, so that last call to transition wins\n    let lastTransitionTarget;\n    // Transition the location to a new value\n    const transition = (newIntent, newTarget) => {\n        if (newTarget.value === reference() && newTarget.state === state())\n            return;\n        if (lastTransitionTarget === undefined)\n            setIsRouting(true);\n        intent = newIntent;\n        lastTransitionTarget = newTarget;\n        startTransition(() => {\n            if (lastTransitionTarget !== newTarget)\n                return;\n            setReference(lastTransitionTarget.value);\n            setState(lastTransitionTarget.state);\n            resetErrorBoundaries();\n            if (!isServer)\n                submissions[1](subs => subs.filter(s => s.pending));\n        }).finally(() => {\n            if (lastTransitionTarget !== newTarget)\n                return;\n            // Batch, in order for isRouting and final source update to happen together\n            batch(() => {\n                intent = undefined;\n                if (newIntent === \"navigate\")\n                    navigateEnd(lastTransitionTarget);\n                setIsRouting(false);\n                lastTransitionTarget = undefined;\n            });\n        });\n    };\n    const [reference, setReference] = createSignal(source().value);\n    const [state, setState] = createSignal(source().state);\n    const location = createLocation(reference, state, utils.queryWrapper);\n    const referrers = [];\n    const submissions = createSignal(isServer ? initFromFlash() : []);\n    const matches = createMemo(() => {\n        if (typeof options.transformUrl === \"function\") {\n            return getRouteMatches(branches(), options.transformUrl(location.pathname));\n        }\n        return getRouteMatches(branches(), location.pathname);\n    });\n    const buildParams = () => {\n        const m = matches();\n        const params = {};\n        for (let i = 0; i < m.length; i++) {\n            Object.assign(params, m[i].params);\n        }\n        return params;\n    };\n    const params = utils.paramsWrapper\n        ? utils.paramsWrapper(buildParams, branches)\n        : createMemoObject(buildParams);\n    const baseRoute = {\n        pattern: basePath,\n        path: () => basePath,\n        outlet: () => null,\n        resolvePath(to) {\n            return resolvePath(basePath, to);\n        }\n    };\n    // Create a native transition, when source updates\n    createRenderEffect(on(source, source => transition(\"native\", source), { defer: true }));\n    return {\n        base: baseRoute,\n        location,\n        params,\n        isRouting,\n        renderPath,\n        parsePath,\n        navigatorFactory,\n        matches,\n        beforeLeave,\n        preloadRoute,\n        singleFlight: options.singleFlight === undefined ? true : options.singleFlight,\n        submissions\n    };\n    function navigateFromRoute(route, to, options) {\n        // Untrack in case someone navigates in an effect - don't want to track `reference` or route paths\n        untrack(() => {\n            if (typeof to === \"number\") {\n                if (!to) {\n                    // A delta of 0 means stay at the current location, so it is ignored\n                }\n                else if (utils.go) {\n                    utils.go(to);\n                }\n                else {\n                    console.warn(\"Router integration does not support relative routing\");\n                }\n                return;\n            }\n            const queryOnly = !to || to[0] === \"?\";\n            const { replace, resolve, scroll, state: nextState } = {\n                replace: false,\n                resolve: !queryOnly,\n                scroll: true,\n                ...options\n            };\n            const resolvedTo = resolve\n                ? route.resolvePath(to)\n                : resolvePath((queryOnly && location.pathname) || \"\", to);\n            if (resolvedTo === undefined) {\n                throw new Error(`Path '${to}' is not a routable path`);\n            }\n            else if (referrers.length >= MAX_REDIRECTS) {\n                throw new Error(\"Too many redirects\");\n            }\n            const current = reference();\n            if (resolvedTo !== current || nextState !== state()) {\n                if (isServer) {\n                    const e = getRequestEvent();\n                    e && (e.response = { status: 302, headers: new Headers({ Location: resolvedTo }) });\n                    setSource({ value: resolvedTo, replace, scroll, state: nextState });\n                }\n                else if (beforeLeave.confirm(resolvedTo, options)) {\n                    referrers.push({ value: current, replace, scroll, state: state() });\n                    transition(\"navigate\", {\n                        value: resolvedTo,\n                        state: nextState\n                    });\n                }\n            }\n        });\n    }\n    function navigatorFactory(route) {\n        // Workaround for vite issue (https://github.com/vitejs/vite/issues/3803)\n        route = route || useContext(RouteContextObj) || baseRoute;\n        return (to, options) => navigateFromRoute(route, to, options);\n    }\n    function navigateEnd(next) {\n        const first = referrers[0];\n        if (first) {\n            setSource({\n                ...next,\n                replace: first.replace,\n                scroll: first.scroll\n            });\n            referrers.length = 0;\n        }\n    }\n    function preloadRoute(url, preloadData) {\n        const matches = getRouteMatches(branches(), url.pathname);\n        const prevIntent = intent;\n        intent = \"preload\";\n        for (let match in matches) {\n            const { route, params } = matches[match];\n            route.component &&\n                route.component.preload &&\n                route.component.preload();\n            const { preload } = route;\n            inPreloadFn = true;\n            preloadData &&\n                preload &&\n                runWithOwner(getContext(), () => preload({\n                    params,\n                    location: {\n                        pathname: url.pathname,\n                        search: url.search,\n                        hash: url.hash,\n                        query: extractSearchParams(url),\n                        state: null,\n                        key: \"\"\n                    },\n                    intent: \"preload\"\n                }));\n            inPreloadFn = false;\n        }\n        intent = prevIntent;\n    }\n    function initFromFlash() {\n        const e = getRequestEvent();\n        return (e && e.router && e.router.submission ? [e.router.submission] : []);\n    }\n}\nexport function createRouteContext(router, parent, outlet, match) {\n    const { base, location, params } = router;\n    const { pattern, component, preload } = match().route;\n    const path = createMemo(() => match().path);\n    component &&\n        component.preload &&\n        component.preload();\n    inPreloadFn = true;\n    const data = preload ? preload({ params, location, intent: intent || \"initial\" }) : undefined;\n    inPreloadFn = false;\n    const route = {\n        parent,\n        pattern,\n        path,\n        outlet: () => component\n            ? createComponent(component, {\n                params,\n                location,\n                data,\n                get children() {\n                    return outlet();\n                }\n            })\n            : outlet(),\n        resolvePath(to) {\n            return resolvePath(base.path(), to, path());\n        }\n    };\n    return route;\n}\n","/*@refresh skip*/\nimport { getRequestEvent, isServer } from \"solid-js/web\";\nimport { children, createMemo, createRoot, getOwner, mergeProps, on, Show, untrack } from \"solid-js\";\nimport { createBranches, createRouteContext, createRouterContext, getIntent, getRouteMatches, RouteContextObj, RouterContextObj, setInPreloadFn } from \"../routing.js\";\nexport const createRouterComponent = (router) => (props) => {\n    const { base } = props;\n    const routeDefs = children(() => props.children);\n    const branches = createMemo(() => createBranches(routeDefs(), props.base || \"\"));\n    let context;\n    const routerState = createRouterContext(router, branches, () => context, {\n        base,\n        singleFlight: props.singleFlight,\n        transformUrl: props.transformUrl,\n    });\n    router.create && router.create(routerState);\n    return (<RouterContextObj.Provider value={routerState}>\n      <Root routerState={routerState} root={props.root} preload={props.rootPreload || props.rootLoad}>\n        {(context = getOwner()) && null}\n        <Routes routerState={routerState} branches={branches()}/>\n      </Root>\n    </RouterContextObj.Provider>);\n};\nfunction Root(props) {\n    const location = props.routerState.location;\n    const params = props.routerState.params;\n    const data = createMemo(() => props.preload &&\n        untrack(() => {\n            setInPreloadFn(true);\n            props.preload({ params, location, intent: getIntent() || \"initial\" });\n            setInPreloadFn(false);\n        }));\n    return (<Show when={props.root} keyed fallback={props.children}>\n      {Root => (<Root params={params} location={location} data={data()}>\n          {props.children}\n        </Root>)}\n    </Show>);\n}\nfunction Routes(props) {\n    if (isServer) {\n        const e = getRequestEvent();\n        if (e && e.router && e.router.dataOnly) {\n            dataOnly(e, props.routerState, props.branches);\n            return;\n        }\n        e &&\n            ((e.router || (e.router = {})).matches ||\n                (e.router.matches = props.routerState.matches().map(({ route, path, params }) => ({\n                    path: route.originalPath,\n                    pattern: route.pattern,\n                    match: path,\n                    params,\n                    info: route.info\n                }))));\n    }\n    const disposers = [];\n    let root;\n    const routeStates = createMemo(on(props.routerState.matches, (nextMatches, prevMatches, prev) => {\n        let equal = prevMatches && nextMatches.length === prevMatches.length;\n        const next = [];\n        for (let i = 0, len = nextMatches.length; i < len; i++) {\n            const prevMatch = prevMatches && prevMatches[i];\n            const nextMatch = nextMatches[i];\n            if (prev && prevMatch && nextMatch.route.key === prevMatch.route.key) {\n                next[i] = prev[i];\n            }\n            else {\n                equal = false;\n                if (disposers[i]) {\n                    disposers[i]();\n                }\n                createRoot(dispose => {\n                    disposers[i] = dispose;\n                    next[i] = createRouteContext(props.routerState, next[i - 1] || props.routerState.base, createOutlet(() => routeStates()[i + 1]), () => props.routerState.matches()[i]);\n                });\n            }\n        }\n        disposers.splice(nextMatches.length).forEach(dispose => dispose());\n        if (prev && equal) {\n            return prev;\n        }\n        root = next[0];\n        return next;\n    }));\n    return createOutlet(() => routeStates() && root)();\n}\nconst createOutlet = (child) => {\n    return () => (<Show when={child()} keyed>\n      {child => <RouteContextObj.Provider value={child}>{child.outlet()}</RouteContextObj.Provider>}\n    </Show>);\n};\nexport const Route = (props) => {\n    const childRoutes = children(() => props.children);\n    return mergeProps(props, {\n        get children() {\n            return childRoutes();\n        }\n    });\n};\n// for data only mode with single flight mutations\nfunction dataOnly(event, routerState, branches) {\n    const url = new URL(event.request.url);\n    const prevMatches = getRouteMatches(branches, new URL(event.router.previousUrl || event.request.url).pathname);\n    const matches = getRouteMatches(branches, url.pathname);\n    for (let match = 0; match < matches.length; match++) {\n        if (!prevMatches[match] || matches[match].route !== prevMatches[match].route)\n            event.router.dataOnly = true;\n        const { route, params } = matches[match];\n        route.preload &&\n            route.preload({\n                params,\n                location: routerState.location,\n                intent: \"preload\"\n            });\n    }\n}\n","import { createSignal, onCleanup, sharedConfig } from \"solid-js\";\nimport { createRouterComponent } from \"./components.jsx\";\nfunction intercept([value, setValue], get, set) {\n    return [get ? () => get(value()) : value, set ? (v) => setValue(set(v)) : setValue];\n}\nexport function createRouter(config) {\n    let ignore = false;\n    const wrap = (value) => (typeof value === \"string\" ? { value } : value);\n    const signal = intercept(createSignal(wrap(config.get()), {\n        equals: (a, b) => a.value === b.value && a.state === b.state\n    }), undefined, next => {\n        !ignore && config.set(next);\n        if (sharedConfig.registry && !sharedConfig.done)\n            sharedConfig.done = true;\n        return next;\n    });\n    config.init &&\n        onCleanup(config.init((value = config.get()) => {\n            ignore = true;\n            signal[1](wrap(value));\n            ignore = false;\n        }));\n    return createRouterComponent({\n        signal,\n        create: config.create,\n        utils: config.utils\n    });\n}\nexport function bindEvent(target, type, handler) {\n    target.addEventListener(type, handler);\n    return () => target.removeEventListener(type, handler);\n}\nexport function scrollToHash(hash, fallbackTop) {\n    const el = hash && document.getElementById(hash);\n    if (el) {\n        el.scrollIntoView();\n    }\n    else if (fallbackTop) {\n        window.scrollTo(0, 0);\n    }\n}\n","import {\r\n  type BaseRouterProps,\r\n  createRouter,\r\n  createBeforeLeave,\r\n  keepDepth,\r\n  notifyIfNotBlocked,\r\n  saveCurrentDepth,\r\n} from '@solidjs/router'\r\nimport type { JSX } from 'solid-js'\r\n\r\nexport function hashParser(str: string) {\r\n  const to = str.replace(/^.*?#/, '')\r\n  if (!to.startsWith('/')) {\r\n    const [, path = '/'] = window.location.hash.split('#', 2)\r\n    return `${path}#${to}`\r\n  }\r\n  return to\r\n}\r\n\r\nexport type HashRouterProps = BaseRouterProps & {\r\n  actionBase?: string\r\n  explicitLinks?: boolean\r\n  preload?: boolean\r\n}\r\n\r\nexport function bindEvent(\r\n  target: EventTarget,\r\n  type: string,\r\n  handler: EventListener\r\n) {\r\n  target.addEventListener(type, handler)\r\n  return () => target.removeEventListener(type, handler)\r\n}\r\n\r\nexport function HashRouter(props: HashRouterProps): JSX.Element {\r\n  const getSource = () => window.location.hash.slice(1)\r\n  const beforeLeave = createBeforeLeave()\r\n  return createRouter({\r\n    get: getSource,\r\n    set({ value, replace, state }) {\r\n      if (replace) {\r\n        window.history.replaceState(keepDepth(state), '', '#' + value)\r\n      } else {\r\n        window.history.pushState(state, '', '#' + value)\r\n      }\r\n      saveCurrentDepth()\r\n    },\r\n    init: (notify) =>\r\n      bindEvent(\r\n        window,\r\n        'hashchange',\r\n        notifyIfNotBlocked(\r\n          notify,\r\n          (delta) =>\r\n            !beforeLeave.confirm(delta && delta < 0 ? delta : getSource())\r\n        )\r\n      ),\r\n    utils: {\r\n      go: (delta) => window.history.go(delta),\r\n      renderPath: (path) => `#${path}`,\r\n      parsePath: hashParser,\r\n      beforeLeave,\r\n    },\r\n  })(props)\r\n}\r\n","import {\n  createEffect,\n  on,\n  createSignal,\n  onCleanup,\n  getOwner,\n  runWithOwner,\n} from 'solid-js';\nimport { Config } from '@lightningtv/core';\nimport type { ElementNode } from '@lightningtv/core';\nimport {\n  useFocusManager as useFocusManagerCore,\n  type KeyMap,\n  type KeyHoldOptions,\n} from '@lightningtv/core/focusManager';\nimport { activeElement, setActiveElement } from '../activeElement.js';\n\nconst [focusPath, setFocusPath] = createSignal<ElementNode[]>([]);\nexport { focusPath };\n\nexport const useFocusManager = (\n  userKeyMap?: Partial<KeyMap>,\n  keyHoldOptions?: KeyHoldOptions,\n) => {\n  const owner = getOwner();\n  const ownerContext = runWithOwner.bind(this, owner);\n  Config.setActiveElement = (activeElm) =>\n    ownerContext(() => setActiveElement(activeElm));\n\n  const { cleanup, focusPath: focusPathCore } = useFocusManagerCore({\n    userKeyMap,\n    keyHoldOptions,\n    ownerContext,\n  });\n\n  createEffect(\n    on(\n      activeElement,\n      () => {\n        setFocusPath([...focusPathCore()]);\n      },\n      { defer: true },\n    ),\n  );\n\n  onCleanup(cleanup);\n};\n","type CoreSpeechType = string | (() => SpeechType) | SpeechType[];\nexport type SpeechType = CoreSpeechType | Promise<CoreSpeechType>;\n\nexport interface SeriesResult {\n  series: Promise<void>;\n  readonly active: boolean;\n  append: (toSpeak: SpeechType) => void;\n  cancel: () => void;\n}\n\n/* global SpeechSynthesisErrorEvent */\nfunction flattenStrings(series: SpeechType[] = []): SpeechType[] {\n  const flattenedSeries = [];\n\n  let i;\n  for (i = 0; i < series.length; i++) {\n    const s = series[i];\n    if (typeof s === 'string' && !s.includes('PAUSE-')) {\n      flattenedSeries.push(series[i]);\n    } else {\n      break;\n    }\n  }\n  // add a \"word boundary\" to ensure the Announcer doesn't automatically try to\n  // interpret strings that look like dates but are not actually dates\n  // for example, if \"Rising Sun\" and \"1993\" are meant to be two separate lines,\n  // when read together, \"Sun 1993\" is interpretted as \"Sunday 1993\"\n  return ([flattenedSeries.join(',\\b ')] as SpeechType[]).concat(\n    series.slice(i),\n  );\n}\n\nfunction delay(pause: number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, pause);\n  });\n}\n\n/**\n * Speak a string\n *\n * @param phrase Phrase to speak\n * @param utterances An array which the new SpeechSynthesisUtterance instance representing this utterance will be appended\n * @param lang Language to speak in\n * @return {Promise<void>} Promise resolved when the utterance has finished speaking, and rejected if there's an error\n */\nfunction speak(\n  phrase: string,\n  utterances: SpeechSynthesisUtterance[],\n  lang = 'en-US',\n) {\n  const synth = window.speechSynthesis;\n  return new Promise<void>((resolve, reject) => {\n    const utterance = new SpeechSynthesisUtterance(phrase);\n    utterance.lang = lang;\n    utterance.onend = () => {\n      resolve();\n    };\n    utterance.onerror = (e) => {\n      reject(e);\n    };\n    utterances.push(utterance);\n    synth.speak(utterance);\n  });\n}\n\nfunction speakSeries(\n  series: SpeechType,\n  lang: string,\n  root = true,\n): SeriesResult {\n  const synth = window.speechSynthesis;\n  const remainingPhrases = flattenStrings(\n    Array.isArray(series) ? series : [series],\n  );\n  const nestedSeriesResults: SeriesResult[] = [];\n  /*\n    We hold this array of SpeechSynthesisUtterances in order to prevent them from being\n    garbage collected prematurely on STB hardware which can cause the 'onend' events of\n    utterances to not fire consistently.\n  */\n  const utterances: SpeechSynthesisUtterance[] = [];\n  let active: boolean = true;\n\n  const seriesChain = (async () => {\n    try {\n      while (active && remainingPhrases.length) {\n        const phrase = await Promise.resolve(remainingPhrases.shift());\n        if (!active) {\n          // Exit\n          // Need to check this after the await in case it was cancelled in between\n          break;\n        } else if (typeof phrase === 'string' && phrase.includes('PAUSE-')) {\n          // Pause it\n          let pause = Number(phrase.split('PAUSE-')[1]) * 1000;\n          if (isNaN(pause)) {\n            pause = 0;\n          }\n          await delay(pause);\n        } else if (typeof phrase === 'string' && phrase.length) {\n          // Speak it\n          const totalRetries = 3;\n          let retriesLeft = totalRetries;\n          while (active && retriesLeft > 0) {\n            try {\n              await speak(phrase, utterances, lang);\n              retriesLeft = 0;\n            } catch (e) {\n              if (e instanceof SpeechSynthesisErrorEvent) {\n                if (e.error === 'network') {\n                  retriesLeft--;\n                  console.warn(\n                    `Speech synthesis network error. Retries left: ${retriesLeft}`,\n                  );\n                  await delay(500 * (totalRetries - retriesLeft));\n                } else if (\n                  e.error === 'canceled' ||\n                  e.error === 'interrupted'\n                ) {\n                  // Cancel or interrupt error (ignore)\n                  retriesLeft = 0;\n                } else {\n                  throw new Error(`SpeechSynthesisErrorEvent: ${e.error}`);\n                }\n              } else {\n                throw e;\n              }\n            }\n          }\n        } else if (typeof phrase === 'function') {\n          const seriesResult = speakSeries(phrase(), lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        } else if (Array.isArray(phrase)) {\n          // Speak it (recursively)\n          const seriesResult = speakSeries(phrase, lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        }\n      }\n    } finally {\n      active = false;\n    }\n  })();\n  return {\n    series: seriesChain,\n    get active() {\n      return active;\n    },\n    append: (toSpeak: SpeechType) => {\n      remainingPhrases.push(toSpeak);\n    },\n    cancel: () => {\n      if (!active) {\n        return;\n      }\n      if (root) {\n        synth.cancel();\n      }\n      nestedSeriesResults.forEach((nestedSeriesResults) => {\n        nestedSeriesResults.cancel();\n      });\n      active = false;\n    },\n  };\n}\n\nlet currentSeries: SeriesResult | undefined;\nexport default function (toSpeak: SpeechType, lang: string = 'en-US') {\n  currentSeries && currentSeries.cancel();\n  currentSeries = speakSeries(toSpeak, lang);\n  return currentSeries;\n}\n","import { getOwner, onCleanup, createSignal, getListener } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/index.ts\nvar debounce = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let timeoutId;\n  const clear = () => clearTimeout(timeoutId);\n  if (getOwner()) onCleanup(clear);\n  const debounced = (...args) => {\n    if (timeoutId !== void 0) clear();\n    timeoutId = setTimeout(() => callback(...args), wait);\n  };\n  return Object.assign(debounced, { clear });\n};\nvar throttle = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let isThrottled = false, timeoutId, lastArgs;\n  const throttled = (...args) => {\n    lastArgs = args;\n    if (isThrottled) return;\n    isThrottled = true;\n    timeoutId = setTimeout(() => {\n      callback(...lastArgs);\n      isThrottled = false;\n    }, wait);\n  };\n  const clear = () => {\n    clearTimeout(timeoutId);\n    isThrottled = false;\n  };\n  if (getOwner()) onCleanup(clear);\n  return Object.assign(throttled, { clear });\n};\nvar scheduleIdle = isServer ? () => Object.assign(() => void 0, { clear: () => void 0 }) : (\n  // requestIdleCallback is not supported in Safari\n  typeof requestIdleCallback !== \"undefined\" ? (callback, maxWait) => {\n    let isDeferred = false, id, lastArgs;\n    const deferred = (...args) => {\n      lastArgs = args;\n      if (isDeferred) return;\n      isDeferred = true;\n      id = requestIdleCallback(\n        () => {\n          callback(...lastArgs);\n          isDeferred = false;\n        },\n        { timeout: maxWait }\n      );\n    };\n    const clear = () => {\n      cancelIdleCallback(id);\n      isDeferred = false;\n    };\n    if (getOwner()) onCleanup(clear);\n    return Object.assign(deferred, { clear });\n  } : (\n    // fallback to setTimeout (throttle)\n    (callback) => throttle(callback)\n  )\n);\nfunction leading(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called) return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let isScheduled = false;\n  const scheduled = schedule(() => isScheduled = false, wait);\n  const func = (...args) => {\n    if (!isScheduled) callback(...args);\n    isScheduled = true;\n    scheduled();\n  };\n  const clear = () => {\n    isScheduled = false;\n    scheduled.clear();\n  };\n  if (getOwner()) onCleanup(clear);\n  return Object.assign(func, { clear });\n}\nfunction leadingAndTrailing(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called) return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let State;\n  ((State2) => {\n    State2[State2[\"Ready\"] = 0] = \"Ready\";\n    State2[State2[\"Leading\"] = 1] = \"Leading\";\n    State2[State2[\"Trailing\"] = 2] = \"Trailing\";\n  })(State || (State = {}));\n  let state = 0 /* Ready */;\n  const scheduled = schedule((args) => {\n    state === 2 /* Trailing */ && callback(...args);\n    state = 0 /* Ready */;\n  }, wait);\n  const fn = (...args) => {\n    if (state !== 2 /* Trailing */) {\n      if (state === 0 /* Ready */) callback(...args);\n      state += 1;\n    }\n    scheduled(args);\n  };\n  const clear = () => {\n    state = 0 /* Ready */;\n    scheduled.clear();\n  };\n  if (getOwner()) onCleanup(clear);\n  return Object.assign(fn, { clear });\n}\nfunction createScheduled(schedule) {\n  let listeners = 0;\n  let isDirty = false;\n  const [track, dirty] = createSignal(void 0, { equals: false });\n  const call = schedule(() => {\n    isDirty = true;\n    dirty();\n  });\n  return () => {\n    if (!isDirty) call(), track();\n    if (isDirty) {\n      isDirty = !!listeners;\n      return true;\n    }\n    if (getListener()) {\n      listeners++;\n      onCleanup(() => listeners--);\n    }\n    return false;\n  };\n}\n\nexport { createScheduled, debounce, leading, leadingAndTrailing, scheduleIdle, throttle };\n","import type { ElementNode } from '@lightningtv/solid';\nimport { untrack } from 'solid-js';\nimport SpeechEngine, { type SeriesResult, type SpeechType } from './speech.js';\nimport { debounce } from '@solid-primitives/scheduled';\nimport { focusPath } from '../useFocusManager.js';\n\ntype DebounceWithFlushFunction<T> = {\n  (newValue: T): void;\n  flush(): void;\n  clear: VoidFunction;\n};\n\ndeclare module '@lightningtv/solid' {\n  /**\n   * Augment the existing ElementNode interface with our own\n   * Announcer-specific properties.\n   */\n  interface ElementNode {\n    announce?: SpeechType;\n    announceContext?: SpeechType;\n    title?: SpeechType;\n    loading?: boolean;\n  }\n}\n\nlet resetFocusPathTimer: DebounceWithFlushFunction<void>;\nlet prevFocusPath: ElementNode[] = [];\nlet currentlySpeaking: SeriesResult | undefined;\nlet voiceOutDisabled = false;\nconst fiveMinutes = 300000;\n\nfunction debounceWithFlush<T>(\n  callback: (newValue: T) => void,\n  time?: number,\n): DebounceWithFlushFunction<T> {\n  const trigger = debounce(callback, time);\n  let scopedValue: T;\n\n  const debounced = (newValue: T) => {\n    scopedValue = newValue;\n    trigger(newValue);\n  };\n\n  debounced.flush = () => {\n    trigger.clear();\n    callback(scopedValue);\n  };\n\n  debounced.clear = trigger.clear;\n\n  return debounced;\n}\n\nfunction getElmName(elm: ElementNode): string {\n  return (elm.id || elm.name) as string;\n}\n\nfunction onFocusChangeCore(focusPath: ElementNode[] = []) {\n  if (!Announcer.onFocusChange || !Announcer.enabled) {\n    return;\n  }\n\n  const loaded = focusPath.every((elm) => !elm.loading);\n  const focusDiff = focusPath.filter((elm) => !prevFocusPath.includes(elm));\n\n  resetFocusPathTimer();\n\n  if (!loaded && Announcer.onFocusChange) {\n    Announcer.onFocusChange([]);\n    return;\n  }\n\n  prevFocusPath = focusPath.slice(0);\n\n  const toAnnounceText: SpeechType[] = [];\n  const toAnnounce = focusDiff.reduce(\n    (acc: [string, string, SpeechType][], elm) => {\n      if (elm.announce) {\n        acc.push([getElmName(elm), 'Announce', elm.announce]);\n        toAnnounceText.push(elm.announce);\n      } else if (elm.title) {\n        acc.push([getElmName(elm), 'Title', elm.title]);\n        toAnnounceText.push(elm.title);\n      } else {\n        acc.push([getElmName(elm), 'No Announce', '']);\n      }\n      return acc;\n    },\n    [],\n  );\n\n  focusDiff.reverse().reduce((acc, elm) => {\n    if (elm.announceContext) {\n      acc.push([getElmName(elm), 'Context', elm.announceContext]);\n      toAnnounceText.push(elm.announceContext);\n    } else {\n      acc.push([getElmName(elm), 'No Context', '']);\n    }\n    return acc;\n  }, toAnnounce);\n\n  if (Announcer.debug) {\n    console.table(toAnnounce);\n  }\n\n  if (toAnnounceText.length) {\n    return Announcer.speak(\n      toAnnounceText.reduce((acc: SpeechType[], val) => acc.concat(val), []),\n    );\n  }\n}\n\nfunction textToSpeech(toSpeak: SpeechType, lang: string) {\n  if (voiceOutDisabled) {\n    return;\n  }\n\n  return (currentlySpeaking = SpeechEngine(toSpeak, lang));\n}\n\nexport interface Announcer {\n  debug: boolean;\n  enabled: boolean;\n  lang: string;\n  cancel: VoidFunction;\n  clearPrevFocus: (depth?: number) => void;\n  speak: (\n    text: SpeechType,\n    options?: { append?: boolean; notification?: boolean },\n  ) => SeriesResult;\n  setupTimers: (options?: {\n    focusDebounce?: number;\n    focusChangeTimeout?: number;\n  }) => void;\n  onFocusChange?: DebounceWithFlushFunction<ElementNode[]>;\n  refresh: (depth?: number) => void;\n}\n\nexport const Announcer: Announcer = {\n  debug: false,\n  enabled: true,\n  lang: 'en-US',\n  cancel: function () {\n    currentlySpeaking && currentlySpeaking.cancel();\n  },\n  clearPrevFocus: function (depth = 0) {\n    prevFocusPath = prevFocusPath.slice(0, depth);\n    resetFocusPathTimer();\n  },\n  speak: function (text, { append = false, notification = false} = {}) {\n    if (Announcer.onFocusChange && Announcer.enabled) {\n      Announcer.onFocusChange.flush();\n      if (append && currentlySpeaking && currentlySpeaking.active) {\n        currentlySpeaking.append(text);\n      } else {\n        Announcer.cancel();\n        textToSpeech(text, Announcer.lang);\n      }\n\n      if (notification) {\n        voiceOutDisabled = true;\n        currentlySpeaking?.series\n          .finally(() => {\n            voiceOutDisabled = false;\n            Announcer.refresh();\n          })\n          .catch(console.error);\n      }\n    }\n\n    return currentlySpeaking as SeriesResult;\n  },\n  refresh: function (depth = 0) {\n    Announcer.clearPrevFocus(depth);\n    Announcer.onFocusChange &&\n      Announcer.onFocusChange(untrack(() => focusPath()));\n  },\n  setupTimers: function ({\n    focusDebounce = 400,\n    focusChangeTimeout = fiveMinutes,\n  } = {}) {\n    Announcer.onFocusChange = debounceWithFlush(\n      onFocusChangeCore,\n      focusDebounce,\n    );\n\n    resetFocusPathTimer = debounceWithFlush(() => {\n      // Reset focus path for full announce\n      prevFocusPath = [];\n    }, focusChangeTimeout);\n  },\n};\n","import { createEffect, on } from 'solid-js';\nimport { Announcer } from './announcer.js';\nimport { focusPath } from '../useFocusManager.js';\n\nexport const useAnnouncer = () => {\n  Announcer.setupTimers();\n  createEffect(on(focusPath, Announcer.onFocusChange!, { defer: true }));\n\n  return Announcer;\n};\n","import {\n  Index,\n  createEffect,\n  createMemo,\n  createSignal,\n  splitProps,\n  type JSX,\n  type ValidComponent,\n} from 'solid-js';\nimport { Dynamic, type ElementNode } from '@lightningtv/solid';\n\nexport function LazyUp<T extends readonly any[], U extends JSX.Element>(\n  props: T &\n    ElementNode & {\n      each: T | undefined | null | false;\n      fallback?: JSX.Element;\n      container?: JSX.Element;\n      component?: ValidComponent;\n      direction?: 'row' | 'column';\n      upCount: number;\n      children: (item: T[number], index: number) => U;\n    },\n) {\n  const [p, others] = splitProps(props, [\n    'component',\n    'each',\n    'fallback',\n    'children',\n  ]);\n\n  const [offset, setOffset] = createSignal(0);\n\n  createEffect(() => {\n    setOffset(props.selected || 0);\n  });\n\n  const items = createMemo(() => {\n    if (p.each) {\n      return p.each.slice(0, props.upCount + offset());\n    }\n  });\n\n  const isRow = createMemo(() => {\n    return (\n      others.direction === 'row' ||\n      others.style?.flexDirection === 'row' ||\n      others.flexDirection === 'row'\n    );\n  });\n\n  const keyHandlers = createMemo(() => {\n    const updateOffset = () => {\n      setOffset(\n        (prev) => p.each && Math.min(prev + 1, p.each.length - props.upCount),\n      );\n    };\n\n    return isRow() ? { onRight: updateOffset } : { onDown: updateOffset };\n  });\n\n  return (\n    <Dynamic component={p.component} {...others} {...keyHandlers()}>\n      <Index each={items()} fallback={p.fallback} children={p.children} />\n    </Dynamic>\n  );\n}\n","import { ElementNode, assertTruthy, Config } from '@lightningtv/core';\nimport { type KeyHandler } from '@lightningtv/core/focusManager';\nimport type { NavigableElement, OnSelectedChanged } from '../types.js';\n\nexport function onGridFocus(this: ElementNode) {\n  if (!this || this.children.length === 0) return false;\n\n  this.selected = this.selected || 0;\n  let child = this.selected ? this.children[this.selected] : this.selectedNode;\n\n  while (child?.skipFocus) {\n    this.selected++;\n    child = this.children[this.selected];\n  }\n  if (!(child instanceof ElementNode)) return false;\n  child.setFocus();\n  return true;\n}\n\n// Converts params from onFocus to onSelectedChanged\nexport function handleOnSelect(onSelectedChanged: OnSelectedChanged) {\n  return function (this: NavigableElement) {\n    return onSelectedChanged.call(\n      this,\n      this.selected,\n      this,\n      this.children[this.selected] as ElementNode,\n    );\n  };\n}\n\nexport function handleNavigation(\n  direction: 'up' | 'right' | 'down' | 'left',\n): KeyHandler {\n  return function () {\n    const numChildren = this.children.length;\n    const wrap = this.wrap;\n    const lastSelected = this.selected || 0;\n\n    if (numChildren === 0) {\n      return false;\n    }\n\n    if (direction === 'right' || direction === 'down') {\n      do {\n        this.selected = ((this.selected || 0) % numChildren) + 1;\n        if (this.selected >= numChildren) {\n          if (!wrap) {\n            this.selected = -1;\n            break;\n          }\n          this.selected = 0;\n        }\n      } while (this.children[this.selected]?.skipFocus);\n    } else if (direction === 'left' || direction === 'up') {\n      do {\n        this.selected = ((this.selected || 0) % numChildren) - 1;\n        if (this.selected < 0) {\n          if (!wrap) {\n            this.selected = -1;\n            break;\n          }\n          this.selected = numChildren - 1;\n        }\n      } while (this.children[this.selected]?.skipFocus);\n    }\n\n    if (this.selected === -1) {\n      this.selected = lastSelected;\n      if (\n        this.children[this.selected]?.states!.has(\n          Config.focusStateKey || '$focus',\n        )\n      ) {\n        // This child is already focused, so bubble up to next handler\n        return false;\n      }\n    }\n    const active = this.children[this.selected || 0];\n    assertTruthy(active instanceof ElementNode);\n    const navigableThis = this as NavigableElement;\n\n    navigableThis.onSelectedChanged &&\n      navigableThis.onSelectedChanged.call(\n        navigableThis,\n        navigableThis.selected,\n        navigableThis,\n        active,\n        lastSelected,\n      );\n\n    if (this.plinko) {\n      // Set the next item to have the same selected index\n      // so we move up / down directly\n      const lastSelectedChild = this.children[lastSelected];\n      assertTruthy(lastSelectedChild instanceof ElementNode);\n      const num = lastSelectedChild.selected || 0;\n      active.selected =\n        num < active.children.length ? num : active.children.length - 1;\n    }\n    active.setFocus();\n    return true;\n  };\n}\n","import type {\n  ElementNode,\n  ElementText,\n  INode,\n  Styles,\n} from '@lightningtv/core';\n\n// Adds properties expected by withScrolling\nexport interface ScrollableElement extends ElementNode {\n  scrollIndex?: number;\n  selected: number;\n  offset?: number;\n  endOffset?: number;\n  _targetPosition?: number;\n  _screenOffset?: number;\n}\n\n// From the renderer, not exported\nconst InViewPort = 8;\nconst isNotShown = (node: ElementNode | ElementText) => {\n  return node.lng.renderState !== InViewPort;\n};\n/*\n  Auto Scrolling starts scrolling right away until the last item is shown. Keeping a full view of the list.\n  Edge starts scrolling when it reaches the edge of the viewport.\n  Always scroll moves the list every time\n*/\n\nexport function withScrolling(isRow: boolean) {\n  const dimension = isRow ? 'width' : 'height';\n  const axis = isRow ? 'x' : 'y';\n\n  return (\n    selected: number | ElementNode,\n    component?: ElementNode,\n    selectedElement?: ElementNode | ElementText,\n    lastSelected?: number,\n  ) => {\n    let componentRef = component as ScrollableElement;\n    if (typeof selected !== 'number') {\n      componentRef = selected as ScrollableElement;\n      selected = componentRef.selected || 0;\n    }\n    if (\n      !componentRef ||\n      componentRef.scroll === 'none' ||\n      !componentRef.children.length\n    )\n      return;\n\n    const lng = componentRef.lng as INode;\n    const screenSize = isRow ? lng.stage.root.width : lng.stage.root.height;\n    // Determine if movement is incremental or decremental\n    const isIncrementing =\n      lastSelected === undefined || lastSelected - 1 !== selected;\n\n    if (componentRef._screenOffset === undefined) {\n      if (componentRef.parent!.clipping) {\n        const p = componentRef.parent!;\n        componentRef.endOffset =\n          screenSize - ((isRow ? p.absX : p.absY) || 0) - p[dimension];\n      }\n\n      componentRef._screenOffset =\n        componentRef.offset ??\n        (isRow ? lng.absX : lng.absY) - componentRef[axis];\n    }\n\n    const screenOffset = componentRef._screenOffset;\n    const gap = componentRef.gap || 0;\n    const scroll = componentRef.scroll || 'auto';\n\n    // Allows manual position control\n    const targetPosition = componentRef._targetPosition ?? componentRef[axis];\n    const rootPosition = isIncrementing\n      ? Math.min(targetPosition, componentRef[axis])\n      : Math.max(targetPosition, componentRef[axis]);\n    componentRef.offset = componentRef.offset ?? rootPosition;\n    const offset = componentRef.offset;\n    selectedElement =\n      selectedElement || (componentRef.children[selected] as ElementNode);\n    const selectedPosition = selectedElement[axis] ?? 0;\n    const selectedSize = selectedElement[dimension] ?? 0;\n    const selectedScale =\n      selectedElement.scale ??\n      (selectedElement.style?.focus as Styles)?.scale ??\n      1;\n    const selectedSizeScaled = selectedSize * selectedScale;\n    const containerSize = componentRef[dimension] ?? 0;\n    const maxOffset = Math.min(\n      screenSize -\n        containerSize -\n        screenOffset -\n        (componentRef.endOffset || 2 * gap),\n      offset,\n    );\n\n    // Determine the next element based on whether incrementing or decrementing\n    const nextIndex = isIncrementing ? selected + 1 : selected - 1;\n    const nextElement = componentRef.children[nextIndex] || null;\n\n    // Default nextPosition to align with the selected position and offset\n    let nextPosition = rootPosition;\n\n    // Update nextPosition based on scroll type and specific conditions\n    if (selectedElement.centerScroll) {\n      nextPosition = -selectedPosition + (screenSize - selectedSizeScaled) / 2;\n    } else if (scroll === 'always') {\n      nextPosition = -selectedPosition + offset;\n    } else if (scroll === 'center') {\n      nextPosition =\n        -selectedPosition +\n        (screenSize - selectedSizeScaled) / 2 -\n        screenOffset;\n    } else if (!nextElement) {\n      // If at the last element, align to end\n      nextPosition = isIncrementing ? maxOffset : offset;\n    } else if (scroll === 'auto') {\n      if (componentRef.scrollIndex && componentRef.scrollIndex > 0) {\n        // Prevent scrolling if the selected item is within the last scrollIndex items\n        const totalItems = componentRef.children.length;\n        const nearEndIndex = totalItems - componentRef.scrollIndex;\n\n        if (\n          isIncrementing &&\n          componentRef.selected >= componentRef.scrollIndex\n        ) {\n          nextPosition = rootPosition - selectedSize - gap;\n        } else if (!isIncrementing && componentRef.selected < nearEndIndex) {\n          nextPosition = rootPosition + selectedSize + gap;\n        }\n      } else if (isIncrementing) {\n        nextPosition = -selectedPosition + offset;\n      } else {\n        nextPosition = rootPosition + selectedSize + gap;\n      }\n    } // Handle Edge scrolling\n    else if (isIncrementing && isNotShown(nextElement)) {\n      nextPosition = rootPosition - selectedSize - gap;\n    } else if (isNotShown(nextElement)) {\n      nextPosition = -selectedPosition + offset;\n    }\n\n    // Prevent container from moving beyond bounds\n    nextPosition =\n      isIncrementing && scroll !== 'always'\n        ? Math.max(nextPosition, maxOffset)\n        : Math.min(nextPosition, offset);\n\n    // Update position if it has changed\n    if (componentRef[axis] !== nextPosition) {\n      componentRef[axis] = nextPosition;\n      // Store the new position to keep track during animations\n      componentRef._targetPosition = nextPosition;\n    }\n  };\n}\n","type ChainableFunction = (...args: unknown[]) => unknown;\n\nexport function chainFunctions(...args: ChainableFunction[]): ChainableFunction;\nexport function chainFunctions<T>(...args: (ChainableFunction | T)[]): T;\n\n// take an array of functions and if you return true from a function, it will stop the chain\nexport function chainFunctions<T extends ChainableFunction>(\n  ...args: (ChainableFunction | T)[]\n) {\n  const onlyFunctions = args.filter((func) => typeof func === 'function');\n  if (onlyFunctions.length === 0) {\n    return undefined;\n  }\n\n  if (onlyFunctions.length === 1) {\n    return onlyFunctions[0];\n  }\n\n  return function (this: unknown | T, ...innerArgs: unknown[]) {\n    let result;\n    for (const func of onlyFunctions) {\n      result = func.apply(this, innerArgs);\n      if (result === true) {\n        return result;\n      }\n    }\n    return result;\n  };\n}\n","import { type Component } from 'solid-js';\nimport { View, combineStyles, type NodeStyles } from '@lightningtv/solid';\nimport {\n  handleNavigation,\n  onGridFocus,\n  handleOnSelect,\n} from './utils/handleNavigation.js';\nimport { withScrolling } from './utils/withScrolling.js';\nimport { chainFunctions } from './utils/chainFunctions.js';\nimport type { ColumnProps } from './types.js';\n\nconst ColumnStyles: NodeStyles = {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: 30,\n  transition: {\n    y: {\n      duration: 250,\n      easing: 'ease-in-out',\n    },\n  },\n};\n\nconst onUp = handleNavigation('up');\nconst onDown = handleNavigation('down');\nconst scroll = withScrolling(false);\nexport const Column: Component<ColumnProps> = (props) => {\n  return (\n    <View\n      {...props}\n      onUp={/* @once */ chainFunctions(props.onUp, onUp)}\n      onDown={/* @once */ chainFunctions(props.onDown, onDown)}\n      selected={props.selected || 0}\n      forwardFocus={onGridFocus}\n      onFocus={\n        /* @once */ chainFunctions(\n          props.onFocus,\n          props.onSelectedChanged && handleOnSelect(props.onSelectedChanged),\n        )\n      }\n      onLayout={\n        /* @once */\n        props.selected ? chainFunctions(props.onLayout, scroll) : props.onLayout\n      }\n      onSelectedChanged={\n        /* @once */ chainFunctions(\n          props.onSelectedChanged,\n          props.scroll !== 'none' ? scroll : undefined,\n        )\n      }\n      style={/* @once */ combineStyles(props.style, ColumnStyles)}\n    />\n  );\n};\n","import { type Component } from 'solid-js';\nimport { combineStyles, type NodeStyles, View } from '@lightningtv/solid';\nimport { chainFunctions } from './utils/chainFunctions.js';\nimport {\n  handleNavigation,\n  handleOnSelect,\n  onGridFocus,\n} from './utils/handleNavigation.js';\nimport { withScrolling } from './utils/withScrolling.js';\nimport type { RowProps } from './types.js';\n\nconst RowStyles: NodeStyles = {\n  display: 'flex',\n  gap: 30,\n  transition: {\n    x: {\n      duration: 250,\n      easing: 'ease-in-out',\n    },\n  },\n};\n\nconst onLeft = handleNavigation('left');\nconst onRight = handleNavigation('right');\nconst scroll = withScrolling(true);\n\nexport const Row: Component<RowProps> = (props) => {\n  return (\n    <View\n      {...props}\n      selected={props.selected || 0}\n      onLeft={/* @once */ chainFunctions(props.onLeft, onLeft)}\n      onRight={/* @once */ chainFunctions(props.onRight, onRight)}\n      onFocus={\n        /* @once */ chainFunctions(\n          props.onFocus,\n          props.onSelectedChanged && handleOnSelect(props.onSelectedChanged),\n        )\n      }\n      forwardFocus={onGridFocus}\n      onLayout={\n        /* @once */\n        props.selected ? chainFunctions(props.onLayout, scroll) : props.onLayout\n      }\n      onSelectedChanged={\n        /* @once */ chainFunctions(\n          props.onSelectedChanged,\n          props.scroll !== 'none' ? scroll : undefined,\n        )\n      }\n      style={/* @once */ combineStyles(props.style, RowStyles)}\n    />\n  );\n};\n","import { renderer, type TextureMap } from '@lightningtv/core';\n\nexport interface SpriteDef {\n  name: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport function createSpriteMap(\n  src: string,\n  subTextures: SpriteDef[],\n): Record<string, InstanceType<TextureMap['SubTexture']>> {\n  const spriteMapTexture = renderer.createTexture('ImageTexture', {\n    src,\n  });\n\n  return subTextures.reduce<\n    Record<string, InstanceType<TextureMap['SubTexture']>>\n  >((acc, t) => {\n    const { x, y, width, height } = t;\n    acc[t.name] = renderer.createTexture('SubTexture', {\n      texture: spriteMapTexture,\n      x,\n      y,\n      width,\n      height,\n    });\n    return acc;\n  }, {});\n}\n","import { createSignal } from 'solid-js'\r\nexport const [globalBackground, setGlobalBackground] = createSignal<string>('')\r\n","export default {\n  name: 'Base Lightning TV',\n  alpha: {\n    primary: 1,\n    secondary: 0.7,\n    tertiary: 0.1,\n    inactive: 0.5,\n    full: 1,\n    none: 0,\n    alpha1: 0.1,\n    alpha2: 0.3,\n    alpha3: 0.5,\n    alpha4: 0.7,\n    alpha5: 0.9,\n    alpha6: 0.95\n  },\n  animation: {\n    duration: {\n      none: 0,\n      xfast: 100,\n      fast: 250,\n      normal: 500,\n      slow: 750,\n      xslow: 900\n    },\n    delay: { none: 0, xfast: 10, fast: 25, normal: 50, slow: 75, xslow: 90 },\n    expressive: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standard: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utility: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    }\n  },\n  asset: {\n    arrowLeft:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==',\n    arrowRight:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=',\n    backspaceOutline:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC',\n    check:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=='\n  },\n  color: {\n    palette: {},\n    white: '0xffffffff',\n    black: '0x000000ff',\n    grey: '0x929096ff',\n    red: '0xe74c3cff',\n    orange: '0xdc7633ff',\n    yellow: '0xf7dc6fff',\n    green: '0x2ecc71ff',\n    blue: '0x93a9fdff',\n    purple: '0x663399ff',\n    overlay: '0x181819b3',\n    material: '0x181819ff',\n    materialNeutral: '0x181819ff',\n    materialNeutralElevated: '0x373639ff',\n    materialInverse: '0xf8f7faff',\n    materialInverseElevated: '0xffffffff',\n    materialBrand: '0x000033ff',\n    materialBrandElevated: '0x242a65ff',\n    textNeutral: '0xf8f7faff',\n    textNeutralSecondary: '0xf8f7fab3',\n    textNeutralTertiary: '0xf8f7fa1a',\n    textNeutralDisabled: '0xf8f7fa80',\n    textInverse: '0x181819ff',\n    textInverseSecondary: '0x181819b3',\n    textInverseTertiary: '0x1818191a',\n    textInverseDisabled: '0x18181980',\n    textBrand: '0x93a9fdff',\n    textBrandSecondary: '0x93a9fdb3',\n    textBrandTertiary: '0x93a9fd1a',\n    textBrandDisabled: '0x93a9fd80',\n    textPositive: '0x2ecc71ff',\n    textNegative: '0xe74c3cff',\n    textInfo: '0x93a9fdff',\n    textCaution: '0xdc7633ff',\n    fillTransparent: '0xffffff0',\n    fillNeutral: '0xf8f7faff',\n    fillNeutralSecondary: '0xf8f7fab3',\n    fillNeutralTertiary: '0xf8f7fa1a',\n    fillNeutralDisabled: '0xf8f7fa80',\n    fillInverse: '0x181819ff',\n    fillInverseSecondary: '0x181819b3',\n    fillInverseTertiary: '0x1818191a',\n    fillInverseDisabled: '0x18181980',\n    fillBrand: '0x93a9fdff',\n    fillBrandSecondary: '0x93a9fdb3',\n    fillBrandTertiary: '0x93a9fd1a',\n    fillBrandDisabled: '0x93a9fd80',\n    fillPositive: '0x2ecc71ff',\n    fillNegative: '0xe74c3cff',\n    fillInfo: '0x93a9fdff',\n    fillCaution: '0xdc7633ff',\n    strokeNeutral: '0xf8f7faff',\n    strokeNeutralSecondary: '0xf8f7fab3',\n    strokeNeutralTertiary: '0xf8f7fa1a',\n    strokeNeutralDisabled: '0xf8f7fa80',\n    strokeInverse: '0x181819ff',\n    strokeInverseSecondary: '0x181819b3',\n    strokeInverseTertiary: '0x1818191a',\n    strokeInverseDisabled: '0x18181980',\n    strokeBrand: '0x93a9fdff',\n    strokeBrandSecondary: '0x93a9fdb3',\n    strokeBrandTertiary: '0x93a9fd1a',\n    strokeBrandDisabled: '0x93a9fd80',\n    strokePositive: '0x2ecc71ff',\n    strokeNegative: '0xe74c3cff',\n    strokeInfo: '0x93a9fdff',\n    strokeCaution: '0xdc7633ff',\n    interactiveNeutral: '0xffffff1a',\n    interactiveNeutralFocus: '0xffffffff',\n    interactiveNeutralFocusSoft: '0xffffff1a',\n    interactiveInverse: '0x48474b1a',\n    interactiveInverseFocus: '0x48474bff',\n    interactiveInverseFocusSoft: '0x48474b1a',\n    interactiveBrand: '0xbecffe1a',\n    interactiveBrandFocus: '0xbecffeff',\n    interactiveBrandFocusSoft: '0xbecffe1a',\n    shadowNeutral: '0x000000b3',\n    shadowNeutralFocus: '0x000000b3',\n    shadowNeutralFocusSoft: '0x000000b3',\n    shadowNeutralText: '0x000000ff',\n    shadowInverse: '0x000000b3',\n    shadowInverseFocus: '0x000000b3',\n    shadowInverseFocusSoft: '0x000000b3',\n    shadowInverseText: '0x000000ff',\n    shadowBrand: '0x000000b3',\n    shadowBrandFocus: '0x000000b3',\n    shadowBrandFocusSoft: '0x000000b3',\n    shadowBrandText: '0x000000ff'\n  },\n  font: [],\n  layout: {\n    columnCount: 10,\n    focusScale: 1.2,\n    gutterX: 20,\n    gutterY: 20,\n    marginX: 150,\n    marginY: 150,\n    safe: 50,\n    screenW: 1920,\n    screenH: 1080\n  },\n  radius: { none: 0, xs: 2, sm: 4, md: 8, lg: 16, xl: 24 },\n  spacer: {\n    none: 0,\n    xxs: 2,\n    xs: 4,\n    sm: 8,\n    md: 10,\n    lg: 20,\n    xl: 30,\n    xxl: 40,\n    xxxl: 50\n  },\n  stroke: { none: 0, sm: 2, md: 4, lg: 6, xl: 8 },\n  typography: {\n    display1: {\n      fontFamily: 'Arial',\n      fontSize: 75,\n      lineHeight: 85,\n      fontWeight: 500,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    display2: {\n      fontFamily: 'Arial',\n      fontSize: 50,\n      lineHeight: 60,\n      fontWeight: 500,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    display3: {\n      fontFamily: 'Arial',\n      fontSize: 56,\n      fontWeight: 400,\n      lineHeight: 68,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    display4: {\n      fontFamily: 'Arial',\n      fontSize: 48,\n      fontWeight: 400,\n      lineHeight: 64,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline1: {\n      fontFamily: 'Arial',\n      fontSize: 35,\n      fontWeight: 500,\n      lineHeight: 48,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline2: {\n      fontFamily: 'Arial',\n      fontSize: 30,\n      fontWeight: 500,\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline3: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontWeight: 500,\n      lineHeight: 36,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontWeight: 300,\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body2: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontWeight: 300,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body3: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontWeight: 300,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontWeight: 500,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button2: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontWeight: 500,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    callout1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontWeight: 500,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    caption1: {\n      fontFamily: 'Arial',\n      fontSize: 15,\n      fontWeight: 500,\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    tag1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontWeight: 500,\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    footnote1: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontWeight: 300,\n      lineHeight: 30,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    subtitle1: {\n      fontFamily: 'Arial',\n      fontSize: 32,\n      fontWeight: 400,\n      lineHeight: 36,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    subtitle2: {\n      fontFamily: 'Arial',\n      fontSize: 28,\n      fontWeight: 500,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    navigation: {\n      fontFamily: 'Arial',\n      fontSize: 28,\n      fontWeight: 400,\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    }\n  },\n  componentConfig: {\n    Keyboard: {\n      base: {\n        keyProps: {\n          delete: {\n            title: null,\n            icon: 'data:image/png;base64,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'\n          }\n        }\n      }\n    }\n  }\n};\n","import { globalBackground } from '../state.js'\r\nimport {\r\n  type IntrinsicNodeStyleProps,\r\n  type AnimationSettings,\r\n  View,\r\n  hexColor,\r\n} from '@lightningtv/solid'\r\nimport { createEffect, on, onMount } from 'solid-js'\r\nimport theme from 'theme'\r\n\r\nexport default function Background() {\r\n  const params = new URLSearchParams(window.location.search)\r\n  const disableBG = params.get('disableBG') === 'true'\r\n\r\n  let bg1, bg2, heroMask\r\n  let active = 0\r\n  const alpha = 1\r\n  const animationSettings = {\r\n    duration: 550,\r\n    easing: 'ease-in-out',\r\n  } satisfies Partial<AnimationSettings>\r\n  const bgStyles = {\r\n    alpha,\r\n    color: 0xffffffff,\r\n  } satisfies IntrinsicNodeStyleProps\r\n\r\n  onMount(() => {\r\n    if (disableBG) {\r\n      heroMask.src = ''\r\n      heroMask.colorLeft = '#000000'\r\n      heroMask.colorRight = '#00000000'\r\n      return\r\n    }\r\n  })\r\n\r\n  function changeBackgrounds(img: string | number) {\r\n    if (disableBG) {\r\n      heroMask.src = ''\r\n      heroMask.colorLeft = '#000000'\r\n      heroMask.colorRight = '#00000000'\r\n      return\r\n    }\r\n\r\n    if (typeof img !== 'string') {\r\n      bg1.color = img\r\n      bg1.src = ''\r\n      bg1.alpha = 1\r\n      active = 1\r\n      bg2.alpha = 0\r\n      heroMask.alpha = 0\r\n      return\r\n    } else {\r\n      bg1.color = 0xffffffff\r\n      heroMask.alpha = 1\r\n    }\r\n\r\n    const currentBg = active === 1 ? bg2 : bg1\r\n    const nextBg = active === 1 ? bg1 : bg2\r\n\r\n    currentBg.src = img\r\n    if (active === 0) {\r\n      currentBg.alpha = 1\r\n    } else {\r\n      currentBg.alpha = 0.01\r\n      currentBg.animate({ alpha: 1 }, animationSettings).start()\r\n    }\r\n\r\n    nextBg.animate({ alpha: 0.01 }, animationSettings).start()\r\n    active = active === 1 ? 2 : 1\r\n  }\r\n\r\n  createEffect(\r\n    on(\r\n      globalBackground,\r\n      (img: string | number) => {\r\n        changeBackgrounds(img)\r\n      },\r\n      { defer: true }\r\n    )\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <View width={1920} height={1080} zIndex={-5}>\r\n        <View ref={bg1} style={bgStyles} />\r\n        <View ref={bg2} style={bgStyles} alpha={0} />\r\n        <View\r\n          ref={heroMask}\r\n          src='./assets/hero-mask-inverted.png'\r\n          color={hexColor(theme.color.materialBrand)}\r\n          width={1920}\r\n          height={1080}\r\n        />\r\n      </View>\r\n    </>\r\n  )\r\n}\r\n","import { IntrinsicNodeStyleProps } from \"@lightningtv/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n  Column: {\r\n    flexDirection: \"column\",\r\n    display: \"flex\",\r\n    width: 140,\r\n    height: 600,\r\n    y: 360,\r\n    gap: 20,\r\n    zIndex: 101,\r\n    transition: {\r\n      x: {\r\n        duration: 250,\r\n        easing: \"ease-in-out\",\r\n      },\r\n    },\r\n    x: 8,\r\n    $focus: {\r\n      width: 500,\r\n      x: theme.layout.marginX,\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Gradient: {\r\n    zIndex: 99,\r\n    color: \"#000000\",\r\n    src: \"./assets/sidenav.png\",\r\n    alpha: 0,\r\n    width: 200,\r\n    height: 1080,\r\n    $focus: {\r\n      alpha: 1,\r\n      width: 1600,\r\n    },\r\n    transition: { alpha: true, width: true },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  NavButton: {\r\n    zIndex: 102,\r\n    height: 70,\r\n    width: 100,\r\n    borderRadius: 8,\r\n    color: 0,\r\n    $focus: {\r\n      color: \"#424242\",\r\n    },\r\n    $active: {\r\n      width: 328,\r\n      height: 70,\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { For, IntrinsicNodeProps, View } from '@lightningtv/solid'\r\nimport { createSpriteMap } from '@lightningtv/solid/primitives'\r\n\r\nconst basePath = import.meta.env.BASE_URL\r\n\r\nconst icons = [\r\n  { name: 'home', width: 100, height: 56, x: 81, y: 0 },\r\n  { name: 'series', width: 100, height: 68, x: 181, y: 0 },\r\n  { name: 'movies', width: 94, height: 100, x: 282, y: 0 },\r\n]\r\n\r\ninterface IconProps extends IntrinsicNodeProps {\r\n  name: string\r\n}\r\n\r\nlet sprite\r\nfunction Icon(props: IconProps) {\r\n  sprite =\r\n    sprite || createSpriteMap(basePath + 'assets/icons_white.png', icons)\r\n  return (\r\n    <View\r\n      {...props}\r\n      texture={sprite[props.name]}\r\n      width={sprite[props.name].props.width}\r\n      height={sprite[props.name].props.height}\r\n      x={(100 - (sprite[props.name].props.width || 0)) / 2}\r\n      y={(100 - (sprite[props.name].props.height || 0)) / 2}\r\n    ></View>\r\n  )\r\n}\r\n\r\nexport default Icon\r\nexport function PreviewIcons() {\r\n  return (\r\n    <>\r\n      <View\r\n        src={`${basePath}assets/icons.png`}\r\n        width={375}\r\n        height={100}\r\n        y={10}\r\n      />\r\n      <For each={icons}>\r\n        {(icon, i) => <Icon name={icon.name} y={100} x={i() * 105} />}\r\n      </For>\r\n    </>\r\n  )\r\n}\r\n","import { useMatch, useNavigate } from '@solidjs/router'\r\nimport {\r\n  View,\r\n  Text,\r\n  IntrinsicNodeProps,\r\n  ElementNode,\r\n} from '@lightningtv/solid'\r\nimport { Column } from '@lightningtv/solid/primitives'\r\nimport styles from './styles'\r\nimport Icon from '../icon'\r\n\r\ninterface NavButtonProps extends IntrinsicNodeProps {\r\n  icon: string\r\n  children: string\r\n}\r\n\r\nconst NavButtonTextStyles = {\r\n  fontSize: 38,\r\n  x: 116,\r\n  y: 18,\r\n  height: 50,\r\n  alpha: 0,\r\n  $active: {\r\n    alpha: 1,\r\n  },\r\n}\r\n\r\nfunction NavButton(props: Readonly<NavButtonProps>) {\r\n  return (\r\n    <View {...props} forwardStates style={styles.NavButton}>\r\n      <View y={-16}>\r\n        <Icon scale={0.5} name={props.icon} />\r\n      </View>\r\n      <Text style={NavButtonTextStyles}>{props.children}</Text>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default function NavDrawer(props: any) {\r\n  let backdrop: ElementNode | undefined\r\n  const navigate = useNavigate()\r\n  function onFocus(this: ElementNode) {\r\n    backdrop!.states.add('$focus')\r\n    this.children.forEach((c) => c.states.add('$active'))\r\n    this.children[this.selected ?? 0].setFocus()\r\n  }\r\n\r\n  function onBlur(this: ElementNode) {\r\n    backdrop!.states.remove('$focus')\r\n    this.selected = 0\r\n    this.children.forEach((c) => c.states.remove('$active'))\r\n  }\r\n\r\n  function handleNavigate(page: string) {\r\n    const isOnPage = useMatch(() => page)\r\n    if (isOnPage()) {\r\n      return props.focusPage()\r\n    }\r\n\r\n    navigate(page)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Column\r\n        {...props}\r\n        onFocus={onFocus}\r\n        onBlur={onBlur}\r\n        style={styles.Column}\r\n        scroll='none'\r\n      >\r\n        <NavButton\r\n          onEnter={() => handleNavigate('/')}\r\n          icon='home'\r\n        >\r\n          Home\r\n        </NavButton>\r\n        <NavButton icon='movies' onEnter={() => handleNavigate('/browse/movie')}>\r\n          Movies\r\n        </NavButton>\r\n        <NavButton icon='series' onEnter={() => handleNavigate('/browse/tv')}>\r\n          Series\r\n        </NavButton>\r\n      </Column>\r\n      <View skipFocus ref={backdrop} style={styles.Gradient}></View>\r\n    </>\r\n  )\r\n}\r\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Object.fromEntries is added in chrome 74, we need to support 63 where possible\n */\nexport default function objectFromEntries(entries) {\n    if (!entries || !entries[Symbol.iterator]) {\n        throw new Error('objectFromEntries requires a single iterable argument');\n    }\n    const obj = {};\n    for (const [key, value] of entries) {\n        obj[key] = value;\n    }\n    return obj;\n}\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport objectFromEntries from './objectFromEntries.js';\n// TODO types, sub components\n// TODO these are configurable per component, move to theme?\nconst defaultModeKeys = ['focus', 'disabled'];\nconst defaultToneKeys = ['brand', 'inverse', 'neutral'];\nexport function makeComponentStyles({ themeKeys, base, themeStyles, modes = {}, tones = {}, modeKeys = defaultModeKeys, toneKeys = defaultToneKeys }, debug = false) {\n    /**\n     * creates the object of tone styles\n     *\n     * for each key in the tone object, pass its set of styles to mapModeConfigToSolidStyle for formatting\n     */\n    const makeToneStyles = (tones, themeComponentStyles, modeStyles) => {\n        const toneStyles = toneKeys.map(tone => {\n            const styles = {};\n            // get list of style keys across both style file and theme component config\n            // TODO a better way to do this\n            const styleList = new Set(\n            // eslint-disable-next-line prefer-spread\n            [].concat.apply([], [tones?.[tone] ?? {}, themeComponentStyles?.[tone] ?? {}].map(Object.keys)));\n            // combine style file tones and theme component config tones, ignoring tone modes(added below)\n            styleList.forEach(styleKey => {\n                // if the style isn't a mode\n                if (!modeKeys.includes(styleKey)) {\n                    styles[styleKey] = themeComponentStyles?.[tone]?.[styleKey] ?? tones?.[tone]?.[styleKey];\n                }\n            });\n            /**\n             *  merge tone modes with the following priority(lowest to highest):\n             * - base.mode\n             * - style file tone.mode\n             * - theme component config tone.mode\n             */\n            modeKeys.forEach(mode => {\n                styles[mode] = {\n                    ...modeStyles[mode], // fallbacks from base.mode\n                    ...tones?.[tone]?.[mode], // component configured tone.mode\n                    ...themeComponentStyles?.[tone]?.[mode] // theme configure tone.mode\n                };\n            });\n            return [tone, styles];\n        });\n        return objectFromEntries(toneStyles);\n    };\n    /**\n     * creates the object of mode(state-controlled) styles\n     *\n     * for each key in the mode object, pass its set of styles to mapModeConfigToSolidStyle for formatting\n     */\n    const makeModeStyles = (modes, themeComponentStyles) => {\n        const modeStyles = modeKeys.map(mode => {\n            return [mode, { ...modes?.[mode], ...themeComponentStyles?.[mode] }];\n        });\n        const modeObject = objectFromEntries(modeStyles);\n        return modeObject;\n    };\n    /**\n     * creates a base style object\n     *\n     * if a property has a themeable value(has a corresponding themeKey in the themeKeys object) check the\n     * componentConfig for a base value. if one exists use it, otherwise use the value from the defaults object\n     */\n    const makeBaseStyles = (base, themeComponentStyles) => {\n        const baseStyles = {\n            ...base,\n            ...themeComponentStyles.base\n        };\n        return baseStyles;\n    };\n    /**\n     * uses the themeKey map to assign themed values to solid style properties\n     * `themeKeys` is globally available\n     */\n    const mapThemeKeysToSolid = stylesToMap => objectFromEntries(Object.entries(themeKeys)\n        .filter(([_, themeKey]) => stylesToMap[themeKey])\n        .map(([solidKey, themeKey]) => [solidKey, stylesToMap[themeKey]]));\n    const convertComponentConfig = themeStyles => {\n        const convertedThemeStyles = objectFromEntries(\n        // iterate through each variant\n        Object.entries(themeStyles).map(([variantName, styles]) => {\n            // within each variant, assign the theme value to the correct solid style property for each theme key\n            const convertedStyles = mapThemeKeysToSolid(styles);\n            // repeat the above for each mode within a variant\n            Object.entries(styles)\n                .filter(([styleName, _]) => modeKeys.includes(styleName))\n                .forEach(([modeName, modeStyles]) => {\n                convertedStyles[modeName] = mapThemeKeysToSolid(modeStyles);\n            });\n            return [variantName, convertedStyles];\n        }));\n        return convertedThemeStyles;\n    };\n    const generateSolidStylesFromLookupObject = (base, modes, tones) => {\n        const themeComponentStyles = convertComponentConfig(themeStyles);\n        debug && console.log(themeComponentStyles);\n        const baseStyles = makeBaseStyles(base, themeComponentStyles);\n        debug && console.log(baseStyles);\n        const modeStyles = makeModeStyles(modes, themeComponentStyles);\n        debug && console.log(modeStyles);\n        const toneStyles = makeToneStyles(tones, themeComponentStyles, modeStyles);\n        debug && console.log(toneStyles);\n        return {\n            base: {\n                ...baseStyles,\n                ...modeStyles\n            },\n            tones: toneStyles\n        };\n    };\n    return generateSolidStylesFromLookupObject(base, modes, tones);\n}\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nexport function getWidthByUpCount(upCount = 1) {\n    const screenW = theme.layout.screenW;\n    const columnCount = theme.layout.columnCount;\n    const marginX = theme.layout.marginX;\n    const gutterX = theme.layout.gutterX;\n    if (upCount < 1 || upCount > columnCount) {\n        console.error(`getWidthByUpCount expects an upCount between 1 & ${columnCount}, received ${upCount}. Defaulting to upCount 1.`);\n        upCount = 1;\n    }\n    // the screen width, minus the margin x on each side\n    const columnWidth = screenW - marginX * 2;\n    // the total space of column gaps in between items\n    const columnGapTotal = (upCount - 1) * gutterX;\n    // the remaining amount of space left for all items\n    const totalColumnsWidth = columnWidth - columnGapTotal;\n    // the width of each item in that remaining width\n    return totalColumnsWidth / upCount;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Artwork: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        borderRadius: 'radius',\n        fallbackSrc: 'fallbackSrc',\n        fillColor: 'fillColor',\n        gradientColor: 'gradientColor',\n        pivotX: 'imageScalePivotX',\n        pivotY: 'imageScalePivotY',\n        scale: 'imageScale'\n    },\n    base: {\n        fallbackSrc: undefined,\n        fillColor: theme.color.overlay,\n        gradientColor: theme.color.material,\n        pivotX: 0.5,\n        pivotY: 0.5,\n        scale: undefined,\n        borderRadius: theme.radius.md\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Badge: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme.componentConfig;\nconst container = {\n    themeKeys: {\n        color: 'backgroundColor',\n        borderRadius: 'radius',\n        gap: 'contentSpacing'\n    },\n    base: {\n        // TODO clew uses strokeColor, but we currently don't account for nested properties (border.color)\n        // TODO clew uses strokeWidth, but we currently don't account for nested properties (border.width)\n        color: theme.color.fillInverseSecondary,\n        borderRadius: theme.radius.sm, // borderRadius must be applied _before_ border to prevent the node from breaking\n        border: {\n            color: theme.color.strokeInverse,\n            width: theme.stroke.sm\n        },\n        gap: theme.spacer.xs,\n        display: 'flex',\n        justifyContent: 'flexStart',\n        alignItems: 'center'\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillNeutralSecondary,\n            borderRadius: theme.radius.sm,\n            border: {\n                color: theme.color.strokeInverseSecondary,\n                width: theme.stroke.sm\n            }\n        },\n        brand: {\n            color: theme.color.fillBrand,\n            borderRadius: theme.radius.sm,\n            border: {\n                color: theme.color.strokeInverseSecondary,\n                width: theme.stroke.sm\n            }\n        }\n    },\n    themeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        ...theme.typography.tag1,\n        color: theme.color.textNeutral,\n        lineHeight: theme.typography.tag1.lineHeight + 12,\n        marginRight: theme.spacer.md + theme.stroke.sm,\n        marginLeft: theme.spacer.md + theme.stroke.sm\n    },\n    tones: {\n        inverse: {\n            color: theme.color.textInverse\n        },\n        brand: {\n            color: theme.color.textNeutral\n        }\n    },\n    themeStyles\n};\nconst icon = {\n    themeKeys: {\n        color: 'iconColor'\n    },\n    base: {\n        color: theme.color.textNeutral\n    },\n    tones: {\n        inverse: {\n            color: theme.color.textInverse\n        },\n        brand: {\n            color: theme.color.textNeutral\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Icon = makeComponentStyles(icon);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Icon,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Button: { defaultTone, ...buttonThemeStyles } = { buttonThemeStyles: {} } } = theme?.componentConfig;\n/* @ts-expect-error next-line see above */\nconst { Surface: { surfaceDefaultTone, ...surfaceThemeStyles } = { surfaceThemeStyles: {} } } = theme?.componentConfig;\nconst themeStyles = {\n    ...buttonThemeStyles,\n    ...surfaceThemeStyles\n};\nconst container = {\n    themeKeys: {\n        borderRadius: 'radius',\n        color: 'backgroundColor',\n        justifyContent: 'justify',\n        itemSpacing: 'contentSpacing'\n    },\n    base: {\n        height: theme.typography.button1.lineHeight + theme.spacer.xl * 2,\n        display: 'flex',\n        padding: [theme.spacer.xxxl, theme.spacer.xl],\n        color: theme.color.interactiveNeutral,\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexBoundary: 'fixed',\n        borderRadius: theme.radius.sm,\n        contentColor: theme.color.fillNeutral\n    },\n    modes: {\n        focus: {\n            color: theme.color.interactiveNeutralFocus,\n            contentColor: theme.color.fillInverse\n        },\n        disabled: {\n            color: theme.color.fillNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.interactiveInverse\n        },\n        brand: {\n            color: theme.color.interactiveBrand,\n            focus: {\n                color: theme.color.fillNeutral\n            }\n        }\n    },\n    themeStyles\n};\nconst content = {\n    themeKeys: {\n        color: 'contentColor'\n    },\n    base: {\n        color: theme.color.textNeutral\n    },\n    modes: {\n        focus: {\n            color: theme.color.textInverse\n        },\n        disabled: {\n            color: theme.color.textNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillNeutral\n        },\n        brand: {\n            color: theme.color.fillBrand,\n            focus: {\n                color: theme.color.fillBrand\n            }\n        }\n    },\n    themeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        color: theme.color.textNeutral,\n        ...theme.typography.button1,\n        textAlign: 'center',\n        contain: 'none'\n    },\n    modes: {\n        focus: {\n            color: theme.color.textInverse\n        },\n        disabled: {\n            color: theme.color.textNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillNeutral\n        },\n        brand: {\n            color: theme.color.fillBrand,\n            focus: {\n                color: theme.color.fillBrand\n            }\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Content = makeComponentStyles(content);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone || surfaceDefaultTone || 'neutral',\n    Container,\n    Content,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Checkbox: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        color: 'backgroundColor',\n        borderRadius: 'radius',\n        border: 'border',\n        justifyContent: 'justifyContent'\n    },\n    base: {\n        width: theme.spacer.xxl,\n        height: theme.spacer.xxl,\n        display: 'flex',\n        justifyContent: 'center',\n        color: theme.color.fillNeutral,\n        alignItems: 'center',\n        borderRadius: theme.spacer.xxl / 4,\n        border: {\n            color: theme.color.strokeInverse,\n            width: theme.stroke.sm\n        }\n    },\n    modes: {\n        disabled: {\n            alpha: theme.alpha.inactive\n        }\n    },\n    tones: {\n        brand: {\n            borderRadius: theme.spacer.xxl / 4,\n            border: {\n                color: theme.color.strokeNeutralSecondary,\n                width: theme.stroke.sm\n            },\n            color: theme.color.fillNeutralSecondary,\n            checked: {\n                borderRadius: theme.spacer.xxl / 4,\n                border: {\n                    color: theme.color.strokeNeutralSecondary,\n                    width: theme.stroke.sm\n                },\n                color: theme.color.fillBrand\n            }\n        },\n        neutral: {\n            borderRadius: theme.spacer.xxl / 4,\n            border: {\n                color: theme.color.strokeNeutralSecondary,\n                width: theme.stroke.sm\n            },\n            color: theme.color.fillInverseSecondary,\n            checked: {\n                borderRadius: theme.spacer.xxl / 4,\n                border: {\n                    color: theme.color.strokeNeutralSecondary,\n                    width: theme.stroke.sm\n                },\n                color: theme.color.fillNeutral\n            }\n        },\n        inverse: {\n            borderRadius: theme.spacer.xxl / 4,\n            border: {\n                color: theme.color.strokeInverseSecondary,\n                width: theme.stroke.sm\n            },\n            color: theme.color.fillNeutralSecondary,\n            checked: {\n                borderRadius: theme.spacer.xxl / 4,\n                border: {\n                    color: theme.color.strokeInverseSecondary,\n                    width: theme.stroke.sm\n                },\n                color: theme.color.fillInverse\n            }\n        }\n    },\n    modeKeys: ['focus', 'disabled', 'checked'],\n    themeStyles\n};\nconst icon = {\n    themeKeys: {\n        // color: 'strokeColor', see types 58 for TODO\n        width: 'checkWidth',\n        height: 'checkHeight'\n    },\n    base: {\n        width: theme.spacer.lg,\n        height: theme.spacer.lg,\n        src: theme.asset.check\n    },\n    tones: {\n        neutral: {\n            color: theme.color.fillInverse\n        },\n        inverse: {\n            color: theme.color.fillNeutral\n        },\n        brand: {\n            color: theme.color.fillInverse\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Icon = makeComponentStyles(icon);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Icon\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Icon: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        color: 'color'\n    },\n    base: {\n        width: 100,\n        height: 100,\n        color: theme.color.fillNeutral\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillInverse\n        },\n        brand: {\n            color: theme.color.fillBrand\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Column: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        gap: 'itemSpacing',\n        scrollIndex: 'scrollIndex',\n        transition: 'itemTransition'\n    },\n    base: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.layout.gutterY,\n        transition: {\n            y: {\n                ...theme.animation.standardEntrance,\n                duration: theme.animation.duration.fast\n            }\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container\n};\nexport default styles;\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { FocusRing: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        borderRadius: 'radius'\n    },\n    base: {\n        x: 0,\n        y: 0,\n        borderRadius: theme.radius.lg,\n        border: {\n            color: theme.color.interactiveNeutralFocus,\n            width: theme.stroke.md\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\nimport { getWidthByUpCount } from '../../utils/getWidthByUpCount.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Input: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        borderRadius: 'radius',\n        color: 'backgroundColor',\n        justifyContent: 'justify'\n    },\n    base: {\n        // TODO clew uses strokeColor, but we currently don't account for nested properties (border.color)\n        // TODO clew uses strokeWidth, but we currently don't account for nested properties (border.width)\n        width: getWidthByUpCount(4),\n        height: 100,\n        padding: [theme.spacer.xxxl, theme.spacer.xl],\n        color: theme.color.interactiveNeutral,\n        contentColor: theme.color.fillInverse,\n        borderRadius: theme.radius.sm,\n        marginX: theme.spacer.xxxl,\n        actualTitle: ''\n    },\n    themeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        textAlign: 'left',\n        color: theme.color.textNeutral,\n        ...theme.typography.button1\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Key: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        keySpacing: 'keySpacing',\n        borderRadius: 'borderRadius',\n        color: 'backgroundColor',\n        justifyContent: 'justify',\n        baseWidth: 'baseWidth',\n        sizes: 'sizes',\n        contentColor: 'contentColor'\n    },\n    base: {\n        keySpacing: theme.spacer.md,\n        height: theme.spacer.md * 9,\n        paddingX: theme.spacer.md,\n        contentColor: theme.color.fillNeutral,\n        sizes: {\n            sm: 1,\n            md: 2,\n            lg: 3,\n            xl: 4,\n            xxl: 5\n        },\n        padding: [theme.spacer.md],\n        baseWidth: theme.spacer.md * 7,\n        color: theme.color.interactiveNeutral,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderRadius: theme.radius.sm\n    },\n    modes: {\n        focus: {\n            color: theme.color.interactiveNeutralFocus,\n            contentColor: theme.color.fillInverse\n        },\n        disabled: {\n            color: theme.color.fillNeutralDisabled,\n            contentColor: theme.color.fillNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.interactiveInverse,\n            focus: {\n                color: theme.color.interactiveInverseFocus,\n                contentColor: theme.color.fillNeutral\n            }\n        },\n        brand: {\n            focus: {\n                contentColor: theme.color.fillNeutral\n            }\n        }\n    },\n    themeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        color: theme.color.textNeutral,\n        ...theme.typography.headline2,\n        textAlign: 'center',\n        contain: 'none'\n    },\n    modes: {\n        focus: {\n            color: theme.color.textInverse\n        },\n        disabled: {\n            color: theme.color.textNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            focus: {\n                color: theme.color.textNeutral\n            }\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Row: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        gap: 'itemSpacing',\n        scrollIndex: 'scrollIndex',\n        transition: 'itemTransition'\n    },\n    base: {\n        display: 'flex',\n        flexDirection: 'row',\n        gap: theme.layout.gutterX,\n        transition: {\n            x: {\n                ...theme.animation.standardEntrance,\n                duration: theme.animation.duration.fast\n            }\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst styles = {\n    tone: defaultTone,\n    Container\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Keyboard: { defaultTone, ...themeStyles } = {} } = theme?.componentConfig;\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Key: { ...keyThemeStyles } = {} } = theme?.componentConfig; // TODO default tone for sub-components\nconst container = {\n    themeKeys: {\n        gap: 'keySpacing',\n        width: 'screenW',\n        marginX: 'marginX',\n        keyHeight: 'keyHeight'\n    },\n    base: {\n        gap: theme.spacer.md,\n        width: theme.layout.screenW,\n        display: 'flex',\n        marginX: theme.layout.marginX,\n        keyHeight: 100,\n        flexBoundary: 'contain'\n    },\n    // @ts-expect-error TODO fix style types for component configs\n    themeStyles\n};\nconst key = {\n    themeKeys: {\n        gap: 'keySpacing',\n        borderRadius: 'borderRadius',\n        color: 'backgroundColor',\n        justifyContent: 'justify',\n        baseWidth: 'baseWidth',\n        sizes: 'sizes',\n        contentColor: 'contentColor' // what is this used for\n    },\n    base: {\n        gap: theme.spacer.md,\n        height: theme.spacer.md * 9,\n        sizes: {\n            sm: 1,\n            md: 2,\n            lg: 3,\n            xl: 4,\n            xxl: 5\n        },\n        contentColor: theme.color.fillNeutral,\n        padding: [theme.spacer.xxxl, theme.spacer.xl],\n        baseWidth: theme.spacer.md * 7,\n        color: theme.color.interactiveNeutral,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderRadius: theme.radius.sm\n    },\n    modes: {\n        focus: {\n            color: theme.color.interactiveNeutralFocus,\n            contentColor: theme.color.fillInverse\n        },\n        disabled: {\n            color: theme.color.fillNeutralDisabled,\n            contentColor: theme.color.fillNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.interactiveInverse,\n            focus: {\n                color: theme.color.interactiveInverseFocus,\n                contentColor: theme.color.fillNeutral\n            }\n        },\n        brand: {\n            focus: {\n                contentColor: theme.color.fillNeutral\n            }\n        }\n    },\n    themeStyles: keyThemeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        color: theme.color.textNeutral,\n        ...theme.typography.headline2\n    },\n    modes: {\n        focus: {\n            color: theme.color.textInverse\n        },\n        disabled: {\n            color: theme.color.textNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            focus: {\n                color: theme.color.textNeutral\n            }\n        }\n    },\n    // @ts-expect-error TODO fix style types for component configs\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Key = makeComponentStyles(key);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone,\n    Container,\n    Key,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Label: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        color: 'backgroundColor',\n        borderRadius: 'radius'\n    },\n    base: {\n        display: 'flex',\n        justifyContent: 'flexStart',\n        color: theme.color.textNeutral,\n        padding: [theme.spacer.md, theme.spacer.lg], // TODO themed padding values\n        height: theme.typography.caption1.lineHeight + theme.spacer.md * 2,\n        borderRadius: [theme.radius.md, theme.radius.md, theme.radius.md, theme.radius.none],\n        neutral: {\n            backgroundColor: theme.color.fillNeutral\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillInverse\n        },\n        brand: {\n            color: theme.color.fillBrand,\n            focus: {\n                color: theme.color.orange\n            }\n        }\n    },\n    themeStyles\n};\nconst text = {\n    themeKeys: {\n        color: 'textColor'\n    },\n    base: {\n        ...theme.typography.caption1,\n        color: theme.color.textInverse,\n        lineHeight: theme.typography.caption1.lineHeight + theme.spacer.md * 2,\n        marginRight: theme.spacer.lg,\n        marginLeft: theme.spacer.lg\n    },\n    tones: {\n        inverse: {\n            color: theme.color.textNeutral\n        },\n        brand: {\n            color: theme.color.textNeutral\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Text = makeComponentStyles(text);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Text\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { ProgressBar: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        color: 'barColor',\n        borderRadius: 'radius'\n    },\n    base: {\n        height: theme.spacer.md,\n        color: theme.color.fillNeutralTertiary,\n        borderRadius: theme.radius.xs\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillInverseTertiary\n        }\n    },\n    themeStyles\n};\nconst progress = {\n    themeKeys: {\n        color: 'progressColor',\n        borderRadius: 'radius'\n    },\n    base: {\n        borderRadius: theme.radius.xs,\n        color: theme.color.fillNeutral\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillInverse\n        },\n        brand: {\n            color: theme.color.fillBrand\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst ProgressBar = makeComponentStyles(progress);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    ProgressBar\n};\nexport default styles;\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Radio: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst container = {\n    themeKeys: {\n        borderRadius: 'radius',\n        color: 'backgroundColor',\n        colorChecked: 'backgroundColorChecked'\n    },\n    base: {\n        color: theme.color.fillNeutralSecondary,\n        height: theme.spacer.xxl + theme.stroke.sm * 2,\n        width: theme.spacer.xxl + theme.stroke.sm * 2,\n        borderRadius: theme.spacer.xxl / 2 + theme.stroke.sm,\n        border: {\n            color: theme.color.strokeNeutralSecondary,\n            width: theme.stroke.sm\n        }\n    },\n    tones: {\n        inverse: {\n            border: {\n                color: theme.color.strokeInverseSecondary,\n                width: theme.stroke.sm\n            }\n        },\n        brand: {\n            border: {\n                color: theme.color.fillBrand,\n                width: theme.stroke.sm\n            }\n        }\n    },\n    modeKeys: ['focus', 'disabled', 'checked'],\n    themeStyles\n};\nconst knob = {\n    themeKeys: {\n        width: 'knobWidth',\n        height: 'knobHeight',\n        borderRadius: 'knobRadius',\n        color: 'knobColor',\n        colorChecked: 'knobColorChecked'\n    },\n    base: {\n        color: theme.color.fillInverse,\n        colorChecked: theme.color.fillInverse,\n        width: theme.spacer.xxl,\n        height: theme.spacer.xxl,\n        borderRadius: theme.spacer.xxl / 2\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillNeutral\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Knob = makeComponentStyles(knob);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Knob\n};\nexport default styles;\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport theme from 'theme';\nimport { makeComponentStyles } from '../../utils/index.js';\n/* @ts-expect-error next-line themes are supplied by client applications so this setup is necessary */\nconst { Toggle: { defaultTone, ...themeStyles } = { themeStyles: {} } } = theme?.componentConfig;\nconst knobSize = theme.spacer.xl;\nconst knobPadding = theme.spacer.xs;\nconst strokeWidth = theme.stroke.sm;\nconst container = {\n    themeKeys: {\n        borderRadius: 'strokeRadius',\n        color: 'backgroundColor',\n        colorChecked: 'backgroundColorChecked'\n    },\n    base: {\n        color: theme.color.fillInverseTertiary,\n        colorChecked: theme.color.fillNeutral,\n        height: knobSize + (knobPadding + strokeWidth) * 2,\n        width: (strokeWidth + knobPadding * 2 + knobSize) * 2,\n        borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n        border: {\n            // TODO- strokeWidth, strokeColor, and strokeColorChecked map to border object with themeKeys\n            color: theme.color.fillNeutral,\n            width: strokeWidth\n        }\n    },\n    modes: {\n        focus: {},\n        disabled: {\n            borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n            border: {\n                color: theme.color.fillNeutralDisabled,\n                width: strokeWidth\n            },\n            color: theme.color.fillInverseDisabled,\n            colorChecked: theme.color.fillNeutralDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n            border: {\n                color: theme.color.fillInverse,\n                width: strokeWidth\n            },\n            color: theme.color.fillNeutralTertiary,\n            colorChecked: theme.color.fillInverse,\n            disabled: {\n                borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n                border: {\n                    color: theme.color.fillInverseDisabled,\n                    width: strokeWidth\n                },\n                color: theme.color.fillNeutralDisabled,\n                colorChecked: theme.color.fillInverseDisabled\n            }\n        },\n        brand: {\n            borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n            border: {\n                color: theme.color.fillBrand,\n                width: strokeWidth\n            },\n            color: theme.color.fillBrandTertiary,\n            colorChecked: theme.color.fillBrand,\n            disabled: {\n                borderRadius: knobSize / 2 + knobPadding + strokeWidth,\n                border: {\n                    color: theme.color.fillNeutralDisabled,\n                    width: strokeWidth\n                },\n                color: theme.color.fillInverseDisabled,\n                colorChecked: theme.color.fillNeutralDisabled\n            }\n        }\n    },\n    // TODO: figure out checked state\n    themeStyles\n};\nconst knob = {\n    themeKeys: {\n        width: 'knobWidth',\n        height: 'knobHeight',\n        padding: 'knobPadding',\n        borderRadius: 'knobRadius',\n        color: 'knobColor',\n        colorChecked: 'knobColorChecked'\n    },\n    base: {\n        color: theme.color.fillNeutral,\n        colorChecked: theme.color.fillInverse,\n        width: knobSize,\n        height: knobSize,\n        borderRadius: knobSize / 2,\n        padding: knobPadding\n    },\n    modes: {\n        focus: {},\n        disabled: {\n            color: theme.color.fillNeutralDisabled,\n            colorChecked: theme.color.fillInverseDisabled\n        }\n    },\n    tones: {\n        inverse: {\n            color: theme.color.fillInverse,\n            colorChecked: theme.color.fillNeutral,\n            disabled: {\n                color: theme.color.fillInverseDisabled,\n                colorChecked: theme.color.fillNeutralDisabled\n            }\n        },\n        brand: {\n            color: theme.color.fillBrand,\n            colorChecked: theme.color.fillInverse,\n            disabled: {\n                color: theme.color.fillNeutralDisabled,\n                colorChecked: theme.color.fillInverseDisabled\n            }\n        }\n    },\n    themeStyles\n};\nconst Container = makeComponentStyles(container);\nconst Knob = makeComponentStyles(knob);\nconst styles = {\n    tone: defaultTone || 'neutral',\n    Container,\n    Knob\n};\nexport default styles;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { View, Text } from '@lightningtv/solid';\nimport { createSignal } from 'solid-js';\nconst fpsStyle = {\n    color: 0x000000ff,\n    height: 180,\n    width: 330,\n    x: 1900,\n    y: 6,\n    mountX: 1,\n    alpha: 0.8,\n    zIndex: 100\n};\nconst fpsLabel = {\n    x: 10,\n    fontSize: 20,\n    textColor: 0xf6f6f6ff\n};\nconst fpsValue = {\n    fontSize: 22,\n    textColor: 0xf6f6f6ff\n};\nconst [fps, setFps] = createSignal(0);\nconst [avgFps, setAvgFps] = createSignal(0);\nconst [minFps, setMinFps] = createSignal(99);\nconst [maxFps, setMaxFps] = createSignal(0);\nconst [criticalThresholdSignal, setCriticalThresholdSignal] = createSignal('');\nconst [targetThresholdSignal, setTargetThresholdSignal] = createSignal('');\nconst [renderableMemUsedSignal, setRenderableMemUsedSignal] = createSignal('');\nconst [memUsedSignal, setMemUsedSignal] = createSignal('');\nconst [renderableTexturesLoadedSignal, setRenderableTexturesLoadedSignal] = createSignal(0);\nconst [loadedTexturesSignal, setLoadedTexturesSignal] = createSignal(0);\nlet count = 0;\nlet totalFps = 0;\nconst infoFontSize = 14;\nexport const resetCounter = () => {\n    // clear fps\n    totalFps = 0;\n    count = 0;\n    setMinFps(99);\n};\nfunction bytesToMb(bytes) {\n    return (bytes / 1024 / 1024).toFixed(2) + ' Mb';\n}\nconst calcFps = (fps) => {\n    if (!fps)\n        return;\n    setFps(fps);\n    setMinFps(prev => Math.min(fps, prev));\n    setMaxFps(prev => Math.max(fps, prev));\n    totalFps += fps;\n    count++;\n    setAvgFps(Math.round(totalFps / count));\n};\nfunction updateMemoryInfo(stage) {\n    const memInfo = stage.txMemManager.getMemoryInfo();\n    setCriticalThresholdSignal(bytesToMb(memInfo.criticalThreshold));\n    setTargetThresholdSignal(bytesToMb(memInfo.targetThreshold));\n    setRenderableMemUsedSignal(bytesToMb(memInfo.renderableMemUsed));\n    setMemUsedSignal(bytesToMb(memInfo.memUsed));\n    setRenderableTexturesLoadedSignal(memInfo.renderableTexturesLoaded);\n    setLoadedTexturesSignal(memInfo.loadedTextures);\n}\nlet frameCount = 0;\nexport function setupFPS(root) {\n    root.renderer.on('fpsUpdate', (target, fpsData) => {\n        const fps = typeof fpsData === 'number' ? fpsData : fpsData.fps;\n        // ignore really low fps which occur on page loads\n        if (fps > 5) {\n            calcFps(fps);\n            if (frameCount % 10 === 0) {\n                updateMemoryInfo(target.stage);\n                frameCount = 0;\n            }\n            frameCount++;\n        }\n    });\n}\n/** Hi there */\nexport const FPSCounter = props => {\n    return (<View {...props} style={fpsStyle}>\n      <View y={6}>\n        <Text style={fpsLabel}>FPS:</Text>\n        <Text style={fpsValue} x={90}>\n          {fps().toString()}\n        </Text>\n      </View>\n\n      <View y={6} x={160}>\n        <Text style={fpsLabel}>AVG:</Text>\n        <Text style={fpsValue} x={100}>\n          {avgFps().toString()}\n        </Text>\n      </View>\n\n      <View x={0} y={26}>\n        <Text style={fpsLabel}>MIN:</Text>\n        <Text style={fpsValue} x={90}>\n          {minFps().toString()}\n        </Text>\n      </View>\n\n      <View x={160} y={26}>\n        <Text style={fpsLabel}>MAX:</Text>\n        <Text style={fpsValue} x={100}>\n          {maxFps().toString()}\n        </Text>\n      </View>\n\n      <View display=\"flex\" flexDirection=\"column\" y={58} gap={4}>\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            criticalThreshold:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {criticalThresholdSignal()}\n          </Text>\n        </View>\n\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            targetThreshold:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {targetThresholdSignal()}\n          </Text>\n        </View>\n\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            renderableMemUsed:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {renderableMemUsedSignal()}\n          </Text>\n        </View>\n\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            memUsed:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {memUsedSignal()}\n          </Text>\n        </View>\n\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            renderableTexturesLoaded:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {renderableTexturesLoadedSignal().toString()}\n          </Text>\n        </View>\n\n        <View height={infoFontSize}>\n          <Text fontSize={infoFontSize} style={fpsLabel}>\n            loadedTextures:\n          </Text>\n          <Text fontSize={infoFontSize} style={fpsLabel} x={230}>\n            {loadedTexturesSignal().toString()}\n          </Text>\n        </View>\n      </View>\n    </View>);\n};\n","import { useLocation, useNavigate } from '@solidjs/router'\r\nimport { View, Text, activeElement, renderer } from '@lightningtv/solid'\r\nimport {\r\n  useFocusManager,\r\n  useAnnouncer,\r\n} from '@lightningtv/solid/primitives'\r\nimport Background from '@/components/background'\r\nimport NavDrawer from '@/components/nav-drawer/drawer'\r\nimport { FPSCounter, setupFPS } from '@lightningtv/solid-ui'\r\nimport { createEffect, createSignal, onCleanup } from 'solid-js'\r\nimport { KeyMap } from '@lightningtv/core/focusManager'\r\n\r\ndeclare module '@lightningtv/solid' {\r\n  interface KeyMap {\r\n    Announcer: (string | number)[]\r\n    Menu: (string | number)[]\r\n    Escape: (string | number)[]\r\n    Backspace: (string | number)[]\r\n  }\r\n  interface ElementNode {\r\n    heroContent?: boolean\r\n    backdrop?: any\r\n    entityInfo?: any\r\n    href?: string\r\n  }\r\n}\r\n\r\nconst App = (props) => {\r\n  useFocusManager({\r\n    Announcer: ['a'],\r\n    Menu: ['m'],\r\n    Escape: ['Escape', 27],\r\n    Backspace: ['Backspace', 8],\r\n    Left: ['ArrowLeft', 37],\r\n    Right: ['ArrowRight', 39],\r\n    Up: ['ArrowUp', 38],\r\n    Down: ['ArrowDown', 40],\r\n    Enter: ['Enter', 13],\r\n  } as unknown as KeyMap)\r\n  const announcer = useAnnouncer()\r\n  announcer.enabled = false\r\n  const navigate = useNavigate()\r\n\r\n  let navDrawer, lastFocused\r\n\r\n  setupFPS({ renderer })\r\n\r\n  function focusNavDrawer() {\r\n    if (navDrawer.states.has('focus')) {\r\n      return false\r\n    }\r\n    lastFocused = activeElement()\r\n    return navDrawer.setFocus()\r\n  }\r\n\r\n  const [showWidgets, setShowWidgets] = createSignal(true)\r\n  const location = useLocation()\r\n  const showOnPaths = ['/browse', '/entity']\r\n  createEffect(() => {\r\n    const currentPath = location.pathname\r\n    const root = document.getElementById('root')\r\n    let matchesPartial = showOnPaths.some((path) =>\r\n      currentPath.startsWith(path)\r\n    )\r\n\r\n    if (currentPath === '/') {\r\n      matchesPartial = true\r\n    }\r\n\r\n    if (root) root.remove()\r\n\r\n    setShowWidgets(matchesPartial)\r\n  })\r\n\r\n  const [lastKey, setLastKey] = createSignal<string | undefined>()\r\n  const [lastError, setLastError] = createSignal<string | undefined>()\r\n  const keyPressHandler = (e) => {\r\n    setLastKey(`Last key: ${e.key}, Code: ${e.keyCode}`)\r\n  }\r\n  document.addEventListener('keydown', keyPressHandler)\r\n  const displayError = (e) => {\r\n    setLastError((p) => (p || '') + '\\n' + e.message)\r\n  }\r\n  document.addEventListener('onerror', displayError)\r\n  onCleanup(() => {\r\n    document.removeEventListener('onerror', displayError)\r\n    document.removeEventListener('keydown', keyPressHandler)\r\n  })\r\n\r\n  let pageContainer\r\n\r\n  return (\r\n    <View\r\n      ref={window.APP as any}\r\n      onAnnouncer={() => (announcer.enabled = !announcer.enabled)}\r\n      onLast={() => history.back()}\r\n      onMenu={() => navigate('/')}\r\n      style={{ width: 1920, height: 1080 }}\r\n      onBackspace={focusNavDrawer}\r\n      onLeft={focusNavDrawer}\r\n      onRight={() =>\r\n        navDrawer.states.has('focus') &&\r\n        (lastFocused || pageContainer).setFocus()\r\n      }\r\n    >\r\n      <Background />\r\n      <FPSCounter mountX={1} x={1910} y={10} alpha={showWidgets() ? 1 : 0.01} />\r\n      <View\r\n        mountX={1}\r\n        width={330}\r\n        height={28}\r\n        x={1910}\r\n        y={190}\r\n        color={0x000000ff}\r\n        hidden={!showWidgets()}\r\n      >\r\n        <Text fontSize={20} y={4} x={4}>\r\n          {lastKey()}\r\n        </Text>\r\n      </View>\r\n\r\n      <Text x={270} y={20} fontSize={24} contain='width' width={800}>\r\n        {lastError()}\r\n      </Text>\r\n      <View ref={pageContainer} forwardFocus={0}>\r\n        {props.children}\r\n      </View>\r\n      <NavDrawer\r\n        ref={navDrawer}\r\n        focusPage={() => lastFocused.setFocus()}\r\n        showWidgets={showWidgets()}\r\n      />\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import {\r\n  IntrinsicNodeStyleProps,\r\n  IntrinsicTextNodeStyleProps,\r\n} from '@lightningtv/solid'\r\nimport theme from 'theme'\r\n\r\ndeclare module '@lightningtv/solid' {\r\n  interface IntrinsicNodeStyleProps {\r\n    active?: IntrinsicNodeStyleProps\r\n    disabled?: IntrinsicNodeStyleProps\r\n  }\r\n\r\n  interface IntrinsicTextNodeStyleProps {\r\n    active?: IntrinsicTextNodeStyleProps\r\n    disabled?: IntrinsicTextNodeStyleProps\r\n  }\r\n}\r\n\r\nconst params = new URLSearchParams(window.location.search)\r\nconst roundPoster = params.get('roundPoster') !== 'false'\r\n\r\nexport default {\r\n  Page: {\r\n    width: 1920,\r\n    height: 1080,\r\n  },\r\n  headlineText: {\r\n    width: 1200,\r\n    height: 240,\r\n    x: 360,\r\n    y: 455,\r\n    contain: 'both',\r\n    fontSize: 66,\r\n    textAlign: 'center',\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  headlineSubText: {\r\n    width: 960,\r\n    height: 170,\r\n    x: 530,\r\n    y: 655,\r\n    contain: 'both',\r\n    fontSize: 48,\r\n    textAlign: 'center',\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  itemsContainer: {\r\n    width: theme.layout.screenW,\r\n    height: 800,\r\n    y: 560,\r\n    x: 0,\r\n    zIndex: 2,\r\n  },\r\n  Thumbnail: {\r\n    borderRadius: roundPoster ? 16 : 0,\r\n    width: 185,\r\n    height: 278,\r\n    scale: 1,\r\n    zIndex: 2,\r\n    transition: { scale: { duration: 250, easing: 'ease-in-out' } },\r\n    border: { width: 0, color: 0x00000000 },\r\n    $focus: { scale: 1.1, border: { color: '#E77D22', width: 2 } },\r\n  },\r\n  FocusRing: {\r\n    borderRadius: 16,\r\n    width: 194,\r\n    height: 286,\r\n    y: -5,\r\n    x: -5,\r\n    zIndex: -1,\r\n  },\r\n  FPS: {\r\n    color: 0x000000ff,\r\n    height: 42,\r\n    width: 140,\r\n    x: 20,\r\n    y: 20,\r\n    zIndex: 100,\r\n  } as const,\r\n  FPSLabel: {\r\n    x: 10,\r\n    y: 0,\r\n    fontSize: 36,\r\n    textColor: '#ffffff',\r\n  },\r\n  FPSValue: {\r\n    x: 90,\r\n    y: 0,\r\n    fontSize: 36,\r\n    textColor: '#ffffff',\r\n  },\r\n  showHeadline: { x: 70, y: 20 },\r\n  headlineBlur: {\r\n    width: 1920,\r\n    height: 150,\r\n    x: 0,\r\n    y: 0,\r\n    zIndex: 14,\r\n    alpha: 0.9,\r\n    color: '#000000',\r\n  },\r\n  RowTitle: {\r\n    height: 60,\r\n    width: 300,\r\n    marginBottom: -40,\r\n    fontSize: 36,\r\n    color: '#f0f0f0',\r\n    zIndex: 2,\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  Row: {\r\n    display: 'flex',\r\n    justifyContent: 'spaceBetween',\r\n    height: 300,\r\n  },\r\n  Column: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'flexStart',\r\n    flexBoundary: 'contain',\r\n    gap: 64,\r\n    width: theme.layout.screenW - 2 * theme.layout.marginX,\r\n    x: theme.layout.marginX + theme.layout.gutterX,\r\n    y: 48,\r\n    transition: { y: { duration: 250, easing: 'ease-in-out' } },\r\n    zIndex: 2,\r\n  },\r\n  Rect: {\r\n    width: 250,\r\n    height: 100,\r\n    y: 10,\r\n    x: 300,\r\n    color: '#0000ff',\r\n  },\r\n  peopleBio: {\r\n    ...theme.typography.body1,\r\n    fontFamily: 'Roboto',\r\n    fontWeight: 'normal',\r\n    contain: 'both',\r\n    width: 780,\r\n    height: 340,\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n} as const\r\n\r\nconst Button = {\r\n  width: 300,\r\n  height: 90,\r\n  color: '#323232cc',\r\n  $focus: {\r\n    color: '#FFF',\r\n  },\r\n} satisfies IntrinsicNodeStyleProps\r\n\r\nconst TopBar = {\r\n  color: '#00A699',\r\n  height: 8,\r\n  y: 2,\r\n  x: -4,\r\n  width: Button.width + 8,\r\n} satisfies IntrinsicNodeStyleProps\r\n\r\nconst ButtonText = {\r\n  fontSize: 26,\r\n  lineHeight: Button.height,\r\n  contain: 'width',\r\n  textAlign: 'center',\r\n  height: Button.height,\r\n  width: Button.width,\r\n  color: '#FFF',\r\n  $focus: {\r\n    color: '#000',\r\n  }\r\n} satisfies IntrinsicTextNodeStyleProps\r\n\r\nexport const buttonStyles = {\r\n  container: Button,\r\n  topBar: TopBar,\r\n  text: ButtonText,\r\n} satisfies Record<string, IntrinsicTextNodeStyleProps>\r\n\r\nexport const MaterialButton = {\r\n  width: 386,\r\n  height: 136,\r\n  color: '#715cab',\r\n  $focus: {\r\n    color: '#5a39a2',\r\n  },\r\n  $disabled: {\r\n    color: '#291d43',\r\n  },\r\n} satisfies IntrinsicNodeStyleProps\r\n\r\nexport const MaterialButtonText = {\r\n  fontSize: 32,\r\n  contain: 'width',\r\n  textAlign: 'center',\r\n  mountY: -0.35,\r\n  color: '#FFFFFF',\r\n  height: MaterialButton.height,\r\n  width: MaterialButton.width,\r\n  $focus: {\r\n    fontSize: 40,\r\n  },\r\n  $disabled: {\r\n    color: '#909090',\r\n  },\r\n} satisfies IntrinsicTextNodeStyleProps\r\n","import {\r\n  type IntrinsicNodeProps,\r\n  View,\r\n  Text,\r\n  type NodeProps,\r\n  Dynamic,\r\n  ElementNode,\r\n  assertTruthy\r\n} from '@lightningtv/solid'\r\nimport { Row } from '@lightningtv/solid/primitives'\r\nimport { createSignal, Index } from 'solid-js'\r\nimport styles, { buttonStyles } from '../styles'\r\nimport { type Tile } from '../api/formatters/item-formatter'\r\nimport { LazyUp } from '@lightningtv/solid/primitives'\r\nimport { useNavigate } from '@solidjs/router'\r\n\r\nexport function Thumbnail(props: IntrinsicNodeProps) {\r\n  return <View {...props} style={styles.Thumbnail} />\r\n}\r\n\r\nexport function FocusRing(props: IntrinsicNodeProps) {\r\n  return <View {...props} style={styles.FocusRing} />\r\n}\r\n\r\nexport interface TileRowProps extends IntrinsicNodeProps {\r\n  items: Tile[]\r\n  title?: string\r\n}\r\n\r\nexport function TileRow(props: TileRowProps) {\r\n  return (\r\n    <Row {...props} style={styles.Row}>\r\n      <Index each={props.items}>{(item) => <Thumbnail {...item} />}</Index>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport function Button(props) {\r\n  return (\r\n    <View {...props} forwardStates style={buttonStyles.container}>\r\n      <Text style={buttonStyles.text}>{props.children}</Text>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst heroTransition = {\r\n  duration: 300,\r\n  easing: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)',\r\n}\r\n\r\nconst titleRowStyles = {\r\n  fontFamily: 'Raleway',\r\n  fontSize: 24,\r\n  height: 32,\r\n  lineHeight: 32,\r\n}\r\n\r\nexport function TitleRow(props: TileRowProps) {\r\n  const navigate = useNavigate()\r\n\r\n  function onEnter(this: ElementNode) {\r\n    let href = this.href\r\n\r\n    assertTruthy(href)\r\n    navigate(href)\r\n\r\n    return true\r\n  }\r\n\r\n  return (\r\n    <View height={props.height} forwardFocus={1} marginTop={30}>\r\n      <Text skipFocus style={titleRowStyles}>\r\n        {props.title}\r\n      </Text>\r\n      <LazyUp\r\n        component={Row}\r\n        direction='row'\r\n        gap={20}\r\n        upCount={11}\r\n        each={props.items}\r\n        y={50}\r\n      >\r\n        {(item) => (\r\n          <Dynamic component={typeToComponent[props.row.type]} {...item()} onEnter={onEnter} />\r\n        )}\r\n      </LazyUp>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst posterStyles = {\r\n  width: 185,\r\n  height: 278,\r\n  scale: 1,\r\n  zIndex: 2,\r\n  color: '#b0b0b0',\r\n  transition: {\r\n    scale: { duration: 200, easing: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)' },\r\n  },\r\n  $focus: { scale: 1.1, color: '#fff' },\r\n}\r\n\r\nexport function Poster(props: NodeProps) {\r\n  return (\r\n    <View\r\n      {...props}\r\n      onFail={(node) => (node.src = 'failback.png')}\r\n      style={posterStyles}\r\n    />\r\n  )\r\n}\r\n\r\nconst posterTitleStyles = {\r\n  fontFamily: 'Raleway',\r\n  fontSize: 22,\r\n  lineHeight: 22,\r\n  height: 22,\r\n  x: 10,\r\n  y: 278,\r\n  contain: 'width',\r\n  width: 185,\r\n  maxLines: 2,\r\n  alpha: 0,\r\n  $focus: {\r\n    alpha: 1,\r\n    y: 288,\r\n  },\r\n  transition: {\r\n    y: heroTransition,\r\n    alpha: heroTransition,\r\n  },\r\n} as const\r\n\r\nexport function PosterTitle(props: NodeProps & { title: string }) {\r\n  return (\r\n    <View\r\n      {...props}\r\n      onFail={(node) => (node.src = 'failback.png')}\r\n      style={posterStyles}\r\n      forwardStates\r\n    >\r\n      <Text style={posterTitleStyles}>{props.title}</Text>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst heroStyles = {\r\n  width: 1280,\r\n  height: 720,\r\n  scale: 1,\r\n  zIndex: 2,\r\n  colorTop: '#fff',\r\n  colorBottom: '#000',\r\n  transition: {\r\n    scale: heroTransition,\r\n  },\r\n  $focus: { scale: 1.05 },\r\n}\r\n\r\nconst heroTextStyles = {\r\n  fontFamily: 'Raleway',\r\n  contain: 'width',\r\n} as const\r\n\r\nexport function Hero(\r\n  props: NodeProps & {\r\n    src: string\r\n    backdrop: string\r\n    title: string\r\n    overview: string\r\n  }\r\n) {\r\n  const [hasFocus, setHasFocus] = createSignal(false)\r\n  return (\r\n    <View\r\n      {...props}\r\n      src={props.backdrop}\r\n      style={heroStyles}\r\n      onFocusChanged={setHasFocus}\r\n      forwardStates\r\n    >\r\n      <View transition={{ alpha: heroTransition }} alpha={hasFocus() ? 1 : 0}>\r\n        <View width={185} height={278} x={54} y={220} src={props.src} />\r\n        <Text\r\n          y={520}\r\n          x={54}\r\n          fontSize={64}\r\n          width={1000}\r\n          maxLines={1}\r\n          style={heroTextStyles}\r\n        >\r\n          {props.title}\r\n        </Text>\r\n        <Text\r\n          y={620}\r\n          x={60}\r\n          fontSize={21}\r\n          width={1000}\r\n          maxLines={2}\r\n          lineHeight={36}\r\n          color={'#ccc'}\r\n          style={heroTextStyles}\r\n        >\r\n          {props.overview}\r\n        </Text>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst typeToComponent = {\r\n  Poster: Poster,\r\n  Hero: Hero,\r\n  PosterTitle: PosterTitle,\r\n}\r\n\r\nconst BlockStyle = {\r\n  alpha: 0.85,\r\n  border: { width: 0, color: '#000000' },\r\n  $focus: {\r\n    border: { width: 4, color: '#FFF' },\r\n    alpha: 1,\r\n  },\r\n}\r\nexport function Block(props) {\r\n  return (\r\n    <View\r\n      {...props}\r\n      width={100}\r\n      height={100}\r\n      style={BlockStyle}\r\n      color={props.color || '#e0e0e0'}\r\n    />\r\n  )\r\n}\r\n","import { createSignal, createComputed, batch, createResource } from 'solid-js'\r\n\r\nexport function createInfiniteScroll(fetcher: (page: number) => Promise<any>) {\r\n  const [pages, setPages] = createSignal<any[]>([])\r\n  const [page, setPage] = createSignal(1)\r\n  const [end, setEnd] = createSignal(false)\r\n\r\n  const [contents] = createResource(page, fetcher)\r\n\r\n  createComputed(() => {\r\n    const content = contents()\r\n    if (!content) return\r\n    batch(() => {\r\n      if (content.length === 0) setEnd(true)\r\n      setPages((p) => [...p, ...content])\r\n    })\r\n  })\r\n\r\n  return {\r\n    pages,\r\n    page,\r\n    setPage,\r\n    setPages,\r\n    end,\r\n    setEnd,\r\n  }\r\n}\r\n","import { View, Text } from '@lightningtv/solid'\r\nimport { For, Show } from 'solid-js'\r\nimport theme from 'theme'\r\n\r\nconst blockWidth = 900\r\n\r\nconst ContentBlockStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  flexBoundary: 'fixed',\r\n  width: blockWidth,\r\n  height: 220,\r\n  gap: 16,\r\n}\r\n\r\nconst HeadlineStyles = {\r\n  ...theme.typography.display2,\r\n  fontFamily: 'Roboto',\r\n  fontWeight: 700,\r\n  maxLines: 1,\r\n  width: blockWidth,\r\n  contain: 'width',\r\n}\r\nconst Headline = (props) => <Text {...props} style={HeadlineStyles}></Text>\r\n\r\nconst DescriptionStyles = {\r\n  ...theme.typography.body1,\r\n  fontFamily: 'Roboto',\r\n  fontWeight: 400,\r\n  lineHeight: 32,\r\n  width: blockWidth,\r\n  maxLines: 3,\r\n  contain: 'width',\r\n}\r\n\r\nconst BadgeStyle = {\r\n  fontSize: 16,\r\n  lineHeight: 20,\r\n  marginLeft: 13,\r\n  marginRight: 13,\r\n}\r\n\r\nconst Description = (props) => (\r\n  <Text {...props} style={DescriptionStyles}>\r\n    {props.children}\r\n  </Text>\r\n)\r\n\r\nexport const Badge = (props) => {\r\n  return (\r\n    <View\r\n      {...props}\r\n      style={{\r\n        color: '0x00000099',\r\n        borderRadius: 8,\r\n        border: { width: 2, color: '0xffffffff' },\r\n        display: 'flex',\r\n        height: 36,\r\n      }}\r\n    >\r\n      <Text lineHeight={36} style={BadgeStyle}>\r\n        {props.children}\r\n      </Text>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst MetaTextStyle = {\r\n  ...theme.typography.body2,\r\n  fontFamily: 'Roboto',\r\n  fontWeight: 400,\r\n}\r\n\r\nconst Metadata = (props) => (\r\n  <View\r\n    style={{\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      gap: 18,\r\n      width: blockWidth,\r\n      height: 48,\r\n    }}\r\n  >\r\n    <View y={-4} src='./assets/stars.png' width={188} height={31}></View>\r\n    <View\r\n      y={-4}\r\n      flexItem={false}\r\n      clipping\r\n      width={(188 * props.voteAverage) / 10}\r\n      height={31}\r\n    >\r\n      <View src='./assets/stars-full.png' width={188} height={31}></View>\r\n    </View>\r\n    <Text style={MetaTextStyle}>{props.voteCount} reviews</Text>\r\n    <Text style={MetaTextStyle}>{props.metaText}</Text>\r\n    <For each={props.badges}>{(item) => <Badge y={-5}>{item}</Badge>}</For>\r\n  </View>\r\n)\r\n\r\nconst ContentBlock = (props) => (\r\n  <View id='contentBlock' style={ContentBlockStyle} {...props}>\r\n    <Headline>{props.content.title}</Headline>\r\n    <Description>{props.content.description}</Description>\r\n    <Show when={props.content.voteCount}>\r\n      <Metadata\r\n        metaText={props.content.metaText}\r\n        badges={props.content.badges}\r\n        voteCount={props.content.voteCount}\r\n        voteAverage={props.content.voteAverage}\r\n      />\r\n    </Show>\r\n  </View>\r\n)\r\n\r\nexport default ContentBlock\r\n","import {\r\n  createEffect,\r\n  createMemo,\r\n  on,\r\n  createSignal,\r\n  Show,\r\n  For,\r\n} from 'solid-js'\r\nimport {\r\n  ElementNode,\r\n  View,\r\n  activeElement,\r\n  assertTruthy,\r\n} from '@lightningtv/solid'\r\nimport { Column } from '@lightningtv/solid/primitives'\r\nimport { useNavigate, usePreloadRoute } from '@solidjs/router'\r\nimport { TileRow } from '../components'\r\nimport styles from '../styles'\r\nimport { setGlobalBackground } from '../state'\r\nimport { createInfiniteScroll } from '../utils/pagination'\r\nimport ContentBlock from '../components/content-block'\r\nimport { debounce } from '@solid-primitives/scheduled'\r\n\r\nconst Browse = (props) => {\r\n  const [columnY, setcolumnY] = createSignal(0)\r\n  const preload = usePreloadRoute()\r\n  const [heroContent, setHeroContent] = createSignal({})\r\n  const navigate = useNavigate()\r\n  let firstRun = true\r\n\r\n  const provider = createMemo(() => {\r\n    return createInfiniteScroll(props.data())\r\n  })\r\n\r\n  const delayedBackgrounds = debounce(\r\n    (img: string) => setGlobalBackground(img),\r\n    800\r\n  )\r\n  const delayedHero = debounce(\r\n    (content: {}) => setHeroContent(content || {}),\r\n    600\r\n  )\r\n\r\n  createEffect(\r\n    on(\r\n      activeElement,\r\n      (elm) => {\r\n        if (!elm) return\r\n\r\n        if (firstRun) {\r\n          if (elm.backdrop) {\r\n            setGlobalBackground(elm.backdrop)\r\n          }\r\n\r\n          if (elm.heroContent) {\r\n            setHeroContent(elm.heroContent)\r\n          }\r\n\r\n          preload(`/browse/tv`, { preloadData: true })\r\n          preload(`/browse/movie`, { preloadData: true })\r\n\r\n          firstRun = false\r\n          return\r\n        }\r\n\r\n        if (elm.href) {\r\n          preload(elm.href, { preloadData: true })\r\n        }\r\n\r\n        if (elm.backdrop) {\r\n          delayedBackgrounds(elm.backdrop)\r\n        }\r\n\r\n        if (elm.heroContent) {\r\n          delayedHero(elm.heroContent)\r\n        }\r\n      },\r\n      { defer: true }\r\n    )\r\n  )\r\n\r\n  function onRowFocus(this: ElementNode) {\r\n    (this.children[this.selected || 0] as ElementNode).setFocus()\r\n    setcolumnY((this.y || 0) * -1 + 24)\r\n    let numPages = provider().pages().length\r\n    this.parent!.selected = this.parent!.children.indexOf(this)\r\n\r\n    if (\r\n      numPages === 0 ||\r\n      (this.parent!.selected && this.parent!.selected >= numPages - 2)\r\n    ) {\r\n      provider().setPage((p) => p + 1)\r\n    }\r\n  }\r\n\r\n  function onEnter(this: ElementNode) {\r\n    this.display = 'flex'\r\n    let entity = this.children.find((c) =>\r\n      c.states!.has('focus')\r\n    ) as ElementNode\r\n    assertTruthy(entity && entity.href)\r\n    navigate(entity.href)\r\n    return true\r\n  }\r\n\r\n  return (\r\n    <Show when={provider().pages().length}>\r\n      <ContentBlock y={360} x={162} content={heroContent()} />\r\n      <View\r\n        width={300}\r\n        height={150}\r\n        x={162}\r\n        y={80}\r\n        zIndex={105}\r\n      >\r\n        <View y={-60} src='./assets/logo.png' width={280} height={280} />\r\n      </View>\r\n      <View clipping style={styles.itemsContainer}>\r\n        <Column\r\n          id='BrowseColumn'\r\n          plinko\r\n          announce='All Trending - Week'\r\n          y={columnY()}\r\n          scroll='none'\r\n          autofocus\r\n          style={styles.Column}\r\n        >\r\n          <For each={provider().pages()}>\r\n            {(items) => (\r\n              <TileRow\r\n                items={items}\r\n                width={1620}\r\n                onFocus={onRowFocus}\r\n                onEnter={onEnter}\r\n              />\r\n            )}\r\n          </For>\r\n        </Column>\r\n      </View>\r\n    </Show>\r\n  )\r\n}\r\n\r\nexport default Browse\r\n","import { createEffect, on, createSignal } from 'solid-js'\r\nimport { ElementNode, activeElement, View } from '@lightningtv/solid'\r\nimport { LazyUp } from '@lightningtv/solid/primitives'\r\nimport { Column, Row } from '@lightningtv/solid/primitives'\r\nimport { Hero, TitleRow } from '../components'\r\nimport styles from '../styles'\r\nimport { setGlobalBackground } from '../state'\r\nimport ContentBlock from '../components/content-block'\r\nimport { debounce } from '@solid-primitives/scheduled'\r\n\r\nconst TMDB = (props) => {\r\n  const [heroContent, setHeroContent] = createSignal({})\r\n  let contentBlock,\r\n    appLogo,\r\n    firstRun = true\r\n\r\n  const delayedBackgrounds = debounce(setGlobalBackground, 800)\r\n  const delayedHero = debounce(\r\n    (content: {}) => setHeroContent(content || {}),\r\n    600\r\n  )\r\n\r\n  createEffect(\r\n    on(\r\n      activeElement,\r\n      (elm) => {\r\n        if (!elm) return\r\n\r\n        if (firstRun) {\r\n          elm.backdrop && setGlobalBackground(elm.backdrop)\r\n          elm.heroContent && setHeroContent(elm.heroContent)\r\n          firstRun = false\r\n        } else {\r\n          elm.backdrop && delayedBackgrounds(elm.backdrop)\r\n          elm.heroContent && delayedHero(elm.heroContent)\r\n        }\r\n      },\r\n      { defer: true }\r\n    )\r\n  )\r\n\r\n  function onSelectedChanged(this: ElementNode, selectedIndex, column, row) {\r\n    const values =\r\n      selectedIndex === 0 ? { y: 300, alpha: 1 } : { y: 200, alpha: 0 }\r\n    contentBlock\r\n      .animate(values, { duration: 300, easing: 'ease-in-out' })\r\n      .start()\r\n\r\n    const values2 =\r\n      selectedIndex === 0 ? { y: 80, alpha: 1 } : { y: 0, alpha: 0 }\r\n      appLogo\r\n      .animate(values2, { duration: 300, easing: 'ease-in-out' })\r\n      .start()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <View\r\n        ref={appLogo}\r\n        width={300}\r\n        height={150}\r\n        x={162}\r\n        y={80}\r\n        zIndex={105}\r\n      >\r\n        <View y={-60} src='./assets/logo.png' width={280} height={280} />\r\n      </View>\r\n\r\n      <ContentBlock\r\n        ref={contentBlock}\r\n        y={300}\r\n        x={162}\r\n        content={heroContent()}\r\n      />\r\n      <LazyUp\r\n        y={500}\r\n        component={Column}\r\n        direction='column'\r\n        upCount={3}\r\n        each={props.data.rows}\r\n        id='BrowseColumn'\r\n        onSelectedChanged={onSelectedChanged}\r\n        autofocus={props.data.rows[0].items()}\r\n        gap={40}\r\n        transition={{ y: { duration: 300, easing: 'ease-in-out' } }}\r\n        style={styles.Column}\r\n      >\r\n        {(row) =>\r\n          row().type === 'Hero' ? (\r\n            <LazyUp\r\n              component={Row}\r\n              direction='row'\r\n              gap={80}\r\n              upCount={3}\r\n              scroll='center'\r\n              centerScroll\r\n              each={row().items()}\r\n              y={50}\r\n              height={row().height}\r\n            >\r\n              {(item) => <Hero {...item()} />}\r\n            </LazyUp>\r\n          ) : (\r\n            <TitleRow\r\n              row={row()}\r\n              title={row().title}\r\n              height={row().height}\r\n              items={row().items()}\r\n            />\r\n          )\r\n        }\r\n      </LazyUp>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TMDB\r\n","import { createEffect, on, createSignal, Show, onMount } from 'solid-js'\r\nimport { View } from '@lightningtv/solid'\r\nimport { Hero } from '../components'\r\nimport { setGlobalBackground } from '../state'\r\n\r\ntype hero = {\r\n  backdrop: string\r\n  src: string\r\n  title: string\r\n  overview: string\r\n}\r\n\r\nconst Destroy = (props) => {\r\n  const [heroContent, setHeroContent] = createSignal<hero>()\r\n  const [heroIndex, setHeroIndex] = createSignal(0)\r\n\r\n  onMount(() => setGlobalBackground('#333'))\r\n\r\n  createEffect(\r\n    on([props.data.heroRow.items, heroIndex], ([heros, index]) => {\r\n      if (heros) setHeroContent(heros[index])\r\n      if (heros && index < heros.length - 1) {\r\n        const img = new Image()\r\n        img.crossOrigin = 'anonymous'\r\n        img.src = heros[index + 1].backdrop\r\n      }\r\n    })\r\n  )\r\n\r\n  function onDown() {\r\n    if (heroIndex() >= 19) return false\r\n    setHeroIndex((p) => p + 1)\r\n  }\r\n\r\n  function onUp() {\r\n    if (heroIndex() === 0) return false\r\n    setHeroIndex((p) => p - 1)\r\n    return true\r\n  }\r\n\r\n  function animateOut(node) {\r\n    return node\r\n      .animate({ y: 200, alpha: 0 }, { duration: 500, easing: 'ease-in-out' })\r\n      .start()\r\n      .waitUntilStopped()\r\n  }\r\n\r\n  function animateIn(node) {\r\n    node.alpha = 0\r\n    node.y = -100\r\n    return node\r\n      .animate({ y: 0, alpha: 1 }, { duration: 500, easing: 'ease-in-out' })\r\n      .start()\r\n      .waitUntilStopped()\r\n  }\r\n\r\n  return (\r\n    <View x={300} y={200} onDown={onDown} onUp={onUp}>\r\n      <View\r\n        src={'assets/up.svg'}\r\n        width={350}\r\n        height={200}\r\n        x={450}\r\n        y={-200}\r\n        rotation={Math.PI}\r\n      />\r\n      <Show when={heroContent()} keyed>\r\n        <Hero\r\n          id='Hero'\r\n          autofocus\r\n          onDestroy={animateOut}\r\n          onCreate={animateIn}\r\n          src={heroContent()!.src}\r\n          backdrop={heroContent()!.backdrop}\r\n          title={heroContent()!.title}\r\n          overview={heroContent()!.overview}\r\n        />\r\n      </Show>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default Destroy\r\n","export const API_BASE = import.meta.env.VITE_API_BASE\r\nexport const API_KEY_V4 = import.meta.env.VITE_API_KEY\r\n","import { API_BASE, API_KEY_V4 } from \"./constants\"\r\n\r\nlet tmdbConfig: any\r\nlet baseImageUrl: string\r\n\r\nconst basePosterSize = 'w185'\r\n\r\nconst defaultFetchParams: RequestInit = {\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    Authorization: `Bearer ${API_KEY_V4}`,\r\n  },\r\n}\r\n\r\n/**\r\n * Returns the URL for an image.\r\n * @param path The path to the image.\r\n * @param posterSize The size of the poster (default: 'w185').\r\n * @returns The URL for the image.\r\n */\r\nexport function getImageUrl(path: string, posterSize: string = basePosterSize): string {\r\n  return `${baseImageUrl}${posterSize}${path}`\r\n}\r\n\r\n/**\r\n * Makes a GET request to the API.\r\n * @param path The path to the API endpoint.\r\n * @param params Optional request parameters.\r\n * @returns The response data.\r\n */\r\nfunction get(path: string, params: RequestInit = {}): Promise<any> {\r\n  if (tmdbConfig) {\r\n    return _get(path, params)\r\n  } else {\r\n    return loadConfig().then(() => _get(path, params))\r\n  }\r\n}\r\n\r\n/**\r\n * Makes a GET request to the API (internal).\r\n * @param path The path to the API endpoint.\r\n * @param params Optional request parameters.\r\n * @returns The response data.\r\n */\r\nfunction _get(path: string, params: RequestInit = {}): Promise<any> {\r\n  return fetch(`${API_BASE}${path}`, { ...defaultFetchParams, ...params }).then((r) => r.json())\r\n}\r\n\r\n/**\r\n * Loads the TMDB configuration.\r\n * @returns The configuration data.\r\n */\r\nasync function loadConfig(): Promise<any> {\r\n  return _get('/configuration').then((data) => {\r\n    tmdbConfig = data\r\n    baseImageUrl = data.images?.secure_base_url\r\n    return data\r\n  })\r\n}\r\n\r\n// Export the API\r\nexport default {\r\n  get,\r\n  loadConfig,\r\n}\r\n","export function truncateString(str: string, maxLength: number): string {\r\n  if (str.length > maxLength) {\r\n    return str.substring(0, maxLength - 3) + '...'\r\n  }\r\n  return str\r\n}\r\n","import { truncateString } from '../../utils/string/truncate-string'\r\nimport { getImageUrl } from '../index'\r\n\r\nexport interface Tile {\r\n  src: string\r\n  tileSrc: string\r\n  backdrop: string\r\n  href: string\r\n  shortTitle: string\r\n  title: string\r\n  overview: string\r\n  item: unknown\r\n  entityInfo: {\r\n    type: string\r\n    id: string\r\n  }\r\n  heroContent: {\r\n    title: string\r\n    description: string\r\n  }\r\n}\r\n\r\nexport function convertItemsToTiles(items: any[] = [], type?: string): Tile[] {\r\n  return items.map((item) => ({\r\n    src: getImageUrl(item.poster_path || item.profile_path),\r\n    tileSrc: getImageUrl(item.backdrop_path || item.profile_path, 'w300'),\r\n    backdrop: getImageUrl(item.backdrop_path, 'w1280'),\r\n    href: `/entity/${item.media_type || type || 'people'}/${item.id}`,\r\n    shortTitle: truncateString(item.title || item.name, 30),\r\n    title: item.title || item.name,\r\n    overview: item.overview,\r\n    item,\r\n    entityInfo: {\r\n      type: item.media_type || type || 'people',\r\n      id: item.id,\r\n    },\r\n    heroContent: {\r\n      title: item.title || item.name,\r\n      description: item.overview,\r\n    },\r\n  }))\r\n}\r\n","import api from '.'\r\nimport { convertItemsToTiles } from './formatters/item-formatter'\r\nimport { createResource } from 'solid-js'\r\n\r\nconst handleResults = async (response: Promise<any>, type: string) => {\r\n  const { results } = await response\r\n  const data = results.filter((r: any) => !r.adult)\r\n  return convertItemsToTiles(data, type)\r\n}\r\n\r\nconst fetchPopular = async (type: string) => {\r\n  const data = await api.get(`/${type}/popular`)\r\n  return handleResults(data, type)\r\n}\r\n\r\nconst genreListCache = api.get('/genre/movie/list')\r\nconst fetchGenreMovies = async (genres: string | string[]) => {\r\n  const targetGenre = Array.isArray(genres) ? genres : [genres]\r\n  const genreList = await genreListCache\r\n  const targetGenreIds = genreList.genres\r\n    .filter((item: any) => targetGenre.includes(item.name))\r\n    .map((item: any) => item.id)\r\n  return handleResults(api.get(`/discover/movie?with_genres=${targetGenreIds.join()}`), 'movie')\r\n}\r\n\r\ntype RowItem = {\r\n  title: string\r\n  items: any\r\n  type: 'Poster' | 'Hero' | 'PosterTitle'\r\n  height: number\r\n}\r\n\r\nexport function tmdbData() {\r\n  const rows: RowItem[] = []\r\n\r\n  const popularMovies = {\r\n    title: 'Popular Movies',\r\n    items: createResource(() => fetchPopular('movie'))[0],\r\n    type: 'Poster',\r\n    height: 328,\r\n  } as RowItem\r\n\r\n  const westernMovies = {\r\n    title: 'Best Western movies',\r\n    items: createResource(() => fetchGenreMovies('Western'))[0],\r\n    type: 'Hero',\r\n    height: 720,\r\n  } as RowItem\r\n\r\n  const comedyMovies = {\r\n    title: 'Best Comedy movies',\r\n    items: createResource(() => fetchGenreMovies('Comedy'))[0],\r\n    type: 'PosterTitle',\r\n    height: 400,\r\n  } as RowItem\r\n\r\n  const popularTVShows = {\r\n    title: 'Popular TV shows',\r\n    items: createResource(() => fetchPopular('tv'))[0],\r\n    type: 'PosterTitle',\r\n    height: 400,\r\n  } as RowItem\r\n\r\n  const heroRow = {\r\n    title: 'Best Adventure and Action movies',\r\n    items: createResource(() => fetchGenreMovies(['adventure', 'action']))[0],\r\n    type: 'Hero',\r\n    height: 720,\r\n  } as const\r\n\r\n  const documentaries = {\r\n    title: 'Best Documentaries',\r\n    items: createResource(() => fetchGenreMovies('Documentary'))[0],\r\n    type: 'PosterTitle',\r\n    height: 400,\r\n  } as RowItem\r\n\r\n  const westernMovies2 = {\r\n    title: 'Best Western movies 2',\r\n    items: createResource(() => fetchGenreMovies('Western'))[0],\r\n    type: 'PosterTitle',\r\n    height: 400,\r\n  } as RowItem\r\n\r\n  rows.push(popularMovies, westernMovies, comedyMovies, popularTVShows, heroRow, documentaries, westernMovies2)\r\n\r\n  return { rows }\r\n}\r\n\r\nexport function destroyData() {\r\n  const heroRow = {\r\n    title: 'Best Adventure and Action movies',\r\n    items: createResource(() => fetchGenreMovies(['adventure', 'action']))[0],\r\n    type: 'Hero',\r\n    height: 800,\r\n  } as const\r\n\r\n  return {\r\n    heroRow,\r\n  }\r\n}\r\n","const NotFound = () => {\r\n  return <node style={{ width: 1920, height: 1080, color: 0x33c40000 }}></node>\r\n}\r\n\r\nexport default NotFound\r\n","import { WebTrFontFaceOptions } from '@lightningtv/solid'\r\n\r\nconst basePath = import.meta.env.BASE_URL\r\n\r\nexport default [ \r\n{ type: 'msdf',\r\n  fontFamily: 'Roboto',\r\n  descriptors: {\r\n    weight: 700,\r\n  },\r\n  atlasDataUrl: basePath + 'fonts/Roboto-Bold.msdf.json',\r\n  atlasUrl: basePath + 'fonts/Roboto-Bold.msdf.png',\r\n} as const,\r\n{ type:    'msdf',\r\n  fontFamily: 'Roboto',\r\n  descriptors: {\r\n    weight: 400,\r\n  },\r\n  atlasDataUrl: basePath + 'fonts/Roboto-Regular.msdf.json',\r\n  atlasUrl: basePath + 'fonts/Roboto-Regular.msdf.png',\r\n} as const,\r\n{ type:    'msdf',\r\n  fontFamily: 'Arial',\r\n  descriptors: {\r\n    weight: 500,\r\n  },\r\n  atlasDataUrl: basePath + 'fonts/Roboto-Regular.msdf.json',\r\n  atlasUrl: basePath + 'fonts/Roboto-Regular.msdf.png',\r\n} as const,\r\n{ type:    'msdf',\r\n  fontFamily: 'Raleway',\r\n  descriptors: {\r\n    weight: 800,\r\n  },\r\n  atlasDataUrl: basePath + 'fonts/Raleway-ExtraBold.msdf.json',\r\n  atlasUrl: basePath + 'fonts/Raleway-ExtraBold.msdf.png',\r\n} as const,\r\n{ fontFamily: 'Roboto',\r\n  fontUrl: basePath + 'fonts/Roboto-Regular.ttf',\r\n} as WebTrFontFaceOptions\r\n]\r\n","export function chunkArray(array: string[], size = 7) {\r\n  let result: string[][] = []\r\n  for (let i = 0, j = array.length; i < j; i += size) {\r\n    result.push(array.slice(i, i + size))\r\n  }\r\n  return result\r\n}\r\n","import api from '..'\r\nimport { chunkArray } from '../../utils/array/chunk-array'\r\nimport { convertItemsToTiles } from '../formatters/item-formatter'\r\n\r\nlet cache = new Map()\r\nconst leftoverTiles = new Map()\r\n\r\nexport default function (filter: string) {\r\n  return (pageIndex: number): Promise<any> => {\r\n    const url = `/trending/${filter}/week?page=${pageIndex}`\r\n    if (cache.has(url)) {\r\n      return cache.get(url)\r\n    }\r\n\r\n    let result = api.get(url).then((trending) => {\r\n      let results = trending.results.filter((r) => !r.adult)\r\n      let tiles = (\r\n        leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []\r\n      ).concat(convertItemsToTiles(results))\r\n      let chunks = chunkArray(tiles)\r\n      if (chunks[chunks.length - 1].length < 7) {\r\n        leftoverTiles.set(filter, chunks.pop())\r\n      } else {\r\n        leftoverTiles.delete(filter)\r\n      }\r\n      return chunks\r\n    })\r\n\r\n    cache.set(url, result)\r\n    return result\r\n  }\r\n}\r\n","import { createMemo } from 'solid-js'\r\nimport browseProvider from './providers/browse'\r\n\r\nexport function browsePreload({params}) {\r\n    return createMemo(() => {\r\n        const provider = browseProvider(params.filter || 'all')\r\n        provider(1)\r\n        return provider\r\n    })\r\n}\r\n  ","import api, { getImageUrl } from '..'\r\nimport { convertItemsToTiles } from '../formatters/item-formatter'\r\n\r\n/**\r\n * Converts minutes to hours and minutes.\r\n * @param minutes The number of minutes.\r\n * @returns The time in hours and minutes.\r\n */\r\nexport function minutesToHMM(minutes: number): string {\r\n  const hours = Math.floor(minutes / 60)\r\n  const remainingMinutes = minutes % 60\r\n  return `${hours}h ${remainingMinutes < 10 ? '0' : ''}${remainingMinutes}min`\r\n}\r\n\r\n/**\r\n * Formats a date string in the format \"YYYY-MM-DD\" to \"MM/DD/YYYY\".\r\n * @param dateString The date string.\r\n * @returns The formatted date string.\r\n */\r\nfunction formatDate(dateString: string): string {\r\n  const parts = dateString.split('-')\r\n  return `${parts[1]}/${parts[2]}/${parts[0]}`\r\n}\r\n\r\n/**\r\n * Extracts the year from a date string in the format \"YYYY-MM-DD\".\r\n * @param dateString The date string.\r\n * @returns The year.\r\n */\r\nfunction justYear(dateString: string): string {\r\n  const parts = dateString.split('-')\r\n  return parts[0]\r\n}\r\n\r\n/**\r\n * Ensures that an array of items has at least a certain number of items.\r\n * @param items The array of items.\r\n * @param minCount The minimum number of items.\r\n * @returns The array of items, possibly with additional empty items added.\r\n */\r\nexport function ensureItems<T>(items: T[], minCount: number): T[] {\r\n  const remainingCount = minCount - items.length\r\n  if (remainingCount > 0) {\r\n    return [...items, ...Array(remainingCount).fill({})]\r\n  }\r\n  return items\r\n}\r\n\r\n/**\r\n * Gets recommendations for a movie or TV show.\r\n * @param params The parameters for the request.\r\n * @returns The recommendations as an array of tiles.\r\n */\r\nexport function getRecommendations(params: { type: string; id: string }) {\r\n  return api.get(`/${params.type}/${params.id}/recommendations`).then(({ results }) => {\r\n    if (results.length) {\r\n      return ensureItems(convertItemsToTiles(results.slice(0, 7)), 7)\r\n    }\r\n    return api\r\n      .get(`/trending/${params.type}/week?page=1`)\r\n      .then(({ results }) => ensureItems(convertItemsToTiles(results.slice(0, 7)), 7))\r\n  })\r\n}\r\n\r\n/**\r\n * Gets credits for a movie or TV show.\r\n * @param params The parameters for the request.\r\n * @returns The credits as an array of tiles.\r\n */\r\nexport function getCredits(params: { type: string; id: string }) {\r\n  return api\r\n    .get(`/${params.type}/${params.id}/credits`)\r\n    .then(({ cast }) => ensureItems(convertItemsToTiles(cast.slice(0, 7)), 7))\r\n}\r\n\r\n/**\r\n * Gets information for a movie or TV show.\r\n * @param params The parameters for the request.\r\n * @returns The information as an object.\r\n */\r\nexport function getInfo(params: { type: string; id: string }) {\r\n  let rt =\r\n    params.type === 'movie'\r\n      ? {\r\n          rtCrit: 86,\r\n          rtFan: 92,\r\n        }\r\n      : {}\r\n\r\n  return api.get(`/${params.type}/${params.id}`).then((data) => ({\r\n    backgroundImage: getImageUrl(data.backdrop_path, 'w1280'),\r\n    heroContent: {\r\n      title: data.title || data.name,\r\n      description: data.overview,\r\n      badges: ['HD', 'CC'],\r\n      voteAverage: data.vote_average,\r\n      voteCount: data.vote_count,\r\n      metaText:\r\n        params.type === 'movie'\r\n          ? `${minutesToHMM(data.runtime)}   ${formatDate(data.release_date)}`\r\n          : `${justYear(data.first_air_date)} - ${justYear(data.last_air_date)}`,\r\n      reviews: rt,\r\n    },\r\n    ...data,\r\n  }))\r\n}\r\n","import { createResource } from 'solid-js'\r\nimport * as provider from './providers/entity'\r\nimport type { Tile } from './formatters/item-formatter'\r\n\r\n/**\r\n * Preloads entity data.\r\n * @param params The entity parameters.\r\n * @param intent The intent of the preload (e.g. 'preload').\r\n * @returns The preloaded entity data.\r\n */\r\nexport function entityPreload({ params, intent }: { params: any; intent: string }) {\r\n  const [entity] = createResource(() => ({ ...params }), provider.getInfo)\r\n\r\n  if (intent === 'preload') return\r\n\r\n  const [credits] = createResource<any, Tile[]>(\r\n    () => ({ ...params }),\r\n    provider.getCredits\r\n  )\r\n  const [recommendations] = createResource<any, Tile[]>(\r\n    () => ({ ...params }),\r\n    provider.getRecommendations\r\n  )\r\n\r\n  return { entity, credits, recommendations }\r\n}\r\n","import { createRenderer, Config, loadFonts } from '@lightningtv/solid'\r\nimport {\r\n  WebGlCoreRenderer,\r\n  SdfTextRenderer,\r\n} from '@lightningjs/renderer/webgl'\r\nimport {\r\n  CanvasCoreRenderer,\r\n  CanvasTextRenderer,\r\n} from '@lightningjs/renderer/canvas'\r\n\r\nimport { Inspector } from '@lightningjs/renderer/inspector'\r\nimport { HashRouter } from './utils/router'\r\nimport { Route } from '@solidjs/router'\r\nimport { lazy } from 'solid-js'\r\nimport App from './pages/app'\r\nimport Browse from './pages/browse'\r\nimport TMDB from './pages/tmdb'\r\nimport DestroyPage from './pages/destroy'\r\nimport { tmdbData, destroyData } from './api/tmdb-data'\r\nimport NotFound from './pages/not-found'\r\nimport fonts from './fonts'\r\nimport { browsePreload } from './api/browse-preload'\r\nimport { entityPreload } from './api/entity-preload'\r\n\r\nconst Entity = lazy(() => import('./pages/entity'))\r\n\r\nconst urlParams = new URLSearchParams(window.location.search)\r\nlet numImageWorkers = 3\r\nconst numWorkers = urlParams.get('numImageWorkers')\r\nconst screenSize = urlParams.get('size') ?? 'default'\r\nconst rendererMode = urlParams.get('mode') ?? 'webgl'\r\n\r\nif (numWorkers) {\r\n  numImageWorkers = parseInt(numWorkers)\r\n}\r\n\r\nconst deviceLogicalPixelRatio = {\r\n  '720': 0.666667,\r\n  '1080': 1,\r\n  '4k': 2,\r\n  default: window.innerHeight / 1080,\r\n}[screenSize]\r\n\r\nconst logFps = true\r\nConfig.debug = false\r\nConfig.animationsEnabled = true\r\nConfig.fontSettings.fontFamily = 'Roboto'\r\nConfig.fontSettings.color = '#f6f6f6'\r\nConfig.fontSettings.fontSize = 32\r\nConfig.enableShaderCaching = false\r\n\r\nConfig.rendererOptions = {\r\n  fpsUpdateInterval: logFps ? 1000 : 0,\r\n  inspector: Inspector,\r\n  numImageWorkers,\r\n  deviceLogicalPixelRatio,\r\n  devicePhysicalPixelRatio: 1,\r\n}\r\n\r\nif (rendererMode === 'canvas') {\r\n  Config.rendererOptions.fontEngines = [CanvasTextRenderer]\r\n  Config.rendererOptions.renderEngine = CanvasCoreRenderer\r\n} else {\r\n  Config.rendererOptions.fontEngines = [SdfTextRenderer]\r\n  Config.rendererOptions.renderEngine = WebGlCoreRenderer\r\n}\r\n\r\nconst { render } = createRenderer()\r\nloadFonts(fonts)\r\nrender(() => (\r\n  <HashRouter root={(props) => <App {...props} />}>\r\n    <Route path='' component={TMDB} preload={tmdbData} />\r\n    <Route path='browse/:filter' component={Browse} preload={browsePreload} />\r\n    <Route path='destroy' component={DestroyPage} preload={destroyData} />\r\n    <Route path='entity/:type/:id' component={Entity} preload={entityPreload} />\r\n    <Route path='*all' component={NotFound} />\r\n  </HashRouter>\r\n))\r\n"],"file":"assets/index-C_Rl360L.js"}